window.__require=function e(t,a,n){function o(s,r){if(!a[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var h="function"==typeof __require&&__require;if(!r&&h)return h(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=a[s]={exports:{}};t[s][0].call(u.exports,function(e){return o(t[s][1][e]||e)},u,u.exports,e,t,a,n)}return a[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({AI_hbdd:[function(e,t,a){"use strict";cc._RF.push(t,"ae9b0MetQFGuL3rFNq2K/EC","AI_hbdd");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.AI_hbdd=void 0;var s=e("./GameBoard_hbdd"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this)},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}},t.prototype.AIPosition=function(e,t){e/=this.board.block,t/=this.board.block,this.newX=e,this.newY=t,this.figureScore(e,t,1),this.scoreToPositive(),this.figureScore(e,t,-1);var a=this.figureOut();return e=a.x,t=a.y,cc.v2(e*this.board.block,t*this.board.block)},t.prototype.figureScorePositive=function(e,t,a){return e[t]*a==-1&&e[t-1]*a<0&&(e[t]+=e[t-1]),0==e[t]&&e[t-1]*a<0?e[t-1]:0},t.prototype.figureScoreNagtive=function(e,t,a){return e[t]*a==-1&&e[t+1]*a<0&&(e[t]+=e[t+1]),0==e[t]&&e[t+1]*a<0?e[t+1]:0},t.prototype.figureScore=function(e,t,a){for(var n=this.board.judgeSize,o=[],i=1;i<n;i++)o[i]=this.board.maze[e][i];for(i=1;i<n;i++)this.mazeScore[e][i]+=this.figureScorePositive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[e][i];for(i=n-1;i>0;i--)this.mazeScore[e][i]+=this.figureScoreNagtive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[i][t];for(i=1;i<n;i++)this.mazeScore[i][t]+=this.figureScorePositive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[i][t];for(i=n-1;i>0;i--)this.mazeScore[i][t]+=this.figureScoreNagtive(o,i,a);var s=1,r=0,c=0,h=0,u=0;for(i=1;i<n;i++)for(var l=1;l<n;l++)e+t==i+l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r-(s-2),u=c+(s-2),i=1;i<s;i++)this.mazeScore[h+(i-1)][u-(i-1)]+=this.figureScorePositive(o,i,a);for(s=1,i=1;i<n;i++)for(l=1;l<n;l++)e+t==i+l&&(o[s++]=this.board.maze[i][l],r=i,c=l);h=r,u=c;var d=1;for(i=s-1;i>0;i--,d++)this.mazeScore[h-(d-1)][u+(d-1)]+=this.figureScoreNagtive(o,i,a);for(s=1,i=1;i<n;i++)for(l=1;l<n;l++)e-t==i-l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r-(s-2),u=c-(s-2),i=1;i<s;i++)this.mazeScore[h+(i-1)][u+(i-1)]+=this.figureScorePositive(o,i,a);for(s=1,d=1,i=1;i<n;i++)for(l=1;l<n;l++)e-t==i-l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r,u=c,i=s-1;i>0;i--,d++)this.mazeScore[h-(d-1)][u-(d-1)]+=this.figureScoreNagtive(o,i,a)},t.prototype.scoreToPositive=function(){for(var e=this.board.judgeSize,t=1;t<e;t++)for(var a=1;a<e;a++)this.mazeScore[t][a]<0&&(this.mazeScore[t][a]*=-1)},t.prototype.figureOut=function(){for(var e=this.board.judgeSize,t=0,a=0,n=0,o=(this.newX,this.newY,0);o<this.board.judgeSize;o++)for(var i=0;i<this.board.judgeSize;i++)0==this.board.maze[o][i]&&t<this.mazeScore[o][i]&&(a=o,n=i,t=this.mazeScore[o][i]);if(t>=4)return cc.v2(a,n);for(o=1;o<e;o++)for(i=1;i<e;i++)0==this.board.maze[o][i]&&t<this.mazeScore[o][i]&&(a=o,n=i,t=this.mazeScore[o][i]);return cc.v2(a,n)},i([h(s.GameBoard_hbdd)],t.prototype,"board",void 0),i([c],t)}(cc.Component);a.AI_hbdd=u,cc._RF.pop()},{"./GameBoard_hbdd":"GameBoard_hbdd"}],AI_lianzhao:[function(e,t,a){"use strict";cc._RF.push(t,"3693clfteFJ7pR4B4NSVmk7","AI_lianzhao");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.AI_lianzhao=void 0;var s=e("./GameBoard_lianzhao"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this)},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}},t.prototype.AIPosition=function(e,t){e/=this.board.block,t/=this.board.block,this.newX=e,this.newY=t,this.figureScore(e,t,1),this.scoreToPositive(),this.figureScore(e,t,-1);var a=this.figureOut();return e=a.x,t=a.y,cc.v2(e*this.board.block,t*this.board.block)},t.prototype.figureScorePositive=function(e,t,a){return e[t]*a==-1&&e[t-1]*a<0&&(e[t]+=e[t-1]),0==e[t]&&e[t-1]*a<0?e[t-1]:0},t.prototype.figureScoreNagtive=function(e,t,a){return e[t]*a==-1&&e[t+1]*a<0&&(e[t]+=e[t+1]),0==e[t]&&e[t+1]*a<0?e[t+1]:0},t.prototype.figureScore=function(e,t,a){for(var n=this.board.judgeSize,o=[],i=1;i<n;i++)o[i]=this.board.maze[e][i];for(i=1;i<n;i++)this.mazeScore[e][i]+=this.figureScorePositive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[e][i];for(i=n-1;i>0;i--)this.mazeScore[e][i]+=this.figureScoreNagtive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[i][t];for(i=1;i<n;i++)this.mazeScore[i][t]+=this.figureScorePositive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[i][t];for(i=n-1;i>0;i--)this.mazeScore[i][t]+=this.figureScoreNagtive(o,i,a);var s=1,r=0,c=0,h=0,u=0;for(i=1;i<n;i++)for(var l=1;l<n;l++)e+t==i+l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r-(s-2),u=c+(s-2),i=1;i<s;i++)this.mazeScore[h+(i-1)][u-(i-1)]+=this.figureScorePositive(o,i,a);for(s=1,i=1;i<n;i++)for(l=1;l<n;l++)e+t==i+l&&(o[s++]=this.board.maze[i][l],r=i,c=l);h=r,u=c;var d=1;for(i=s-1;i>0;i--,d++)this.mazeScore[h-(d-1)][u+(d-1)]+=this.figureScoreNagtive(o,i,a);for(s=1,i=1;i<n;i++)for(l=1;l<n;l++)e-t==i-l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r-(s-2),u=c-(s-2),i=1;i<s;i++)this.mazeScore[h+(i-1)][u+(i-1)]+=this.figureScorePositive(o,i,a);for(s=1,d=1,i=1;i<n;i++)for(l=1;l<n;l++)e-t==i-l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r,u=c,i=s-1;i>0;i--,d++)this.mazeScore[h-(d-1)][u-(d-1)]+=this.figureScoreNagtive(o,i,a)},t.prototype.scoreToPositive=function(){for(var e=this.board.judgeSize,t=1;t<e;t++)for(var a=1;a<e;a++)this.mazeScore[t][a]<0&&(this.mazeScore[t][a]*=-1)},t.prototype.figureOut=function(){for(var e=this.board.judgeSize,t=0,a=0,n=0,o=(this.newX,this.newY,0);o<this.board.judgeSize;o++)for(var i=0;i<this.board.judgeSize;i++)0==this.board.maze[o][i]&&t<this.mazeScore[o][i]&&(a=o,n=i,t=this.mazeScore[o][i]);if(t>=4)return cc.v2(a,n);for(o=1;o<e;o++)for(i=1;i<e;i++)0==this.board.maze[o][i]&&t<this.mazeScore[o][i]&&(a=o,n=i,t=this.mazeScore[o][i]);return cc.v2(a,n)},i([h(s.GameBoard_lianzhao)],t.prototype,"board",void 0),i([c],t)}(cc.Component);a.AI_lianzhao=u,cc._RF.pop()},{"./GameBoard_lianzhao":"GameBoard_lianzhao"}],AI_sanren:[function(e,t,a){"use strict";cc._RF.push(t,"2143fdJdbNLLLuYfmqwjr6K","AI_sanren");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.AI_sanren=void 0;var s=e("./GameBoard_sanren"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t}return o(t,e),t.prototype.onLoad=function(){this.init()},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}},t.prototype.AIPosition=function(e,t){e/=this.board.block,t/=this.board.block,this.newX=e,this.newY=t,this.figureScore(e,t,1),this.scoreToPositive(),this.figureScore(e,t,-1);var a=this.figureOut();return e=a.x,t=a.y,cc.v2(e*this.board.block,t*this.board.block)},t.prototype.figureScorePositive=function(e,t,a){return e[t]*a==-1&&e[t-1]*a<0&&(e[t]+=e[t-1]),0==e[t]&&e[t-1]*a<0?e[t-1]:0},t.prototype.figureScoreNagtive=function(e,t,a){return e[t]*a==-1&&e[t+1]*a<0&&(e[t]+=e[t+1]),0==e[t]&&e[t+1]*a<0?e[t+1]:0},t.prototype.figureScore=function(e,t,a){for(var n=this.board.judgeSize,o=[],i=1;i<n;i++)o[i]=this.board.maze[e][i];for(i=1;i<n;i++)this.mazeScore[e][i]+=this.figureScorePositive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[e][i];for(i=n-1;i>0;i--)this.mazeScore[e][i]+=this.figureScoreNagtive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[i][t];for(i=1;i<n;i++)this.mazeScore[i][t]+=this.figureScorePositive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[i][t];for(i=n-1;i>0;i--)this.mazeScore[i][t]+=this.figureScoreNagtive(o,i,a);var s=1,r=0,c=0,h=0,u=0;for(i=1;i<n;i++)for(var l=1;l<n;l++)e+t==i+l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r-(s-2),u=c+(s-2),i=1;i<s;i++)this.mazeScore[h+(i-1)][u-(i-1)]+=this.figureScorePositive(o,i,a);for(s=1,i=1;i<n;i++)for(l=1;l<n;l++)e+t==i+l&&(o[s++]=this.board.maze[i][l],r=i,c=l);h=r,u=c;var d=1;for(i=s-1;i>0;i--,d++)this.mazeScore[h-(d-1)][u+(d-1)]+=this.figureScoreNagtive(o,i,a);for(s=1,i=1;i<n;i++)for(l=1;l<n;l++)e-t==i-l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r-(s-2),u=c-(s-2),i=1;i<s;i++)this.mazeScore[h+(i-1)][u+(i-1)]+=this.figureScorePositive(o,i,a);for(s=1,d=1,i=1;i<n;i++)for(l=1;l<n;l++)e-t==i-l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r,u=c,i=s-1;i>0;i--,d++)this.mazeScore[h-(d-1)][u-(d-1)]+=this.figureScoreNagtive(o,i,a)},t.prototype.scoreToPositive=function(){for(var e=this.board.judgeSize,t=1;t<e;t++)for(var a=1;a<e;a++)this.mazeScore[t][a]<0&&(this.mazeScore[t][a]*=-1)},t.prototype.figureOut=function(){for(var e=this.board.judgeSize,t=0,a=0,n=0,o=(this.newX,this.newY,0);o<this.board.judgeSize;o++)for(var i=0;i<this.board.judgeSize;i++)0==this.board.maze[o][i]&&t<this.mazeScore[o][i]&&(a=o,n=i,t=this.mazeScore[o][i]);if(t>=4)return cc.v2(a,n);for(o=1;o<e;o++)for(i=1;i<e;i++)0==this.board.maze[o][i]&&t<this.mazeScore[o][i]&&(a=o,n=i,t=this.mazeScore[o][i]);return cc.v2(a,n)},i([h(s.GameBoard_sanren)],t.prototype,"board",void 0),i([c],t)}(cc.Component);a.AI_sanren=u,cc._RF.pop()},{"./GameBoard_sanren":"GameBoard_sanren"}],AI_zhibo:[function(e,t,a){"use strict";cc._RF.push(t,"246a395SGBNpJE/pozeKhxl","AI_zhibo");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.AI_zhibo=void 0;var s=e("./GameBoard_zhibo"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this)},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}},t.prototype.AIPosition=function(e,t){e/=this.board.block,t/=this.board.block,this.newX=e,this.newY=t,this.figureScore(e,t,1),this.scoreToPositive(),this.figureScore(e,t,-1);var a=this.figureOut();return e=a.x,t=a.y,cc.v2(e*this.board.block,t*this.board.block)},t.prototype.figureScorePositive=function(e,t,a){return e[t]*a==-1&&e[t-1]*a<0&&(e[t]+=e[t-1]),0==e[t]&&e[t-1]*a<0?e[t-1]:0},t.prototype.figureScoreNagtive=function(e,t,a){return e[t]*a==-1&&e[t+1]*a<0&&(e[t]+=e[t+1]),0==e[t]&&e[t+1]*a<0?e[t+1]:0},t.prototype.figureScore=function(e,t,a){for(var n=this.board.judgeSize,o=[],i=1;i<n;i++)o[i]=this.board.maze[e][i];for(i=1;i<n;i++)this.mazeScore[e][i]+=this.figureScorePositive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[e][i];for(i=n-1;i>0;i--)this.mazeScore[e][i]+=this.figureScoreNagtive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[i][t];for(i=1;i<n;i++)this.mazeScore[i][t]+=this.figureScorePositive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[i][t];for(i=n-1;i>0;i--)this.mazeScore[i][t]+=this.figureScoreNagtive(o,i,a);var s=1,r=0,c=0,h=0,u=0;for(i=1;i<n;i++)for(var l=1;l<n;l++)e+t==i+l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r-(s-2),u=c+(s-2),i=1;i<s;i++)this.mazeScore[h+(i-1)][u-(i-1)]+=this.figureScorePositive(o,i,a);for(s=1,i=1;i<n;i++)for(l=1;l<n;l++)e+t==i+l&&(o[s++]=this.board.maze[i][l],r=i,c=l);h=r,u=c;var d=1;for(i=s-1;i>0;i--,d++)this.mazeScore[h-(d-1)][u+(d-1)]+=this.figureScoreNagtive(o,i,a);for(s=1,i=1;i<n;i++)for(l=1;l<n;l++)e-t==i-l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r-(s-2),u=c-(s-2),i=1;i<s;i++)this.mazeScore[h+(i-1)][u+(i-1)]+=this.figureScorePositive(o,i,a);for(s=1,d=1,i=1;i<n;i++)for(l=1;l<n;l++)e-t==i-l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r,u=c,i=s-1;i>0;i--,d++)this.mazeScore[h-(d-1)][u-(d-1)]+=this.figureScoreNagtive(o,i,a)},t.prototype.scoreToPositive=function(){for(var e=this.board.judgeSize,t=1;t<e;t++)for(var a=1;a<e;a++)this.mazeScore[t][a]<0&&(this.mazeScore[t][a]*=-1)},t.prototype.figureOut=function(){for(var e=this.board.judgeSize,t=0,a=0,n=0,o=(this.newX,this.newY,0);o<this.board.judgeSize;o++)for(var i=0;i<this.board.judgeSize;i++)0==this.board.maze[o][i]&&t<this.mazeScore[o][i]&&(a=o,n=i,t=this.mazeScore[o][i]);if(t>=4)return cc.v2(a,n);for(o=1;o<e;o++)for(i=1;i<e;i++)0==this.board.maze[o][i]&&t<this.mazeScore[o][i]&&(a=o,n=i,t=this.mazeScore[o][i]);return cc.v2(a,n)},i([h(s.GameBoard_zhibo)],t.prototype,"board",void 0),i([c],t)}(cc.Component);a.AI_zhibo=u,cc._RF.pop()},{"./GameBoard_zhibo":"GameBoard_zhibo"}],AI:[function(e,t,a){"use strict";cc._RF.push(t,"265a01ManZJRZFYzu/klS8L","AI");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.AI=void 0;var s=e("./GameBoard"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this)},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}},t.prototype.AIPosition=function(e,t){e/=this.board.block,t/=this.board.block,this.newX=e,this.newY=t,this.figureScore(e,t,1),this.scoreToPositive(),this.figureScore(e,t,-1);var a=this.figureOut();return e=a.x,t=a.y,cc.v2(e*this.board.block,t*this.board.block)},t.prototype.figureScorePositive=function(e,t,a){return e[t]*a==-1&&e[t-1]*a<0&&(e[t]+=e[t-1]),0==e[t]&&e[t-1]*a<0?e[t-1]:0},t.prototype.figureScoreNagtive=function(e,t,a){return e[t]*a==-1&&e[t+1]*a<0&&(e[t]+=e[t+1]),0==e[t]&&e[t+1]*a<0?e[t+1]:0},t.prototype.figureScore=function(e,t,a){for(var n=this.board.judgeSize,o=[],i=1;i<n;i++)o[i]=this.board.maze[e][i];for(i=1;i<n;i++)this.mazeScore[e][i]+=this.figureScorePositive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[e][i];for(i=n-1;i>0;i--)this.mazeScore[e][i]+=this.figureScoreNagtive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[i][t];for(i=1;i<n;i++)this.mazeScore[i][t]+=this.figureScorePositive(o,i,a);for(i=1;i<n;i++)o[i]=this.board.maze[i][t];for(i=n-1;i>0;i--)this.mazeScore[i][t]+=this.figureScoreNagtive(o,i,a);var s=1,r=0,c=0,h=0,u=0;for(i=1;i<n;i++)for(var l=1;l<n;l++)e+t==i+l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r-(s-2),u=c+(s-2),i=1;i<s;i++)this.mazeScore[h+(i-1)][u-(i-1)]+=this.figureScorePositive(o,i,a);for(s=1,i=1;i<n;i++)for(l=1;l<n;l++)e+t==i+l&&(o[s++]=this.board.maze[i][l],r=i,c=l);h=r,u=c;var d=1;for(i=s-1;i>0;i--,d++)this.mazeScore[h-(d-1)][u+(d-1)]+=this.figureScoreNagtive(o,i,a);for(s=1,i=1;i<n;i++)for(l=1;l<n;l++)e-t==i-l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r-(s-2),u=c-(s-2),i=1;i<s;i++)this.mazeScore[h+(i-1)][u+(i-1)]+=this.figureScorePositive(o,i,a);for(s=1,d=1,i=1;i<n;i++)for(l=1;l<n;l++)e-t==i-l&&(o[s++]=this.board.maze[i][l],r=i,c=l);for(h=r,u=c,i=s-1;i>0;i--,d++)this.mazeScore[h-(d-1)][u-(d-1)]+=this.figureScoreNagtive(o,i,a)},t.prototype.scoreToPositive=function(){for(var e=this.board.judgeSize,t=1;t<e;t++)for(var a=1;a<e;a++)this.mazeScore[t][a]<0&&(this.mazeScore[t][a]*=-1)},t.prototype.figureOut=function(){for(var e=this.board.judgeSize,t=0,a=0,n=0,o=(this.newX,this.newY,0);o<this.board.judgeSize;o++)for(var i=0;i<this.board.judgeSize;i++)0==this.board.maze[o][i]&&t<this.mazeScore[o][i]&&(a=o,n=i,t=this.mazeScore[o][i]);if(t>=4)return cc.v2(a,n);for(o=1;o<e;o++)for(i=1;i<e;i++)0==this.board.maze[o][i]&&t<this.mazeScore[o][i]&&(a=o,n=i,t=this.mazeScore[o][i]);return cc.v2(a,n)},i([h(s.GameBoard)],t.prototype,"board",void 0),i([c],t)}(cc.Component);a.AI=u,cc._RF.pop()},{"./GameBoard":"GameBoard"}],AStar:[function(e,t,a){"use strict";cc._RF.push(t,"6f109EMqNxMD7n1Cw/NkUe8","AStar"),Object.defineProperty(a,"__esModule",{value:!0}),a.AStar=void 0;var n=function(){function e(){this._straightCost=1,this._diagCost=Math.SQRT2,this._heuristic=this.manhattan}return e.prototype.findPath=function(e){return this._grid=e,this._open=[],this._closed=[],this._startNode=this._grid.startNode,this._endNode=this._grid.endNode,this._startNode.g=0,this._startNode.h=this._heuristic(this._startNode),this._startNode.f=this._startNode.g+this._startNode.h,this.search()},e.prototype.search=function(){for(var e=this._startNode;e!=this._endNode;){for(var t=Math.max(0,e.x-1),a=Math.min(this._grid.numCols-1,e.x+1),n=Math.max(0,e.y-1),o=Math.min(this._grid.numRows-1,e.y+1),i=t;i<=a;i++)for(var s=n;s<=o;s++)if(i==e.x||s==e.y){var r=this._grid.getNode(i,s);if(r!=e&&r.walkable&&this._grid.getNode(e.x,r.y).walkable&&this._grid.getNode(r.x,e.y).walkable){var c=this._straightCost,h=e.g+c*r.costMultiplier,u=this._heuristic(r),l=h+u;this.isOpen(r)||this.isClosed(r)?r.f>l&&(r.f=l,r.g=h,r.h=u,r.parent=e):(r.f=l,r.g=h,r.h=u,r.parent=e,this._open.push(r))}}if(this._closed.push(e),0==this._open.length)return!1;for(var d=this._open.length,p=0;p<d;p++)for(var g=p+1;g<d;g++)if(this._open[p].f>this._open[g].f){var _=this._open[p];this._open[p]=this._open[g],this._open[g]=_}e=this._open.shift()}return this.buildPath(),!0},e.prototype.buildPath=function(){this._path=new Array;var e=this._endNode;for(this._path.push(e);e!=this._startNode;)e=e.parent,this._path.unshift(e)},Object.defineProperty(e.prototype,"path",{get:function(){return this._path},enumerable:!1,configurable:!0}),e.prototype.isOpen=function(e){for(var t=0;t<this._open.length;t++)if(this._open[t]==e)return!0;return!1},e.prototype.isClosed=function(e){for(var t=0;t<this._closed.length;t++)if(this._closed[t]==e)return!0;return!1},e.prototype.manhattan=function(e){return Math.abs(e.x-this._endNode.x)*this._straightCost+Math.abs(e.y+this._endNode.y)*this._straightCost},Object.defineProperty(e.prototype,"visited",{get:function(){return this._closed.concat(this._open)},enumerable:!1,configurable:!0}),e}();a.AStar=n,cc._RF.pop()},{}],CanJuBoard:[function(e,t,a){"use strict";cc._RF.push(t,"ba918mSIHxDjKH6z3TM1sNU","CanJuBoard");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.CanJuBoard=void 0;var s=e("../../../SSSGF/dataController/DATA"),r=e("../../../SSSGF/ssscgf"),c=e("../Piece"),h=cc._decorator,u=h.ccclass,l=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.judgeSize=15,t.maze=[],t.state=c.BLACKCHESS,t.win=2,t.sum=0,t.block=46,t.canju_len=0,t.whose_round=0,t.gameScene=null,t.AITurn=null,t.myTurn=!0,t.is_ani=!1,t.chess_map=[],t.chess_list=[],t.chess_pos=[],t.new_userChessPso=[],t.new_aiChessPso=[],t.chess_index=[],t.front_com=null,t.newx=0,t.newY=0,t.canWin=[],t.winCount=0,t.myWin=[],t.istouch=!0,t.ai_huiqi=2,t.ai_huiqi_judge=!0,t.ai_qiuhe_judge=!0,t.ai_heqi=2,t.dazhao_num=0,t.yilun_qizi_v2=[],t.is_zhenfa_over=!1,t.wulei_to_fenlie_max=1,t.wulei_to_fenlie=0,t.bagua_to_fenlie_max=1,t.bagua_to_fenlie=0,t.fenlie_number=0,t.rowSum=0,t.colSum=0,t.biasSumB=0,t.biasSumA=0,t.checkMode=[[1,0],[0,1],[1,1],[1,-1]],t.judge_num=5,t.juesha_judge=!1,t.huiqiJudge=!0,t}return o(t,e),t.prototype.initWin=function(){for(var e=0;e<15;e++){this.canWin[e]=[];for(var t=0;t<15;t++)this.canWin[e][t]=[]}for(e=0;e<15;e++)for(t=0;t<11;t++){for(var a=0;a<5;a++)this.canWin[e][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<15;t++){for(a=0;a<5;a++)this.canWin[e+a][t][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<11;t++){for(a=0;a<5;a++)this.canWin[e+a][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=14;t>3;t--){for(a=0;a<5;a++)this.canWin[e+a][t-a][this.winCount]=!0;this.winCount++}console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa:",this.winCount),console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa11111:",this.canWin)},t.prototype.onLoad=function(){r.conMager.getInstance()._msgAtion.on("user_huiqi_fun",this.user_huiqi_fun,this),r.conMager.getInstance()._msgAtion.on("ds_huiqi_fun",this.ds_huiqi_fun,this)},t.prototype.init=function(e){this.gameScene=e,this.gameScene.gameType>=3&&(this.myTurn=!0);for(var t=0,a=0;a<this.judgeSize;a++){this.maze[a]=[];for(var n=0;n<this.judgeSize;n++)this.maze[a][n]=0,this.chess_map[t]=null,this.chess_pos[t]=[],t+=1}this.addListenner(),this.AITurn.RightRate=this.gameScene.RightRate,this.yilun_qizi_v2=[]},t.prototype.setCanju=function(e){var t=e.black.split(","),a=e.white.split(",");this.canju_len=t.length;for(var n=0;n<t.length;n++){var o=Math.floor(Number(t[n])/15),i=Math.floor(Number(t[n])%15),s=Math.floor(Number(a[n])/15),r=Math.floor(Number(a[n])%15);this.changeToJudgeBoard(o*this.block,i*this.block),this.new_userChessPso.push([o,i]),this.changeToJudgeBoard(s*this.block,r*this.block),this.new_aiChessPso.push([s,r])}this.AITurn.initData()},t.prototype.AIXianShou=function(){this.state=-1,this.myTurn=!1,this.scheduleOnce(function(){this.gameScene.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.AITurn.addPos(7,7,this.state),this.new_aiChessPso.push([7,7]),this.changeToJudgeBoard(322,322)},3)},t.prototype.initAI=function(e){this.AITurn=e},t.prototype.initfront=function(e){this.front_com=e},t.prototype.onTouched=function(e){if(this.myTurn&&(2!=this.gameScene.gameType||this.istouch)){this.fenlie_number=0;var t=e.getLocation(),a=this.node.convertToNodeSpaceAR(t),n=this.getPosByInt(Math.floor(a.x)),o=this.getPosByInt(Math.floor(a.y));if(this.newx=n,this.newY=o,this.new_userChessPso.push([n/this.block,o/this.block]),this.new_userChessPso.length>0&&(1!=r.GameDataStorage.gameStateData.gameType&&3!=r.GameDataStorage.gameStateData.gameType||r.conMager.getInstance()._msgAtion.emit("openHuiqi")),this.changeToJudgeBoard(n,o),this.gameScene.gameType!=s.game_type.canju){if((1==this.gameScene.gameType||5==this.gameScene.gameType)&&(this.aiLuozi(),this.sum>=20&&r.NumberUtil.randomNum(1,100)<6&&this.ai_heqi>0)){var i=this.AITurn.jushi_judge();console.log("ai\u6c42\u548c\u7684\u5206\u6570:",i),this.juesha_judge||(this.sum>=180?this.ai_qiuhe():i.myScore_1>i.computerScore_1&&this.ai_qiuhe())}}else this.aiLuozi()}},t.prototype.aiLuozi=function(e){if(3!=this.gameScene.gameType&&2==this.win&&!this.myTurn&&this.ai_huiqi_judge&&!this.juesha_judge){if((1==this.gameScene.gameType||5==this.gameScene.gameType)&&this.ai_qiuhe_judge){var t=r.NumberUtil.randomNum(1,100);if(3==t&&this.ai_huiqi>0)return this.ai_huiqi_judge=!1,void this.ailuozi_public_fun(t,this.ai_huiqi_judge)}this.ailuozi_public_fun(e)}},t.prototype.ailuozi_public_fun=function(e,t){var a=this;void 0===t&&(t=!0),this.AITurn.AIPosition(this.newx,this.newY,function(e){r.NumberUtil.randomNum(1,3);a.new_aiChessPso.push([e.x/a.block,e.y/a.block]),a.scheduleOnce(function(){var a=this;this.changeToJudgeBoard(e.x,e.y),t||this.scheduleOnce(function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.heqi_panel,a.node.parent,{type:"ds_huiqi",callBack:function(e){2==e?a.ds_huiqi_fun():(a.ai_huiqi_judge=!0,a.state==-1*a.gameScene.userChess&&a.aiLuozi())}})},2)},.5)},!t)},t.prototype.ai_qiuhe=function(){var e=this;this.ai_qiuhe_judge&&(this.ai_heqi<=0||(this.ai_heqi-=1,2==this.gameScene.gameType&&(this.ai_heqi-=1),this.ai_qiuhe_judge=!1,r.conMager.getInstance().getPoolNode(r.KEY.poolName.heqi_panel,this.node.parent,{type:"ds_qiuhe",callBack:function(t){console.log("\u6094\u68cb\u7684\u56de\u8c03\u542b\u6f31",t),e.ai_qiuhe_judge=!0,2==t&&r.conMager.getInstance()._msgAtion.emit("pingju")}})))},t.prototype.getPosByInt=function(e){var t=1;e<0?(e=-e,t=-1):t=1;var a=e%this.block;return e=Math.floor(e/this.block)*this.block,a-this.block/2>=0&&(e+=this.block),e*t},t.prototype.changeToJudgeBoard=function(e,t){var a=this,n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(this.newY=t,this.newx=e,0==this.maze[n][o]){this.istouch=!1,1!=this.gameScene.gameType&&5!=this.gameScene.gameType&&this.gameScene.gameType!=s.game_type.canju||this.updateMyTurn();var i=n+15*o;if(this.chess_pos[i]=[n,o],this.maze[n][o]=this.state,this.sum+=1,2!=this.gameScene.gameType)this.update_Whose_round(),this.gameScene.moveInChess(e,t,this.state),this.qipan_shaomiao(this.state,function(){a.updataState()});else{this.yilun_qizi_v2=[];var r=cc.v2(n,o);this.yilun_qizi_v2.push(r),this.showDaZhao()}}else this.myTurn=!0},t.prototype.spiralMatrix=function(e){for(var t=-7;t<=7;t++)for(var a=-7;a<=7;a++){var n=Math.max(Math.abs(t),Math.abs(a)),o=n*n*4-2*n+1,i=0;t==-n?i=o+2*n+n-a:a==n?i=o+n-t:a==-n?i=o+4*n+t+n:t==n&&(i=o-(n-a));var s=new cc.Vec2(46*t+322,322-46*a);e.set(i,s)}},t.prototype.update_Whose_round=function(){0==this.whose_round?this.whose_round=1:this.whose_round=0},t.prototype.updateMyTurn=function(){this.myTurn=!this.myTurn},t.prototype.updataState=function(){this.state*=-1},t.prototype.showDaZhao=function(){var e;this.wulei_to_fenlie=0,this.bagua_to_fenlie=0,e=this.getZhenFaName(-1*this.state).zhenFaName;var t=r.GameDataStorage.getUser().userData.zhenFaMap[e].attr;this.gameScene.moveInChess(this.newx,this.newY,this.state),this.dazhao_num+=1;var a=r.NumberUtil.randomNum(6,10);if(this.dazhao_num>=a&&this.ai_qiuhe(),1==t)this.start_dazhao(e);else if(2==t){if(console.log("\u88ab\u52a8\u6280\u80fd",e),"fenlie"==e)return void this.start_dazhao(e);this.dz_judge()}},t.prototype.start_dazhao=function(e,t){if(!this.juesha_judge){var a=this.state;t&&(a=t),r.conMager.getInstance()._msgAtion.emit("closeSet"),this.front_com.showFront(a,e,this.daZhaoCb.bind(this))}},t.prototype.dz_judge=function(){var e=this;this.qipan_shaomiao(this.state,function(){var t,a;console.log("\u54ce\u5440kjiomnil",e.win,e.state),t=e.getZhenFaName(e.state).zhenFaName,a=e.getZhenFaName(e.state).is_user;var n=r.GameDataStorage.getUser().userData.zhenFaMap[t].attr;1==n?2!=e.win?e.jueSha():e.updateround():2==n&&("kedi"==t?2!=e.win?(e.judge_num=5,e.judge_num+=a?r.GameDataStorage.gameStateData.ds_zhenfalevel:r.GameDataStorage.getUser().userData.zhenFaMap.kedi.level,e.qipan_shaomiao(e.state,function(){console.log("\u53ef\u654c\u5148\u673a \u8fdb\u6765\u4e86",e.judge_num,e.win,e.state),2==e.win||0==e.win?e.start_dazhao(t):e.jueSha()},e.judge_num)):e.updateround():"bagua"==t?e.start_dazhao(t):"wulei"==t?2!=e.win?e.jueSha():e.updateround():"fenlie"==t&&(2!=e.win?e.jueSha():e.updateround()))})},t.prototype.updateround=function(e){var t=!1;this.state==this.gameScene.userChess&&(t=!0),this.updateMyTurn(),this.update_Whose_round(),this.updataState(),t?this.aiLuozi(e):this.istouch=!0},t.prototype.daZhaoCb=function(e){var t=this,a=r.GameDataStorage.getUser().userData.zhenFaMap[e].attr,n=this.getZhenFaName(this.state),o=this.getZhenFaName(-1*this.state);if(console.log("\u5927\u62db\u64ad\u653e\u5b8c\u6bd5:",n.zhenFaName,e,this.dazhao_num),r.conMager.getInstance()._msgAtion.emit("openSet"),2==a){var i=5;if("kedi"==e)i=this.judge_num,this.qipan_shaomiao(this.state,function(){if(console.log("\u514b\u654c\u5148\u673a\u653e\u5b8c\u4e86",t.win),2==t.win){if("wulei"==n.zhenFaName||"wulei"==o.zhenFaName)return void t.start_dazhao("wulei",t.state);t.updateround(.5)}else t.updataState(),t.jueSha()},i);else if("bagua"==e)"fenlie"==(c=(s=this.getZhenFaName(-1*this.state)).zhenFaName)?this.start_dazhao(s.zhenFaName,this.state):this.qipan_shaomiao(this.state,function(){2==t.win||0==t.win?t.qipan_shaomiao(-1*t.state,function(){var e=t.getZhenFaName(-1*t.state),a=e.zhenFaName,n=e.level;console.log("\u516b\u5366\u9635\u653e\u5b8c\u4e86",t.win,n+5,a,t.state),"kedi"==a?t.qipan_shaomiao(-1*t.state,function(){console.log("\u516b\u5366\u9635\u540e\u7684\u514b\u654c\u5148\u673a",t.win,n+5),2==t.win?t.start_dazhao(a,-1*t.state):(t.updataState(),t.jueSha())},n+5):"wulei"==a?t.start_dazhao(e.zhenFaName,-1*t.state):2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},i):(t.updataState(),t.jueSha())},i);else if("wulei"==e){var s,c,h=this.getZhenFaName(this.state).zhenFaName,u=5;if("kedi"==h&&(this.state==this.gameScene.userChess?u+=r.GameDataStorage.gameStateData.ds_zhenfalevel:u+=r.GameDataStorage.getUser().userData.zhenFaMap.kedi.level),"fenlie"==(c=(s=this.getZhenFaName(-1*this.state)).zhenFaName))return void this.start_dazhao(c,this.state);this.qipan_shaomiao(this.state,function(){console.log("\u4e94\u96f7\u9635\u653e\u5b8c\u4e86",t.win,h),2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},u)}else if("fenlie"==e){var l=this.getZhenFaName(this.state).zhenFaName,d=function(){if(2==t.win){var e=t.getZhenFaName(t.state).zhenFaName;"wulei"==e?t.wulei_to_fenlie<t.wulei_to_fenlie_max?(t.wulei_to_fenlie++,t.start_dazhao(e,t.state)):t.updateround(.5):"bagua"==e&&t.bagua_to_fenlie<t.bagua_to_fenlie_max?(t.bagua_to_fenlie++,t.start_dazhao(e,t.state)):t.updateround(.5)}else t.updataState(),t.jueSha()};"wulei"==l||"bagua"==l?(0==this.fenlie_number?d():this.qipan_shaomiao(this.state,function(){d()},i),this.fenlie_number++):this.qipan_shaomiao(this.state,function(){d()},i)}}else if(1==a){if(console.log("\u4e3b\u52a8\u6280\u80fd\u653e\u5b8c\u4e86",this.state),"wulei"==n.zhenFaName||"wulei"==o.zhenFaName)return void this.start_dazhao("wulei",this.state);this.dz_judge(e)}},t.prototype.getZhenFaName=function(e){var t="wanning",a=!1,n=1;return e==this.gameScene.userChess?(a=!0,t=r.GameDataStorage.gameStateData.dsZhenFaName,n=r.GameDataStorage.gameStateData.ds_zhenfalevel):(t=r.GameDataStorage.gameStateData.userZhenFaName,n=r.GameDataStorage.getUser().userData.zhenFaMap[t].level),{zhenFaName:t,is_user:a,level:n}},t.prototype.dazhao_moveInChess=function(e,t,a){var n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(cc.v2(n,o),!(n>14||o>14||n<0||o<0)&&0==this.maze[n][o]){this.maze[n][o]=a;var i=n+15*o;this.chess_pos[i]=[n,o],this.newY=t,this.newx=e,this.sum+=1,this.AITurn.addPos(n,o,a),this.gameScene.moveInChess(e,t,a,!0)}},t.prototype.qipan_shaomiao=function(e,t,a){if(!this.juesha_judge)if(a||(a=5),this.win=2,2==this.gameScene.gameType)for(var n=0;n<15;n++)for(var o=0;o<15;o++)for(var i=0;i<4;i++){if(this.checkWin(n,o,e,this.checkMode[i],a))return t();if(14==n&&14==o&&3==i)return t()}else for(i=0;i<4;i++){if(this.checkWin(this.newx/46,this.newY/46,e,this.checkMode[i],a))return t();if(3==i)return t()}},t.prototype.checkWin=function(e,t,a,n,o){if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.chess_index=[];var i=[e,t];this.chess_index.push(i);for(var s=1,r=1;r<15;r++)if(this.maze[e+r*n[0]]){var c=e+r*n[0],h=t+r*n[1];if(this.maze[c][h]!=a)break;s++;var u=[c,h];this.chess_index.push(u)}for(var l=1;l<15;l++)if(this.maze[e-l*n[0]]){if(c=e-l*n[0],h=t-l*n[1],this.maze[c][h]!=a)break;s++;var d=[c,h];this.chess_index.push(d)}return s>=o?(this.win=a,this.judge(),!0):(this.sum>=225&&(this.win=0),!1)}},t.prototype.judge=function(){2==this.gameScene.gameType||2!=this.win&&this.jueSha()},t.prototype.jueSha=function(){var e=this;if(1!=this.juesha_judge)if(r.conMager.getInstance()._msgAtion.emit("closeAllSetBtn"),this.juesha_judge=!0,this.ai_qiuhe_judge=!1,console.log("\u7edd\u6740\u54e6",this.win,this.state),this.gameScene.count_down.active=!1,0!=this.win){var t="nv/nv";this.win==this.gameScene.userChess&&(t="nan/nan"),this.gameScene.node.getChildByName("mask").active=!0,this.myTurn=!1;var a=this.chess_index.length;this.scheduleOnce(function(){for(var n=function(n){var o=e.chess_index[n],i=o[0]+15*o[1];e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff("btn1");var o=e.chess_map[i];o.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.callFunc(function(){o.getChildByName("guang").active=!0,n==a-1&&(r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(t+"juesha")},.3),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}}))})))},.1*n)},o=0;o<a;o++)n(o)},.5)}else this.gameScene.gameOver()},t.prototype.addListenner=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.removeListennner=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.user_huiqi_fun=function(){if(console.log("\u6765\u6094\u68cb",this.state,this.gameScene.gameType),this.gameScene.gameType==s.game_type.canju){this.state=this.gameScene.userChess;var e=this.new_aiChessPso.length;if((t=this.new_userChessPso.length)==this.canju_len)return;return this.huiqi_destory(this.new_userChessPso,this.state),this.gameScene.hongDian.active=!1,void(e>t?this.huiqi_destory(this.new_aiChessPso,-1*this.state):e==t&&-1==this.gameScene.userChess&&this.huiqi_destory(this.new_aiChessPso,-1*this.state))}if(3==this.gameScene.gameType)this.huiqiJudge?(this.huiqi_destory(this.new_userChessPso),this.updataState(),this.gameScene.startTime(this.state)):r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u8bf7\u5148\u843d\u5b50!");else{this.state=this.gameScene.userChess,e=this.new_aiChessPso.length;var t=this.new_userChessPso.length;console.log("\u6094\u68cb\u6570\u7ec4\u957f\u5ea6:  ai:",e+"__\u73a9\u5bb6 :"+t),this.huiqi_destory(this.new_userChessPso,this.state),e>t?this.huiqi_destory(this.new_aiChessPso,-1*this.state):e==t&&-1==this.gameScene.userChess&&this.huiqi_destory(this.new_aiChessPso,-1*this.state)}this.gameScene.hongDian.active=!1,this.new_userChessPso.length<=0&&r.conMager.getInstance()._msgAtion.emit("closeHuiqi")},t.prototype.ds_huiqi_fun=function(){console.log("AI\u6765\u6094\u68cb",this.state),this.state=-1*this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;this.huiqi_destory(this.new_aiChessPso,this.state),t>e?this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess):e==t&&-1!=this.gameScene.userChess&&this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess),this.ai_huiqi-=1,this.gameScene.startTime(this.state),this.myTurn=!1,this.ai_huiqi_judge=!0,this.gameScene.hongDian.active=!1,this.aiLuozi()},t.prototype.huiqi_destory=function(e,t){var a=e[e.length-1],n=a[0]+15*a[1],o=this.chess_map[n];this.chess_map[n]=null,this.maze[a[0]][a[1]]=0,e.splice(e.length-1),this.chess_pos[n]=[],o.destroy(),this.AITurn.delPos(a[0],a[1],-1*t)},i([u],t)}(cc.Component));a.CanJuBoard=l,cc._RF.pop()},{"../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../Piece":"Piece"}],DATA:[function(e,t,a){"use strict";cc._RF.push(t,"5eea0qdfGxF56V5sszFe69Y","DATA"),Object.defineProperty(a,"__esModule",{value:!0}),a.game_type=a.lianzhu_type=a.DATA=void 0,(a.DATA||(a.DATA={})).Data={username:"",isNewUser:0,userGender:0,tiLi:5,meinvId:0,skinArr:new Array(3).fill(0),skinBoard:0,boarArr:new Array(2).fill(0),canjuArr:new Array(120).fill(0),canju_id:0,addShortcut:!1,luandou_name:"\u6211\u88ab\u521d\u59cb\u5316\u4e86",darenTime:0,is_daren:!1,luandou_jiangli:!1,luandou_jiangli_new:!0,version_num:0,openId:"",money:100,gameName:"\u6211",user_level:1,TimeStamp:0,isOneGold:!0,isQianDao:!1,qianDaoNum:0,successNum:0,failNum:0,flatNum:0,openDesktopTime:"",level_experience:0,headIconUrl:"null",zhenFaMap:{wanning:{level:1,attr:1},bagua:{level:1,attr:2},sijiao:{level:1,attr:1},kedi:{level:1,attr:2},wulei:{level:1,attr:2},fenlie:{level:1,attr:2},xueyuyingsha:{level:1,attr:1},meihua:{level:1,attr:1},dusha:{level:1,attr:2},kunlong:{level:1,attr:1},juehu:{level:1,attr:2},guiyuan:{level:1,attr:2},chaoniu:{level:1,attr:2},qixing:{level:1,attr:2}},jd_score:0,jd_lianSheng:0,dz_score:0,lz_score:0,isFollow:!1,sr_score:0},function(e){e.wu_zi="\u4e94\u5b50\u8fde\u73e0",e.san_san="\u4e09\u4e09\u7edd\u6740",e.si_san="\u56db\u4e09\u7edd\u6740",e.si_si="\u56db\u56db\u7edd\u6740",e.liu_dao="\u516d\u9053\u8f6e\u56de",e.qi_xing="\u4e03\u661f\u8fde\u73e0",e.ba_men="\u516b\u95e8\u7edd\u6740",e.jiu_xing="\u4e5d\u661f\u8fde\u73af"}(a.lianzhu_type||(a.lianzhu_type={})),function(e){e[e.jingdian=1]="jingdian",e[e.dazhao=2]="dazhao",e[e.danji_duiyi=3]="danji_duiyi",e[e.zhibo=4]="zhibo",e[e.luandou_miwu=5]="luandou_miwu",e[e.canju=6]="canju",e[e.luandou_hbdd=7]="luandou_hbdd",e[e.lianzhao=8]="lianzhao",e[e.lianjiduiyi=9]="lianjiduiyi",e[e.sanren=10]="sanren",e[e.luandou_jxmc=11]="luandou_jxmc",e[e.luandou_tslh=12]="luandou_tslh",e[e.luandou_blxj=13]="luandou_blxj",e[e.xuezhandaodi=14]="xuezhandaodi",e[e.luandou_gssk=15]="luandou_gssk"}(a.game_type||(a.game_type={})),cc._RF.pop()},{}],Dialog:[function(e,t,a){"use strict";cc._RF.push(t,"392e7LW9VJI0JiV9pzz/Ws5","Dialog");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.contentLabel=null,t.confirmButton=null,t.cancelButton=null,t}var a;return o(t,e),a=t,t.open=function(e,t,n,o){a.onConfirm=n||null,a.onCancel=o||null,a.isOpen=!0,a.title=e,a.content=t,a.node&&(a.node.active=!0)},t.close=function(){a.onConfirm=null,a.onCancel=null,a.isOpen=!1,a.title="",a.content="",a.node&&(a.node.active=!1)},t.prototype.start=function(){var e=this;a.node=this.node,this.node.on("touchstart",function(t){t.target!==e.confirmButton.node&&t.target!==e.cancelButton.node&&t.stopPropagation()},this,!0),this.confirmButton.node.on("touchstart",function(){a.onConfirm&&a.onConfirm(),a.close()}),this.cancelButton.node.on("touchstart",function(){a.onCancel&&a.onCancel(),a.close()})},t.prototype.update=function(){this.titleLabel&&this.titleLabel.string!==a.title&&(this.titleLabel.string=a.title),this.contentLabel&&this.contentLabel.string!==a.content&&(this.contentLabel.string=a.content),this.node&&(this.node.active=a.isOpen)},t.onConfirm=null,t.onCancel=null,t.title="",t.content="",t.isOpen=!1,t.node=null,i([c(cc.Label)],t.prototype,"titleLabel",void 0),i([c(cc.Label)],t.prototype,"contentLabel",void 0),i([c(cc.Button)],t.prototype,"confirmButton",void 0),i([c(cc.Button)],t.prototype,"cancelButton",void 0),a=i([r],t)}(cc.Component);a.default=h,cc._RF.pop()},{}],FrameSyncLogic:[function(e,t,a){"use strict";cc._RF.push(t,"41fbdoUg9FN2qljOF7lgkTO","FrameSyncLogic"),Object.defineProperty(a,"__esModule",{value:!0}),a.calcFrame=a.setDefauleFrameState=a.reCalcFrameState=a.pushFrames=a.clearFrames=a.frameSyncState=a.FrameSyncCmd=void 0;var n,o=e("../global"),i=[];function s(e){var t=e.roomInfo||{playerList:[]};a.frameSyncState.players=[],t.playerList.forEach(function(e,t){var o={x:0,y:t,id:e.id,state:{cmd:n.stop,dir:1,lastUpdateFrameId:1}};r(o,e.id,t),a.frameSyncState.players.push(o)})}function r(e,t,a){e.id=t,e.x=0,e.y=a,e.state.cmd=n.stop,e.state.dir=1,e.state.lastUpdateFrameId=1}(function(e){e[e.run=1]="run",e[e.stop=2]="stop"})(n=a.FrameSyncCmd||(a.FrameSyncCmd={})),a.frameSyncState={players:[]},a.clearFrames=function(){i=[]},a.pushFrames=function(e){i.push(e)},a.reCalcFrameState=function(e){s(e),i.forEach(function(e){d(e)})},a.setDefauleFrameState=s;var c=17,h=0,u=1;function l(e,t){e.state.cmd!==n.stop&&t-e.state.lastUpdateFrameId>u&&(e.state.lastUpdateFrameId=t,e.x+=1*e.state.dir,(e.x>=c||e.x<=h)&&(e.state.dir*=-1))}function d(e){1===e.id&&s(o.default.room),e.items&&e.items.length>0&&e.items.forEach(function(e){var t,n;t=e.playerId,n=e.data.cmd,(a.frameSyncState.players.find(function(e){return e.id===t})||{state:{}}).state.cmd=n}),a.frameSyncState.players.forEach(function(t){return l(t,e.id)})}a.calcFrame=d,cc._RF.pop()},{"../global":"global"}],GameBoard_blxj:[function(e,t,a){"use strict";cc._RF.push(t,"5fceete9ppFWLLOaQmyQem+","GameBoard_blxj");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.Gameboard_blxj=void 0;var s=e("../../../SSSGF/dataController/DATA"),r=e("../../../SSSGF/ssscgf"),c=e("../Piece"),h=cc._decorator,u=h.ccclass,l=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.judgeSize=15,t.maze=[],t.state=c.BLACKCHESS,t.win=2,t.sum=0,t.block=46,t.whose_round=0,t.gameScene=null,t.AITurn=null,t.myTurn=!0,t.is_ani=!1,t.chess_map=[],t.chess_list=[],t.chess_pos=[],t.new_userChessPso=[],t.new_aiChessPso=[],t.chess_index=[],t.front_com=null,t.newx=0,t.newY=0,t.canWin=[],t.winCount=0,t.myWin=[],t.istouch=!0,t.ai_huiqi=2,t.ai_huiqi_judge=!0,t.ai_qiuhe_judge=!0,t.ai_heqi=2,t.dazhao_num=0,t.yilun_qizi_v2=[],t.bushu=0,t.is_xueyulianzhu=!1,t.zhenfa_level=0,t.weixian_arr=[],t.rowSum=0,t.colSum=0,t.biasSumB=0,t.biasSumA=0,t.checkMode=[[1,0],[0,1],[1,1],[1,-1]],t.judge_num=5,t.juesha_judge=!1,t.huiqiJudge=!0,t}return o(t,e),t.prototype.initWin=function(){for(var e=0;e<15;e++){this.canWin[e]=[];for(var t=0;t<15;t++)this.canWin[e][t]=[]}for(e=0;e<15;e++)for(t=0;t<11;t++){for(var a=0;a<5;a++)this.canWin[e][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<15;t++){for(a=0;a<5;a++)this.canWin[e+a][t][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<11;t++){for(a=0;a<5;a++)this.canWin[e+a][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=14;t>3;t--){for(a=0;a<5;a++)this.canWin[e+a][t-a][this.winCount]=!0;this.winCount++}console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa:",this.winCount),console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa11111:",this.canWin)},t.prototype.onLoad=function(){r.conMager.getInstance()._msgAtion.on("user_huiqi_fun",this.user_huiqi_fun,this),r.conMager.getInstance()._msgAtion.on("ds_huiqi_fun",this.ds_huiqi_fun,this)},t.prototype.init=function(e){this.gameScene=e,this.gameScene.gameType>=3&&(this.myTurn=!0);for(var t=0,a=0;a<this.judgeSize;a++){this.maze[a]=[];for(var n=0;n<this.judgeSize;n++)this.maze[a][n]=0,this.chess_map[t]=null,this.chess_pos[t]=[],t+=1}this.addListenner(),this.AITurn.RightRate=this.gameScene.RightRate,this.initDangerSpot(),this.yilun_qizi_v2=[]},t.prototype.AIXianShou=function(){this.bushu++,this.state=-1,this.myTurn=!1,this.istouch=!1,this.scheduleOnce(function(){this.gameScene.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.AITurn.addPos(7,7,this.state),this.new_aiChessPso.push([7,7]),this.changeToJudgeBoard(322,322),this.istouch=!0},3)},t.prototype.initAI=function(e){this.AITurn=e},t.prototype.onTouched=function(e){if(console.log("\u89e6\u6478\u5c4f\u5e55:","myTurn:",this.myTurn,"istouch:",this.istouch),this.myTurn)if(this.istouch){var t=e.getLocation(),a=this.node.convertToNodeSpaceAR(t),n=this.getPosByInt(Math.floor(a.x)),o=this.getPosByInt(Math.floor(a.y));if(this.isAllowLuoZi(n,o)){if(console.error("\u4e0b\u5b8c\u4e86"),this.bushu++,this.istouch=!1,this.newx=n,this.newY=o,this.new_userChessPso.push([n/this.block,o/this.block]),this.changeToJudgeBoard(n,o),console.log("1"),(1==this.gameScene.gameType||this.gameScene.gameType==s.game_type.luandou_blxj)&&(console.log("2"),this.aiLuozi(),this.sum>=20&&r.NumberUtil.randomNum(1,100)<6&&this.ai_heqi>0)){var i=this.AITurn.jushi_judge();console.log("ai\u6c42\u548c\u7684\u5206\u6570:",i),this.juesha_judge||(this.sum>=180?this.ai_qiuhe():i.myScore_1>i.computerScore_1&&this.ai_qiuhe())}}else r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node.parent,"\u5371\u9669\u70b9\uff0c\u4e0d\u80fd\u843d\u5b50")}else console.log("\u5144\u561a\u51b7\u9759\uff0c\u8fd8\u6ca1\u8f6e\u5230\u4f60\u4e0b\u68cb!");else r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node.parent,"\u7b49\u5f85\u5bf9\u65b9\u843d\u5b50")},t.prototype.aiLuozi=function(e){console.log("3");for(var t=0,a=0;a<15;a++)for(var n=0;n<15;n++)if(0!=this.maze[a][n]&&++t>=224)return void this.gameScene.gameOver();console.log("4"),3==this.gameScene.gameType||2!=this.win||this.myTurn||!this.ai_huiqi_judge||this.juesha_judge||this.ailuozi_public_fun(e)},t.prototype.ailuozi_public_fun=function(e,t){void 0===t&&(t=!0),console.log("5"),this.bushu++;var a=r.NumberUtil.randomNum(1,3);e&&(a=e),console.log("6"),this.scheduleOnce(function(){var e=this;console.log("7"),this.AITurn.AIPosition(this.newx,this.newY,function(t){console.log("8"),e.new_aiChessPso.push([t.x/e.block,t.y/e.block]),e.changeToJudgeBoard(t.x,t.y),e.istouch=!0,console.log("ai\u6267\u884c\u5b8c\u6bd5")},!t)},a)},t.prototype.ai_qiuhe=function(){var e=this;this.ai_qiuhe_judge&&(this.ai_heqi<=0||(this.ai_heqi-=1,2!=this.gameScene.gameType&&this.gameScene.gameType!=s.game_type.luandou_blxj||(this.ai_heqi-=1),this.ai_qiuhe_judge=!1,r.conMager.getInstance().getPoolNode(r.KEY.poolName.heqi_panel,this.node.parent,{type:"ds_qiuhe",callBack:function(t){console.log("\u6094\u68cb\u7684\u56de\u8c03\u542b\u6f31",t),e.ai_qiuhe_judge=!0,2==t&&r.conMager.getInstance()._msgAtion.emit("pingju")}})))},t.prototype.getPosByInt=function(e){var t=1;e<0?(e=-e,t=-1):t=1;var a=e%this.block;return e=Math.floor(e/this.block)*this.block,a-this.block/2>=0&&(e+=this.block),e*t},t.prototype.changeToJudgeBoard=function(e,t){var a=this,n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(this.newY=t,this.newx=e,console.log("\u4f4d\u7f6e\u6709\u68cb\u561b:",this.maze[n][o],this.newx,this.newY),0!=this.maze[n][o])return this.myTurn=!0,void(this.istouch=!0);this.updateMyTurn();var i=n+15*o;this.chess_pos[i]=[n,o],this.maze[n][o]=this.state,this.sum+=1;var s=this.isDangerSpot(i);s&&(0==e&&t>=0||14==e&&t>=0||0==t&&e>=0||14==t&&e>=0||(this.maze[n][o]=2)),this.update_Whose_round(),this.gameScene.moveInChess(e,t,this.state,s),this.qipan_shaomiao(this.state,function(){a.updataState()})},t.prototype.update_Whose_round=function(){0==this.whose_round?this.whose_round=1:this.whose_round=0},t.prototype.updateMyTurn=function(){this.myTurn=!this.myTurn},t.prototype.updataState=function(){this.state*=-1},t.prototype.isAllowLuoZi=function(e,t){var a=Math.floor(e/this.block),n=Math.floor(t/this.block),o=e/this.block+t/this.block*15,i=[];if(this.isDangerSpot(o)){for(var s=a-2,r=n-1,c=0;c<4;c++)if(s+=1,c%2==0&&0!=c&&(s=a-1,r+=1),s>=14||s<0||r>=14||r<0)i.push(!1);else{var h=this.gameScene.boli_map[s][r];i.push(h.getChildByName("boli").active)}return i.includes(!0)}return!0},t.prototype.isDangerSpot=function(e){return this.weixian_arr.includes(e)},t.prototype.initDangerSpot=function(){for(var e=0;e<35;e++)this.randDangerSpot();console.log("\u5371\u9669\u70b9\uff1a",this.weixian_arr)},t.prototype.randDangerSpot=function(){var e=r.NumberUtil.randomNum(0,209);112==e||this.weixian_arr.includes(e)?this.randDangerSpot():this.weixian_arr.push(e)},t.prototype.resetPos=function(e,t){this.AITurn.resetPos(e,t)},t.prototype.qipan_shaomiao=function(e,t,a){if(!this.juesha_judge){a||(a=5),this.win=2;for(var n=0,o=0;o<15;o++)for(var i=0;i<15;i++){for(var s=0;s<4;s++){if(this.checkWin(o,i,e,this.checkMode[s],a))return t();if(14==o&&14==i&&3==s)return t()}if(0!=this.maze[o][i]&&++n>=224)return void this.gameScene.gameOver()}}},t.prototype.checkWin=function(e,t,a,n,o){if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.chess_index=[];var i=[e,t];this.chess_index.push(i);for(var s=1,r=1;r<15;r++)if(this.maze[e+r*n[0]]){var c=e+r*n[0],h=t+r*n[1];if(this.maze[c][h]!=a)break;s++;var u=[c,h];this.chess_index.push(u)}for(var l=1;l<15;l++)if(this.maze[e-l*n[0]]){if(c=e-l*n[0],h=t-l*n[1],this.maze[c][h]!=a)break;s++;var d=[c,h];this.chess_index.push(d)}return s>=o?(this.win=2==a?1:-2==a?-1:a,this.judge(),!0):(this.sum>=225&&(this.win=0),!1)}},t.prototype.judge=function(){2==this.gameScene.gameType||this.gameScene.gameType==s.game_type.lianzhao||2!=this.win&&this.jueSha()},t.prototype.jueSha=function(){var e=this;if(1!=this.juesha_judge)if(r.conMager.getInstance()._msgAtion.emit("closeAllSetBtn"),this.juesha_judge=!0,this.ai_qiuhe_judge=!1,this.gameScene.count_down.active=!1,this.gameScene.stopTime(),0!=this.win){var t="nv/nv";this.win==this.gameScene.userChess&&(t="nan/nan"),this.gameScene.node.getChildByName("mask").active=!0,this.myTurn=!1;var a=this.chess_index.length;this.scheduleOnce(function(){var n=.1;a>20&&(n=2/a);for(var o=function(o){var i=e.chess_index[o],s=i[0]+15*i[1];e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff("btn1");var n=e.chess_map[s];n.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.callFunc(function(){n.getChildByName("guang").active=!0,o==a-1&&(e.is_xueyulianzhu?r.conMager.getInstance().getPoolNode(r.KEY.poolName.lianzhu,cc.find("Cnavas"),{num:a,callBack:function(){e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(t+"juesha")},.3),r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}})}}):(e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(t+"juesha")},.3),r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}})))})))},o*n)},i=0;i<a;i++)o(i)},.5)}else this.gameScene.gameOver()},t.prototype.addListenner=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.removeListennner=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.user_huiqi_fun=function(){if(console.log("\u6765\u6094\u68cb",this.state,this.gameScene.gameType),3==this.gameScene.gameType)this.huiqiJudge?(this.huiqi_destory(this.new_userChessPso),this.updataState(),this.gameScene.startTime(this.state)):r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u8bf7\u5148\u843d\u5b50!");else{this.state=this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;console.log("\u6094\u68cb\u6570\u7ec4\u957f\u5ea6:  ai:",e+"__\u73a9\u5bb6 :"+t),this.huiqi_destory(this.new_userChessPso,this.state),e>t?this.huiqi_destory(this.new_aiChessPso,-1*this.state):e==t&&-1==this.gameScene.userChess&&this.huiqi_destory(this.new_aiChessPso,-1*this.state)}this.gameScene.hongDian.active=!1,this.new_userChessPso.length<=0&&r.conMager.getInstance()._msgAtion.emit("closeHuiqi")},t.prototype.ds_huiqi_fun=function(){console.log("AI\u6765\u6094\u68cb",this.state),this.state=-1*this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;this.huiqi_destory(this.new_aiChessPso,this.state),t>e?this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess):e==t&&-1!=this.gameScene.userChess&&this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess),this.ai_huiqi-=1,this.gameScene.startTime(this.state),this.myTurn=!1,this.ai_huiqi_judge=!0,this.gameScene.hongDian.active=!1,this.aiLuozi()},t.prototype.huiqi_destory=function(e,t){var a=e[e.length-1],n=a[0]+15*a[1],o=this.chess_map[n];this.chess_map[n]=null,this.maze[a[0]][a[1]]=0,e.splice(e.length-1),this.chess_pos[n]=[],o.destroy(),this.AITurn.delPos(a[0],a[1],-1*t)},i([u],t)}(cc.Component));a.Gameboard_blxj=l,cc._RF.pop()},{"../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../Piece":"Piece"}],GameBoard_hbdd:[function(e,t,a){"use strict";cc._RF.push(t,"3d0e19S+NNDgIsID5/OXh5y","GameBoard_hbdd");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.GameBoard_hbdd=void 0;var s=e("../../../SSSGF/dataController/DATA"),r=e("../../../SSSGF/ssscgf"),c=e("../../../utils/commonFunction"),h=e("../Piece"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.judgeSize=15,t.maze=[],t.state=h.BLACKCHESS,t.win=2,t.sum=0,t.block=46,t.whose_round=0,t.gameScene=null,t.AITurn=null,t.myTurn=!0,t.is_ani=!1,t.chess_map=[],t.chess_list=[],t.chess_pos=[],t.new_userChessPso=[],t.new_aiChessPso=[],t.chess_index=[],t.front_com=null,t.newx=0,t.newY=0,t.canWin=[],t.winCount=0,t.myWin=[],t.istouch=!0,t.ai_huiqi=2,t.ai_huiqi_judge=!0,t.ai_qiuhe_judge=!0,t.ai_heqi=2,t.dazhao_num=0,t.yilun_qizi_v2=[],t.luozi_bool=!0,t.diandao_number_max=3,t.diandao_number=0,t.is_zhenfa_over=!1,t.wulei_to_fenlie_max=1,t.wulei_to_fenlie=0,t.bagua_to_fenlie_max=1,t.bagua_to_fenlie=0,t.fenlie_number=0,t.rowSum=0,t.colSum=0,t.biasSumB=0,t.biasSumA=0,t.checkMode=[[1,0],[0,1],[1,1],[1,-1]],t.judge_num=5,t.juesha_judge=!1,t.huiqiJudge=!0,t}return o(t,e),t.prototype.initWin=function(){for(var e=0;e<15;e++){this.canWin[e]=[];for(var t=0;t<15;t++)this.canWin[e][t]=[]}for(e=0;e<15;e++)for(t=0;t<11;t++){for(var a=0;a<5;a++)this.canWin[e][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<15;t++){for(a=0;a<5;a++)this.canWin[e+a][t][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<11;t++){for(a=0;a<5;a++)this.canWin[e+a][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=14;t>3;t--){for(a=0;a<5;a++)this.canWin[e+a][t-a][this.winCount]=!0;this.winCount++}console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa:",this.winCount)},t.prototype.onLoad=function(){r.conMager.getInstance()._msgAtion.on("user_huiqi_fun",this.user_huiqi_fun,this),r.conMager.getInstance()._msgAtion.on("ds_huiqi_fun",this.ds_huiqi_fun,this)},t.prototype.init=function(e){this.gameScene=e,this.gameScene.gameType>=3&&(this.myTurn=!0);for(var t=0,a=0;a<this.judgeSize;a++){this.maze[a]=[];for(var n=0;n<this.judgeSize;n++)this.maze[a][n]=0,this.chess_map[t]=null,this.chess_pos[t]=[],t+=1}this.addListenner(),this.AITurn.RightRate=this.gameScene.RightRate,this.yilun_qizi_v2=[]},t.prototype.AIXianShou=function(){this.state=-1,this.myTurn=!1,this.scheduleOnce(function(){this.gameScene.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.AITurn.addPos(7,7,this.state),this.new_aiChessPso.push([7,7]),this.changeToJudgeBoard(322,322)},3)},t.prototype.initAI=function(e){this.AITurn=e},t.prototype.initfront=function(e){this.front_com=e},t.prototype.onTouched=function(e){if(this.myTurn&&(2!=this.gameScene.gameType&&this.gameScene.game_type!=s.game_type.luandou_hbdd||this.istouch)&&0!=this.luozi_bool){this.fenlie_number=0;var t=e.getLocation(),a=this.node.convertToNodeSpaceAR(t),n=this.getPosByInt(Math.floor(a.x)),o=this.getPosByInt(Math.floor(a.y));this.newx=n,this.newY=o,this.new_userChessPso.push([n/this.block,o/this.block]),this.new_userChessPso.length>0&&(1!=r.GameDataStorage.gameStateData.gameType&&3!=r.GameDataStorage.gameStateData.gameType||r.conMager.getInstance()._msgAtion.emit("openHuiqi")),this.changeToJudgeBoard(n,o),1!=this.gameScene.gameType&&this.gameScene.gameType!=s.game_type.luandou_hbdd||this.aiLuozi()}},t.prototype.aiLuozi=function(e){if(0!=this.luozi_bool&&3!=this.gameScene.gameType&&2==this.win&&!this.myTurn&&this.ai_huiqi_judge&&!this.juesha_judge){if((1==this.gameScene.gameType||this.gameScene.gameType==s.game_type.luandou_hbdd)&&this.ai_qiuhe_judge){var t=r.NumberUtil.randomNum(1,100);if(3==t&&this.ai_huiqi>0)return this.ai_huiqi_judge=!1,void this.ailuozi_public_fun(t,this.ai_huiqi_judge)}this.ailuozi_public_fun(e)}},t.prototype.ailuozi_public_fun=function(e,t){var a=this;void 0===t&&(t=!0),this.AITurn.AIPosition(this.newx,this.newY,function(t){var n=r.NumberUtil.randomNum(1,3);e&&(n=e),a.new_aiChessPso.push([t.x/a.block,t.y/a.block]),a.scheduleOnce(function(){this.changeToJudgeBoard(t.x,t.y)},n)},!t)},t.prototype.ai_qiuhe=function(){var e=this;this.ai_qiuhe_judge&&(this.ai_heqi<=0||(this.ai_heqi-=1,2==this.gameScene.gameType&&(this.ai_heqi-=1),this.ai_qiuhe_judge=!1,r.conMager.getInstance().getPoolNode(r.KEY.poolName.heqi_panel,this.node.parent,{type:"ds_qiuhe",callBack:function(t){console.log("\u6094\u68cb\u7684\u56de\u8c03\u542b\u6f31",t),e.ai_qiuhe_judge=!0,2==t&&r.conMager.getInstance()._msgAtion.emit("pingju")}})))},t.prototype.getPosByInt=function(e){var t=1;e<0?(e=-e,t=-1):t=1;var a=e%this.block;return e=Math.floor(e/this.block)*this.block,a-this.block/2>=0&&(e+=this.block),e*t},t.prototype.changeToJudgeBoard=function(e,t){var a=this,n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(this.newY=t,this.newx=e,0==this.maze[n][o]){this.istouch=!1,1!=this.gameScene.gameType&&this.gameScene.gameType!=s.game_type.luandou_hbdd||this.updateMyTurn();var i=n+15*o;if(this.chess_pos[i]=[n,o],this.maze[n][o]=this.state,this.sum+=1,2!=this.gameScene.gameType)this.update_Whose_round(),this.gameScene.moveInChess(e,t,this.state),this.qipan_shaomiao(this.state,function(){a.updataState()});else{this.yilun_qizi_v2=[];var r=cc.v2(n,o);this.yilun_qizi_v2.push(r),this.showDaZhao()}this.gameScene.gameType==s.game_type.luandou_hbdd&&2==this.win&&this.diandao_judge()}else this.myTurn=!0},t.prototype.diandao_judge=function(){console.log("\u9ed1\u767d\u5224\u5b9a"),this.diandao_number++,this.diandao_number>=this.diandao_number_max&&(console.error("\u505c\u6b62\u4f60\u7684\u4e0b\u68cb\u884c\u4e3a\uff01"),this.luozi_bool=!1,this.diandao_number=0,this.diandao())},t.prototype.diandao=function(){for(var e=this,t=0,a=function(a){for(var o=function(o){if(0!=n.maze[a][o]){var i="bianbai";1==n.maze[a][o]&&(i="bianhei");var s=a*n.block,h=o*n.block,u=!0;n.state==n.gameScene.userChess&&(u=!1);var l=a+15*o,d=n.chess_map[l];n.maze[a][o]=-1*n.maze[a][o],n.scheduleOnce(function(){c.commonFunction.updateSprite("chess/"+e.maze[a][o],d.getChildByName("chess")),r.conMager.getInstance().playAudioEff(r.KEY.audioName.zc),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,e.node,{fileName:"taiji",ani_name:i,cb:function(){if(++t==e.sum){console.log(e.AITurn.myWin),console.log(e.AITurn.computerWin);for(var a=0;a<e.AITurn.count;a++)e.AITurn.myWin[a]=0,e.AITurn.computerWin[a]=0;for(var n=0;n<e.judgeSize;n++)for(var o=0;o<e.judgeSize;o++)-1==e.maze[n][o]?e.AITurn.addPos2(n,o,-1):1==e.maze[n][o]&&e.AITurn.addPos2(n,o,1);e.luozi_bool=!0,1==u&&e.aiLuozi()}},is_user:u,pos:cc.v2(s,h+1)})},.4)}},i=0;i<n.maze[a].length;i++)o(i)},n=this,o=0;o<this.maze.length;o++)a(o)},t.prototype.add_zhenfa_ani=function(e,t,a,n){r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,this.node.parent,{fileName:e,ani_name:t,cb:a,is_user:n})},t.prototype.update_Whose_round=function(){0==this.whose_round?this.whose_round=1:this.whose_round=0},t.prototype.updateMyTurn=function(){this.myTurn=!this.myTurn},t.prototype.updataState=function(){this.state*=-1},t.prototype.showDaZhao=function(){var e;this.wulei_to_fenlie=0,this.bagua_to_fenlie=0,e=this.getZhenFaName(-1*this.state).zhenFaName;var t=r.GameDataStorage.getUser().userData.zhenFaMap[e].attr;this.gameScene.moveInChess(this.newx,this.newY,this.state),this.dazhao_num+=1;var a=r.NumberUtil.randomNum(6,10);if(this.dazhao_num>=a&&this.ai_qiuhe(),1==t)this.start_dazhao(e);else if(2==t){if(console.log("\u88ab\u52a8\u6280\u80fd",e),"fenlie"==e)return void this.start_dazhao(e);this.dz_judge()}},t.prototype.start_dazhao=function(e,t){if(!this.juesha_judge){var a=this.state;t&&(a=t),r.conMager.getInstance()._msgAtion.emit("closeSet"),this.front_com.showFront(a,e,this.daZhaoCb.bind(this))}},t.prototype.dz_judge=function(){var e=this;this.qipan_shaomiao(this.state,function(){var t,a;console.log("\u54ce\u5440kjiomnil",e.win,e.state),t=e.getZhenFaName(e.state).zhenFaName,a=e.getZhenFaName(e.state).is_user;var n=r.GameDataStorage.getUser().userData.zhenFaMap[t].attr;1==n?2!=e.win?e.jueSha():e.updateround():2==n&&("kedi"==t?2!=e.win?(e.judge_num=5,e.judge_num+=a?r.GameDataStorage.gameStateData.ds_zhenfalevel:r.GameDataStorage.getUser().userData.zhenFaMap.kedi.level,e.qipan_shaomiao(e.state,function(){console.log("\u53ef\u654c\u5148\u673a \u8fdb\u6765\u4e86",e.judge_num,e.win,e.state),2==e.win||0==e.win?e.start_dazhao(t):e.jueSha()},e.judge_num)):e.updateround():"bagua"==t?e.start_dazhao(t):"wulei"==t?2!=e.win?e.jueSha():e.updateround():"fenlie"==t&&(2!=e.win?e.jueSha():e.updateround()))})},t.prototype.updateround=function(e){var t=!1;this.state==this.gameScene.userChess&&(t=!0),this.updateMyTurn(),this.update_Whose_round(),this.updataState(),t?this.aiLuozi(e):this.istouch=!0},t.prototype.daZhaoCb=function(e){var t=this,a=r.GameDataStorage.getUser().userData.zhenFaMap[e].attr,n=this.getZhenFaName(this.state),o=this.getZhenFaName(-1*this.state);if(console.log("\u5927\u62db\u64ad\u653e\u5b8c\u6bd5:",n.zhenFaName,e,this.dazhao_num),r.conMager.getInstance()._msgAtion.emit("openSet"),2==a){var i=5;if("kedi"==e)i=this.judge_num,this.qipan_shaomiao(this.state,function(){if(console.log("\u514b\u654c\u5148\u673a\u653e\u5b8c\u4e86",t.win),2==t.win){if("wulei"==n.zhenFaName||"wulei"==o.zhenFaName)return void t.start_dazhao("wulei",t.state);t.updateround(.5)}else t.updataState(),t.jueSha()},i);else if("bagua"==e)"fenlie"==(c=(s=this.getZhenFaName(-1*this.state)).zhenFaName)?this.start_dazhao(s.zhenFaName,this.state):this.qipan_shaomiao(this.state,function(){2==t.win||0==t.win?t.qipan_shaomiao(-1*t.state,function(){var e=t.getZhenFaName(-1*t.state),a=e.zhenFaName,n=e.level;console.log("\u516b\u5366\u9635\u653e\u5b8c\u4e86",t.win,n+5,a,t.state),"kedi"==a?t.qipan_shaomiao(-1*t.state,function(){console.log("\u516b\u5366\u9635\u540e\u7684\u514b\u654c\u5148\u673a",t.win,n+5),2==t.win?t.start_dazhao(a,-1*t.state):(t.updataState(),t.jueSha())},n+5):"wulei"==a?t.start_dazhao(e.zhenFaName,-1*t.state):2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},i):(t.updataState(),t.jueSha())},i);else if("wulei"==e){var s,c,h=this.getZhenFaName(this.state).zhenFaName,u=5;if("kedi"==h&&(this.state==this.gameScene.userChess?u+=r.GameDataStorage.gameStateData.ds_zhenfalevel:u+=r.GameDataStorage.getUser().userData.zhenFaMap.kedi.level),"fenlie"==(c=(s=this.getZhenFaName(-1*this.state)).zhenFaName))return void this.start_dazhao(c,this.state);this.qipan_shaomiao(this.state,function(){console.log("\u4e94\u96f7\u9635\u653e\u5b8c\u4e86",t.win,h),2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},u)}else if("fenlie"==e){var l=this.getZhenFaName(this.state).zhenFaName,d=function(){if(2==t.win){var e=t.getZhenFaName(t.state).zhenFaName;"wulei"==e?t.wulei_to_fenlie<t.wulei_to_fenlie_max?(t.wulei_to_fenlie++,t.start_dazhao(e,t.state)):t.updateround(.5):"bagua"==e&&t.bagua_to_fenlie<t.bagua_to_fenlie_max?(t.bagua_to_fenlie++,t.start_dazhao(e,t.state)):t.updateround(.5)}else t.updataState(),t.jueSha()};"wulei"==l||"bagua"==l?(0==this.fenlie_number?d():this.qipan_shaomiao(this.state,function(){d()},i),this.fenlie_number++):this.qipan_shaomiao(this.state,function(){d()},i)}}else if(1==a){if(console.log("\u4e3b\u52a8\u6280\u80fd\u653e\u5b8c\u4e86",this.state),"wulei"==n.zhenFaName||"wulei"==o.zhenFaName)return void this.start_dazhao("wulei",this.state);this.dz_judge(e)}},t.prototype.getZhenFaName=function(e){var t="wanning",a=!1,n=1;return e==this.gameScene.userChess?(a=!0,t=r.GameDataStorage.gameStateData.dsZhenFaName,n=r.GameDataStorage.gameStateData.ds_zhenfalevel):(t=r.GameDataStorage.gameStateData.userZhenFaName,n=r.GameDataStorage.getUser().userData.zhenFaMap[t].level),{zhenFaName:t,is_user:a,level:n}},t.prototype.dazhao_moveInChess=function(e,t,a){var n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(cc.v2(n,o),!(n>14||o>14||n<0||o<0)&&0==this.maze[n][o]){this.maze[n][o]=a;var i=n+15*o;this.chess_pos[i]=[n,o],this.newY=t,this.newx=e,this.sum+=1,this.AITurn.addPos(n,o,a),this.gameScene.moveInChess(e,t,a,!0)}},t.prototype.qipan_shaomiao=function(e,t,a){if(!this.juesha_judge)if(a||(a=5),this.win=2,2==this.gameScene.gameType)for(var n=0;n<15;n++)for(var o=0;o<15;o++)for(var i=0;i<4;i++){if(this.checkWin(n,o,e,this.checkMode[i],a))return t();if(14==n&&14==o&&3==i)return t()}else for(i=0;i<4;i++){if(this.checkWin(this.newx/46,this.newY/46,e,this.checkMode[i],a))return t();if(3==i)return t()}},t.prototype.checkWin=function(e,t,a,n,o){if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.chess_index=[];var i=[e,t];this.chess_index.push(i);for(var s=1,r=1;r<15;r++)if(this.maze[e+r*n[0]]){var c=e+r*n[0],h=t+r*n[1];if(this.maze[c][h]!=a)break;s++;var u=[c,h];this.chess_index.push(u)}for(var l=1;l<15;l++)if(this.maze[e-l*n[0]]){if(c=e-l*n[0],h=t-l*n[1],this.maze[c][h]!=a)break;s++;var d=[c,h];this.chess_index.push(d)}return s>=o?(this.win=a,this.judge(),!0):(this.sum>=225&&(this.win=0),!1)}},t.prototype.judge=function(){2==this.gameScene.gameType||2!=this.win&&this.jueSha()},t.prototype.jueSha=function(){var e=this;if(1!=this.juesha_judge)if(r.conMager.getInstance()._msgAtion.emit("closeAllSetBtn"),this.juesha_judge=!0,this.ai_qiuhe_judge=!1,console.log("\u7edd\u6740\u54e6",this.win,this.state),this.gameScene.count_down.active=!1,0!=this.win){var t="nv/nv";this.win==this.gameScene.userChess&&(t="nan/nan"),this.gameScene.node.getChildByName("mask").active=!0,this.myTurn=!1;var a=this.chess_index.length;this.scheduleOnce(function(){for(var n=function(n){var o=e.chess_index[n],i=o[0]+15*o[1];e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff("btn1");var o=e.chess_map[i];o.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.callFunc(function(){o.getChildByName("guang").active=!0,n==a-1&&(r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(t+"juesha")},.3),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}}))})))},.1*n)},o=0;o<a;o++)n(o)},.5)}else this.gameScene.gameOver()},t.prototype.addListenner=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.removeListennner=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.user_huiqi_fun=function(){if(console.log("\u6765\u6094\u68cb",this.state,this.gameScene.gameType),3==this.gameScene.gameType)this.huiqiJudge?(this.huiqi_destory(this.new_userChessPso),this.updataState(),this.gameScene.startTime(this.state)):r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u8bf7\u5148\u843d\u5b50!");else{this.state=this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;console.log("\u6094\u68cb\u6570\u7ec4\u957f\u5ea6:  ai:",e+"__\u73a9\u5bb6 :"+t),this.huiqi_destory(this.new_userChessPso,this.state),e>t?this.huiqi_destory(this.new_aiChessPso,-1*this.state):e==t&&-1==this.gameScene.userChess&&this.huiqi_destory(this.new_aiChessPso,-1*this.state)}this.gameScene.hongDian.active=!1,this.new_userChessPso.length<=0&&r.conMager.getInstance()._msgAtion.emit("closeHuiqi")},t.prototype.ds_huiqi_fun=function(){console.log("AI\u6765\u6094\u68cb",this.state),this.state=-1*this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;this.huiqi_destory(this.new_aiChessPso,this.state),t>e?this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess):e==t&&-1!=this.gameScene.userChess&&this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess),this.ai_huiqi-=1,this.gameScene.startTime(this.state),this.myTurn=!1,this.ai_huiqi_judge=!0,this.gameScene.hongDian.active=!1,this.aiLuozi()},t.prototype.huiqi_destory=function(e,t){var a=e[e.length-1],n=a[0]+15*a[1],o=this.chess_map[n];this.chess_map[n]=null,this.maze[a[0]][a[1]]=0,e.splice(e.length-1),this.chess_pos[n]=[],o.destroy(),this.AITurn.delPos(a[0],a[1],-1*t)},i([l],t)}(cc.Component));a.GameBoard_hbdd=d,cc._RF.pop()},{"../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../../../utils/commonFunction":"commonFunction","../Piece":"Piece"}],GameBoard_jxmc:[function(e,t,a){"use strict";cc._RF.push(t,"2e08bezx5JH0oq65qhv4Zad","GameBoard_jxmc");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.GameBoard_jxmc=void 0;var s=e("../../../SSSGF/dataController/DATA"),r=e("../../../SSSGF/ssscgf"),c=e("../Piece"),h=cc._decorator,u=h.ccclass,l=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.black_chess=null,t.white_chess=null,t.chess_parent=null,t.judgeSize=15,t.maze=[],t.state=c.BLACKCHESS,t.win=2,t.sum=0,t.block=46,t.whose_round=0,t.gameScene=null,t.AITurn=null,t.myTurn=!0,t.is_ani=!1,t.chess_map=[],t.chess_list=[],t.chess_pos=[],t.new_userChessPso=[],t.new_aiChessPso=[],t.chess_index=[],t.front_com=null,t.newx=0,t.newY=0,t.canWin=[],t.winCount=0,t.myWin=[],t.istouch=!0,t.ai_huiqi=2,t.ai_huiqi_judge=!0,t.ai_qiuhe_judge=!0,t.ai_heqi=2,t.dazhao_num=0,t.yilun_qizi_v2=[],t.bushu=0,t.is_xueyulianzhu=!1,t.zhenfa_level=0,t.is_zhenfa_over=!1,t.wulei_to_fenlie_max=1,t.wulei_to_fenlie=0,t.bagua_to_fenlie_max=1,t.bagua_to_fenlie=0,t.fenlie_number=0,t.rowSum=0,t.colSum=0,t.biasSumB=0,t.biasSumA=0,t.checkMode=[[1,0],[0,1],[1,1],[1,-1]],t.judge_num=5,t.juesha_judge=!1,t.huiqiJudge=!0,t}return o(t,e),t.prototype.initWin=function(){for(var e=0;e<15;e++){this.canWin[e]=[];for(var t=0;t<15;t++)this.canWin[e][t]=[]}for(e=0;e<15;e++)for(t=0;t<11;t++){for(var a=0;a<5;a++)this.canWin[e][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<15;t++){for(a=0;a<5;a++)this.canWin[e+a][t][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<11;t++){for(a=0;a<5;a++)this.canWin[e+a][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=14;t>3;t--){for(a=0;a<5;a++)this.canWin[e+a][t-a][this.winCount]=!0;this.winCount++}console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa:",this.winCount),console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa11111:",this.canWin)},t.prototype.onLoad=function(){r.conMager.getInstance()._msgAtion.on("user_huiqi_fun",this.user_huiqi_fun,this),r.conMager.getInstance()._msgAtion.on("ds_huiqi_fun",this.ds_huiqi_fun,this)},t.prototype.init=function(e){this.gameScene=e,this.gameScene.gameType>=3&&(this.myTurn=!0);for(var t=0,a=0;a<this.judgeSize;a++){this.maze[a]=[];for(var n=0;n<this.judgeSize;n++)this.maze[a][n]=0,this.chess_map[t]=null,this.chess_pos[t]=[],t+=1}this.addListenner(),this.AITurn.RightRate=this.gameScene.RightRate,this.yilun_qizi_v2=[]},t.prototype.setCanju=function(e){for(var t=e.black.split(","),a=e.white.split(","),n=0;n<t.length;n++){var o=Math.floor(Number(t[n])/15),i=Math.floor(Number(t[n])%15),s=Math.floor(Number(a[n])/15),r=Math.floor(Number(a[n])%15);this.changeToJudgeBoard(o*this.block,i*this.block),this.new_userChessPso.push(o,i),this.changeToJudgeBoard(s*this.block,r*this.block),this.new_aiChessPso.push(s,r)}},t.prototype.AIXianShou=function(){var e=this;this.bushu++,this.state=-1,this.myTurn=!1,this.scheduleOnce(function(){e.gameScene.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,e.AITurn.addPos(7,7,e.state),e.new_aiChessPso.push([7,7]),e.changeToJudgeBoard(322,322)},3)},t.prototype.initAI=function(e){this.AITurn=e},t.prototype.initfront=function(e){this.front_com=e},t.prototype.onTouched=function(e){if(console.log("\u89e6\u6478\u5c4f\u5e55:",this.myTurn,this.istouch),this.myTurn&&this.istouch){console.error("\u4e0b\u5b8c\u4e86"),this.bushu++,this.fenlie_number=0;var t=e.getLocation(),a=this.node.convertToNodeSpaceAR(t),n=this.getPosByInt(Math.floor(a.x)),o=this.getPosByInt(Math.floor(a.y));this.newx=n,this.newY=o,this.new_userChessPso.push([n/this.block,o/this.block]),this.new_userChessPso.length>0&&(1!=r.GameDataStorage.gameStateData.gameType&&3!=r.GameDataStorage.gameStateData.gameType||r.conMager.getInstance()._msgAtion.emit("openHuiqi")),this.changeToJudgeBoard(n,o)}},t.prototype.aiLuozi=function(e){console.log("\u89e6\u53d1ai",this.win,this.myTurn,this.ai_huiqi_judge,",\u7c7b\u578b\u5462",this.gameScene.gameType),3==this.gameScene.gameType||2!=this.win||this.myTurn||!this.ai_huiqi_judge||this.juesha_judge||this.ailuozi_public_fun(e)},t.prototype.ailuozi_public_fun=function(e,t){var a=this;void 0===t&&(t=!0),this.bushu++,this.AITurn.AIPosition(this.newx,this.newY,function(t){var n=r.NumberUtil.randomNum(1,3);e&&(n=e),a.new_aiChessPso.push([t.x/a.block,t.y/a.block]),a.scheduleOnce(function(){a.changeToJudgeBoard(t.x,t.y)},n)},!t)},t.prototype.ai_qiuhe=function(){var e=this;this.ai_qiuhe_judge&&(this.ai_heqi<=0||(this.ai_heqi-=1,2!=this.gameScene.gameType&&this.gameScene.gameType!=s.game_type.luandou_jxmc||(this.ai_heqi-=1),this.ai_qiuhe_judge=!1,r.conMager.getInstance().getPoolNode(r.KEY.poolName.heqi_panel,this.node.parent,{type:"ds_qiuhe",callBack:function(t){console.log("\u6094\u68cb\u7684\u56de\u8c03\u542b\u6f31",t),e.ai_qiuhe_judge=!0,2==t&&r.conMager.getInstance()._msgAtion.emit("pingju")}})))},t.prototype.getPosByInt=function(e){var t=1;e<0?(e=-e,t=-1):t=1;var a=e%this.block;return e=Math.floor(e/this.block)*this.block,a-this.block/2>=0&&(e+=this.block),e*t},t.prototype.changeToJudgeBoard=function(e,t){var a=this,n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(this.newY=t,this.newx=e,0==this.maze[n][o]){this.updateMyTurn(),this.gameScene.hide_hongdian();var i=n+15*o;this.chess_pos[i]=[n,o],this.maze[n][o]=this.state,this.sum+=1,this.update_Whose_round(),this.gameScene.moveInChess(e,t,this.state),this.qipan_shaomiao(this.state,function(){2==a.win&&(a.updataState(),a.istouch=!1,a.scheduleOnce(function(){a.jxmc_sure_pos(n,o,function(){a.qipan_shaomiao(a.state,function(){2==a.win&&(a.chess_index=[],a.scheduleOnce(function(){a.qipan_shaomiao(-a.state,function(){2==a.win&&(a.istouch=!0,a.state!=a.gameScene.userChess&&a.aiLuozi())})},.5))})})},.5))})}else this.myTurn=!0},t.prototype.jxmc_sure_pos=function(e,t,a){e<=0&&e++,e>=this.maze.length-1&&e--,t<=0&&t++,t>=this.maze[0].length-1&&t--,this.pos_nearby_chess(e,t,a)},t.prototype.pos_nearby_chess=function(e,t,a){for(var n=this,o=e-1,i=t-1,s=[],c=[],h=[],u=0;u<3;u++){for(var l=[],d=[],p=0;p<3;p++)d.push(this.maze[u+o][p+i]),l.push(0),0!=this.maze[u+o][p+i]&&c.push(cc.v2(u+o,p+i));s.push(l),h.push(d)}var g=cc.v2(e*this.block-1.5,t*this.block);r.conMager.getInstance().getPoolNode(r.KEY.poolName.jxmc_jixie,this.node,g,h,function(){for(var e=0;e<c.length;e++){var t=c[e].x+15*c[e].y;n.chess_map[t].destroy(),n.chess_map[t]=null,n.AITurn.delPos(c[e].x,c[e].y,n.maze[c[e].x][c[e].y]),n.maze[c[e].x][c[e].y]=0}for(e=0;e<s.length;e++)for(var a=0;a<s[e].length;a++)s[e][a]=h[Math.abs(2-a)][e]},function(){for(var r=0;r<s.length;r++)for(var c=0;c<s[r].length;c++)if(n.maze[r+o][c+i]=s[r][c],0!=n.maze[r+o][c+i]){var u=r+o+15*(c+i),l=null;switch(n.maze[r+o][c+i]){case-1:l=n.black_chess;break;case 1:l=n.white_chess}var d=cc.instantiate(l);d.parent=n.chess_parent,n.chess_map[u]=d,d.setPosition((r+o)*n.block,(c+i)*n.block),n.AITurn.addPos(r+o,c+i,n.maze[r+o][c+i])}a(),n.gameScene.show_hongdian(e,t),console.log("\u770b\u770b\u626d\u8f6c\u6210\u548b\u6837"),console.log(h),console.log(s)})},t.prototype.xuanze_zhenfa=function(){this.gameScene.change_zhenfa(this.myTurn)},t.prototype.update_Whose_round=function(){0==this.whose_round?this.whose_round=1:this.whose_round=0},t.prototype.updateMyTurn=function(){this.myTurn=!this.myTurn},t.prototype.updataState=function(){this.state*=-1},t.prototype.showDaZhao=function(){var e;this.wulei_to_fenlie=0,this.bagua_to_fenlie=0,e=this.getZhenFaName(-1*this.state).zhenFaName;var t=r.GameDataStorage.getUser().userData.zhenFaMap[e].attr;if(this.gameScene.moveInChess(this.newx,this.newY,this.state),this.dazhao_num+=1,r.NumberUtil.randomNum(6,10),1==t)this.start_dazhao(e);else if(2==t){if(console.log("\u88ab\u52a8\u6280\u80fd",e),"fenlie"==e)return void this.start_dazhao(e);this.dz_judge()}},t.prototype.start_dazhao=function(e,t){if(!this.juesha_judge){var a=this.state;t&&(a=t),r.conMager.getInstance()._msgAtion.emit("closeSet"),r.conMager.getInstance()._msgAtion.emit("stopTimeDel"),this.front_com.showFront(a,e,this.daZhaoCb.bind(this))}},t.prototype.dz_judge=function(e){var t=this;this.qipan_shaomiao(this.state,function(){var a,n;"xueyuyingsha"==e&&r.conMager.getInstance()._msgAtion.emit("del_xueXian"),a=t.getZhenFaName(t.state).zhenFaName,n=t.getZhenFaName(t.state).is_user;var o=r.GameDataStorage.getUser().userData.zhenFaMap[a].attr;1==o?2!=t.win?t.jueSha():t.updateround():2==o&&("kedi"==a?2!=t.win?(t.judge_num=5,t.judge_num+=n?r.GameDataStorage.gameStateData.ds_zhenfalevel:r.GameDataStorage.getUser().userData.zhenFaMap.kedi.level,t.qipan_shaomiao(t.state,function(){console.log("\u53ef\u654c\u5148\u673a \u8fdb\u6765\u4e86",t.judge_num,t.win,t.state),2==t.win||0==t.win?t.start_dazhao(a):t.jueSha()},t.judge_num)):t.updateround():"bagua"==a?t.start_dazhao(a):"wulei"==a?2!=t.win?t.jueSha():t.updateround():"fenlie"==a&&(2!=t.win?t.jueSha():t.updateround()))})},t.prototype.updateround=function(e){var t=this,a=!1;this.state==this.gameScene.userChess&&(a=!0),this.updateMyTurn(),this.update_Whose_round(),this.updataState();var n=r.GameDataStorage.gameStateData.userZhenFaName,o=r.GameDataStorage.gameStateData.dsZhenFaName;this.gameScene.stopTime(),this.gameScene.startTime(this.state),a?(console.log("\u5230\u5bf9\u624b\u4e86\u54e6",this.state),"meihua"==o&&this.front_com.ds_meihua_num>0?(r.conMager.getInstance().playAudioEff("nv/nvmeihuapo"),this.front_com.add_zhenfa_ani(o,"po",function(){r.conMager.getInstance()._msgAtion.emit("meihua_zhakai",t.state),t.scheduleOnce(function(){t.aiLuozi(e)},1)},!a)):this.aiLuozi(e)):(this.istouch=!0,"meihua"==n&&this.front_com.user_meihua_num>0&&(r.conMager.getInstance().playAudioEff("nan/nanmeihuapo"),this.front_com.add_zhenfa_ani(n,"po",function(){r.conMager.getInstance()._msgAtion.emit("meihua_zhakai",t.state)},!a)))},t.prototype.daZhaoCb=function(e){var t=this,a=r.GameDataStorage.getUser().userData.zhenFaMap[e].attr,n=!1,o=this.getZhenFaName(this.state),i=this.getZhenFaName(-1*this.state);if(console.log("\u5927\u62db\u64ad\u653e\u5b8c\u6bd5:",o.zhenFaName,e,this.dazhao_num),r.conMager.getInstance()._msgAtion.emit("startTimeDel"),r.conMager.getInstance()._msgAtion.emit("openSet"),2==a){var s=5;if("kedi"==e){var c=o.level;this.judge_num=c+5,s=this.judge_num,this.qipan_shaomiao(this.state,function(){if(console.log("\u514b\u654c\u5148\u673a\u653e\u5b8c\u4e86",t.win,o),2==t.win){if("wulei"==o.zhenFaName||"wulei"==i.zhenFaName)return void t.start_dazhao("wulei",t.state);t.updateround(.5)}else t.updataState(),t.jueSha()},s)}else if("bagua"==e)"fenlie"==(u=(h=this.getZhenFaName(-1*this.state)).zhenFaName)?this.start_dazhao(h.zhenFaName,this.state):this.qipan_shaomiao(this.state,function(){2==t.win||0==t.win?t.qipan_shaomiao(-1*t.state,function(){var e=t.getZhenFaName(-1*t.state),a=e.zhenFaName,n=e.level;console.log("\u516b\u5366\u9635\u653e\u5b8c\u4e86",t.win,n+5,a,t.state),"kedi"==a?2!=t.win?t.qipan_shaomiao(-1*t.state,function(){console.log("\u516b\u5366\u9635\u540e\u7684\u514b\u654c\u5148\u673a",t.win,n+5),2==t.win?t.start_dazhao(a,-1*t.state):(t.updataState(),t.jueSha())},n+5):t.updateround(.5):"wulei"==a?t.start_dazhao(e.zhenFaName,-1*t.state):2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},s):(t.updataState(),t.jueSha())},s);else if("wulei"==e){var h,u,l=this.getZhenFaName(this.state).zhenFaName,d=5;if("kedi"==l&&(this.state==this.gameScene.userChess?d+=r.GameDataStorage.gameStateData.ds_zhenfalevel:d+=r.GameDataStorage.getUser().userData.zhenFaMap.kedi.level),"fenlie"==(u=(h=this.getZhenFaName(-1*this.state)).zhenFaName))return void this.start_dazhao(u,this.state);this.qipan_shaomiao(this.state,function(){console.log("\u4e94\u96f7\u9635\u653e\u5b8c\u4e86",t.win,l),2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},d)}else if("fenlie"==e){var p=this.getZhenFaName(this.state),g=p.zhenFaName,_=function(){if(2==t.win){var e=t.getZhenFaName(t.state).zhenFaName;"wulei"==e?t.wulei_to_fenlie<t.wulei_to_fenlie_max?(t.wulei_to_fenlie++,t.start_dazhao(e,t.state)):t.updateround(.5):"bagua"==e&&t.bagua_to_fenlie<t.bagua_to_fenlie_max?(t.bagua_to_fenlie++,t.start_dazhao(e,t.state)):t.updateround(.5)}else t.updataState(),t.jueSha()};"wulei"==g||"bagua"==g?(0==this.fenlie_number?_():this.qipan_shaomiao(this.state,function(){_()},s),this.fenlie_number++):"kedi"==g?(c=p.level,this.judge_num=c+5,this.qipan_shaomiao(this.state,function(){console.log("\u5206\u88c2\u514b\u654c\u80fd\u4e94\u5b50\u8fde\u73e0"),2==t.win?t.updateround(.5):t.qipan_shaomiao(t.state,function(){console.log("\u591a\u5c11\u554a",t.judge_num),2==t.win?t.start_dazhao(g,t.state):(t.updataState(),t.jueSha())},t.judge_num)},5)):this.qipan_shaomiao(this.state,function(){_()},s)}}else if(1==a)if(console.log("\u4e3b\u52a8\u6280\u80fd\u653e\u5b8c\u4e86",this.state),"xueyuyingsha"==e){var m=this.front_com.xueyuChessPosList.length;if(console.log("\u4e3b\u52a8\u6280\u80fd\u653e\u5b8c\u4e8611111111",m,o.level,o.zhenFaName),"wulei"==o.zhenFaName||"wulei"==i.zhenFaName)return r.conMager.getInstance()._msgAtion.emit("del_xueXian"),void this.start_dazhao("wulei",this.state);if("bagua"==o.zhenFaName)return r.conMager.getInstance()._msgAtion.emit("del_xueXian"),void this.start_dazhao("bagua",this.state);"kedi"==o.zhenFaName?(this.state==this.gameScene.userChess&&(n=!0),c=o.level,m>=5&&m>=c+5?this.front_com.add_zhenfa_ani("pokedi","animation",function(){t.chess_index=t.front_com.xueyuChessPosList,t.win=t.state,t.is_xueyulianzhu=!0,t.jueSha()},!n):this.dz_judge(e)):m>=5?(this.chess_index=this.front_com.xueyuChessPosList,this.win=this.state,this.is_xueyulianzhu=!0,this.jueSha()):this.dz_judge(e)}else{if("wulei"==o.zhenFaName||"wulei"==i.zhenFaName)return void this.start_dazhao("wulei",this.state);this.dz_judge(e)}},t.prototype.meihuazhencb=function(e){var t=this,a=this.getZhenFaName(this.state);console.log("\u6885\u82b1\u56de\u8c03\u8fdb\u6765\u4e86\u5417",e,a),this.qipan_shaomiao(e,function(){console.log("\u6885\u82b1\u56de\u8c03\u8fdb\u6765\u4e86\u5417222222222222",t.win),2!=t.win&&("kedi"==a.zhenFaName?(t.judge_num=a.level+5,t.qipan_shaomiao(e,function(){console.log("\u6885\u82b1\u56de\u8c03\u8fdb\u6765\u4e86\u54173333333333333",t.win),2!=t.win&&t.jueSha()},t.judge_num)):t.jueSha())})},t.prototype.getZhenFaName=function(e){var t="wanning",a=!1,n=1;return e==this.gameScene.userChess?(a=!0,t=r.GameDataStorage.gameStateData.dsZhenFaName,n=r.GameDataStorage.gameStateData.ds_zhenfalevel):(t=r.GameDataStorage.gameStateData.userZhenFaName,n=r.GameDataStorage.getUser().userData.zhenFaMap[t].level),{zhenFaName:t,is_user:a,level:n}},t.prototype.dazhao_moveInChess=function(e,t,a,n){var o=Math.floor(e/this.block),i=Math.floor(t/this.block);if(cc.v2(o,i),!(o>14||i>14||o<0||i<0)&&0==this.maze[o][i]){if(n&&"meihua"==n){var s;s=a>0?2:-2,this.maze[o][i]=s}else this.maze[o][i]=a;var r=o+15*i;this.chess_pos[r]=[o,i],this.newY=t,this.newx=e,this.sum+=1,this.AITurn.addPos(o,i,a),this.gameScene.moveInChess(e,t,a,!0)}},t.prototype.meihuaZhenLuozi=function(e,t,a){var n=e,o=t;if(e=Math.floor(e*this.block),t=Math.floor(t*this.block),!(n>14||o>14||n<0||o<0)){var i;a>0?2:-2,i=a,this.maze[n][o]=i;var s=n+15*o;this.chess_pos[s]=[n,o],this.newY=t,this.newx=e,this.sum+=1,this.AITurn.addPos(n,o,a),this.gameScene.moveInChess(e,t,a,!0)}},t.prototype.qipan_shaomiao=function(e,t,a){if(!this.juesha_judge)if(a||(a=5),this.win=2,2==this.gameScene.gameType||this.gameScene.gameType==s.game_type.lianzhao||this.gameScene.gameType==s.game_type.luandou_jxmc)for(var n=0;n<15;n++)for(var o=0;o<15;o++)for(var i=0;i<4;i++){if(this.checkWin(n,o,e,this.checkMode[i],a))return t();if(14==n&&14==o&&3==i)return t()}else for(i=0;i<4;i++){if(this.checkWin(this.newx/46,this.newY/46,e,this.checkMode[i],a))return t();if(3==i)return t()}},t.prototype.checkWin=function(e,t,a,n,o){if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.chess_index=[];var i=[e,t];this.chess_index.push(i);for(var s=1,r=1;r<15;r++)if(this.maze[e+r*n[0]]){var c=e+r*n[0],h=t+r*n[1];if(this.maze[c][h]!=a)break;s++;var u=[c,h];this.chess_index.push(u)}for(var l=1;l<15;l++)if(this.maze[e-l*n[0]]){if(c=e-l*n[0],h=t-l*n[1],this.maze[c][h]!=a)break;s++;var d=[c,h];this.chess_index.push(d)}return s>=o?(this.win=2==a?1:-2==a?-1:a,console.error("\u8d70\u8fd9\u8fb9\u7684!!!",a,",",this.win,this.chess_index),this.judge(),!0):(this.sum>=225&&(console.error("\u70b8\u4e86\uff01\uff01\uff01\uff01"),this.win=0),!1)}},t.prototype.judge=function(){var e=this;2==this.gameScene.gameType||this.gameScene.gameType==s.game_type.lianzhao||2!=this.win&&this.scheduleOnce(function(){e.jueSha()},.1)},t.prototype.jueSha=function(){var e=this;if(1!=this.juesha_judge)if(r.conMager.getInstance()._msgAtion.emit("closeAllSetBtn"),this.juesha_judge=!0,this.ai_qiuhe_judge=!1,this.gameScene.count_down.active=!1,0!=this.win){var t="nv/nv";this.win==this.gameScene.userChess&&(t="nan/nan"),this.gameScene.node.getChildByName("mask").active=!0,this.myTurn=!1;var a=this.chess_index.length;this.scheduleOnce(function(){var n=.1;a>20&&(n=2/a);for(var o=function(o){var i=e.chess_index[o],s=i[0]+15*i[1];e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff("btn1");var n=e.chess_map[s];n.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.callFunc(function(){n.getChildByName("guang").active=!0,o==a-1&&(e.is_xueyulianzhu?r.conMager.getInstance().getPoolNode(r.KEY.poolName.lianzhu,cc.find("Cnavas"),{num:a,callBack:function(){e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(t+"juesha")},.3),r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}})}}):(e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(t+"juesha")},.3),r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}})))})))},o*n)},i=0;i<a;i++)o(i)},.5)}else this.gameScene.gameOver()},t.prototype.addListenner=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.removeListennner=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.user_huiqi_fun=function(){if(console.log("\u6765\u6094\u68cb",this.state,this.gameScene.gameType),this.gameScene.gameType==s.game_type.canju){this.state=this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;if(this.new_userChessPso.length<=0)return;return this.gameScene.hongDian.active=!1,void this.huiqi_destory(this.new_userChessPso,this.state)}3==this.gameScene.gameType?this.huiqiJudge?(this.huiqi_destory(this.new_userChessPso),this.updataState(),this.gameScene.startTime(this.state)):r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u8bf7\u5148\u843d\u5b50!"):(this.state=this.gameScene.userChess,e=this.new_aiChessPso.length,t=this.new_userChessPso.length,console.log("\u6094\u68cb\u6570\u7ec4\u957f\u5ea6:  ai:",e+"__\u73a9\u5bb6 :"+t),this.huiqi_destory(this.new_userChessPso,this.state),e>t?this.huiqi_destory(this.new_aiChessPso,-1*this.state):e==t&&-1==this.gameScene.userChess&&this.huiqi_destory(this.new_aiChessPso,-1*this.state)),this.gameScene.hongDian.active=!1,this.new_userChessPso.length<=0&&r.conMager.getInstance()._msgAtion.emit("closeHuiqi")},t.prototype.ds_huiqi_fun=function(){console.log("AI\u6765\u6094\u68cb",this.state),this.state=-1*this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;this.huiqi_destory(this.new_aiChessPso,this.state),t>e?this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess):e==t&&-1!=this.gameScene.userChess&&this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess),this.ai_huiqi-=1,this.gameScene.startTime(this.state),this.myTurn=!1,this.ai_huiqi_judge=!0,this.gameScene.hongDian.active=!1,this.aiLuozi()},t.prototype.huiqi_destory=function(e,t){var a=e[e.length-1],n=a[0]+15*a[1],o=this.chess_map[n];this.chess_map[n]=null,this.maze[a[0]][a[1]]=0,e.splice(e.length-1),this.chess_pos[n]=[],o.destroy(),this.AITurn.delPos(a[0],a[1],-1*t)},i([l({type:cc.Prefab,tooltip:"\u9ed1\u5b50"})],t.prototype,"black_chess",void 0),i([l({type:cc.Prefab,tooltip:"\u767d\u5b50"})],t.prototype,"white_chess",void 0),i([l({type:cc.Node,tooltip:"\u68cb\u5b50\u7236\u8282\u70b9"})],t.prototype,"chess_parent",void 0),i([u],t)}(cc.Component);a.GameBoard_jxmc=d,cc._RF.pop()},{"../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../Piece":"Piece"}],GameBoard_lianzhao:[function(e,t,a){"use strict";cc._RF.push(t,"395aerNaQ9PKIw66gIIgKub","GameBoard_lianzhao");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.GameBoard_lianzhao=void 0;var s=e("../../../SSSGF/ssscgf"),r=e("../Piece"),c=e("../../../SSSGF/dataController/DATA"),h=cc._decorator,u=h.ccclass,l=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.judgeSize=15,t.maze=[],t.state=r.BLACKCHESS,t.win=2,t.sum=0,t.block=46,t.whose_round=0,t.gameScene=null,t.AITurn=null,t.myTurn=!0,t.is_ani=!1,t.chess_map=[],t.chess_list=[],t.chess_pos=[],t.new_userChessPso=[],t.new_aiChessPso=[],t.chess_index=[],t.front_com=null,t.newx=0,t.newY=0,t.canWin=[],t.winCount=0,t.myWin=[],t.istouch=!0,t.ai_huiqi=2,t.ai_huiqi_judge=!0,t.ai_qiuhe_judge=!0,t.ai_heqi=2,t.dazhao_num=0,t.yilun_qizi_v2=[],t.is_zhenfa_over=!1,t.wulei_to_fenlie_max=1,t.wulei_to_fenlie=0,t.bagua_to_fenlie_max=1,t.bagua_to_fenlie=0,t.fenlie_number=0,t.rowSum=0,t.colSum=0,t.biasSumB=0,t.biasSumA=0,t.checkMode=[[1,0],[0,1],[1,1],[1,-1]],t.judge_num=5,t.juesha_judge=!1,t.huiqiJudge=!0,t}return o(t,e),t.prototype.initWin=function(){for(var e=0;e<15;e++){this.canWin[e]=[];for(var t=0;t<15;t++)this.canWin[e][t]=[]}for(e=0;e<15;e++)for(t=0;t<11;t++){for(var a=0;a<5;a++)this.canWin[e][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<15;t++){for(a=0;a<5;a++)this.canWin[e+a][t][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<11;t++){for(a=0;a<5;a++)this.canWin[e+a][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=14;t>3;t--){for(a=0;a<5;a++)this.canWin[e+a][t-a][this.winCount]=!0;this.winCount++}console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa:",this.winCount),console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa11111:",this.canWin)},t.prototype.onLoad=function(){s.conMager.getInstance()._msgAtion.on("user_huiqi_fun",this.user_huiqi_fun,this),s.conMager.getInstance()._msgAtion.on("ds_huiqi_fun",this.ds_huiqi_fun,this)},t.prototype.init=function(e){this.gameScene=e,this.gameScene.gameType>=3&&(this.myTurn=!0);for(var t=0,a=0;a<this.judgeSize;a++){this.maze[a]=[];for(var n=0;n<this.judgeSize;n++)this.maze[a][n]=0,this.chess_map[t]=null,this.chess_pos[t]=[],t+=1}this.addListenner(),this.AITurn.RightRate=this.gameScene.RightRate,this.yilun_qizi_v2=[]},t.prototype.setCanju=function(e){for(var t=e.black.split(","),a=e.white.split(","),n=0;n<t.length;n++){var o=Math.floor(Number(t[n])/15),i=Math.floor(Number(t[n])%15),s=Math.floor(Number(a[n])/15),r=Math.floor(Number(a[n])%15);this.changeToJudgeBoard(o*this.block,i*this.block),this.new_userChessPso.push(o,i),this.changeToJudgeBoard(s*this.block,r*this.block),this.new_aiChessPso.push(s,r)}},t.prototype.AIXianShou=function(){this.state=-1,this.myTurn=!1,this.scheduleOnce(function(){this.gameScene.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.AITurn.addPos(7,7,this.state),this.new_aiChessPso.push([7,7]),this.changeToJudgeBoard(322,322)},3)},t.prototype.initAI=function(e){this.AITurn=e},t.prototype.initfront=function(e){this.front_com=e},t.prototype.onTouched=function(e){if(console.log("\u89e6\u6478\u5c4f\u5e55:",this.myTurn,this.istouch),this.myTurn&&(2!=this.gameScene.gameType||this.istouch)){this.fenlie_number=0;var t=e.getLocation(),a=this.node.convertToNodeSpaceAR(t),n=this.getPosByInt(Math.floor(a.x)),o=this.getPosByInt(Math.floor(a.y));if(this.newx=n,this.newY=o,this.new_userChessPso.push([n/this.block,o/this.block]),this.new_userChessPso.length>0&&(1!=s.GameDataStorage.gameStateData.gameType&&3!=s.GameDataStorage.gameStateData.gameType||s.conMager.getInstance()._msgAtion.emit("openHuiqi")),this.changeToJudgeBoard(n,o),(1==this.gameScene.gameType||5==this.gameScene.gameType||this.gameScene.gameType==c.game_type.lianzhao)&&(this.aiLuozi(),this.sum>=20&&s.NumberUtil.randomNum(1,100)<6&&this.ai_heqi>0)){var i=this.AITurn.jushi_judge();console.log("ai\u6c42\u548c\u7684\u5206\u6570:",i),this.juesha_judge||(this.sum>=180?this.ai_qiuhe():i.myScore_1>i.computerScore_1&&this.ai_qiuhe())}}},t.prototype.aiLuozi=function(e){3==this.gameScene.gameType||2!=this.win||this.myTurn||!this.ai_huiqi_judge||this.juesha_judge||this.ailuozi_public_fun(e)},t.prototype.ailuozi_public_fun=function(e,t){var a=this;void 0===t&&(t=!0),this.AITurn.AIPosition(this.newx,this.newY,function(t){var n=s.NumberUtil.randomNum(1,3);e&&(n=e),a.new_aiChessPso.push([t.x/a.block,t.y/a.block]),a.scheduleOnce(function(){this.changeToJudgeBoard(t.x,t.y)},n)},!t)},t.prototype.ai_qiuhe=function(){var e=this;this.ai_qiuhe_judge&&(this.ai_heqi<=0||(this.ai_heqi-=1,2==this.gameScene.gameType&&(this.ai_heqi-=1),this.ai_qiuhe_judge=!1,s.conMager.getInstance().getPoolNode(s.KEY.poolName.heqi_panel,this.node.parent,{type:"ds_qiuhe",callBack:function(t){console.log("\u6094\u68cb\u7684\u56de\u8c03\u542b\u6f31",t),e.ai_qiuhe_judge=!0,2==t&&s.conMager.getInstance()._msgAtion.emit("pingju")}})))},t.prototype.getPosByInt=function(e){var t=1;e<0?(e=-e,t=-1):t=1;var a=e%this.block;return e=Math.floor(e/this.block)*this.block,a-this.block/2>=0&&(e+=this.block),e*t},t.prototype.changeToJudgeBoard=function(e,t){var a=this,n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(this.newY=t,this.newx=e,0==this.maze[n][o]){this.istouch=!1,1!=this.gameScene.gameType&&5!=this.gameScene.gameType&&this.gameScene.gameType!=c.game_type.lianzhao||this.updateMyTurn();var i=n+15*o;if(this.chess_pos[i]=[n,o],this.maze[n][o]=this.state,this.sum+=1,2!=this.gameScene.gameType)this.update_Whose_round(),this.gameScene.moveInChess(e,t,this.state),this.qipan_shaomiao(this.state,function(){a.updataState()});else{this.yilun_qizi_v2=[];var s=cc.v2(n,o);this.yilun_qizi_v2.push(s),this.showDaZhao()}}else this.myTurn=!0},t.prototype.xuanze_zhenfa=function(){this.updateMyTurn(),this.gameScene.change_zhenfa(this.myTurn)},t.prototype.spiralMatrix=function(e){for(var t=-7;t<=7;t++)for(var a=-7;a<=7;a++){var n=Math.max(Math.abs(t),Math.abs(a)),o=n*n*4-2*n+1,i=0;t==-n?i=o+2*n+n-a:a==n?i=o+n-t:a==-n?i=o+4*n+t+n:t==n&&(i=o-(n-a));var s=new cc.Vec2(46*t+322,322-46*a);e.set(i,s)}},t.prototype.update_Whose_round=function(){0==this.whose_round?this.whose_round=1:this.whose_round=0},t.prototype.updateMyTurn=function(){this.myTurn=!this.myTurn},t.prototype.updataState=function(){this.state*=-1},t.prototype.showDaZhao=function(){var e;this.wulei_to_fenlie=0,this.bagua_to_fenlie=0,e=this.getZhenFaName(-1*this.state).zhenFaName;var t=s.GameDataStorage.getUser().userData.zhenFaMap[e].attr;this.gameScene.moveInChess(this.newx,this.newY,this.state),this.dazhao_num+=1;var a=s.NumberUtil.randomNum(6,10);if(this.dazhao_num>=a&&this.ai_qiuhe(),1==t)this.start_dazhao(e);else if(2==t){if(console.log("\u88ab\u52a8\u6280\u80fd",e),"fenlie"==e)return void this.start_dazhao(e);this.dz_judge()}},t.prototype.start_dazhao=function(e,t){if(!this.juesha_judge){var a=this.state;t&&(a=t),s.conMager.getInstance()._msgAtion.emit("closeSet"),this.front_com.showFront(a,e,this.daZhaoCb.bind(this))}},t.prototype.dz_judge=function(){var e=this;this.qipan_shaomiao(this.state,function(){var t,a;console.log("\u54ce\u5440kjiomnil",e.win,e.state),t=e.getZhenFaName(e.state).zhenFaName,a=e.getZhenFaName(e.state).is_user;var n=s.GameDataStorage.getUser().userData.zhenFaMap[t].attr;1==n?2!=e.win?e.jueSha():e.updateround():2==n&&("kedi"==t?2!=e.win?(e.judge_num=5,e.judge_num+=a?s.GameDataStorage.gameStateData.ds_zhenfalevel:s.GameDataStorage.getUser().userData.zhenFaMap.kedi.level,e.qipan_shaomiao(e.state,function(){console.log("\u53ef\u654c\u5148\u673a \u8fdb\u6765\u4e86",e.judge_num,e.win,e.state),2==e.win||0==e.win?e.start_dazhao(t):e.jueSha()},e.judge_num)):e.updateround():"bagua"==t?e.start_dazhao(t):"wulei"==t?2!=e.win?e.jueSha():e.updateround():"fenlie"==t&&(2!=e.win?e.jueSha():e.updateround()))})},t.prototype.updateround=function(e){var t=!1;this.state==this.gameScene.userChess&&(t=!0),this.updateMyTurn(),this.update_Whose_round(),this.updataState(),t?this.aiLuozi(e):this.istouch=!0},t.prototype.daZhaoCb=function(e){var t=this,a=s.GameDataStorage.getUser().userData.zhenFaMap[e].attr,n=this.getZhenFaName(this.state),o=this.getZhenFaName(-1*this.state);if(console.log("\u5927\u62db\u64ad\u653e\u5b8c\u6bd5:",n.zhenFaName,e,this.dazhao_num),s.conMager.getInstance()._msgAtion.emit("openSet"),2==a){var i=5;if("kedi"==e)i=this.judge_num,this.qipan_shaomiao(this.state,function(){if(console.log("\u514b\u654c\u5148\u673a\u653e\u5b8c\u4e86",t.win),2==t.win){if("wulei"==n.zhenFaName||"wulei"==o.zhenFaName)return void t.start_dazhao("wulei",t.state);t.updateround(.5)}else t.updataState(),t.jueSha()},i);else if("bagua"==e)"fenlie"==(c=(r=this.getZhenFaName(-1*this.state)).zhenFaName)?this.start_dazhao(r.zhenFaName,this.state):this.qipan_shaomiao(this.state,function(){2==t.win||0==t.win?t.qipan_shaomiao(-1*t.state,function(){var e=t.getZhenFaName(-1*t.state),a=e.zhenFaName,n=e.level;console.log("\u516b\u5366\u9635\u653e\u5b8c\u4e86",t.win,n+5,a,t.state),"kedi"==a?t.qipan_shaomiao(-1*t.state,function(){console.log("\u516b\u5366\u9635\u540e\u7684\u514b\u654c\u5148\u673a",t.win,n+5),2==t.win?t.start_dazhao(a,-1*t.state):(t.updataState(),t.jueSha())},n+5):"wulei"==a?t.start_dazhao(e.zhenFaName,-1*t.state):2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},i):(t.updataState(),t.jueSha())},i);else if("wulei"==e){var r,c,h=this.getZhenFaName(this.state).zhenFaName,u=5;if("kedi"==h&&(this.state==this.gameScene.userChess?u+=s.GameDataStorage.gameStateData.ds_zhenfalevel:u+=s.GameDataStorage.getUser().userData.zhenFaMap.kedi.level),"fenlie"==(c=(r=this.getZhenFaName(-1*this.state)).zhenFaName))return void this.start_dazhao(c,this.state);this.qipan_shaomiao(this.state,function(){console.log("\u4e94\u96f7\u9635\u653e\u5b8c\u4e86",t.win,h),2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},u)}else if("fenlie"==e){var l=this.getZhenFaName(this.state).zhenFaName,d=function(){if(2==t.win){var e=t.getZhenFaName(t.state).zhenFaName;"wulei"==e?t.wulei_to_fenlie<t.wulei_to_fenlie_max?(t.wulei_to_fenlie++,t.start_dazhao(e,t.state)):t.updateround(.5):"bagua"==e&&t.bagua_to_fenlie<t.bagua_to_fenlie_max?(t.bagua_to_fenlie++,t.start_dazhao(e,t.state)):t.updateround(.5)}else t.updataState(),t.jueSha()};"wulei"==l||"bagua"==l?(0==this.fenlie_number?d():this.qipan_shaomiao(this.state,function(){d()},i),this.fenlie_number++):this.qipan_shaomiao(this.state,function(){d()},i)}}else if(1==a){if(console.log("\u4e3b\u52a8\u6280\u80fd\u653e\u5b8c\u4e86",this.state),"wulei"==n.zhenFaName||"wulei"==o.zhenFaName)return void this.start_dazhao("wulei",this.state);this.dz_judge(e)}},t.prototype.getZhenFaName=function(e){var t="wanning",a=!1,n=1;return e==this.gameScene.userChess?(a=!0,t=s.GameDataStorage.gameStateData.dsZhenFaName,n=s.GameDataStorage.gameStateData.ds_zhenfalevel):(t=s.GameDataStorage.gameStateData.userZhenFaName,n=s.GameDataStorage.getUser().userData.zhenFaMap[t].level),{zhenFaName:t,is_user:a,level:n}},t.prototype.dazhao_moveInChess=function(e,t,a){var n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(cc.v2(n,o),!(n>14||o>14||n<0||o<0)&&0==this.maze[n][o]){this.maze[n][o]=a;var i=n+15*o;this.chess_pos[i]=[n,o],this.newY=t,this.newx=e,this.sum+=1,this.AITurn.addPos(n,o,a),this.gameScene.moveInChess(e,t,a,!0)}},t.prototype.qipan_shaomiao=function(e,t,a){if(!this.juesha_judge)if(a||(a=5),this.win=2,2==this.gameScene.gameType)for(var n=0;n<15;n++)for(var o=0;o<15;o++)for(var i=0;i<4;i++){if(this.checkWin(n,o,e,this.checkMode[i],a))return t();if(14==n&&14==o&&3==i)return t()}else for(i=0;i<4;i++){if(this.checkWin(this.newx/46,this.newY/46,e,this.checkMode[i],a))return t();if(3==i)return t()}},t.prototype.checkWin=function(e,t,a,n,o){if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.chess_index=[];var i=[e,t];this.chess_index.push(i);for(var s=1,r=1;r<15;r++)if(this.maze[e+r*n[0]]){var c=e+r*n[0],h=t+r*n[1];if(this.maze[c][h]!=a)break;s++;var u=[c,h];this.chess_index.push(u)}for(var l=1;l<15;l++)if(this.maze[e-l*n[0]]){if(c=e-l*n[0],h=t-l*n[1],this.maze[c][h]!=a)break;s++;var d=[c,h];this.chess_index.push(d)}return s>=o?(this.win=a,this.judge(),!0):(this.sum>=225&&(this.win=0),!1)}},t.prototype.judge=function(){2==this.gameScene.gameType||2!=this.win&&this.jueSha()},t.prototype.jueSha=function(){var e=this;if(1!=this.juesha_judge)if(s.conMager.getInstance()._msgAtion.emit("closeAllSetBtn"),this.juesha_judge=!0,this.ai_qiuhe_judge=!1,console.log("\u7edd\u6740\u54e6",this.win,this.state),this.gameScene.count_down.active=!1,0!=this.win){var t="nv/nv";this.win==this.gameScene.userChess&&(t="nan/nan"),this.gameScene.node.getChildByName("mask").active=!0,this.myTurn=!1;var a=this.chess_index.length;this.scheduleOnce(function(){for(var n=function(n){var o=e.chess_index[n],i=o[0]+15*o[1];e.scheduleOnce(function(){s.conMager.getInstance().playAudioEff("btn1");var o=e.chess_map[i];o.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.callFunc(function(){o.getChildByName("guang").active=!0,n==a-1&&(s.conMager.getInstance().playAudioEff(s.KEY.audioName.juesha),e.scheduleOnce(function(){s.conMager.getInstance().playAudioEff(t+"juesha")},.3),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}}))})))},.1*n)},o=0;o<a;o++)n(o)},.5)}else this.gameScene.gameOver()},t.prototype.addListenner=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.removeListennner=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.user_huiqi_fun=function(){if(console.log("\u6765\u6094\u68cb",this.state,this.gameScene.gameType),this.gameScene.gameType==c.game_type.canju){this.state=this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;if(this.new_userChessPso.length<=0)return;return this.gameScene.hongDian.active=!1,void this.huiqi_destory(this.new_userChessPso,this.state)}3==this.gameScene.gameType?this.huiqiJudge?(this.huiqi_destory(this.new_userChessPso),this.updataState(),this.gameScene.startTime(this.state)):s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node,"\u8bf7\u5148\u843d\u5b50!"):(this.state=this.gameScene.userChess,e=this.new_aiChessPso.length,t=this.new_userChessPso.length,console.log("\u6094\u68cb\u6570\u7ec4\u957f\u5ea6:  ai:",e+"__\u73a9\u5bb6 :"+t),this.huiqi_destory(this.new_userChessPso,this.state),e>t?this.huiqi_destory(this.new_aiChessPso,-1*this.state):e==t&&-1==this.gameScene.userChess&&this.huiqi_destory(this.new_aiChessPso,-1*this.state)),this.gameScene.hongDian.active=!1,this.new_userChessPso.length<=0&&s.conMager.getInstance()._msgAtion.emit("closeHuiqi")},t.prototype.ds_huiqi_fun=function(){console.log("AI\u6765\u6094\u68cb",this.state),this.state=-1*this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;this.huiqi_destory(this.new_aiChessPso,this.state),t>e?this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess):e==t&&-1!=this.gameScene.userChess&&this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess),this.ai_huiqi-=1,this.gameScene.startTime(this.state),this.myTurn=!1,this.ai_huiqi_judge=!0,this.gameScene.hongDian.active=!1,this.aiLuozi()},t.prototype.huiqi_destory=function(e,t){var a=e[e.length-1],n=a[0]+15*a[1],o=this.chess_map[n];this.chess_map[n]=null,this.maze[a[0]][a[1]]=0,e.splice(e.length-1),this.chess_pos[n]=[],o.destroy(),this.AITurn.delPos(a[0],a[1],-1*t)},i([u],t)}(cc.Component));a.GameBoard_lianzhao=l,cc._RF.pop()},{"../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../Piece":"Piece"}],GameBoard_sanren:[function(e,t,a){"use strict";cc._RF.push(t,"fa94aaGyHxMFb+C+sOezndY","GameBoard_sanren");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.GameBoard_sanren=void 0;var s=e("../Piece"),r=e("../../../SSSGF/dataController/DATA"),c=e("../../../SSSGF/ssscgf"),h=e("./chessAi_sanren2"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.judgeSize=15,t.maze=[],t.state=s.BLACKCHESS,t.win=2,t.sum=0,t.block=46,t.whose_round=0,t.gameScene=null,t.AITurn=null,t.AITurn2=null,t.myTurn=!0,t.is_ani=!1,t.chess_map=[],t.chess_list=[],t.chess_pos=[],t.new_userChessPso=[],t.new_aiChessPso=[],t.chess_index=[],t.front_com=null,t.newx=0,t.newY=0,t.canWin=[],t.winCount=0,t.myWin=[],t.istouch=!0,t.ai_huiqi=2,t.ai_huiqi_judge=!0,t.ai_qiuhe_judge=!0,t.ai_heqi=2,t.dazhao_num=0,t.yilun_qizi_v2=[],t.bushu=0,t.is_xueyulianzhu=!1,t.zhenfa_level=0,t.is_zhenfa_over=!1,t.wulei_to_fenlie_max=1,t.wulei_to_fenlie=0,t.bagua_to_fenlie_max=1,t.bagua_to_fenlie=0,t.fenlie_number=0,t.rowSum=0,t.colSum=0,t.biasSumB=0,t.biasSumA=0,t.checkMode=[[1,0],[0,1],[1,1],[1,-1]],t.judge_num=5,t.juesha_judge=!1,t.huiqiJudge=!0,t}return o(t,e),t.prototype.initWin=function(){for(var e=0;e<15;e++){this.canWin[e]=[];for(var t=0;t<15;t++)this.canWin[e][t]=[]}for(e=0;e<15;e++)for(t=0;t<11;t++){for(var a=0;a<5;a++)this.canWin[e][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<15;t++){for(a=0;a<5;a++)this.canWin[e+a][t][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<11;t++){for(a=0;a<5;a++)this.canWin[e+a][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=14;t>3;t--){for(a=0;a<5;a++)this.canWin[e+a][t-a][this.winCount]=!0;this.winCount++}console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa:",this.winCount),console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa11111:",this.canWin)},t.prototype.onLoad=function(){c.conMager.getInstance()._msgAtion.on("user_huiqi_fun",this.user_huiqi_fun,this),c.conMager.getInstance()._msgAtion.on("ds_huiqi_fun",this.ds_huiqi_fun,this)},t.prototype.init=function(e){this.gameScene=e,this.gameScene.gameType>=3&&(this.myTurn=!0);for(var t=0,a=0;a<this.judgeSize;a++){this.maze[a]=[];for(var n=0;n<this.judgeSize;n++)this.maze[a][n]=0,this.chess_map[t]=null,this.chess_pos[t]=[],t+=1}this.addListenner(),this.AITurn.RightRate=this.gameScene.RightRate,this.AITurn2.RightRate=this.gameScene.RightRate,this.yilun_qizi_v2=[]},t.prototype.setCanju=function(e){for(var t=e.black.split(","),a=e.white.split(","),n=0;n<t.length;n++){var o=Math.floor(Number(t[n])/15),i=Math.floor(Number(t[n])%15),s=Math.floor(Number(a[n])/15),r=Math.floor(Number(a[n])%15);this.changeToJudgeBoard(o*this.block,i*this.block),this.new_userChessPso.push(o,i),this.changeToJudgeBoard(s*this.block,r*this.block),this.new_aiChessPso.push(s,r)}},t.prototype.AIXianShou=function(){this.bushu++,this.state=-1,this.myTurn=!1,this.scheduleOnce(function(){this.gameScene.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.state==this.gameScene.ds_chess?this.AITurn.addPos(7,7,this.state):this.AITurn2.addPos(7,7,this.state),this.new_aiChessPso.push([7,7]),this.changeToJudgeBoard(322,322)},3)},t.prototype.initAI=function(e){this.AITurn=e},t.prototype.initfront=function(e){this.front_com=e},t.prototype.onTouched=function(e){if(console.log("\u89e6\u6478\u5c4f\u5e55:",this.myTurn,this.istouch),this.myTurn&&(2!=this.gameScene.gameType&&this.gameScene.gameType!=r.game_type.lianzhao||this.istouch)){this.bushu++,this.fenlie_number=0;var t=e.getLocation(),a=this.node.convertToNodeSpaceAR(t),n=this.getPosByInt(Math.floor(a.x)),o=this.getPosByInt(Math.floor(a.y));this.newx=n,this.newY=o,this.new_userChessPso.push([n/this.block,o/this.block]),this.changeToJudgeBoard(n,o)}},t.prototype.aiLuozi=function(e){if(console.log("\u89e6\u53d1ai",this.win,this.myTurn,this.ai_huiqi_judge,",\u7c7b\u578b\u5462",this.gameScene.gameType),3!=this.gameScene.gameType&&2==this.win&&!this.myTurn&&this.ai_huiqi_judge&&!this.juesha_judge){if((1==this.gameScene.gameType||5==this.gameScene.gameType)&&this.ai_qiuhe_judge){var t=c.NumberUtil.randomNum(1,100);if(3==t&&this.ai_huiqi>0)return this.ai_huiqi_judge=!1,void this.ailuozi_public_fun(t,this.ai_huiqi_judge)}this.ailuozi_public_fun(e)}},t.prototype.ailuozi_public_fun=function(e,t){var a=this;void 0===t&&(t=!0),this.bushu++;var n=this.AITurn;this.state==this.gameScene.ds_chess2&&(n=this.AITurn2);var o=this.AITurn2;(n=this.AITurn2)&&(n=this.AITurn),n.AIPosition(this.newx,this.newY,function(n){var o=c.NumberUtil.randomNum(2,4);e&&(o=e),a.new_aiChessPso.push([n.x/a.block,n.y/a.block]),a.scheduleOnce(function(){a.changeToJudgeBoard(n.x,n.y),a.gameScene.gameType!=r.game_type.sanren&&(t||a.scheduleOnce(function(){c.conMager.getInstance().getPoolNode(c.KEY.poolName.heqi_panel,a.node.parent,{type:"ds_huiqi",callBack:function(e){2==e?a.ds_huiqi_fun():(a.ai_huiqi_judge=!0,a.state==-1*a.gameScene.userChess&&a.aiLuozi())}})},2))},o)},!t),o.AIPosition(this.newx,this.newY)},t.prototype.ai_qiuhe=function(){var e=this;this.ai_qiuhe_judge&&(this.ai_heqi<=0||(this.ai_heqi-=1,2!=this.gameScene.gameType&&this.gameScene.gameType!=r.game_type.sanren||(this.ai_heqi-=1),this.ai_qiuhe_judge=!1,c.conMager.getInstance().getPoolNode(c.KEY.poolName.heqi_panel,this.node.parent,{type:"ds_qiuhe",callBack:function(t){console.log("\u6094\u68cb\u7684\u56de\u8c03\u542b\u6f31",t),e.ai_qiuhe_judge=!0,2==t&&c.conMager.getInstance()._msgAtion.emit("pingju")}})))},t.prototype.getPosByInt=function(e){var t=1;e<0?(e=-e,t=-1):t=1;var a=e%this.block;return e=Math.floor(e/this.block)*this.block,a-this.block/2>=0&&(e+=this.block),e*t},t.prototype.changeToJudgeBoard=function(e,t){var a=this,n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(this.newY=t,this.newx=e,0==this.maze[n][o]){this.istouch=!1;var i=n+15*o;if(this.chess_pos[i]=[n,o],this.maze[n][o]=this.state,this.sum+=1,2!=this.gameScene.gameType&&this.gameScene.gameType!=r.game_type.lianzhao)this.update_Whose_round(),this.gameScene.moveInChess(e,t,this.state),this.qipan_shaomiao(this.state,function(){a.updataState()}),this.state!=this.gameScene.userChess?(this.myTurn=!1,this.aiLuozi()):this.myTurn=!0;else{this.yilun_qizi_v2=[];var s=cc.v2(n,o);this.yilun_qizi_v2.push(s),this.showDaZhao()}}else this.myTurn=!0},t.prototype.xuanze_zhenfa=function(){this.gameScene.change_zhenfa(this.myTurn)},t.prototype.update_Whose_round=function(){0==this.whose_round?this.whose_round=1:this.whose_round=0},t.prototype.updateMyTurn=function(){this.myTurn=!this.myTurn},t.prototype.updataState=function(){console.log("\u6539\u53d8\u68cb\u5b50\u72b6\u6001"),this.state==s.BLACKCHESS?this.state=s.WHITECHESS:this.state==s.WHITECHESS?this.state=s.GOLDCHESS:this.state==s.GOLDCHESS&&(this.state=s.BLACKCHESS)},t.prototype.showDaZhao=function(){var e;this.wulei_to_fenlie=0,this.bagua_to_fenlie=0,e=this.getZhenFaName(-1*this.state).zhenFaName;var t=c.GameDataStorage.getUser().userData.zhenFaMap[e].attr;this.gameScene.moveInChess(this.newx,this.newY,this.state),this.dazhao_num+=1;var a=c.NumberUtil.randomNum(6,10);if(this.dazhao_num>=a&&this.gameScene.gameType!=r.game_type.lianzhao&&this.ai_qiuhe(),1==t)this.start_dazhao(e);else if(2==t){if(console.log("\u88ab\u52a8\u6280\u80fd",e),"fenlie"==e)return void this.start_dazhao(e);this.dz_judge()}},t.prototype.start_dazhao=function(e,t){if(!this.juesha_judge){this.gameScene.gameType==r.game_type.lianzhao&&this.gameScene.chufa_jineng(t);var a=this.state;t&&(a=t),c.conMager.getInstance()._msgAtion.emit("closeSet"),c.conMager.getInstance()._msgAtion.emit("stopTimeDel"),this.front_com.showFront(a,e,this.daZhaoCb.bind(this))}},t.prototype.dz_judge=function(e){var t=this;this.qipan_shaomiao(this.state,function(){var a,n;"xueyuyingsha"==e&&c.conMager.getInstance()._msgAtion.emit("del_xueXian"),a=t.getZhenFaName(t.state).zhenFaName,n=t.getZhenFaName(t.state).is_user;var o=c.GameDataStorage.getUser().userData.zhenFaMap[a].attr;1==o?2!=t.win?t.jueSha():t.updateround():2==o&&("kedi"==a?2!=t.win?(t.judge_num=5,t.judge_num+=n?c.GameDataStorage.gameStateData.ds_zhenfalevel:c.GameDataStorage.getUser().userData.zhenFaMap.kedi.level,t.qipan_shaomiao(t.state,function(){console.log("\u53ef\u654c\u5148\u673a \u8fdb\u6765\u4e86",t.judge_num,t.win,t.state),2==t.win||0==t.win?t.start_dazhao(a):t.jueSha()},t.judge_num)):t.updateround():"bagua"==a?t.start_dazhao(a):"wulei"==a?2!=t.win?t.jueSha():t.updateround():"fenlie"==a&&(2!=t.win?t.jueSha():t.updateround()))})},t.prototype.updateround=function(e){var t=this,a=!1;this.state==this.gameScene.userChess&&(a=!0),this.updateMyTurn(),this.update_Whose_round(),this.updataState();var n=c.GameDataStorage.gameStateData.userZhenFaName,o=c.GameDataStorage.gameStateData.dsZhenFaName;this.gameScene.stopTime(),this.gameScene.startTime(this.state),a?(console.log("\u5230\u5bf9\u624b\u4e86\u54e6",this.state),"meihua"==o&&this.front_com.ds_meihua_num>0?(c.conMager.getInstance().playAudioEff("nv/nvmeihuapo"),this.front_com.add_zhenfa_ani(o,"po",function(){c.conMager.getInstance()._msgAtion.emit("meihua_zhakai",t.state),t.scheduleOnce(function(){t.aiLuozi(e)},1)},!a)):this.aiLuozi(e)):(this.istouch=!0,"meihua"==n&&this.front_com.user_meihua_num>0&&(c.conMager.getInstance().playAudioEff("nan/nanmeihuapo"),this.front_com.add_zhenfa_ani(n,"po",function(){c.conMager.getInstance()._msgAtion.emit("meihua_zhakai",t.state)},!a)))},t.prototype.daZhaoCb=function(e){var t=this,a=c.GameDataStorage.getUser().userData.zhenFaMap[e].attr,n=!1,o=this.getZhenFaName(this.state),i=this.getZhenFaName(-1*this.state);if(console.log("\u5927\u62db\u64ad\u653e\u5b8c\u6bd5:",o.zhenFaName,e,this.dazhao_num),c.conMager.getInstance()._msgAtion.emit("startTimeDel"),c.conMager.getInstance()._msgAtion.emit("openSet"),2==a){var s=5;if("kedi"==e){var h=o.level;this.gameScene.gameType==r.game_type.lianzhao&&(h=this.state==this.gameScene.userChess?this.gameScene.user_level:this.gameScene.ds_level),this.judge_num=h+5,s=this.judge_num,this.qipan_shaomiao(this.state,function(){if(console.log("\u514b\u654c\u5148\u673a\u653e\u5b8c\u4e86",t.win,o),2==t.win){if("wulei"==o.zhenFaName||"wulei"==i.zhenFaName)return void t.start_dazhao("wulei",t.state);t.updateround(.5)}else t.updataState(),t.jueSha()},s)}else if("bagua"==e)"fenlie"==(l=(u=this.getZhenFaName(-1*this.state)).zhenFaName)?this.start_dazhao(u.zhenFaName,this.state):this.qipan_shaomiao(this.state,function(){2==t.win||0==t.win?t.qipan_shaomiao(-1*t.state,function(){var e=t.getZhenFaName(-1*t.state),a=e.zhenFaName,n=e.level;console.log("\u516b\u5366\u9635\u653e\u5b8c\u4e86",t.win,n+5,a,t.state),"kedi"==a?2!=t.win?t.qipan_shaomiao(-1*t.state,function(){console.log("\u516b\u5366\u9635\u540e\u7684\u514b\u654c\u5148\u673a",t.win,n+5),2==t.win?t.start_dazhao(a,-1*t.state):(t.updataState(),t.jueSha())},n+5):t.updateround(.5):"wulei"==a?t.start_dazhao(e.zhenFaName,-1*t.state):2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},s):(t.updataState(),t.jueSha())},s);else if("wulei"==e){var u,l,d=this.getZhenFaName(this.state).zhenFaName,p=5;if("kedi"==d&&(this.state==this.gameScene.userChess?p+=c.GameDataStorage.gameStateData.ds_zhenfalevel:p+=c.GameDataStorage.getUser().userData.zhenFaMap.kedi.level),"fenlie"==(l=(u=this.getZhenFaName(-1*this.state)).zhenFaName))return void this.start_dazhao(l,this.state);this.qipan_shaomiao(this.state,function(){console.log("\u4e94\u96f7\u9635\u653e\u5b8c\u4e86",t.win,d),2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},p)}else if("fenlie"==e){var g=this.getZhenFaName(this.state),_=g.zhenFaName,m=function(){if(2==t.win){var e=t.getZhenFaName(t.state).zhenFaName;"wulei"==e?t.wulei_to_fenlie<t.wulei_to_fenlie_max?(t.wulei_to_fenlie++,t.start_dazhao(e,t.state)):t.updateround(.5):"bagua"==e&&t.bagua_to_fenlie<t.bagua_to_fenlie_max?(t.bagua_to_fenlie++,t.start_dazhao(e,t.state)):t.updateround(.5)}else t.updataState(),t.jueSha()};"wulei"==_||"bagua"==_?(0==this.fenlie_number?m():this.qipan_shaomiao(this.state,function(){m()},s),this.fenlie_number++):"kedi"==_?(h=g.level,this.judge_num=h+5,this.qipan_shaomiao(this.state,function(){console.log("\u5206\u88c2\u514b\u654c\u80fd\u4e94\u5b50\u8fde\u73e0"),2==t.win?t.updateround(.5):t.qipan_shaomiao(t.state,function(){console.log("\u591a\u5c11\u554a",t.judge_num),2==t.win?t.start_dazhao(_,t.state):(t.updataState(),t.jueSha())},t.judge_num)},5)):this.qipan_shaomiao(this.state,function(){m()},s)}}else if(1==a)if(console.log("\u4e3b\u52a8\u6280\u80fd\u653e\u5b8c\u4e86",this.state),"xueyuyingsha"==e){var f=this.front_com.xueyuChessPosList.length;if(console.log("\u4e3b\u52a8\u6280\u80fd\u653e\u5b8c\u4e8611111111",f,o.level,o.zhenFaName),"wulei"==o.zhenFaName||"wulei"==i.zhenFaName)return c.conMager.getInstance()._msgAtion.emit("del_xueXian"),void this.start_dazhao("wulei",this.state);if("bagua"==o.zhenFaName)return c.conMager.getInstance()._msgAtion.emit("del_xueXian"),void this.start_dazhao("bagua",this.state);"kedi"==o.zhenFaName?(this.state==this.gameScene.userChess&&(n=!0),h=o.level,f>=5&&f>=h+5?this.front_com.add_zhenfa_ani("pokedi","animation",function(){t.chess_index=t.front_com.xueyuChessPosList,t.win=t.state,t.is_xueyulianzhu=!0,t.jueSha()},!n):this.dz_judge(e)):f>=5?(this.chess_index=this.front_com.xueyuChessPosList,this.win=this.state,this.is_xueyulianzhu=!0,this.jueSha()):this.dz_judge(e)}else{if("wulei"==o.zhenFaName||"wulei"==i.zhenFaName)return void this.start_dazhao("wulei",this.state);this.dz_judge(e)}},t.prototype.meihuazhencb=function(e){var t=this,a=this.getZhenFaName(this.state);console.log("\u6885\u82b1\u56de\u8c03\u8fdb\u6765\u4e86\u5417",e,a),this.qipan_shaomiao(e,function(){console.log("\u6885\u82b1\u56de\u8c03\u8fdb\u6765\u4e86\u5417222222222222",t.win),2!=t.win&&("kedi"==a.zhenFaName?(t.judge_num=a.level+5,t.qipan_shaomiao(e,function(){console.log("\u6885\u82b1\u56de\u8c03\u8fdb\u6765\u4e86\u54173333333333333",t.win),2!=t.win&&t.jueSha()},t.judge_num)):t.jueSha())})},t.prototype.getZhenFaName=function(e){var t="wanning",a=!1,n=1;return e==this.gameScene.userChess?(a=!0,t=c.GameDataStorage.gameStateData.dsZhenFaName,n=c.GameDataStorage.gameStateData.ds_zhenfalevel):(t=c.GameDataStorage.gameStateData.userZhenFaName,n=c.GameDataStorage.getUser().userData.zhenFaMap[t].level),{zhenFaName:t,is_user:a,level:n}},t.prototype.dazhao_moveInChess=function(e,t,a,n){console.error("\u4e0d\u4f1a\u628a\u4e0d\u4f1a\u5427\uff0c\u4e0d\u4f1a\u4e09\u4eba\u6a21\u5f0f\u4e5f\u6709\u5927\u62db\u843d\u5b50\u5427");var o=Math.floor(e/this.block),i=Math.floor(t/this.block);if(cc.v2(o,i),!(o>14||i>14||o<0||i<0)&&0==this.maze[o][i]){if(n&&"meihua"==n){var s;s=a>0?2:-2,this.maze[o][i]=s}else this.maze[o][i]=a;var r=o+15*i;this.chess_pos[r]=[o,i],this.newY=t,this.newx=e,this.sum+=1,this.AITurn.addPos(o,i,a),this.gameScene.moveInChess(e,t,a,!0)}},t.prototype.meihuaZhenLuozi=function(e,t,a){var n=e,o=t;if(e=Math.floor(e*this.block),t=Math.floor(t*this.block),!(n>14||o>14||n<0||o<0)){var i;a>0?2:-2,i=a,this.maze[n][o]=i;var s=n+15*o;this.chess_pos[s]=[n,o],this.newY=t,this.newx=e,this.sum+=1,this.AITurn.addPos(n,o,a),this.gameScene.moveInChess(e,t,a,!0)}},t.prototype.qipan_shaomiao=function(e,t,a){if(!this.juesha_judge)if(a||(a=4),this.win=2,2==this.gameScene.gameType||this.gameScene.gameType==r.game_type.lianzhao)for(var n=0;n<15;n++)for(var o=0;o<15;o++)for(var i=0;i<4;i++){if(this.checkWin(n,o,e,this.checkMode[i],a))return t();if(14==n&&14==o&&3==i)return t()}else for(i=0;i<4;i++){if(this.checkWin(this.newx/46,this.newY/46,e,this.checkMode[i],a))return t();if(3==i)return t()}},t.prototype.checkWin=function(e,t,a,n,o){if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.chess_index=[];var i=[e,t];this.chess_index.push(i);for(var s=1,r=1;r<15;r++)if(this.maze[e+r*n[0]]){var c=e+r*n[0],h=t+r*n[1];if(this.maze[c][h]!=a)break;s++;var u=[c,h];this.chess_index.push(u)}for(var l=1;l<15;l++)if(this.maze[e-l*n[0]]){if(c=e-l*n[0],h=t-l*n[1],this.maze[c][h]!=a)break;s++;var d=[c,h];this.chess_index.push(d)}return s>=o?(this.win=2==a?1:-2==a?-1:a,this.judge(),!0):(this.sum>=225&&(this.win=0),!1)}},t.prototype.judge=function(){2==this.gameScene.gameType||this.gameScene.gameType==r.game_type.lianzhao||2!=this.win&&this.jueSha()},t.prototype.jueSha=function(){var e=this;if(1!=this.juesha_judge)if(c.conMager.getInstance()._msgAtion.emit("closeAllSetBtn"),this.juesha_judge=!0,this.ai_qiuhe_judge=!1,console.error("\u7edd\u6740\u54e6",this.win,this.state,",\u6211\u5956\u52b1\u5462",c.GameDataStorage.gameStateData.reward),this.gameScene.count_down.active=!1,0!=this.win){var t="nv/nv";this.win==this.gameScene.userChess&&(t="nan/nan"),this.gameScene.node.getChildByName("mask").active=!0,this.myTurn=!1;var a=this.chess_index.length;this.scheduleOnce(function(){var n=.1;a>20&&(n=2/a);for(var o=function(o){var i=e.chess_index[o],s=i[0]+15*i[1];e.scheduleOnce(function(){c.conMager.getInstance().playAudioEff("btn1");var n=e.chess_map[s];n.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.callFunc(function(){n.getChildByName("guang").active=!0,o==a-1&&(e.is_xueyulianzhu?c.conMager.getInstance().getPoolNode(c.KEY.poolName.lianzhu,cc.find("Cnavas"),{num:a,callBack:function(){e.scheduleOnce(function(){c.conMager.getInstance().playAudioEff(t+"juesha")},.3),c.conMager.getInstance().playAudioEff(c.KEY.audioName.juesha),c.conMager.getInstance().getPoolNode(c.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}})}}):(e.scheduleOnce(function(){c.conMager.getInstance().playAudioEff(t+"juesha")},.3),c.conMager.getInstance().playAudioEff(c.KEY.audioName.juesha),c.conMager.getInstance().getPoolNode(c.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}})))})))},o*n)},i=0;i<a;i++)o(i)},.5)}else this.gameScene.gameOver()},t.prototype.addListenner=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.removeListennner=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.user_huiqi_fun=function(){if(console.log("\u6765\u6094\u68cb",this.state,this.gameScene.gameType),6==this.gameScene.gameType){this.state=this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;if(this.new_userChessPso.length<=0)return;return this.gameScene.hongDian.active=!1,void this.huiqi_destory(this.new_userChessPso,this.state)}3==this.gameScene.gameType?this.huiqiJudge?(this.huiqi_destory(this.new_userChessPso),this.updataState(),this.gameScene.startTime(this.state)):c.conMager.getInstance().getPoolNode(c.KEY.poolName.tipNode,this.node,"\u8bf7\u5148\u843d\u5b50!"):(this.state=this.gameScene.userChess,e=this.new_aiChessPso.length,t=this.new_userChessPso.length,console.log("\u6094\u68cb\u6570\u7ec4\u957f\u5ea6:  ai:",e+"__\u73a9\u5bb6 :"+t),this.huiqi_destory(this.new_userChessPso,this.state),e>t?this.huiqi_destory(this.new_aiChessPso,-1*this.state):e==t&&-1==this.gameScene.userChess&&this.huiqi_destory(this.new_aiChessPso,-1*this.state)),this.gameScene.hongDian.active=!1,this.new_userChessPso.length<=0&&c.conMager.getInstance()._msgAtion.emit("closeHuiqi")},t.prototype.ds_huiqi_fun=function(){console.log("AI\u6765\u6094\u68cb",this.state),this.state=-1*this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;this.huiqi_destory(this.new_aiChessPso,this.state),t>e?this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess):e==t&&-1!=this.gameScene.userChess&&this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess),this.ai_huiqi-=1,this.gameScene.startTime(this.state),this.myTurn=!1,this.ai_huiqi_judge=!0,this.gameScene.hongDian.active=!1,this.aiLuozi()},t.prototype.huiqi_destory=function(e,t){var a=e[e.length-1],n=a[0]+15*a[1],o=this.chess_map[n];this.chess_map[n]=null,this.maze[a[0]][a[1]]=0,e.splice(e.length-1),this.chess_pos[n]=[],o.destroy(),this.AITurn.delPos(a[0],a[1],-1*t)},i([d({type:h.default,tooltip:"\u7b2c\u4e8c\u4e2a\u7535\u8111"})],t.prototype,"AITurn2",void 0),i([l],t)}(cc.Component);a.GameBoard_sanren=p,cc._RF.pop()},{"../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../Piece":"Piece","./chessAi_sanren2":"chessAi_sanren2"}],GameBoard_tslh:[function(e,t,a){"use strict";cc._RF.push(t,"1cd37umUX9DmpyRWbRVCfUg","GameBoard_tslh");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.GameBoard_tslh=void 0;var s=e("../../../SSSGF/dataController/DATA"),r=e("../../../SSSGF/ssscgf"),c=e("../Piece"),h=cc._decorator,u=h.ccclass,l=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.black_chess=null,t.white_chess=null,t.chess_parent=null,t.judgeSize=15,t.maze=[],t.state=c.BLACKCHESS,t.win=2,t.sum=0,t.block=46,t.whose_round=0,t.gameScene=null,t.AITurn=null,t.myTurn=!0,t.is_ani=!1,t.chess_map=[],t.chess_list=[],t.chess_pos=[],t.new_userChessPso=[],t.new_aiChessPso=[],t.chess_index=[],t.newx=0,t.newY=0,t.myWin=[],t.istouch=!0,t.ai_huiqi=2,t.ai_huiqi_judge=!0,t.ai_qiuhe_judge=!0,t.ai_heqi=2,t.dazhao_num=0,t.yilun_qizi_v2=[],t.bushu=0,t.is_xueyulianzhu=!1,t.tslh_data=null,t.probability_map=new Map,t.num=1,t.rowSum=0,t.colSum=0,t.biasSumB=0,t.biasSumA=0,t.checkMode=[[1,0],[0,1],[1,1],[1,-1]],t.judge_num=5,t.juesha_judge=!1,t.huiqiJudge=!0,t}return o(t,e),t.prototype.onLoad=function(){r.conMager.getInstance()._msgAtion.on("user_huiqi_fun",this.user_huiqi_fun,this),r.conMager.getInstance()._msgAtion.on("ds_huiqi_fun",this.ds_huiqi_fun,this)},t.prototype.init=function(e){this.gameScene=e,this.gameScene.gameType>=3&&(this.myTurn=!0);for(var t=0,a=0;a<this.judgeSize;a++){this.maze[a]=[];for(var n=0;n<this.judgeSize;n++)this.maze[a][n]=0,this.chess_map[t]=null,this.chess_pos[t]=[],t+=1}this.addListenner(),this.AITurn.RightRate=this.gameScene.RightRate,this.yilun_qizi_v2=[]},t.prototype.AIXianShou=function(){var e=this;this.bushu++,this.state=-1,this.myTurn=!1,this.scheduleOnce(function(){e.gameScene.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,e.AITurn.addPos(7,7,e.state),e.new_aiChessPso.push([7,7]),e.changeToJudgeBoard(322,322)},3)},t.prototype.initAI=function(e){this.AITurn=e},t.prototype.onTouched=function(e){if(console.log("\u89e6\u6478\u5c4f\u5e55:",this.myTurn,this.istouch),this.myTurn&&this.istouch){this.bushu++;var t=e.getLocation(),a=this.node.convertToNodeSpaceAR(t),n=this.getPosByInt(Math.floor(a.x)),o=this.getPosByInt(Math.floor(a.y));this.newx=n,this.newY=o,this.new_userChessPso.push([n/this.block,o/this.block]),this.changeToJudgeBoard(n,o)}},t.prototype.aiLuozi=function(e){3==this.gameScene.gameType||2!=this.win||this.myTurn||!this.ai_huiqi_judge||this.juesha_judge||this.ailuozi_public_fun(e)},t.prototype.ailuozi_public_fun=function(e,t){var a=this;void 0===t&&(t=!0),this.bushu++,this.AITurn.AIPosition(this.newx,this.newY,function(t){var n=r.NumberUtil.randomNum(2,4);e&&(n=e),a.new_aiChessPso.push([t.x/a.block,t.y/a.block]),a.scheduleOnce(function(){a.changeToJudgeBoard(t.x,t.y)},n)},!t)},t.prototype.ai_qiuhe=function(){var e=this;this.ai_qiuhe_judge&&(this.ai_heqi<=0||(this.ai_heqi-=1,2!=this.gameScene.gameType&&this.gameScene.gameType!=s.game_type.luandou_tslh||(this.ai_heqi-=1),this.ai_qiuhe_judge=!1,r.conMager.getInstance().getPoolNode(r.KEY.poolName.heqi_panel,this.node.parent,{type:"ds_qiuhe",callBack:function(t){console.log("\u6094\u68cb\u7684\u56de\u8c03\u542b\u6f31",t),e.ai_qiuhe_judge=!0,2==t&&r.conMager.getInstance()._msgAtion.emit("pingju")}})))},t.prototype.getPosByInt=function(e){var t=1;e<0?(e=-e,t=-1):t=1;var a=e%this.block;return e=Math.floor(e/this.block)*this.block,a-this.block/2>=0&&(e+=this.block),e*t},t.prototype.changeToJudgeBoard=function(e,t){var a=this,n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(this.newY=t,this.newx=e,0==this.maze[n][o]){this.istouch=!1,this.gameScene.hide_hongdian();var i=n+15*o;this.chess_pos[i]=[n,o],this.maze[n][o]=this.state,this.sum+=1,this.update_Whose_round(),this.gameScene.moveInChess(e,t,this.state),this.qipan_shaomiao(this.state,function(){2==a.win?(a.unscheduleAllCallbacks(),a.scheduleOnce(function(){a.game_board_anima(n,o,function(){a.updateMyTurn(),a.updataState(),console.log("\u79fb\u52d5\u5b8c\u4e86\u55ceL:,,",a.win,a.state,a.myTurn),a.qipan_shaomiao(-a.state,function(){2==a.win?a.qipan_shaomiao(a.state,function(){2==a.win?a.state!=a.gameScene.userChess&&a.aiLuozi():a.jueSha()}):a.jueSha()})})},.5)):a.jueSha()})}else this.myTurn=!0},t.prototype.front_anima=function(e){this.tslh_data=this.check_game_board();var t=this.node.parent.getChildByName("mask_2").getChildByName("nd_guan"),a=this.node.parent.getChildByName("mask_1"),n=a.getChildByName("h_1"),o=a.getChildByName("v_1"),i=null;0!=this.tslh_data.dir.x?(i=a.getChildByName("h_suolian").children[this.tslh_data.index[1]],this.tslh_data.dir.x<0&&(t.angle=0),this.tslh_data.dir.x>0&&(t.angle=180),this.scheduleOnce(function(){n.active=!0},.3)):(i=a.getChildByName("v_suolian").children[this.tslh_data.index[0]],this.tslh_data.dir.y<0&&(t.angle=90),this.tslh_data.dir.y>0&&(t.angle=-90),this.scheduleOnce(function(){o.active=!0},.3)),t.active=!0;var s=i.convertToWorldSpaceAR(cc.v2()),r=i.parent.convertToNodeSpaceAR(s);t.setPosition(r),this.tslh_data.dir.y<0?o.angle=0:o.angle=180,n.angle=-t.angle,n.setPosition(r),o.setPosition(r),this.shengsuo_anima(n),this.shengsuo_anima(o),t.getChildByName("guang").getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this.scheduleOnce(e,1)},t.prototype.shengsuo_anima=function(e){e.stopAllActions(),cc.tween(e).to(.5,{opacity:0}).to(.5,{opacity:255}).union().repeatForever().start()},t.prototype.game_board_anima=function(e,t,a){this.tslh_data&&this.check_line_chess(e,t,this.tslh_data.dir,this.tslh_data.index,a)},t.prototype.check_game_board=function(){for(var e=[],t={index:null,dir:new cc.Vec2(0,0)},a=0;a<this.judgeSize;a++)for(var n=0;n<this.judgeSize;n++)0!=this.maze[a][n]&&e.push([a,n]);if(e.length<=0)t.index=[7,7];else{var o=r.NumberUtil.randomNum(0,e.length-1);t.index=e[o]}return t.dir=this.tslh_get_dir(t.index),t},t.prototype.tslh_get_dir=function(){var e=r.NumberUtil.randomNum(0,100),t=r.NumberUtil.randomNum(0,100);return this.probability_map.get("x")||this.probability_map.set("x",new cc.Vec2(50,50)),this.probability_map.get("y")||this.probability_map.set("y",new cc.Vec2(50,50)),e<50?t<this.probability_map.get("x").x?(this.probability_map.set("x",new cc.Vec2(0,100)),new cc.Vec2(1,0)):(this.probability_map.set("x",new cc.Vec2(100,0)),new cc.Vec2(-1,0)):t<this.probability_map.get("y").x?(this.probability_map.set("y",new cc.Vec2(0,100)),new cc.Vec2(0,1)):(this.probability_map.set("y",new cc.Vec2(100,0)),new cc.Vec2(0,-1))},t.prototype.check_line_chess=function(e,t,a,n,o){for(var i=this,s=[],r=0;r<this.judgeSize;r++)for(var c=0;c<this.judgeSize;c++){if(0!=a.x&&n[1]==c&&0!=this.maze[r][n[1]]){var h=[r,n[1]];s.push(h)}0!=a.y&&n[0]==r&&0!=this.maze[n[0]][c]&&(h=[n[0],c],s.push(h))}var u=1*(s.length-1);this.move_suo_lian(u),s.length>0?(0!=a.x?(a.x<0&&s.sort(function(e,t){return e[0]-t[0]}),a.x>0&&s.sort(function(e,t){return t[0]-e[0]})):(a.y<0&&s.sort(function(e,t){return e[1]-t[1]}),a.y>0&&s.sort(function(e,t){return t[1]-e[1]})),s.forEach(function(n,r){var c=n[0]+15*n[1],h=i.chess_map[c];if(h.name=r+"",0!=a.x){var u=h.x;cc.tween(h).to(1,{x:u+a.x*i.block*2}).call(function(){var o=n[0]+2*a.x;if(i.beyond_boundary(new cc.Vec2(o,n[1])))i.chess_map[c].destroy(),i.chess_map[c]=null,i.AITurn.delPos(n[0],n[1],i.maze[n[0]][n[1]]),i.maze[n[0]][n[1]]=0,n[0]==e&&n[1]==t&&i.gameScene.hide_hongdian();else{var s=o+15*n[1];i.chess_map[s]=h,i.maze[o][n[1]]=i.maze[n[0]][n[1]],i.maze[n[0]][n[1]]=0,i.AITurn.delPos(n[0],n[1],i.maze[n[0]][n[1]]),i.AITurn.addPos(o,n[1],i.maze[o][n[1]]),i.chess_map[c]=null}}).call(function(){parseInt(h.name)==s.length-1&&i.front_anima(function(){i.istouch=!0,o()})}).start()}else{var l=h.y;cc.tween(h).to(1,{y:l+a.y*i.block*2}).call(function(){var o=n[1]+2*a.y;if(i.beyond_boundary(new cc.Vec2(n[0],o)))i.chess_map[c].destroy(),i.chess_map[c]=null,i.AITurn.delPos(n[0],n[1],i.maze[n[0]][n[1]]),i.maze[n[0]][n[1]]=0,n[0]==e&&n[1]==t&&i.gameScene.hide_hongdian();else{var s=n[0]+15*o;i.chess_map[s]=h,i.maze[n[0]][o]=i.maze[n[0]][n[1]],i.maze[n[0]][n[1]]=0,i.AITurn.delPos(n[0],n[1],i.maze[n[0]][n[1]]),i.AITurn.addPos(n[0],o,i.maze[n[0]][o]),i.chess_map[c]=null}}).call(function(){parseInt(h.name)==s.length-1&&i.front_anima(function(){i.istouch=!0,o()})}).start()}})):this.front_anima(function(){i.istouch=!0,o()})},t.prototype.beyond_boundary=function(e){return e.x<0||e.x>this.maze.length-1||e.y<0||e.y>this.maze[0].length-1},t.prototype.move_suo_lian=function(e){var t=null,a=null,n=this.tslh_data;this.node.parent.getChildByName("mask_2").getChildByName("nd_guan").active=!1;var o=this.node.parent.getChildByName("mask_1");o.getChildByName("h_1").active=!1,o.getChildByName("v_1").active=!1,0!=n.dir.x?(t=o.getChildByName("h_suolian").children[n.index[1]],a=new cc.Vec3(t.x+50*n.dir.x,t.y,0)):(t=o.getChildByName("v_suolian").children[n.index[0]],a=new cc.Vec3(t.x,t.y+50*n.dir.y,0)),t.stopAllActions();var i=t.position;r.conMager.getInstance().playAudioEff("sl_h"),cc.tween(t).to(e,{position:a}).call(function(){t.setPosition(i),t.color=cc.Color.WHITE}).start()},t.prototype.update_Whose_round=function(){0==this.whose_round?this.whose_round=1:this.whose_round=0},t.prototype.updateMyTurn=function(){console.log("\u6362\u56de\u548c:",this.myTurn),this.myTurn=!this.myTurn},t.prototype.updataState=function(){this.state*=-1},t.prototype.qipan_shaomiao=function(e,t,a){if(!this.juesha_judge){a||(a=5),this.win=2;for(var n=0;n<15;n++)for(var o=0;o<15;o++)for(var i=0;i<4;i++){if(this.checkWin(n,o,e,this.checkMode[i],a))return t();if(14==n&&14==o&&3==i)return t()}}},t.prototype.checkWin=function(e,t,a,n,o){if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.chess_index=[];var i=[e,t];this.chess_index.push(i);for(var s=1,r=1;r<15;r++)if(this.maze[e+r*n[0]]){var c=e+r*n[0],h=t+r*n[1];if(this.maze[c][h]!=a)break;s++;var u=[c,h];this.chess_index.push(u)}for(var l=1;l<15;l++)if(this.maze[e-l*n[0]]){if(c=e-l*n[0],h=t-l*n[1],this.maze[c][h]!=a)break;s++;var d=[c,h];this.chess_index.push(d)}return s>=o?(this.win=2==a?1:-2==a?-1:a,console.error("\u8d70\u8fd9\u8fb9\u7684!!!",a,",",this.win,this.chess_index),this.judge(),!0):(this.sum>=225&&(console.error("\u70b8\u4e86\uff01\uff01\uff01\uff01"),this.win=0),!1)}},t.prototype.judge=function(){var e=this;2!=this.win&&this.scheduleOnce(function(){e.jueSha()},.1)},t.prototype.jueSha=function(){var e=this;if(1!=this.juesha_judge)if(r.conMager.getInstance()._msgAtion.emit("closeAllSetBtn"),this.juesha_judge=!0,this.ai_qiuhe_judge=!1,this.gameScene.count_down.active=!1,0!=this.win){var t="nv/nv";this.win==this.gameScene.userChess&&(t="nan/nan"),this.gameScene.node.getChildByName("mask").active=!0,this.myTurn=!1;var a=this.chess_index.length;this.scheduleOnce(function(){var n=.1;a>20&&(n=2/a);for(var o=function(o){var i=e.chess_index[o],s=i[0]+15*i[1];e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff("btn1");var n=e.chess_map[s];n.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.callFunc(function(){n.getChildByName("guang").active=!0,o==a-1&&(e.is_xueyulianzhu?r.conMager.getInstance().getPoolNode(r.KEY.poolName.lianzhu,cc.find("Cnavas"),{num:a,callBack:function(){e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(t+"juesha")},.3),r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}})}}):(e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(t+"juesha")},.3),r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}})))})))},o*n)},i=0;i<a;i++)o(i)},.5)}else this.gameScene.gameOver()},t.prototype.addListenner=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.removeListennner=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.user_huiqi_fun=function(){if(console.log("\u6765\u6094\u68cb",this.state,this.gameScene.gameType),this.gameScene.gameType==s.game_type.canju){if(this.state=this.gameScene.userChess,this.new_userChessPso.length<=0)return;return this.gameScene.hongDian.active=!1,void this.huiqi_destory(this.new_userChessPso,this.state)}if(3==this.gameScene.gameType)this.huiqiJudge?(this.huiqi_destory(this.new_userChessPso),this.updataState(),this.gameScene.startTime(this.state)):r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u8bf7\u5148\u843d\u5b50!");else{this.state=this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;console.log("\u6094\u68cb\u6570\u7ec4\u957f\u5ea6:  ai:",e+"__\u73a9\u5bb6 :"+t),this.huiqi_destory(this.new_userChessPso,this.state),e>t?this.huiqi_destory(this.new_aiChessPso,-1*this.state):e==t&&-1==this.gameScene.userChess&&this.huiqi_destory(this.new_aiChessPso,-1*this.state)}this.gameScene.hongDian.active=!1,this.new_userChessPso.length<=0&&r.conMager.getInstance()._msgAtion.emit("closeHuiqi")},t.prototype.ds_huiqi_fun=function(){console.log("AI\u6765\u6094\u68cb",this.state),this.state=-1*this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;this.huiqi_destory(this.new_aiChessPso,this.state),t>e?this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess):e==t&&-1!=this.gameScene.userChess&&this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess),this.ai_huiqi-=1,this.gameScene.startTime(this.state),this.myTurn=!1,this.ai_huiqi_judge=!0,this.gameScene.hongDian.active=!1,this.aiLuozi()},t.prototype.huiqi_destory=function(e,t){var a=e[e.length-1],n=a[0]+15*a[1],o=this.chess_map[n];this.chess_map[n]=null,this.maze[a[0]][a[1]]=0,e.splice(e.length-1),this.chess_pos[n]=[],o.destroy(),this.AITurn.delPos(a[0],a[1],-1*t)},i([l({type:cc.Prefab,tooltip:"\u9ed1\u5b50"})],t.prototype,"black_chess",void 0),i([l({type:cc.Prefab,tooltip:"\u767d\u5b50"})],t.prototype,"white_chess",void 0),i([l({type:cc.Node,tooltip:"\u68cb\u5b50\u7236\u8282\u70b9"})],t.prototype,"chess_parent",void 0),i([u],t)}(cc.Component);a.GameBoard_tslh=d,cc._RF.pop()},{"../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../Piece":"Piece"}],GameBoard_zhibo:[function(e,t,a){"use strict";cc._RF.push(t,"f5685L97vNJYpPOm0rORqSi","GameBoard_zhibo");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.GameBoard_zhibo=void 0;var s=e("../../../SSSGF/ssscgf"),r=e("../Piece"),c=cc._decorator,h=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.judgeSize=15,t.maze=[],t.state=r.BLACKCHESS,t.win=2,t.sum=0,t.block=46,t.whose_round=0,t.gameScene=null,t.AITurn=null,t.myTurn=!0,t.is_ani=!1,t.chess_map=[],t.chess_list=[],t.chess_pos=[],t.new_userChessPso=[],t.new_aiChessPso=[],t.chess_index=[],t.front_com=null,t.newx=0,t.newY=0,t.canWin=[],t.winCount=0,t.myWin=[],t.istouch=!0,t.ai_huiqi=2,t.ai_huiqi_judge=!0,t.ai_qiuhe_judge=!0,t.ai_heqi=2,t.dazhao_num=0,t.is_zhenfa_over=!1,t.rowSum=0,t.colSum=0,t.biasSumB=0,t.biasSumA=0,t.checkMode=[[1,0],[0,1],[1,1],[1,-1]],t.judge_num=5,t.juesha_judge=!1,t.huiqiJudge=!0,t}return o(t,e),t.prototype.initWin=function(){for(var e=0;e<15;e++){this.canWin[e]=[];for(var t=0;t<15;t++)this.canWin[e][t]=[]}for(e=0;e<15;e++)for(t=0;t<11;t++){for(var a=0;a<5;a++)this.canWin[e][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<15;t++){for(a=0;a<5;a++)this.canWin[e+a][t][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<11;t++){for(a=0;a<5;a++)this.canWin[e+a][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=14;t>3;t--){for(a=0;a<5;a++)this.canWin[e+a][t-a][this.winCount]=!0;this.winCount++}console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa:",this.winCount),console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa11111:",this.canWin)},t.prototype.onLoad=function(){s.conMager.getInstance()._msgAtion.on("user_huiqi_fun",this.user_huiqi_fun,this),s.conMager.getInstance()._msgAtion.on("ds_huiqi_fun",this.ds_huiqi_fun,this)},t.prototype.init=function(e){this.gameScene=e,this.gameScene.gameType>=3&&(this.myTurn=!0);for(var t=0,a=0;a<this.judgeSize;a++){this.maze[a]=[];for(var n=0;n<this.judgeSize;n++)this.maze[a][n]=0,this.chess_map[t]=null,this.chess_pos[t]=[],t+=1}this.addListenner(),this.AITurn.RightRate=this.gameScene.RightRate},t.prototype.AIXianShou=function(){this.state=-1,this.myTurn=!1,this.scheduleOnce(function(){this.gameScene.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.AITurn.addPos(7,7,this.state),this.new_aiChessPso.push([7,7]),this.changeToJudgeBoard(322,322)},3)},t.prototype.initAI=function(e){this.AITurn=e},t.prototype.initfront=function(e){this.front_com=e},t.prototype.onTouched=function(e){if(console.log("\u89e6\u6478\u5c4f\u5e55:",this.myTurn,this.istouch),this.myTurn&&(2!=this.gameScene.gameType||this.istouch)){var t=e.getLocation(),a=this.node.convertToNodeSpaceAR(t),n=this.getPosByInt(Math.floor(a.x)),o=this.getPosByInt(Math.floor(a.y));if(this.newx=n,this.newY=o,this.new_userChessPso.push([n/this.block,o/this.block]),this.new_userChessPso.length>0&&2!=s.GameDataStorage.gameStateData.gameType&&s.conMager.getInstance()._msgAtion.emit("openHuiqi"),this.changeToJudgeBoard(n,o),1==this.gameScene.gameType&&(this.aiLuozi(),this.sum>=20&&s.NumberUtil.randomNum(1,100)<6&&this.ai_heqi>0)){var i=this.AITurn.jushi_judge();console.log("ai\u6c42\u548c\u7684\u5206\u6570:",i),this.juesha_judge||(this.sum>=180?this.ai_qiuhe():i.myScore_1>i.computerScore_1&&this.ai_qiuhe())}}},t.prototype.aiLuozi=function(e){if(console.log("\u89e6\u53d1ai",this.win,this.myTurn,this.ai_huiqi_judge),this.gameScene.gameType<3&&2==this.win&&!this.myTurn&&this.ai_huiqi_judge){if(1==this.gameScene.gameType&&this.ai_qiuhe_judge){var t=s.NumberUtil.randomNum(1,100);if(t<3&&this.ai_huiqi>0)return this.ai_huiqi_judge=!1,void this.ailuozi_public_fun(t,this.ai_huiqi_judge)}this.ailuozi_public_fun(e)}},t.prototype.ailuozi_public_fun=function(e,t){var a=this;void 0===t&&(t=!0),this.AITurn.AIPosition(this.newx,this.newY,function(e){s.NumberUtil.randomNum(1,3);a.scheduleOnce(function(){var a=this;this.new_aiChessPso.push([e.x/this.block,e.y/this.block]),this.changeToJudgeBoard(e.x,e.y),t||this.scheduleOnce(function(){s.conMager.getInstance().getPoolNode(s.KEY.poolName.heqi_panel,a.node.parent,{type:"ds_huiqi",callBack:function(e){2==e?a.ds_huiqi_fun():(a.ai_huiqi_judge=!0,a.state==-1*a.gameScene.userChess&&a.aiLuozi())}})},2)},1)},!t)},t.prototype.ai_qiuhe=function(){var e=this;this.ai_qiuhe_judge&&(this.ai_heqi-=1,this.ai_qiuhe_judge=!1,s.conMager.getInstance().getPoolNode(s.KEY.poolName.heqi_panel,this.node.parent,{type:"ds_qiuhe",callBack:function(t){console.log("\u6094\u68cb\u7684\u56de\u8c03\u542b\u6f31",t),e.ai_qiuhe_judge=!0,2==t&&s.conMager.getInstance()._msgAtion.emit("pingju")}}))},t.prototype.getPosByInt=function(e){var t=1;e<0?(e=-e,t=-1):t=1;var a=e%this.block;return e=Math.floor(e/this.block)*this.block,a-this.block/2>=0&&(e+=this.block),e*t},t.prototype.changeToJudgeBoard=function(e,t){var a=this,n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(this.newY=t,this.newx=e,0==this.maze[n][o]){this.istouch=!1,1==this.gameScene.gameType&&this.updateMyTurn();var i=n+15*o;this.chess_pos[i]=[n,o],this.maze[n][o]=this.state,this.sum+=1,2!=this.gameScene.gameType?(this.update_Whose_round(),this.gameScene.moveInChess(e,t,this.state),this.qipan_shaomiao(this.state,function(){a.updataState()})):this.showDaZhao()}else this.myTurn=!0},t.prototype.update_Whose_round=function(){0==this.whose_round?this.whose_round=1:this.whose_round=0},t.prototype.updateMyTurn=function(){console.log("\u6362\u56de\u548c:",this.myTurn),this.myTurn=!this.myTurn},t.prototype.updataState=function(){this.state*=-1},t.prototype.showDaZhao=function(){var e;e=this.getZhenFaName(-1*this.state).zhenFaName,console.log("\u5bf9\u65b9\u9635\u6cd5\u7684\u540d\u5b57:",e);var t=s.GameDataStorage.getUser().userData.zhenFaMap[e].attr;this.gameScene.moveInChess(this.newx,this.newY,this.state),1==t?this.start_dazhao(e):(console.log("\u88ab\u52a8\u6280\u80fd",e),this.dz_judge())},t.prototype.start_dazhao=function(e,t){var a=this.state;t&&(a=t),s.conMager.getInstance()._msgAtion.emit("closeSet"),this.front_com.showFront(a,e,this.daZhaoCb.bind(this))},t.prototype.dz_judge=function(){var e=this;this.qipan_shaomiao(this.state,function(){var t,a;console.log("\u54ce\u5440kjiomnil",e.win,e.state),t=e.getZhenFaName(e.state).zhenFaName,a=e.getZhenFaName(e.state).is_user,1==s.GameDataStorage.getUser().userData.zhenFaMap[t].attr?2!=e.win?e.jueSha():e.updateround():"kedi"==t?2!=e.win?(e.judge_num=5,e.judge_num+=a?s.GameDataStorage.gameStateData.ds_zhenfalevel:s.GameDataStorage.getUser().userData.zhenFaMap.kedi.level,e.qipan_shaomiao(e.state,function(){console.log("\u53ef\u654c\u5148\u673a \u8fdb\u6765\u4e86",e.judge_num,e.win,e.state),2==e.win||0==e.win?e.start_dazhao(t):e.jueSha()},e.judge_num)):e.updateround():"bagua"==t?e.start_dazhao(t):"wulei"==t&&(2!=e.win?e.jueSha():e.updateround())})},t.prototype.updateround=function(e){var t=!1;this.state==this.gameScene.userChess&&(t=!0),this.updateMyTurn(),this.update_Whose_round(),this.updataState(),t?this.aiLuozi(e):this.istouch=!0},t.prototype.daZhaoCb=function(e){var t=this,a=s.GameDataStorage.getUser().userData.zhenFaMap[e].attr,n=this.getZhenFaName(this.state),o=this.getZhenFaName(-1*this.state);if(this.dazhao_num+=1,console.log("\u5927\u62db\u64ad\u653e\u5b8c\u6bd5:",n.zhenFaName,e,this.dazhao_num),s.conMager.getInstance()._msgAtion.emit("openSet"),2==a){var i=5;if("kedi"==e)i=this.judge_num,this.qipan_shaomiao(this.state,function(){if(console.log("\u514b\u654c\u5148\u673a\u653e\u5b8c\u4e86",t.win),2==t.win){if("wulei"==n.zhenFaName||"wulei"==o.zhenFaName)return void t.start_dazhao("wulei",t.state);t.updateround(.5)}else t.updataState(),t.jueSha()},i);else if("bagua"==e)this.qipan_shaomiao(this.state,function(){2==t.win||0==t.win?t.qipan_shaomiao(-1*t.state,function(){var e=t.getZhenFaName(-1*t.state),a=e.zhenFaName,n=e.level;console.log("\u516b\u5366\u9635\u653e\u5b8c\u4e86",t.win,n+5,a,t.state),"kedi"==a?t.qipan_shaomiao(-1*t.state,function(){console.log("\u516b\u5366\u9635\u540e\u7684\u514b\u654c\u5148\u673a",t.win,n+5),2==t.win?t.start_dazhao(a,-1*t.state):(t.updataState(),t.jueSha())},n+5):"wulei"==a?t.start_dazhao(e.zhenFaName,-1*t.state):2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},i):(t.updataState(),t.jueSha())},i);else if("wulei"==e){var r=this.getZhenFaName(this.state).zhenFaName,c=5;"kedi"==r&&(this.state==this.gameScene.userChess?c+=s.GameDataStorage.gameStateData.ds_zhenfalevel:c+=s.GameDataStorage.getUser().userData.zhenFaMap.kedi.level),this.qipan_shaomiao(this.state,function(){console.log("\u4e94\u96f7\u9635\u653e\u5b8c\u4e86",t.win,r),2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},c)}}else{if(console.log("\u4e3b\u52a8\u6280\u80fd\u653e\u5b8c\u4e86",this.state),"wulei"==n.zhenFaName||"wulei"==o.zhenFaName)return void this.start_dazhao("wulei",this.state);this.dz_judge(e)}},t.prototype.getZhenFaName=function(e){var t="wanning",a=!1,n=1;return e==this.gameScene.userChess?(a=!0,t=s.GameDataStorage.gameStateData.dsZhenFaName,n=s.GameDataStorage.gameStateData.ds_zhenfalevel):(t=s.GameDataStorage.gameStateData.userZhenFaName,n=s.GameDataStorage.getUser().userData.zhenFaMap[t].level),{zhenFaName:t,is_user:a,level:n}},t.prototype.dazhao_moveInChess=function(e,t,a){var n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(!(n>14||o>14||n<0||o<0)&&0==this.maze[n][o]){this.maze[n][o]=a;var i=n+15*o;this.chess_pos[i]=[n,o],this.newY=t,this.newx=e,this.sum+=1,this.AITurn.addPos(n,o,a),this.gameScene.moveInChess(e,t,a,!0)}},t.prototype.qipan_shaomiao=function(e,t,a){if(a||(a=5),this.win=2,2==this.gameScene.gameType)for(var n=0;n<15;n++)for(var o=0;o<15;o++)for(var i=0;i<4;i++){if(this.checkWin(n,o,e,this.checkMode[i],a))return t();if(14==n&&14==o&&3==i)return t()}else for(i=0;i<4;i++){if(this.checkWin(this.newx/46,this.newY/46,e,this.checkMode[i],a))return t();if(3==i)return t()}},t.prototype.checkWin=function(e,t,a,n,o){if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.chess_index=[];var i=[e,t];this.chess_index.push(i);for(var s=1,r=1;r<15;r++)if(this.maze[e+r*n[0]]){var c=e+r*n[0],h=t+r*n[1];if(this.maze[c][h]!=a)break;s++;var u=[c,h];this.chess_index.push(u)}for(var l=1;l<15;l++)if(this.maze[e-l*n[0]]){if(c=e-l*n[0],h=t-l*n[1],this.maze[c][h]!=a)break;s++;var d=[c,h];this.chess_index.push(d)}return s>=o?(this.win=a,this.judge(),!0):(this.sum>=225&&(this.win=0),!1)}},t.prototype.judge=function(){2==this.gameScene.gameType||2!=this.win&&this.jueSha()},t.prototype.jueSha=function(){var e=this;if(s.conMager.getInstance()._msgAtion.emit("closeAllSetBtn"),this.juesha_judge=!0,this.ai_qiuhe_judge=!1,console.log("\u7edd\u6740\u54e6",this.win,this.state),this.gameScene.count_down.active=!1,0!=this.win){var t="nv/nv";this.win==this.gameScene.userChess&&(t="nan/nan"),this.gameScene.node.getChildByName("mask").active=!0,this.myTurn=!1;var a=this.chess_index.length;this.scheduleOnce(function(){for(var n=function(n){var o=e.chess_index[n],i=o[0]+15*o[1];e.scheduleOnce(function(){s.conMager.getInstance().playAudioEff("btn1");var o=e.chess_map[i];o.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.callFunc(function(){o.getChildByName("guang").active=!0,n==a-1&&(s.conMager.getInstance().playAudioEff(s.KEY.audioName.juesha),e.scheduleOnce(function(){s.conMager.getInstance().playAudioEff(t+"juesha")},.3),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}}))})))},.1*n)},o=0;o<a;o++)n(o)},.5)}else this.gameScene.gameOver()},t.prototype.addListenner=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.removeListennner=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.user_huiqi_fun=function(){if(console.log("\u6765\u6094\u68cb",this.state),this.gameScene.gameType>2)this.huiqiJudge?(this.huiqi_destory(this.new_userChessPso),this.updataState(),this.gameScene.startTime(this.state)):s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node,"\u8bf7\u5148\u843d\u5b50!");else{this.state=this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;this.huiqi_destory(this.new_userChessPso,this.state),e>t?this.huiqi_destory(this.new_aiChessPso,-1*this.state):e==t&&-1==this.gameScene.userChess&&this.huiqi_destory(this.new_aiChessPso,-1*this.state)}this.new_userChessPso.length<=0&&s.conMager.getInstance()._msgAtion.emit("closeHuiqi")},t.prototype.ds_huiqi_fun=function(){console.log("AI\u6765\u6094\u68cb",this.state),this.state=-1*this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;this.huiqi_destory(this.new_aiChessPso,this.state),t>e?this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess):e==t&&-1!=this.gameScene.userChess&&this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess),this.ai_huiqi-=1,this.gameScene.startTime(this.state),this.myTurn=!1,this.ai_huiqi_judge=!0,this.aiLuozi()},t.prototype.huiqi_destory=function(e,t){var a=e[e.length-1],n=a[0]+15*a[1],o=this.chess_map[n];this.chess_map[n]=null,this.maze[a[0]][a[1]]=0,e.splice(e.length-1),this.chess_pos[n]=[],o.destroy(),this.AITurn.delPos(a[0],a[1],-1*t)},i([h],t)}(cc.Component));a.GameBoard_zhibo=u,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../Piece":"Piece"}],GameBoard:[function(e,t,a){"use strict";cc._RF.push(t,"058198P4qlFaJoAQ9fv9ZbJ","GameBoard");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.GameBoard=void 0;var s=e("./../../SSSGF/dataController/gameDataManager"),r=e("./Piece"),c=e("../../SSSGF/ssscgf"),h=e("../../SSSGF/dataController/DATA"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.judgeSize=15,t.maze=[],t.state=r.BLACKCHESS,t.win=2,t.sum=0,t.block=46,t.whose_round=0,t.gameScene=null,t.AITurn=null,t.myTurn=!0,t.is_ani=!1,t.chess_map=[],t.chess_list=[],t.chess_pos=[],t.new_userChessPso=[],t.new_aiChessPso=[],t.chess_index=[],t.front_com=null,t.newx=0,t.newY=0,t.canWin=[],t.winCount=0,t.myWin=[],t.istouch=!0,t.ai_huiqi=2,t.ai_huiqi_judge=!0,t.ai_qiuhe_judge=!0,t.ai_heqi=2,t.dazhao_num=0,t.yilun_qizi_v2=[],t.bushu=0,t.is_xueyulianzhu=!1,t.zhenfa_level=0,t.is_zhenfa_over=!1,t.wulei_to_fenlie_max=1,t.wulei_to_fenlie=0,t.bagua_to_fenlie_max=1,t.bagua_to_fenlie=0,t.fenlie_number=0,t.rowSum=0,t.colSum=0,t.biasSumB=0,t.biasSumA=0,t.checkMode=[[1,0],[0,1],[1,1],[1,-1]],t.judge_num=5,t.juesha_judge=!1,t.huiqiJudge=!0,t}return o(t,e),t.prototype.initWin=function(){for(var e=0;e<15;e++){this.canWin[e]=[];for(var t=0;t<15;t++)this.canWin[e][t]=[]}for(e=0;e<15;e++)for(t=0;t<11;t++){for(var a=0;a<5;a++)this.canWin[e][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<15;t++){for(a=0;a<5;a++)this.canWin[e+a][t][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<11;t++){for(a=0;a<5;a++)this.canWin[e+a][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=14;t>3;t--){for(a=0;a<5;a++)this.canWin[e+a][t-a][this.winCount]=!0;this.winCount++}console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa:",this.winCount),console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa11111:",this.canWin)},t.prototype.onLoad=function(){c.conMager.getInstance()._msgAtion.on("user_huiqi_fun",this.user_huiqi_fun,this),c.conMager.getInstance()._msgAtion.on("ds_huiqi_fun",this.ds_huiqi_fun,this)},t.prototype.init=function(e){this.gameScene=e,this.gameScene.gameType>=3&&(this.myTurn=!0);for(var t=0,a=0;a<this.judgeSize;a++){this.maze[a]=[];for(var n=0;n<this.judgeSize;n++)this.maze[a][n]=0,this.chess_map[t]=null,this.chess_pos[t]=[],t+=1}this.addListenner(),this.AITurn.RightRate=this.gameScene.RightRate,this.yilun_qizi_v2=[]},t.prototype.setCanju=function(e){for(var t=e.black.split(","),a=e.white.split(","),n=0;n<t.length;n++){var o=Math.floor(Number(t[n])/15),i=Math.floor(Number(t[n])%15),s=Math.floor(Number(a[n])/15),r=Math.floor(Number(a[n])%15);this.changeToJudgeBoard(o*this.block,i*this.block),this.new_userChessPso.push(o,i),this.changeToJudgeBoard(s*this.block,r*this.block),this.new_aiChessPso.push(s,r)}},t.prototype.AIXianShou=function(){this.bushu++,this.state=-1,this.myTurn=!1,this.scheduleOnce(function(){this.gameScene.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.AITurn.addPos(7,7,this.state),this.new_aiChessPso.push([7,7]),this.changeToJudgeBoard(322,322)},3)},t.prototype.initAI=function(e){this.AITurn=e},t.prototype.initfront=function(e){this.front_com=e},t.prototype.onTouched=function(e){if(console.log("\u89e6\u6478\u5c4f\u5e55:",this.myTurn,this.istouch),this.myTurn){if(2!=this.gameScene.gameType&&this.gameScene.gameType!=h.game_type.lianzhao||this.istouch){console.error("\u4e0b\u5b8c\u4e86"),this.bushu++,this.fenlie_number=0;var t=e.getLocation(),a=this.node.convertToNodeSpaceAR(t),n=this.getPosByInt(Math.floor(a.x)),o=this.getPosByInt(Math.floor(a.y));if(this.newx=n,this.newY=o,this.new_userChessPso.push([n/this.block,o/this.block]),this.new_userChessPso.length>0&&(1!=s.default.gameStateData.gameType&&3!=s.default.gameStateData.gameType||c.conMager.getInstance()._msgAtion.emit("openHuiqi")),this.changeToJudgeBoard(n,o),this.gameScene.gameType!=h.game_type.canju){if(1==this.gameScene.gameType||5==this.gameScene.gameType){if(this.aiLuozi(),this.gameScene.gameType==h.game_type.lianzhao)return;if(this.sum>=20&&c.NumberUtil.randomNum(1,100)<6&&this.ai_heqi>0){var i=this.AITurn.jushi_judge();console.log("ai\u6c42\u548c\u7684\u5206\u6570:",i),this.juesha_judge||(this.sum>=180?this.ai_qiuhe():i.myScore_1>i.computerScore_1&&this.ai_qiuhe())}}}else this.aiLuozi()}}else c.conMager.getInstance().getPoolNode(c.KEY.poolName.tipNode,this.node.parent,"\u7b49\u5f85\u5bf9\u65b9\u843d\u5b50")},t.prototype.aiLuozi=function(e){if(console.log("\u89e6\u53d1ai",this.win,this.myTurn,this.ai_huiqi_judge,",\u7c7b\u578b\u5462",this.gameScene.gameType),3!=this.gameScene.gameType&&2==this.win&&!this.myTurn&&this.ai_huiqi_judge&&!this.juesha_judge){if((1==this.gameScene.gameType||5==this.gameScene.gameType)&&this.ai_qiuhe_judge){var t=c.NumberUtil.randomNum(1,100);if(3==t&&this.ai_huiqi>0)return this.ai_huiqi_judge=!1,void this.ailuozi_public_fun(t,this.ai_huiqi_judge)}this.ailuozi_public_fun(e)}},t.prototype.ailuozi_public_fun=function(e,t){var a=this;void 0===t&&(t=!0),this.bushu++,this.AITurn.AIPosition(this.newx,this.newY,function(n){var o=c.NumberUtil.randomNum(1,3);e&&(o=e),a.new_aiChessPso.push([n.x/a.block,n.y/a.block]),a.scheduleOnce(function(){var e=this;this.changeToJudgeBoard(n.x,n.y),this.gameScene.gameType!=h.game_type.lianzhao&&(t||this.scheduleOnce(function(){c.conMager.getInstance().getPoolNode(c.KEY.poolName.heqi_panel,e.node.parent,{type:"ds_huiqi",callBack:function(t){2==t?e.ds_huiqi_fun():(e.ai_huiqi_judge=!0,e.state==-1*e.gameScene.userChess&&e.aiLuozi())}})},2))},o)},!t)},t.prototype.ai_qiuhe=function(){var e=this;this.ai_qiuhe_judge&&(this.ai_heqi<=0||(this.ai_heqi-=1,2!=this.gameScene.gameType&&this.gameScene.gameType!=h.game_type.lianzhao||(this.ai_heqi-=1),this.ai_qiuhe_judge=!1,c.conMager.getInstance().getPoolNode(c.KEY.poolName.heqi_panel,this.node.parent,{type:"ds_qiuhe",callBack:function(t){console.log("\u6094\u68cb\u7684\u56de\u8c03\u542b\u6f31",t),e.ai_qiuhe_judge=!0,2==t&&c.conMager.getInstance()._msgAtion.emit("pingju")}})))},t.prototype.getPosByInt=function(e){var t=1;e<0?(e=-e,t=-1):t=1;var a=e%this.block;return e=Math.floor(e/this.block)*this.block,a-this.block/2>=0&&(e+=this.block),e*t},t.prototype.changeToJudgeBoard=function(e,t){var a=this,n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(this.newY=t,this.newx=e,!this.juesha_judge)if(0==this.maze[n][o]){this.istouch=!1,1!=this.gameScene.gameType&&5!=this.gameScene.gameType&&this.gameScene.gameType!=h.game_type.canju&&this.gameScene.gameType!=h.game_type.lianzhao||this.updateMyTurn();var i=n+15*o;if(this.chess_pos[i]=[n,o],this.maze[n][o]=this.state,this.sum+=1,2!=this.gameScene.gameType&&this.gameScene.gameType!=h.game_type.lianzhao)this.update_Whose_round(),this.gameScene.moveInChess(e,t,this.state),this.qipan_shaomiao(this.state,function(){a.updataState()});else{this.yilun_qizi_v2=[];var s=cc.v2(n,o);this.yilun_qizi_v2.push(s),this.showDaZhao()}}else this.myTurn=!0},t.prototype.xuanze_zhenfa=function(){this.gameScene.change_zhenfa(this.myTurn)},t.prototype.update_Whose_round=function(){0==this.whose_round?this.whose_round=1:this.whose_round=0},t.prototype.updateMyTurn=function(){this.myTurn=!this.myTurn},t.prototype.updataState=function(){this.state*=-1},t.prototype.showDaZhao=function(){var e;this.wulei_to_fenlie=0,this.bagua_to_fenlie=0,e=this.getZhenFaName(-1*this.state).zhenFaName;var t=s.default.getUser().userData.zhenFaMap[e].attr;this.gameScene.moveInChess(this.newx,this.newY,this.state),this.dazhao_num+=1;var a=c.NumberUtil.randomNum(6,10);if(this.dazhao_num>=a&&this.gameScene.gameType!=h.game_type.lianzhao&&this.ai_qiuhe(),1==t)this.start_dazhao(e);else if(2==t){if(console.log("\u88ab\u52a8\u6280\u80fd",e),"fenlie"==e)return void this.start_dazhao(e);this.dz_judge()}},t.prototype.start_dazhao=function(e,t){if(!this.juesha_judge){this.gameScene.gameType==h.game_type.lianzhao&&this.gameScene.chufa_jineng(t);var a=this.state;t&&(a=t),c.conMager.getInstance()._msgAtion.emit("closeSet"),c.conMager.getInstance()._msgAtion.emit("stopTimeDel"),this.front_com.showFront(a,e,this.daZhaoCb.bind(this))}},t.prototype.dz_judge=function(e){var t=this;this.qipan_shaomiao(this.state,function(){var a,n;"xueyuyingsha"==e&&c.conMager.getInstance()._msgAtion.emit("del_xueXian"),a=t.getZhenFaName(t.state).zhenFaName,n=t.getZhenFaName(t.state).is_user;var o=s.default.getUser().userData.zhenFaMap[a].attr;1==o?2!=t.win?t.jueSha():t.updateround():2==o&&("kedi"==a?2!=t.win?(t.judge_num=5,t.judge_num+=n?s.default.gameStateData.ds_zhenfalevel:s.default.getUser().userData.zhenFaMap.kedi.level,t.qipan_shaomiao(t.state,function(){console.log("\u53ef\u654c\u5148\u673a \u8fdb\u6765\u4e86",t.judge_num,t.win,t.state),2==t.win||0==t.win?t.start_dazhao(a):t.jueSha()},t.judge_num)):t.updateround():"bagua"==a?t.start_dazhao(a):"wulei"==a?2!=t.win?t.jueSha():t.updateround():"fenlie"==a&&(2!=t.win?t.jueSha():t.updateround()))})},t.prototype.updateround=function(e){var t=this,a=!1;if(this.state==this.gameScene.userChess&&(a=!0),this.gameScene.gameType==h.game_type.lianzhao&&(this.updateMyTurn(),0==this.bushu%2)){console.error("\u5e94\u8be5\u4e0d\u80fd\u70b9\u4e86"),this.istouch=!0;var n=this.myTurn;return this.myTurn=!1,void this.scheduleOnce(function(){t.gameScene.change_zhenfa(a),console.log("\u91cd\u65b0\u6062\u590d\u70b9\u51fb"),t.myTurn=n},.2)}this.updateMyTurn(),this.update_Whose_round(),this.updataState();var o=s.default.gameStateData.userZhenFaName,i=s.default.gameStateData.dsZhenFaName;this.gameScene.stopTime(),this.gameScene.startTime(this.state),a?(console.log("\u5230\u5bf9\u624b\u4e86\u54e6",this.state),"meihua"==i&&this.front_com.ds_meihua_num>0?(c.conMager.getInstance().playAudioEff("nv/nvmeihuapo"),this.front_com.add_zhenfa_ani(i,"po",function(){c.conMager.getInstance()._msgAtion.emit("meihua_zhakai",t.state),t.scheduleOnce(function(){t.aiLuozi(e)},1)},!a)):this.aiLuozi(e)):(this.istouch=!0,"meihua"==o&&this.front_com.user_meihua_num>0&&(c.conMager.getInstance().playAudioEff("nan/nanmeihuapo"),this.front_com.add_zhenfa_ani(o,"po",function(){c.conMager.getInstance()._msgAtion.emit("meihua_zhakai",t.state)},!a)))},t.prototype.daZhaoCb=function(e){var t=this,a=s.default.getUser().userData.zhenFaMap[e].attr,n=!1,o=this.getZhenFaName(this.state),i=this.getZhenFaName(-1*this.state);if(console.log("\u5927\u62db\u64ad\u653e\u5b8c\u6bd5:",o.zhenFaName,e,this.dazhao_num),c.conMager.getInstance()._msgAtion.emit("startTimeDel"),c.conMager.getInstance()._msgAtion.emit("openSet"),2==a){var r=5;if("kedi"==e){var u=o.level;this.gameScene.gameType==h.game_type.lianzhao&&(u=this.state==this.gameScene.userChess?this.gameScene.user_level:this.gameScene.ds_level),this.judge_num=u+5,r=this.judge_num,this.qipan_shaomiao(this.state,function(){if(console.log("\u514b\u654c\u5148\u673a\u653e\u5b8c\u4e86",t.win,o),2==t.win){if("wulei"==o.zhenFaName||"wulei"==i.zhenFaName)return void t.start_dazhao("wulei",t.state);t.updateround(.5)}else t.updataState(),t.jueSha()},r)}else if("bagua"==e)"fenlie"==(d=(l=this.getZhenFaName(-1*this.state)).zhenFaName)?this.start_dazhao(l.zhenFaName,this.state):this.qipan_shaomiao(this.state,function(){2==t.win||0==t.win?t.qipan_shaomiao(-1*t.state,function(){var e=t.getZhenFaName(-1*t.state),a=e.zhenFaName,n=e.level;console.log("\u516b\u5366\u9635\u653e\u5b8c\u4e86",t.win,n+5,a,t.state),"kedi"==a?2!=t.win?t.qipan_shaomiao(-1*t.state,function(){console.log("\u516b\u5366\u9635\u540e\u7684\u514b\u654c\u5148\u673a",t.win,n+5),2==t.win?t.start_dazhao(a,-1*t.state):(t.updataState(),t.jueSha())},n+5):t.updateround(.5):"wulei"==a?t.start_dazhao(e.zhenFaName,-1*t.state):2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},r):(t.updataState(),t.jueSha())},r);else if("wulei"==e){var l,d,p=this.getZhenFaName(this.state).zhenFaName,g=5;if("kedi"==p&&(this.state==this.gameScene.userChess?g+=s.default.gameStateData.ds_zhenfalevel:g+=s.default.getUser().userData.zhenFaMap.kedi.level),"fenlie"==(d=(l=this.getZhenFaName(-1*this.state)).zhenFaName))return void this.start_dazhao(d,this.state);this.qipan_shaomiao(this.state,function(){console.log("\u4e94\u96f7\u9635\u653e\u5b8c\u4e86",t.win,p),2==t.win?t.updateround(.5):(t.updataState(),t.jueSha())},g)}else if("fenlie"==e){var _=this.getZhenFaName(this.state),m=_.zhenFaName,f=function(){if(2==t.win){var e=t.getZhenFaName(t.state).zhenFaName;"wulei"==e?t.wulei_to_fenlie<t.wulei_to_fenlie_max?(t.wulei_to_fenlie++,t.start_dazhao(e,t.state)):t.updateround(.5):"bagua"==e&&t.bagua_to_fenlie<t.bagua_to_fenlie_max?(t.bagua_to_fenlie++,t.start_dazhao(e,t.state)):t.updateround(.5)}else t.updataState(),t.jueSha()};"wulei"==m||"bagua"==m?(0==this.fenlie_number?f():this.qipan_shaomiao(this.state,function(){f()},r),this.fenlie_number++):"kedi"==m?(u=_.level,this.judge_num=u+5,this.qipan_shaomiao(this.state,function(){console.log("\u5206\u88c2\u514b\u654c\u80fd\u4e94\u5b50\u8fde\u73e0"),2==t.win?t.updateround(.5):t.qipan_shaomiao(t.state,function(){console.log("\u591a\u5c11\u554a",t.judge_num),2==t.win?t.start_dazhao(m,t.state):(t.updataState(),t.jueSha())},t.judge_num)},5)):this.qipan_shaomiao(this.state,function(){f()},r)}}else if(1==a)if(console.log("\u4e3b\u52a8\u6280\u80fd\u653e\u5b8c\u4e86",this.state),"xueyuyingsha"==e){var y=this.front_com.xueyuChessPosList.length;if(console.log("\u4e3b\u52a8\u6280\u80fd\u653e\u5b8c\u4e8611111111",y,o.level,o.zhenFaName),"wulei"==o.zhenFaName||"wulei"==i.zhenFaName)return c.conMager.getInstance()._msgAtion.emit("del_xueXian"),void this.start_dazhao("wulei",this.state);if("bagua"==o.zhenFaName)return c.conMager.getInstance()._msgAtion.emit("del_xueXian"),void this.start_dazhao("bagua",this.state);"kedi"==o.zhenFaName?(this.state==this.gameScene.userChess&&(n=!0),u=o.level,y>=5&&y>=u+5?this.front_com.add_zhenfa_ani("pokedi","animation",function(){t.chess_index=t.front_com.xueyuChessPosList,t.win=t.state,t.is_xueyulianzhu=!0,t.jueSha()},!n):this.dz_judge(e)):y>=5?(this.chess_index=this.front_com.xueyuChessPosList,this.win=this.state,this.is_xueyulianzhu=!0,this.jueSha()):this.dz_judge(e)}else{if("wulei"==o.zhenFaName||"wulei"==i.zhenFaName)return void this.start_dazhao("wulei",this.state);this.dz_judge(e)}},t.prototype.meihuazhencb=function(e){var t=this,a=this.getZhenFaName(this.state);console.log("\u6885\u82b1\u56de\u8c03\u8fdb\u6765\u4e86\u5417",e,a),this.qipan_shaomiao(e,function(){console.log("\u6885\u82b1\u56de\u8c03\u8fdb\u6765\u4e86\u5417222222222222",t.win),2!=t.win&&("kedi"==a.zhenFaName?(t.judge_num=a.level+5,t.qipan_shaomiao(e,function(){console.log("\u6885\u82b1\u56de\u8c03\u8fdb\u6765\u4e86\u54173333333333333",t.win),2!=t.win&&t.jueSha()},t.judge_num)):t.jueSha())})},t.prototype.getZhenFaName=function(e){var t="wanning",a=!1,n=1;return e==this.gameScene.userChess?(a=!0,t=s.default.gameStateData.dsZhenFaName,n=s.default.gameStateData.ds_zhenfalevel):(t=s.default.gameStateData.userZhenFaName,n=s.default.getUser().userData.zhenFaMap[t].level),{zhenFaName:t,is_user:a,level:n}},t.prototype.dazhao_moveInChess=function(e,t,a,n){var o=Math.floor(e/this.block),i=Math.floor(t/this.block);if(cc.v2(o,i),!(o>14||i>14||o<0||i<0)&&0==this.maze[o][i]){if(n&&"meihua"==n){var s;s=a>0?2:-2,this.maze[o][i]=s}else this.maze[o][i]=a;var r=o+15*i;this.chess_pos[r]=[o,i],this.newY=t,this.newx=e,this.sum+=1,this.AITurn.addPos(o,i,a),this.gameScene.moveInChess(e,t,a,!0)}},t.prototype.meihuaZhenLuozi=function(e,t,a){var n=e,o=t;if(e=Math.floor(e*this.block),t=Math.floor(t*this.block),!(n>14||o>14||n<0||o<0)){var i;a>0?2:-2,i=a,this.maze[n][o]=i;var s=n+15*o;this.chess_pos[s]=[n,o],this.newY=t,this.newx=e,this.sum+=1,this.AITurn.addPos(n,o,a),this.gameScene.moveInChess(e,t,a,!0)}},t.prototype.qipan_shaomiao=function(e,t,a){if(!this.juesha_judge)if(a||(a=5),this.win=2,2==this.gameScene.gameType||this.gameScene.gameType==h.game_type.lianzhao)for(var n=0;n<15;n++)for(var o=0;o<15;o++)for(var i=0;i<4;i++){if(this.checkWin(n,o,e,this.checkMode[i],a))return t();if(14==n&&14==o&&3==i)return t()}else for(i=0;i<4;i++){if(this.checkWin(this.newx/46,this.newY/46,e,this.checkMode[i],a))return t();if(3==i)return t()}},t.prototype.checkWin=function(e,t,a,n,o){if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.chess_index=[];var i=[e,t];this.chess_index.push(i);for(var s=1,r=1;r<15;r++)if(this.maze[e+r*n[0]]){var c=e+r*n[0],h=t+r*n[1];if(this.maze[c][h]!=a)break;s++;var u=[c,h];this.chess_index.push(u)}for(var l=1;l<15;l++)if(this.maze[e-l*n[0]]){if(c=e-l*n[0],h=t-l*n[1],this.maze[c][h]!=a)break;s++;var d=[c,h];this.chess_index.push(d)}return s>=o?(this.win=2==a?1:-2==a?-1:a,this.judge(),!0):(this.sum>=225&&(this.win=0),!1)}},t.prototype.judge=function(){2==this.gameScene.gameType||this.gameScene.gameType==h.game_type.lianzhao||2!=this.win&&this.jueSha()},t.prototype.jueSha=function(){var e=this;if(1!=this.juesha_judge)if(c.conMager.getInstance()._msgAtion.emit("closeAllSetBtn"),this.juesha_judge=!0,this.ai_qiuhe_judge=!1,this.gameScene.count_down.active=!1,this.gameScene.stopTime(),0!=this.win){var t="nv/nv";this.win==this.gameScene.userChess&&(t="nan/nan"),this.gameScene.node.getChildByName("mask").active=!0,this.myTurn=!1;var a=this.chess_index.length;this.scheduleOnce(function(){var n=.1;a>20&&(n=2/a);for(var o=function(o){var i=e.chess_index[o],s=i[0]+15*i[1];e.scheduleOnce(function(){c.conMager.getInstance().playAudioEff("btn1");var n=e.chess_map[s];n.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.callFunc(function(){n.getChildByName("guang").active=!0,o==a-1&&(e.is_xueyulianzhu?c.conMager.getInstance().getPoolNode(c.KEY.poolName.lianzhu,cc.find("Cnavas"),{num:a,callBack:function(){e.scheduleOnce(function(){c.conMager.getInstance().playAudioEff(t+"juesha")},.3),c.conMager.getInstance().playAudioEff(c.KEY.audioName.juesha),c.conMager.getInstance().getPoolNode(c.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}})}}):(e.scheduleOnce(function(){c.conMager.getInstance().playAudioEff(t+"juesha")},.3),c.conMager.getInstance().playAudioEff(c.KEY.audioName.juesha),c.conMager.getInstance().getPoolNode(c.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}})))})))},o*n)},i=0;i<a;i++)o(i)},.5)}else this.gameScene.gameOver()},t.prototype.addListenner=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.removeListennner=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.user_huiqi_fun=function(){if(console.log("\u6765\u6094\u68cb",this.state,this.gameScene.gameType),this.gameScene.gameType==h.game_type.canju){this.state=this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;if(this.new_userChessPso.length<=0)return;return this.gameScene.hongDian.active=!1,void this.huiqi_destory(this.new_userChessPso,this.state)}3==this.gameScene.gameType?this.huiqiJudge?(this.huiqi_destory(this.new_userChessPso),this.updataState(),this.gameScene.startTime(this.state)):c.conMager.getInstance().getPoolNode(c.KEY.poolName.tipNode,this.node,"\u8bf7\u5148\u843d\u5b50!"):(this.state=this.gameScene.userChess,e=this.new_aiChessPso.length,t=this.new_userChessPso.length,console.log("\u6094\u68cb\u6570\u7ec4\u957f\u5ea6:  ai:",e+"__\u73a9\u5bb6 :"+t),this.huiqi_destory(this.new_userChessPso,this.state),e>t?this.huiqi_destory(this.new_aiChessPso,-1*this.state):e==t&&-1==this.gameScene.userChess&&this.huiqi_destory(this.new_aiChessPso,-1*this.state)),this.gameScene.hongDian.active=!1,this.new_userChessPso.length<=0&&c.conMager.getInstance()._msgAtion.emit("closeHuiqi")},t.prototype.ds_huiqi_fun=function(){console.log("AI\u6765\u6094\u68cb",this.state),this.state=-1*this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;this.huiqi_destory(this.new_aiChessPso,this.state),t>e?this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess):e==t&&-1!=this.gameScene.userChess&&this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess),this.ai_huiqi-=1,this.gameScene.startTime(this.state),this.myTurn=!1,this.ai_huiqi_judge=!0,this.gameScene.hongDian.active=!1,this.aiLuozi()},t.prototype.huiqi_destory=function(e,t){var a=e[e.length-1],n=a[0]+15*a[1],o=this.chess_map[n];this.chess_map[n]=null,this.maze[a[0]][a[1]]=0,e.splice(e.length-1),this.chess_pos[n]=[],o.destroy(),this.AITurn.delPos(a[0],a[1],-1*t)},i([l],t)}(cc.Component));a.GameBoard=d,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","./../../SSSGF/dataController/gameDataManager":"gameDataManager","./Piece":"Piece"}],GameScene:[function(e,t,a){"use strict";cc._RF.push(t,"3184dpQe1VMBYEB7ls/iif/","GameScene");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.GameScene=void 0;var s=e("./GameBoard"),r=e("./Piece"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.restart=null,t.button=null,t.buttonAI=null,t.mask=null,t.label=null,t.whiteChess=null,t.blackChess=null,t.AIMODE=!1,t.resistEvent=null,t.board=null,t.overTips="",t}return o(t,e),t.prototype.onLoad=function(){this.board.init(this)},t.prototype.moveInChess=function(e,t,a){var n;console.log("\u662f\u58a8\u5b50\u4e86\u5417"),(n=a==r.BLACKCHESS?cc.instantiate(this.blackChess):cc.instantiate(this.whiteChess)).x=e,n.y=t,this.node.addChild(n),-1!=this.board.win&&this.gameOver()},t.prototype.gameOver=function(){this.board.removeListennner(),1==this.board.win?this.overTips="\u767d\u68cb\u80dc\u5229!":2==this.board.win?this.overTips="\u9ed1\u68cb\u80dc\u5229!":this.overTips="\u5e73\u5c40",this.gameEnd()},t.prototype.gameEnd=function(){this.mask.node.active=!0,this.label.string=this.overTips,this.label.enabled=!0,this.restart.node.active=!0},t.prototype.clickToStart=function(e,t){this.AIMODE="false"!=t,console.log("hhhhhhhhhh",this.AIMODE),this.button.node.active=!1,this.buttonAI.node.active=!1,this.resistEvent.node.active=!1},t.prototype.reset=function(){cc.director.loadScene("Game")},i([u(cc.Button)],t.prototype,"restart",void 0),i([u(cc.Button)],t.prototype,"button",void 0),i([u(cc.Button)],t.prototype,"buttonAI",void 0),i([u(cc.Sprite)],t.prototype,"mask",void 0),i([u(cc.Label)],t.prototype,"label",void 0),i([u(cc.Prefab)],t.prototype,"whiteChess",void 0),i([u(cc.Prefab)],t.prototype,"blackChess",void 0),i([u(cc.Sprite)],t.prototype,"resistEvent",void 0),i([u(s.GameBoard)],t.prototype,"board",void 0),i([h],t)}(cc.Component);a.GameScene=l,cc._RF.pop()},{"./GameBoard":"GameBoard","./Piece":"Piece"}],GameState:[function(e,t,a){"use strict";cc._RF.push(t,"4b19ckXLT9IjLWkyFNsrRMZ","GameState"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],Grid:[function(e,t,a){"use strict";cc._RF.push(t,"1f404J1/h5G6on/rpeYRh/M","Grid"),Object.defineProperty(a,"__esModule",{value:!0}),a.Grid=void 0;var n=e("./Point"),o=function(){function e(e,t){this._numCols=e,this._numRows=t,this._nodes=[];for(var a=0;a<e;a++){this._nodes[a]=[];for(var o=0;o<t;o++)this._nodes[a][o]=new n.Point(a,o)}}return e.prototype.getNode=function(e,t){return this._nodes[e][t]},e.prototype.setEndNode=function(e,t){this._endNode=this._nodes[e][t]},e.prototype.setStartNode=function(e,t){this._startNode=this._nodes[e][t]},e.prototype.setWalkable=function(e,t,a){this._nodes[e][t].walkable=a},Object.defineProperty(e.prototype,"endNode",{get:function(){return this._endNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numCols",{get:function(){return this._numCols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numRows",{get:function(){return this._numRows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startNode",{get:function(){return this._startNode},enumerable:!1,configurable:!0}),e}();a.Grid=o,cc._RF.pop()},{"./Point":"Point"}],Helloworld:[function(e,t,a){"use strict";cc._RF.push(t,"e1b90/rohdEk4SdmmEZANaD","Helloworld");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,h=e("../utils/as_util"),u=e("../utils/getDataFromServer"),l=e("../utils/platform"),d=e("./../SSSGF/ssscgf"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.json_=null,t.timeFlag=0,t._resCount=2,t._finishCount=0,t.is_game=!1,t}return o(t,e),t.prototype.onLoad=function(){l.platform.now_platform!=l.platform_type.is_tt&&(this.node.getChildByName("shiLin").active=!0)},t.prototype.start=function(){var e=this;console.log("------------------hello   --"),window.kwaigame&&kwaigame.readyGo(),d._pl_fun.getInstance().init(),d.conMager.getInstance().init(),d.conMager.getInstance()._msgAtion.on("loadingRes",this.loadingEnd,this),d.GameDataStorage.init(),this._resCount=2,d.conMager.getInstance()._msgAtion.on("runMainScene",this.runMainScene,this),cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabled=!0;var t=this.node.getComponent(cc.Canvas);if(cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(t.fitWidth=!1,t.fitHeight=!0),window.tt){var a=tt.getLaunchOptionsSync();console.log("------------\u542f\u52a8\u53c2\u6570:",a);try{"{}"!=JSON.stringify(a.query)&&a.query.roomid&&(d.GameDataStorage.gameStateData.room_id=a.query.roomid)}catch(n){}}cc.sys.isNative&&(cc.game.on("showMask",function(){d.conMager.getInstance().getPoolNode(d.KEY.poolName.Mask,cc.find("Cnavas"))}),l.platform.rank_channel=h.as_util.sendJavaGetRankChannel(),null!=l.platform.rank_channel&&null!=l.platform.rank_channel&&""!=l.platform.rank_channel||(l.platform.rank_channel="zijiaSDK_TapTap_wuziqi")),l.platform.now_platform!=l.platform_type.is_tt&&"Ohayoo"==h.as_util.sendJavaGetChannel()&&(h.as_util.createTextBtn(this.node,{str:"\u300a\u7528\u6237\u534f\u8bae\u300b",pos:cc.v2(-100,-500),color:"#ffffff"},function(){console.log("\u7528\u6237\u534f\u8bae"),h.as_util.open("https://lf3-cdn-tos.draftstatic.com/obj/ies-hotsoon-draft/88888888/wanning2.html")}),h.as_util.createTextBtn(this.node,{str:"\u300a\u9690\u79c1\u8bbe\u7f6e\u300b",pos:cc.v2(100,-500),color:"#fffffff"},function(){console.log("\u9690\u79c1\u8bbe\u7f6e"),d.conMager.getInstance().getPoolNode(d.KEY.poolName.yinsi_setting,e.node)}))},t.prototype.getDataFromServer=function(e){var t=this;d.GameDataStorage.getUser().userData.version_num=1,d.GameDataStorage.getUser().userData.openId?(console.log("\u672c\u5730\u6709ID:",d.GameDataStorage.getUser().userData.openId),this.check_open(e)):(console.log("\u65e0ID"),u.getDataFromServer.getOpenId(function(a){a?(console.log("openid\u83b7\u53d6\u6210\u529f!"),t.check_open(e)):(console.log("openid\u83b7\u53d6\u5931\u8d25!"),e&&e())}))},t.prototype.check_open=function(e){console.log("\u5f00\u59cb\u5224\u65adID"),u.getDataFromServer.check_openid(function(t,a){var n=d.GameDataStorage.getUser().userData;if(t)if(console.log("openid\u5224\u65ad\u6210\u529f!",a),a){var o=a.version_num,i=n.version_num;i>=o?u.getDataFromServer.setUserData(n,function(t){t?(console.log("\u6570\u636e\u5b58\u50a8\u6210\u529f!"),e&&e()):(console.log("\u6570\u636e\u5b58\u50a8\u5931\u8d25!"),e&&e())}):i<o?u.getDataFromServer.getUserData(function(t,a){t?(console.log("\u6570\u636e\u83b7\u53d6\u6210\u529f!",a),a?(d.GameDataStorage.updateGameData(a),e&&e()):e&&e()):(console.log("\u6570\u636e\u83b7\u53d6\u5931\u8d25!"),e&&e())}):e&&e()}else e&&e();else console.log("openid\u5224\u65ad\u5931\u8d25!"),e&&e()})},t.prototype.runScene=function(){console.log("\u8fd8\u7d2f\u6765\u4e48"),cc.assetManager.loadBundle("prefabView",function(e){console.log("prefabView",e),cc.assetManager.loadBundle("prefabPool",function(e){console.log("prefabPool",e),cc.assetManager.loadBundle("shaderEffects",function(e){console.log("shaderEffects",e),cc.assetManager.loadBundle("resources",function(e){console.log("resources",e),cc.assetManager.loadBundle("res",function(e){console.log("res",e),cc.assetManager.loadBundle("pvpGame",function(e){console.log("pvpGame",e),cc.assetManager.loadBundle("audioRes",function(e){console.log("audioRes",e),d.conMager.getInstance().initAudio(function(){d.conMager.getInstance()._msgAtion.emit("runMainScene")})})})})})})})})},t.prototype.loadingEnd=function(){var e=this;if(this._finishCount++,console.log("------------------loadingEnd:",this._finishCount),this._finishCount==this._resCount){if(this._finishCount=0,!d.GameDataStorage.getUser().userData.isNewUser)return void this.runScene();this.schedule(function(){console.log("\u4e09\u79d2\u62c9\u4e0d\u5230\uff0c\u76f4\u63a5\u8fdb\u6e38\u620f"),e.is_game=!0,e.runScene()},5),console.log("\u4e09\u6b21\u4ee5\u540e\u8fdb\u5165\u6e38\u620f"),this.getDataFromServer(function(){if(e.unscheduleAllCallbacks(),!e.is_game)if(d.LogWrap.info("change gameScene"),d.conMager.getInstance()._msgAtion.off("loadingRes"),window.tt||window.kwaigame)e.runScene();else if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID){var t=e.json_.json,a="";cc.sys.isNative&&(a=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","getJsonPath","()Ljava/lang/String;")),l.platform.data=t.is_233_mailiang,a=a+"?time="+(new Date).getTime(),h.as_util.getJsons(a).then(function(){window.loadAdConfig(a),console.log("\u73b0\u5728\u7684\u6570\u636e\u662f",l.platform.now_platform),cc.assetManager.loadBundle("scenes",function(){e.runScene()})})}else e.runScene()})}},t.prototype.runMainScene=function(){cc.assetManager.loadBundle("scenes",function(e,t){console.log("\u62c9\u53d6\u573a\u666f:",e),t.loadScene("mainScene",function(e,t){cc.director.runScene(t)})})},i([c({type:cc.JsonAsset,tooltip:"\u5b57\u6bb5json\u6570\u636e"})],t.prototype,"json_",void 0),i([r],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../utils/as_util":"as_util","../utils/getDataFromServer":"getDataFromServer","../utils/platform":"platform","./../SSSGF/ssscgf":"ssscgf"}],KEY:[function(e,t,a){"use strict";cc._RF.push(t,"eef29OgcONPPbf2Ii83koSo","KEY"),Object.defineProperty(a,"__esModule",{value:!0}),a.KEY=void 0,function(e){var t,a,n,o;(function(e){e.slectGmae="slectGmae",e.success_view="success_view",e.fail_view="fail_view",e.jd_game_view="jd_game_view",e.flat_view="flat_view",e.share_view="share_view",e.level_view="level_view",e.duiyi_result_view="duiyi_result_view",e.dz_game_view="dz_game_view",e.zhibo_game_view="zhibo_game_view",e.luandou_game_view="luandou_game_view",e.luanDou_view="luanDou_view",e.luandou_hbdd_view="luandou_hbdd_view",e.skin_store_view="skin_store_view",e.xuezhan_selectGame="xuezhan_slectGame",e.shop_view="shop_view",e.rank_view="rank_view",e.canju_game_view="canju_game_view",e.lianzhao_view="lianzhao_view",e.select_saichang_node="select_saichang_node",e.sanren_view="sanren_view",e.dazhao_game_view="dazhao_game_view",e.pvp_game_view="pvp_game_view",e.heqi_sanren_panel="heqi_sanren_panel",e.luandou_jxmc_view="luandou_jxmc_view",e.luandou_tslh_view="luandou_tslh_view",e.xuezhandaodi_game_view="xuezhandaodi_game_view",e.game_board="game_board",e.luandou_blxj_view="luandou_blxj_view",e.scoring_view="scoring_view"})(n=e.UIName||(e.UIName={})),e.UICF=((t={})[n.slectGmae]={prefab:"slectGmae",isCommonlyUsed:!1},t[n.xuezhan_selectGame]={prefab:"xuezhan_selectGame",isCommonlyUsed:!1},t[n.success_view]={prefab:"success_view",isCommonlyUsed:!1},t[n.fail_view]={prefab:"fail_view",isCommonlyUsed:!1},t[n.jd_game_view]={prefab:"jd_game_view",isCommonlyUsed:!1},t[n.flat_view]={prefab:"flat_view",isCommonlyUsed:!1},t[n.share_view]={prefab:"share_view",isCommonlyUsed:!1},t[n.level_view]={prefab:"level_view",isCommonlyUsed:!1},t[n.duiyi_result_view]={prefab:"duiyi_result_view",isCommonlyUsed:!1},t[n.dz_game_view]={prefab:"dz_game_view",isCommonlyUsed:!1},t[n.zhibo_game_view]={prefab:"zhibo_game_view",isCommonlyUsed:!1},t[n.luandou_game_view]={prefab:"luandou_game_view",isCommonlyUsed:!1},t[n.luanDou_view]={prefab:"luanDou_view",isCommonlyUsed:!1},t[n.luandou_hbdd_view]={prefab:"luandou_hbdd_view",isCommonlyUsed:!1},t[n.skin_store_view]={prefab:"skin_store_view",isCommonlyUsed:!1},t[n.shop_view]={prefab:"shop_view",isCommonlyUsed:!1},t[n.rank_view]={prefab:"rank_view",isCommonlyUsed:!0},t[n.canju_game_view]={prefab:"canju_game_view",isCommonlyUsed:!1},t[n.lianzhao_view]={prefab:"lianzhao_view",isCommonlyUsed:!1},t[n.select_saichang_node]={prefab:"select_saichang_node",isCommonlyUsed:!1},t[n.sanren_view]={prefab:"sanren_view",isCommonlyUsed:!1},t[n.dazhao_game_view]={prefab:"dazhao_game_view",isCommonlyUsed:!1},t[n.pvp_game_view]={prefab:"pvp_game_view",isCommonlyUsed:!1},t[n.heqi_sanren_panel]={prefab:"heqi_sanren_panel",isCommonlyUsed:!1},t[n.luandou_jxmc_view]={prefab:"luandou_jxmc_view",isCommonlyUsed:!1},t[n.luandou_tslh_view]={prefab:"luandou_tslh_view",isCommonlyUsed:!1},t[n.xuezhandaodi_game_view]={prefab:"xuezhandaodi_game_view",isCommonlyUsed:!1},t[n.game_board]={prefab:"game_board",isCommonlyUsed:!1},t[n.luandou_blxj_view]={prefab:"luandou_blxj_view",isCommonlyUsed:!1},t[n.scoring_view]={prefab:"scoring_view",isCommonlyUsed:!1},t),function(e){e.medalNode="medalNode",e.tipNode="tipNode",e.tipNode2="tipNode2",e.stop_panel="stop_panel",e.gold_buzu_panel="gold_buzu_panel",e.qiandao_panel="qiandao_panel",e.userIndo_panel="userIndo_panel",e.userInfo_panel="userInfo_panel",e.zhenfa_ani="zhenfa_ani",e.mianfei_gold_panel="mianfei_gold_panel",e.heqi_panel="heqi_panel",e.add_desktop_panel="add_desktop_panel",e.settings_panel="settings_panel",e.updateNiCheng_panel="updateNiCheng_panel",e.jiabei="jiabei",e.jiabei_sanren="jiabei_sanren",e.qizi="qizi",e.zhibo_setting_panel="zhibo_setting_panel",e.zidang_wulei="zidang_wulei",e.baozha_wulei="baozha_wulei",e.wu="baozha_wulei",e.xueXian="xueXian",e.xueyuChessSke="xueyuChessSke",e.lianzhu="lianzhu",e.meihua="meihua_",e.Mask="Mask",e.YongHuXieYi="YongHuXieYi",e.YinSiXieYi="YinSiXieYi",e.item1="item1",e.item2="item2",e.item3="item3",e.setup="setup",e.user_headPanel="user_headPanel",e.duye="duye",e.new_duye="new_duye",e.duye_rongjie="duye_rongjie",e.jxmc_jixie="jxmc_jixie",e.zhenfa_ka="zhenfa_ka",e.jineng_xuanze="jineng_xuanze",e.ka_heti="ka_heti",e.kunlongkuang="kunlongkuang",e.juehun_shou="juehun_shou",e.head_icon="head_icon",e.new_chess="new_chess",e.kedi_num="kedi_num",e.guiyuan_num="guiyuan_num",e.boli_anima="boli_anima",e.wulei_zidan="wulei_zidan",e.shiLing_view="shiLing_view",e.yinsi_setting="yinsi_setting",e.chaoniuguangbo="chaoniuguangbo",e.black_chess="black_chess",e.white_chess="white_chess",e.liehen="liehen",e.chaoniu_tudiliekai="chaoniu_tudiliekai",e.gssk_faguang="gssk_faguang",e.gssk_line="gssk_line",e.stone_chess="stone_chess",e.game_info="game_info",e.tip="tip",e.xz_lian_zhu="xz_lian_zhu",e.qixing_luozi="qixing_luozi",e.qixing_zhezhao="qixing_zhezhao",e.new_fenlie_qizi="new_fenlie_qizi",e.hua="hua",e.qixing_touch="qixing_touch",e.juehu_shou="juehu_shou"}(o=e.poolName||(e.poolName={})),e.POOLCF=((a={})[o.medalNode]={prefab:"common/medalNode",usePool:!0,maxCount:10},a[o.tipNode]={prefab:"common/tipNode",usePool:!0,maxCount:3},a[o.tipNode2]={prefab:"common/tipNode2",usePool:!0,maxCount:3},a[o.jiabei]={prefab:"common/jiabei",usePool:!0,maxCount:2},a[o.jiabei_sanren]={prefab:"common/jiabei_sanren",usePool:!0,maxCount:2},a[o.black_chess]={prefab:"chess/black_chess",usePool:!0,maxCount:255},a[o.white_chess]={prefab:"chess/white_chess",usePool:!0,maxCount:255},a[o.xueXian]={prefab:"common/xueXian",usePool:!0,maxCount:255},a[o.lianzhu]={prefab:"common/lianzhu",usePool:!0,maxCount:2},a[o.meihua]={prefab:"common/meihua_",usePool:!0,maxCount:255},a[o.wu]={prefab:"common/wu",usePool:!0,maxCount:255},a[o.item1]={prefab:"common/item1",usePool:!0,maxCount:2},a[o.item2]={prefab:"common/item2",usePool:!0,maxCount:2},a[o.item3]={prefab:"common/item3",usePool:!0,maxCount:2},a[o.setup]={prefab:"common/setup",usePool:!0,maxCount:2},a[o.user_headPanel]={prefab:"common/user_headPanel",usePool:!0,maxCount:2},a[o.stop_panel]={prefab:"panel/stop_panel",usePool:!0,maxCount:2},a[o.gold_buzu_panel]={prefab:"panel/gold_buzu_panel",usePool:!0,maxCount:2},a[o.qiandao_panel]={prefab:"panel/qiandao_panel",usePool:!0,maxCount:2},a[o.userIndo_panel]={prefab:"panel/userIndo_panel",usePool:!0,maxCount:2},a[o.userInfo_panel]={prefab:"panel/userInfo_panel",usePool:!0,maxCount:2},a[o.mianfei_gold_panel]={prefab:"panel/mianfei_gold_panel",usePool:!0,maxCount:2},a[o.heqi_panel]={prefab:"panel/heqi_panel",usePool:!0,maxCount:2},a[o.settings_panel]={prefab:"panel/settings_panel",usePool:!0,maxCount:2},a[o.updateNiCheng_panel]={prefab:"panel/updateNiCheng_panel",usePool:!0,maxCount:2},a[o.add_desktop_panel]={prefab:"panel/add_desktop_panel",usePool:!0,maxCount:2},a[o.Mask]={prefab:"common/Mask",usePool:!0,maxCount:2},a[o.YongHuXieYi]={prefab:"common/YongHuXieYi",usePool:!0,maxCount:2},a[o.YinSiXieYi]={prefab:"common/YinSiXieYi",usePool:!0,maxCount:2},a[o.zhenfa_ani]={prefab:"zhenfa/zhenfa_ani",usePool:!0,maxCount:3},a[o.zidang_wulei]={prefab:"zhenfa/wuleizhen/zidang_wulei",usePool:!0,maxCount:2},a[o.baozha_wulei]={prefab:"zhenfa/wuleizhen/baozha_wulei",usePool:!0,maxCount:2},a[o.zhibo_setting_panel]={prefab:"panel/zhibo_setting_panel",usePool:!0,maxCount:2},a[o.qizi]={prefab:"zhenfa/fenlie_ani",usePool:!0,maxCount:2},a[o.xueyuChessSke]={prefab:"zhenfa/xueyuyingsha/xueyuChessSke",usePool:!0,maxCount:255},a[o.kunlongkuang]={prefab:"zhenfa/kunlong/kunlongkuang",usePool:!0,maxCount:2},a[o.qixing_luozi]={prefab:"zhenfa/qixing/qixing_luozi",usePool:!0,maxCount:255},a[o.qixing_zhezhao]={prefab:"zhenfa/qixing/qixing_zhezhao",usePool:!0,maxCount:255},a[o.qixing_touch]={prefab:"zhenfa/qixing/qixing_touch",usePool:!0,maxCount:255},a[o.chaoniuguangbo]={prefab:"zhenfa/chaoniu/chaoniuguangbo",usePool:!0,maxCount:2},a[o.chaoniu_tudiliekai]={prefab:"zhenfa/chaoniu/chaoniu_tudiliekai",usePool:!0,maxCount:255},a[o.liehen]={prefab:"zhenfa/chaoniu/liehen",usePool:!0,maxCount:255},a[o.duye]={prefab:"zhenfa/dusha/duye",usePool:!0,maxCount:1e3},a[o.new_duye]={prefab:"zhenfa/dusha/new_duye",usePool:!0,maxCount:1e3},a[o.duye_rongjie]={prefab:"zhenfa/dusha/duye_rongjie",usePool:!0,maxCount:255},a[o.juehun_shou]={prefab:"zhenfa/juehu/juehun_shou",usePool:!0,maxCount:255},a[o.jxmc_jixie]={prefab:"common/jxmc_jixie",usePool:!0,maxCount:255},a[o.zhenfa_ka]={prefab:"common/zhenfa_ka",usePool:!0,maxCount:255},a[o.jineng_xuanze]={prefab:"panel/jineng_xuanze",usePool:!0,maxCount:255},a[o.ka_heti]={prefab:"common/ka_heti",usePool:!0,maxCount:255},a[o.head_icon]={prefab:"common/head_icon",usePool:!0,maxCount:255},a[o.new_chess]={prefab:"chess/new_chess",usePool:!0,maxCount:255},a[o.kedi_num]={prefab:"zhenfa/kedi/kedi_num",usePool:!0,maxCount:2},a[o.guiyuan_num]={prefab:"zhenfa/guiyuan/guiyuan_num",usePool:!0,maxCount:2},a[o.boli_anima]={prefab:"common/boli_anima",usePool:!0,maxCount:10},a[o.wulei_zidan]={prefab:"common/wulei_zidan",usePool:!0,maxCount:255},a[o.shiLing_view]={prefab:"common/shiLing_view",usePool:!0,maxCount:2},a[o.yinsi_setting]={prefab:"common/yinsi_setting",usePool:!0,maxCount:2},a[o.gssk_faguang]={prefab:"common/gssk_faguang",usePool:!0,maxCount:2},a[o.gssk_line]={prefab:"common/gssk_line",usePool:!0,maxCount:8},a[o.stone_chess]={prefab:"common/stone_chess",usePool:!0,maxCount:28},a[o.game_info]={prefab:"common/game_info",usePool:!0,maxCount:2},a[o.tip]={prefab:"common/tip",usePool:!0,maxCount:2},a[o.xz_lian_zhu]={prefab:"xuezhan/xz_lian_zhu",usePool:!0,maxCount:1},a[o.new_fenlie_qizi]={prefab:"zhenfa/new_fenlie/new_fenlie_qizi",usePool:!0,maxCount:255},a[o.hua]={prefab:"common/hua",usePool:!0,maxCount:2},a[o.juehu_shou]={prefab:"zhenfa/juehu/juehu_shou",usePool:!0,maxCount:255},a),function(e){e.btn="btn",e.btn1="btn1",e.bgm="bgm",e.shengli="shengli",e.shibai="shibai",e.pingju="pingju",e.showpanel="\u7ffb\u724c",e.daxiao="ahahaha",e.luozi="xiaqi",e.pipeizhong="pipei_zhong",e.pipeichenggong="pipei_chenggong",e.kaiju="kaiju",e.juesha="pifu",e.zhangjinyang="zhangjinyang",e.shengji="shengji",e.nanwanning="nanwanning",e.shijian="shijian",e.polie="polie",e.zc="zc",e.xueliu="liudong",e.xuezha="zha1",e.dijilun="dijilun",e.chuxianpai="chuxianpai",e.fanpai="fanpai",e.xuanpai="xuanpai",e.jxmc_up="luandou_jxmc/jxmc_up",e.jxmc_down="luandou_jxmc/jxmc_down",e.jxmc_angle="luandou_jxmc/jxmc_angle",e.kack_ka="lianzhao/back_ka",e.on_ka="lianzhao/on_ka",e.put_ka="lianzhao/put_ka",e.put_out_ka="lianzhao/put_out_ka",e.ronghe_ka="lianzhao/ronghe_ka",e.cuowu_ka="lianzhao/cuowu_ka",e.nv_juesha="nv/nvjuesha",e.nan_juesha="nan/nanjuesha",e.boli="boli",e.gssk_jiguang="gssk_jiguang"}(e.audioName||(e.audioName={})),e.boneName||(e.boneName={}),e.BONECF={},function(e){e[e.PUTONG=0]="PUTONG",e[e.WEIXIAO=1]="WEIXIAO",e[e.DAXIAO=2]="DAXIAO",e[e.KUQI=3]="KUQI",e[e.JINGYA=4]="JINGYA",e[e.FANKU=5]="FANKU",e[e.SHUIZHE=6]="SHUIZHE",e[e.TOUKAN=7]="TOUKAN"}(e.expression||(e.expression={})),function(e){e[e.jinbi=1]="jinbi",e[e.WEIXIAO=1]="WEIXIAO",e[e.DAXIAO=2]="DAXIAO",e[e.KUQI=3]="KUQI",e[e.JINGYA=4]="JINGYA",e[e.FANKU=5]="FANKU",e[e.SHUIZHE=6]="SHUIZHE",e[e.TOUKAN=7]="TOUKAN"}(e.gameDaoJuId||(e.gameDaoJuId={})),function(e){e.daiji="daiji",e.kaixin="kaixin",e.kuqi="kuqi"}(e.actions||(e.actions={}))}(a.KEY||(a.KEY={})),cc._RF.pop()},{}],Loading:[function(e,t,a){"use strict";cc._RF.push(t,"da8d7xD0I1JGbbu+xqY1muY","Loading");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.la_tips=null,t.pro_small=null,t.pro_total=null,t.index=0,t.sch_total=null,t.tipsArr=["\u6b63\u5728\u6e05\u7406\u68cb\u76d8","\u6b63\u5728\u6536\u62fe\u6b8b\u5c40","\u4e71\u6597\u6a21\u5f0f\u6bcf\u5468\u4f1a\u66f4\u65b0\u4e00\u4e2a\u73a9\u6cd5","\u4e0d\u540c\u9635\u6cd5\u4f1a\u76f8\u4e92\u514b\u5236","\u6b63\u5728\u5f00\u7a97\u901a\u98ce","\u4e07\u5b81\u6b63\u5728\u68b3\u5986\u6253\u626e","\u53f6\u60ca\u9e3f\u6b63\u5728\u6355\u6349\u8774\u8776","\u6b63\u5728\u6e05\u6d17\u8336\u5177","\u6b63\u5728\u53eb\u9192\u95e8\u7ae5","\u9601\u95e8\u5373\u5c06\u6253\u5f00","\u6b22\u8fce\u6765\u5230\u4e07\u5b81\u4e94\u5b50\u68cb"],t}return o(t,e),t.prototype.onLoad=function(){this.la_tips.string=this.tipsArr[this.index],this.pro_small.progress=0,this.pro_total.progress=0,this.schedule(this.updateSmall,.5),this.schedule(this.updateTotal,1,20,.01),this.schedule(this.updateTips,1.8,10,.01)},t.prototype.start=function(){s.conMager.getInstance()._msgAtion.on("setProgress",this.setProgress,this)},t.prototype.updateTips=function(){this.index!=this.tipsArr.length-1&&(this.index++,this.la_tips.string=this.tipsArr[this.index])},t.prototype.updateSmall=function(){var e=this;this.pro_small.progress=0,this.pro_small.node.stopAllActions();var t=Math.random();cc.tween(this.pro_small).to(.2,{progress:t}).to(.25,{progress:1}).call(function(){e.pro_small.progress=0}).start()},t.prototype.updateTotal=function(){var e=this;this.pro_total.node.stopAllActions();var t=.2*Math.random(),a=this.pro_total.progress+t;cc.tween(this.pro_total).to(2,{progress:a}).call(function(){e.index==e.tipsArr.length-1&&e.scheduleOnce(function(){e.pro_total.progress=1},2)}).start()},t.prototype.onDestroy=function(){this.unschedule(this.updateSmall),this.unschedule(this.updateTotal),this.unschedule(this.updateTips)},t.prototype.setProgress=function(){this.pro_small.node.stopAllActions(),this.pro_total.node.stopAllActions(),this.unschedule(this.updateSmall),this.unschedule(this.updateTotal),this.unschedule(this.updateTips),this.pro_small.progress=1,this.pro_total.progress=1},i([h(cc.Label)],t.prototype,"la_tips",void 0),i([h(cc.ProgressBar)],t.prototype,"pro_small",void 0),i([h(cc.ProgressBar)],t.prototype,"pro_total",void 0),i([c],t)}(cc.Component);a.default=u,cc._RF.pop()},{"../SSSGF/ssscgf":"ssscgf"}],LogWrap:[function(e,t,a){"use strict";cc._RF.push(t,"9175ex1C9xNuoYZ43flJa0Q","LogWrap"),Object.defineProperty(a,"__esModule",{value:!0}),a.LogWrap=void 0;var n=function(){function e(){}return e.getDateString=function(){var e=new Date,t=e.getHours().toString(),a="";return a+=(1==t.length?"0"+t:t)+":",a+=(1==(t=e.getMinutes().toString()).length?"0"+t:t)+":",1==(t=e.getMilliseconds().toString()).length&&(t="00"+t),2==t.length&&(t="0"+t),"["+(a+=t)+"]"},e.stack=function(e){var t=(new Error).stack.split("\n");t.shift();var a=[];t.forEach(function(e){var t,n=(e=e.substring(7)).split(" ");n.length<2?a.push(n[0]):a.push(((t={})[n[0]]=n[1],t))});var n=[];if(e<a.length-1)for(var o in a[e])n.push(o);var i=n[0].split(".");return i[0]+".js->"+i[1]+": "},e.log=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=console.log||cc.log;n.call(this,"%s%s:"+cc.js.formatStr.apply(cc,arguments),e.stack(2),e.getDateString())},e.info=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=console.log||cc.log;n.call(this,"%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:#00CD00;",e.stack(2),e.getDateString())},e.warn=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=console.log||cc.log;n.call(this,"%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:#ee7700;",e.stack(2),e.getDateString())},e.err=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=console.log||cc.log;n.call(this,"%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:red",e.stack(2),e.getDateString())},e}();a.LogWrap=n,cc._RF.pop()},{}],NumberUtilTT:[function(e,t,a){"use strict";function n(e,t){var a=[e,t];if(e.length<t.length)return a[0]=t,a[1]=e,a[2]="not",a;if(e.length==t.length)for(var n=0;n<e.length;n++){if(a[0][n]>a[1][n])return a[0]=e,a[1]=t,a;if(a[0][n]<a[1][n])return a[0]=t,a[1]=e,a[2]="not",a;if(n==e.length-1)return a}return e.length>t.length?a:void 0}function o(e){if(0==e)return 0;for(var t=(e=e.split("")).length,a=0;a<t&&0==e[0];a++)e.splice(0,1);return e}cc._RF.push(t,"61075ago3hPvKSZt1zCviUR","NumberUtilTT"),a.__esModule=!0,a.NumberUtil=void 0;for(var i=["","K","M","B","T"],s=0;s<2;s++)for(var r=0;r<26;r++)i.push(String.fromCharCode(65+s)+String.fromCharCode(65+r));var c={unit_format:function(e){var t="";if((e=e.toString()).length>6){var a=parseInt(e.length/3),n=e.length%3;t=i[a-=0==n?2:1],e=e.substr(0,e.length-3*a)}return this.number_format(e,0,",")+t},number_format:function(e,t,a){e=(e+"").replace(/[^0-9+-Ee.]/g,"");var n=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):0,i=void 0===a?",":a,s="";s=(o?function(e,t){var a=Math.pow(10,t);return""+Math.ceil(e*a)/a}(n,o):""+Math.round(n)).split(".");for(var r=/(-?\d+)(\d{3})/;r.test(s[0]);)s[0]=s[0].replace(r,"$1"+i+"$2");return(s[1]||"").length<o&&(s[1]=s[1]||"",s[1]+=new Array(o-s[1].length+1).join("0")),s.join(".")},setNumberLength:function(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e},time_format:function(e){var t=this.setNumberLength(Math.floor(e/3600),2);return e%=3600,t+":"+this.setNumberLength(Math.floor(e/60),2)+":"+this.setNumberLength(e%60,2)},sortByType:function(e,t){return e.sort(function(e){return function(t,a){var n,o;if("object"==typeof t&&"object"==typeof a&&t&&a)return(n=t[e])===(o=a[e])?0:typeof n==typeof o?n<o?-1:1:typeof n<typeof o?-1:1;throw"error"}}(t))},countTime:function(e,t){t(e);var a=setInterval(function(){--e>=0?t(e):(cc.log("stop Interval="+a),clearInterval(a))}.bind(this),1e3);return a},clearInterval:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){cc.log("clearInterval="+e),clearInterval(e)}),isOneDay:function(e,t){var a=new Date(parseInt(e)),n=new Date(parseInt(t));return a.getFullYear()==n.getFullYear()&&a.getMonth()==n.getMonth()&&a.getDate()==n.getDate()},randomNum:function(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}},galaxyAdd:function(e,t){var a,o=[String(e),String(t)],i=[];(o=n(o[0],o[1]))[0]=o[0].split(""),o[1]=o[1].split(""),o[0].length!=o[1].length&&(a=new Array(o[0].length-o[1].length+1).join("0"),o[1]=a.split("").concat(o[1]));for(var s=0,r=o[0].length-1;r>=0;r--){var c=Number(o[0][r])+Number(o[1][r])+s;i.unshift(c%10),s=Math.floor(c/10),0==r&&0!=s&&i.unshift(s)}return i.join("")},galaxySub:function(e,t){var a,i=[String(e),String(t)],s=[];if(3==(i=n(i[0],i[1])).length)return!1;i[0]=i[0].split(""),i[1]=i[1].split(""),i[0].length!=i[1].length&&(a=new Array(i[0].length-i[1].length+1).join("0"),i[1]=a.split("").concat(i[1]));for(var r=0,c=i[0].length-1;c>=0;c--){var h=Number(i[0][c])-Number(i[1][c])-r;r=0,h<0&&(h+=10,r=1),s.unshift(h%10)}var u=s.join("");0==u[0]&&(u=o(u));for(var l="",d=0;d<u.length;d++)l+=""+u[d];return""==l&&(l="0"),l},galaxyMut:function(e,t){var a,i="number"==typeof(a=t)?null!=a.toString().split(".")[1]?a.toString().split(".")[1].length:0:"string"==typeof a?null!=a.split(".")[1]?a.split(".")[1].length:0:void 0;i>0&&(t=String(t).replace(".",""));var s=[String(e),String(t)],r=[];if((s=n(s[0],s[1]))[0]=s[0].split(""),s[1]=s[1].split(""),-1!=s[0].indexOf("N")||-1!=s[1].indexOf("N"))return e;for(var c=s[1].length-1;c>=0;c--){for(var h,u=0,l=[],d=s[0].length-1;d>=0;d--){var p=Number(s[0][d])*Number(s[1][c])+u;l.unshift(p%10),u=Math.floor(p/10),0==d&&0!=u&&l.unshift(u)}h=new Array(s[1].length-(c+1)+1).join("0"),l.push(h),r[c]=l.join("")}for(var g=r.length,_=1;_<g;_++){var m=this.galaxyAdd(r[0],r[1]);r.splice(0,2,m)}var f=r.join("");0==f[0]&&(f=o(f));for(var y="",v=0;v<f.length-i;v++)parseInt(f[v])>=0&&(y+=""+f[v]);return""==y&&(y="0"),y},galaxyDiv:function(e,t){e=String(e),t=String(t);for(var a=e.length,n=(t.length,0),o=0,i=[],s=0,r=0;r<a;r++)(s=10*o+parseInt(e[r]))<t?(o=s,i.push(0)):(n=parseInt(s/t),o=s%t,i.push(n));return[n=""==(n=i.join("").replace(/\b(0+)/gi,""))?"0":n,o]},cmpBigInt:function(e,t){if(e=String(e),t=String(t),e.length>t.length)return 1;if(e.length<t.length)return-1;for(var a=0;a<e.length;a++){if(e[a]>t[a])return 1;if(e[a]<t[a])return-1}return 0},compare:function(e,t){return this.cmpBigInt(e,t)>=0},millisecondToDate:function(e){e<500&&(e=0);var t=parseFloat(e)/1e3,a=parseInt(t/3600),n=parseInt(60*(parseFloat(t/3600)-parseInt(t/3600))),o=parseInt(60*(parseFloat(60*(parseFloat(t/3600)-parseInt(t/3600)))-parseInt(60*(parseFloat(t/3600)-parseInt(t/3600)))));return(a=a<10?"0"+a:a)+":"+(n=n<10?"0"+n:n)+":"+(o<10?"0"+o:o)},millisecondToMinute:function(e){e<500&&(e=0);var t=parseFloat(e)/1e3,a=parseInt((t/60).toString()),n=parseInt((t-60*a).toString());return(a<10?"0"+a:a)+":"+(n<10?"0"+n:n)},format:function(e,t){if(e&&"object"==typeof t)for(var a in t)if(null!=t[a]){var n=new RegExp("({"+a+"})","g");e=e.replace(n,t[a])}return e},webCopyString:function(e){var t=e+"",a=document.createElement("textarea");a.value=t,a.setAttribute("readonly",""),a.style.contain="strict",a.style.position="absolute",a.style.left="-9999px",a.style.fontSize="12pt";var n=getSelection(),o=!1;n.rangeCount>0&&(o=n.getRangeAt(0)),document.body.appendChild(a),a.select(),a.selectionStart=0,a.selectionEnd=t.length;var i=!1;try{i=document.execCommand("copy")}catch(s){}return document.body.removeChild(a),o&&(n.removeAllRanges(),n.addRange(o)),i}};a.NumberUtil=c,cc._RF.pop()},{}],NumberUtil:[function(e,t,a){"use strict";cc._RF.push(t,"73248ZOinxMcYOyusVDUBkn","NumberUtil"),Object.defineProperty(a,"__esModule",{value:!0}),a.NumberUtil=void 0;var n=function(){function e(){}return e.randomNum=function(e,t){switch(arguments.length){case 1:return parseInt((Math.random()*e).toString(),10);case 2:return parseInt((Math.random()*(t-e+1)+e).toString(),10);default:return 0}},e.randomArr=function(e,t,a,n){var o=[];function i(){for(var e=parseInt((t*Math.random()).toString()),n=0;n<o.length;n++)if(o[n]==e)return i();return o.push(e+a),e}arguments.length<3&&(a=0);for(var s=[],r=0;r<e&&r<t;r++)s.push(i());return s},e.getRandomArrayElements=function(e,t){for(var a,n,o=e.slice(0),i=e.length,s=i-t;i-- >s;)a=o[n=Math.floor((i+1)*Math.random())],o[n]=o[i],o[i]=a;return o.slice(s)},e.rotate=function(e,t){var a=Math.PI/180*e,n=Math.sin(a),o=Math.cos(a);o<.001&&o>-.001&&(o=0),n<.001&&n>-.001&&(n=0);var i=t.x;return t.x=o*i-n*t.y,t.y=n*i+o*t.y,t},e.judgeAnage=function(e,t){var a=e.x,n=e.y,o=t.x,i=t.y,s=Math.abs(a-n),r=Math.abs(o-i),c=Math.sqrt(s*s+r*r);return Math.round(Math.asin(r/c)/Math.PI*180)},e.outOfOrder=function(e){for(var t,a,n=e,o=n.length;o;)a=Math.floor(Math.random()*o--),t=n[o],n[o]=n[a],n[a]=t;return n},e.randomZFOne=function(){return 1*Math.random()<.5?1:-1},e.prototype.createUserId=function(){var e="",t=(new Date).getTime().toString();if((e=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()}()+t.substring(t.length-8)).length<16)for(var a=e.length;a<=16;)a++,e+="s";else e.length>16&&(e=e.slice(0,16))},e.prototype.createVideoId=function(){var e=new Date;e.getMonth(),e.getDate(),e.getDate(),e.getHours(),e.getHours(),e.getMinutes(),e.getMinutes();e.getSeconds(),e.getFullYear()},e}();a.NumberUtil=n,cc._RF.pop()},{}],Piece:[function(e,t,a){"use strict";cc._RF.push(t,"4f546FtPo5A+JkpKf0roL/D","Piece"),Object.defineProperty(a,"__esModule",{value:!0}),a.NONE=a.GOLDCHESS=a.WHITECHESS=a.BLACKCHESS=void 0,a.BLACKCHESS=-1,a.WHITECHESS=1,a.GOLDCHESS=3,a.NONE=0,cc._RF.pop()},{}],Point:[function(e,t,a){"use strict";cc._RF.push(t,"95046Q6c6FCcr5fe4zho2EP","Point"),Object.defineProperty(a,"__esModule",{value:!0}),a.Point=void 0;a.Point=function(e,t){this.walkable=!0,this.costMultiplier=1,this.x=e,this.y=t},cc._RF.pop()},{}],PvpGameBoard:[function(e,t,a){"use strict";cc._RF.push(t,"88843IIg7pImJb0DgLVHHUE","PvpGameBoard");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.PvpGameBoard=void 0;var s=e("../../game/wuziqi/Piece"),r=e("../../SSSGF/ssscgf"),c=e("./global"),h=e("./roomNetListener"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.judgeSize=15,t.maze=[],t.state=s.BLACKCHESS,t.win=2,t.sum=0,t.block=46,t.gameScene=null,t.is_ani=!1,t.chess_map=[],t.chess_list=[],t.chess_pos=[],t.new_userChessPso=[],t.new_aiChessPso=[],t.chess_index=[],t.newx=0,t.newY=0,t.canWin=[],t.winCount=0,t.myWin=[],t.ai_huiqi=2,t.ai_huiqi_judge=!0,t.ai_qiuhe_judge=!0,t.ai_heqi=2,t.dazhao_num=0,t.yijingluozi=!1,t.juesha_judge=!1,t.huiqiJudge=!0,t}return o(t,e),t.prototype.onLoad=function(){r.conMager.getInstance()._msgAtion.on("user_huiqi_fun",this.user_huiqi_fun,this)},t.prototype.init=function(e){this.gameScene=e;for(var t=0,a=0;a<this.judgeSize;a++){this.maze[a]=[];for(var n=0;n<this.judgeSize;n++)this.maze[a][n]=0,this.chess_map[t]=null,this.chess_pos[t]=[],t+=1}this.addListenner()},t.prototype.onTouched=function(e){var t=this;if(MGOBE.Player.id!=c.default.plyingId)return console.log("\u8fd8\u6ca1\u8f6e\u5230\u4f60\u4e0b"),void(2==c.default.room.roomInfo.playerList.length?r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node.parent,"\u7b49\u5f85\u5bf9\u65b9\u843d\u5b50"):r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node.parent,"\u7b49\u5f85\u5bf9\u624b\u8fdb\u5165\u623f\u95f4"));if(!this.yijingluozi){this.yijingluozi=!0,this.scheduleOnce(function(){t.yijingluozi=!1},1),console.log("\u70b9\u51fb\u4e0b\u68cb:");var a=e.getLocation(),n=this.node.convertToNodeSpaceAR(a),o=this.getPosByInt(Math.floor(n.x)),i=this.getPosByInt(Math.floor(n.y));this.new_userChessPso.push([o/this.block,i/this.block]),this.changeToJudgeBoard(o,i),console.log("5")}},t.prototype.getPosByInt=function(e){var t=1;e<0?(e=-e,t=-1):t=1;var a=e%this.block;return e=Math.floor(e/this.block)*this.block,a-this.block/2>=0&&(e+=this.block),e*t},t.prototype.changeToJudgeBoard=function(e,t){var a=Math.floor(e/this.block),n=Math.floor(t/this.block);this.newY=t,this.newx=e,0==this.maze[a][n]?(console.log("----------------\u4f4d\u7f6e\u6ca1\u6709\u68cb:",this.maze[a][n],a,n),h.room_net_listener.sendToGameSvr(h.MsgId.PLAYCHESS,{x:a,y:n,state:this.state,playingId:c.default.plyingId})):console.log("----------------\u4f4d\u7f6e\u6709\u68cb:",this.maze[a][n],a,n)},t.prototype.addChessToBoard=function(e,t,a){if(0!=this.maze[e][t])return!1;this.newY=t,this.newx=e;var n=e+15*t;return this.chess_pos[n]=[e,t],this.maze[e][t]=a,this.sum+=1,this.sum>=2&&r.conMager.getInstance()._msgAtion.emit("openHuiqi"),!0},t.prototype.removeChessByBoard=function(e,t){if(0==this.maze[e][t])return!1;this.maze[e][t]=0,this.sum-=1;var a=e+15*t;this.chess_pos[a]=[];var n=this.chess_map[a];return this.chess_map[a]=null,n.destroy(),this.sum<2?r.conMager.getInstance()._msgAtion.emit("buNengHuiqi"):r.conMager.getInstance()._msgAtion.emit("openHuiqi"),!0},t.prototype.jueSha=function(e,t,a){var n=this;if(r.conMager.getInstance()._msgAtion.emit("closeAllSetBtn"),this.juesha_judge=!0,this.ai_qiuhe_judge=!1,console.log("\u7edd\u6740\u54e6",this.win,this.state),this.gameScene.count_down.active=!1,0!=this.win)if(e.length<5)a(t);else{var o="nv/nv";this.win==this.gameScene.userChess&&(o="nan/nan"),this.gameScene.node.getChildByName("mask").active=!0;var i=e.length;this.scheduleOnce(function(){for(var s=function(s){var c=e[s],h=c[0]+15*c[1];n.scheduleOnce(function(){r.conMager.getInstance().playAudioEff("btn1");var e=n.chess_map[h];e.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.callFunc(function(){e.getChildByName("guang").active=!0,s==i-1&&(r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),n.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(o+"juesha")},.3),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){a(t)}}))})))},.1*s)},c=0;c<i;c++)s(c)},.5)}else this.gameScene.gameOver()},t.prototype.addListenner=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.removeListennner=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.user_huiqi_fun=function(){if(console.log("\u6765\u6094\u68cb",this.state),this.gameScene.gameType>2)this.huiqiJudge?(this.huiqi_destory(this.new_userChessPso),this.gameScene.startTime(this.state)):r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u8bf7\u5148\u843d\u5b50!");else{this.state=this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;this.huiqi_destory(this.new_userChessPso,this.state),e>t?this.huiqi_destory(this.new_aiChessPso,-1*this.state):e==t&&-1==this.gameScene.userChess&&this.huiqi_destory(this.new_aiChessPso,-1*this.state)}this.new_userChessPso.length<=0&&r.conMager.getInstance()._msgAtion.emit("closeHuiqi")},t.prototype.huiqi_destory=function(e){var t=e[e.length-1],a=t[0]+15*t[1],n=this.chess_map[a];this.chess_map[a]=null,this.maze[t[0]][t[1]]=0,e.splice(e.length-1),this.chess_pos[a]=[],n.destroy()},i([l],t)}(cc.Component));a.PvpGameBoard=d,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../game/wuziqi/Piece":"Piece","./global":"global","./roomNetListener":"roomNetListener"}],PvpScene:[function(e,t,a){"use strict";cc._RF.push(t,"3be2aBPsbhOd4dQVZcgz/6Z","PvpScene");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.pvp_scene=void 0;var s=e("../../../classCon/configSurface"),r=e("../../../SSSGF/ssscgf"),c=e("../../../utils/commonFunction"),h=e("../global"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.match_view_prefab=void 0,t.match_view=void 0,t.pvp_game_view=void 0,t.loadLog=void 0,t.initPar=void 0,t.btnCancleMatch=void 0,t}return o(t,e),t.prototype.onLoad=function(){if(a.pvp_scene=this,h.default.openId=r.GameDataStorage.getUser().userData.openId,"\u6211"==r.GameDataStorage.getUser().userData.gameName){var e=s.XingMingData.xing,t=s.XingMingData.ming,n=c.commonFunction.randomGameName(e,t);r.GameDataStorage.getUser().userData.gameName=n}if("null"==r.GameDataStorage.getUser().userData.headIconUrl){var o=r.NumberUtil.randomNum(2,30);console.log("\u5bf9\u624b\u7684\u5934\u50cf:",o);var i="head_icon/"+o;r.GameDataStorage.getUser().userData.headIconUrl=i}},t.prototype.start=function(){this.initMatchView()},t.prototype.initMatchView=function(){this.node.getChildByName("match_view").active=!0},t.prototype.initGameView=function(){cc.instantiate(this.pvp_game_view).parent=this.node},t.prototype.showLoadLog=function(e){void 0===e&&(e="\u52a0\u8f7d\u4e2d"),this.loadLog.node.parent.getChildByName("ppz").active="\u6b63\u5728\u521d\u59cb\u5316\u7f51\u7edc\u73af\u5883!"!=e,this.initPar.node.active="\u6b63\u5728\u521d\u59cb\u5316\u7f51\u7edc\u73af\u5883!"==e,this.loadLog.node.parent.zIndex=9999,this.loadLog.node.parent.active=!0,this.loadLog.string=e,this.btnCancleMatch.active="\u6b63\u5728\u5bfb\u627e\u5bf9\u624b\u2026\u2026"==e,"\u6b63\u5728\u521d\u59cb\u5316\u7f51\u7edc\u73af\u5883!"==e&&cc.tween(this.initPar).to(2,{progress:1}).start()},t.prototype.hideLoadLog=function(){this.loadLog.node.parent.active=!1},t.prototype.moneyBtn=function(){var e=this.node.getChildByName(r.KEY.poolName.mianfei_gold_panel);e&&e.active||(r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),r.conMager.getInstance().getPoolNode(r.KEY.poolName.mianfei_gold_panel,this.node,null))},t.prototype.onBtnCancleMatch=function(){this.btnCancleMatch.active=!1,r.conMager.getInstance()._msgAtion.emit("btnCancleMatch")},t.prototype.onDisable=function(){h.default.plyingId=""},i([d(cc.Prefab)],t.prototype,"match_view_prefab",void 0),i([d(cc.Prefab)],t.prototype,"pvp_game_view",void 0),i([d(cc.Label)],t.prototype,"loadLog",void 0),i([d(cc.ProgressBar)],t.prototype,"initPar",void 0),i([d(cc.Node)],t.prototype,"btnCancleMatch",void 0),i([l],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../../../classCon/configSurface":"configSurface","../../../utils/commonFunction":"commonFunction","../global":"global"}],ShaderTime:[function(e,t,a){"use strict";cc._RF.push(t,"42af9y26hBGbZbt5XNetxVb","ShaderTime");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._material=null,t._max=1,t._start=0,t}return o(t,e),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){this._max=e},enumerable:!1,configurable:!0}),t.prototype.update=function(e){this._material=this.node.getComponent(cc.Sprite).getMaterial(0),this.node.active&&this._material&&this._setShaderTime(e)},t.prototype._setShaderTime=function(){var e=this._start;e>this.max&&(e=0),e+=.002,this._material.setProperty("timeTest",e),this._start=e},i([c],t.prototype,"_max",void 0),i([c],t.prototype,"max",null),i([r],t)}(cc.Component);a.default=h,cc._RF.pop()},{}],StateSyncLogic:[function(e,t,a){"use strict";function n(e){Array.isArray(e)&&(a.stateSyncState.players=[],e.forEach(function(e){var t={id:e.id,x:e.x,y:e.y};a.stateSyncState.players.push(t)}))}cc._RF.push(t,"36faeO5N1tH2qzTM37+Lta6","StateSyncLogic"),Object.defineProperty(a,"__esModule",{value:!0}),a.setState=a.setDefauleSyncState=a.stateSyncState=void 0,a.stateSyncState={players:[]},a.setDefauleSyncState=function(e){n((e.roomInfo||{playerList:[]}).playerList.map(function(e,t){return{x:0,y:t,id:e.id}}))},a.setState=n,cc._RF.pop()},{}],UIAction:[function(e,t,a){"use strict";cc._RF.push(t,"28f88PWnzNMt7aayGxXXLDn","UIAction");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=["angleChange","breathAction","minbreathAction","upanddownAction","rotateAction","fadeAction","scaleBigShow","moveShow","fadeIn","showTopPopUp","itemShowScaleBig","scaleSmallHide","moveHide","fadeOut"],l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cycleAction=9,t.showActionType=1,t.showEndPos=new cc.Vec3,t.hideActionType=6,t.hideEndPos=new cc.Vec3,t.isJudge=!1,t.scale=99,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){throw new Error("Method not implemented.")},t.prototype.onClose=function(e){this.hideActionType>6&&this[u[this.hideActionType]](this.hideEndPos,e)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onEnable=function(){99==this.scale&&(this.scale=this.node.scale),this.node.scale=this.scale,this.showActionType>1?this[u[this.showActionType]](this.node,this.showEndPos,this.startCycleAction.bind(this)):this.startCycleAction()},t.prototype.startCycleAction=function(e){var t=this.cycleAction;e&&(t=e),t<10&&this[u[t]](this.node)},t.prototype.update=function(){},i([h({displayName:"\u5faa\u73af\u64ad\u653e\u7684\u52a8\u753b\u7c7b\u578b",type:cc.Enum({non:10,angleChange:0,breathAction:1,minbreathAction:2,upanddownAction:3,rotateAction:4,fadeAction:5})})],t.prototype,"cycleAction",void 0),i([h({displayName:"\u51fa\u73b0\u65f6\u64ad\u653e\u7684\u52a8\u753b\u7c7b\u578b",type:cc.Enum({non:1,scaleBigShow:2,moveShow:3,fadeIn:4,showTopPopUp:5,itemShowScaleBig:6})})],t.prototype,"showActionType",void 0),i([h({displayName:"\u6700\u7ec8\u51fa\u73b0\u4f4d\u7f6e",type:cc.Vec3})],t.prototype,"showEndPos",void 0),i([h({displayName:"\u9690\u85cf\u65f6\u64ad\u653e\u7684\u52a8\u753b\u7c7b\u578b",type:cc.Enum({non:6,scaleSmallHide:7,moveHide:8,fadeOut:9})})],t.prototype,"hideActionType",void 0),i([h({displayName:"\u6700\u7ec8\u9690\u85cf\u4f4d\u7f6e",type:cc.Vec3})],t.prototype,"hideEndPos",void 0),i([c],t)}(s.winRootNode);a.default=l,cc._RF.pop()},{"./../SSSGF/ssscgf":"ssscgf"}],UIChat:[function(e,t,a){"use strict";cc._RF.push(t,"043e022841MhIxkFScPMT/n","UIChat");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./UIMessage"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.msgRightPrefab=null,t.msgLeftPrefab=null,t.scrollContentNode=null,t.scrollView=null,t.sendButton=null,t.msgEditBox=null,t.onSubmit=null,t}return o(t,e),t.prototype.appendMsg=function(e,t){var a=t?this.msgRightPrefab:this.msgLeftPrefab,n=cc.instantiate(a);n.parent=this.scrollContentNode,n.getComponent(s.default).setMessage(e)},t.prototype.refreshMsgItems=function(){var e=30;this.scrollContentNode.children.forEach(function(t){t.y=-e,e+=t.height+10}),this.scrollContentNode.height!==e&&(this.scrollContentNode.height=e,this.scrollView.scrollToBottom())},t.prototype.callback=function(){var e=this.msgEditBox.string||"";this.onSubmit&&this.onSubmit(e),this.msgEditBox.string=""},t.prototype.start=function(){this.sendButton.node.off("touchstart",this.callback,this),this.sendButton.node.on("touchstart",this.callback,this)},t.prototype.update=function(){this.refreshMsgItems()},i([h(cc.Prefab)],t.prototype,"msgRightPrefab",void 0),i([h(cc.Prefab)],t.prototype,"msgLeftPrefab",void 0),i([h(cc.Node)],t.prototype,"scrollContentNode",void 0),i([h(cc.ScrollView)],t.prototype,"scrollView",void 0),i([h(cc.Button)],t.prototype,"sendButton",void 0),i([h(cc.EditBox)],t.prototype,"msgEditBox",void 0),i([c],t)}(cc.Component);a.default=u,cc._RF.pop()},{"./UIMessage":"UIMessage"}],UILog:[function(e,t,a){"use strict";cc._RF.push(t,"cfc26S23flGWqZhUipSx/5k","UILog");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollView=null,t.logLabel=null,t.contentNode=null,t.length=0,t}var a;return o(t,e),a=t,t.appendLog=function(e){a.staticLogStrs.push(e)},t.prototype.setLogStr=function(e){this.logLabel.string=e+"\n\n"},t.prototype.start=function(){},t.prototype.update=function(){this.length!==a.staticLogStrs.length&&this.setLogStr(a.staticLogStrs.slice(-10).join("\n")),this.length=a.staticLogStrs.length,this.contentNode.height!==this.logLabel.node.height&&(this.contentNode.height=this.logLabel.node.height,this.scrollView.scrollToBottom())},t.staticLogStrs=["\u6682\u65e0\u65e5\u5fd7\u4fe1\u606f"],i([c(cc.ScrollView)],t.prototype,"scrollView",void 0),i([c(cc.Label)],t.prototype,"logLabel",void 0),i([c(cc.Node)],t.prototype,"contentNode",void 0),a=i([r],t)}(cc.Component);a.default=h,cc._RF.pop()},{}],UIMessage:[function(e,t,a){"use strict";cc._RF.push(t,"9d6ce2TBHFKDpud+8Vv3Ny9","UIMessage");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.bgSprite=null,t.msg="",t.padding=10,t.maxLabelWidth=400,t}return o(t,e),t.prototype.setMessage=function(e){this.msg=e},t.prototype.start=function(){},t.prototype.update=function(){this.label.string!==this.msg&&(this.label.string=this.msg),this.label.node.height<30&&(this.label.overflow=cc.Label.Overflow.NONE),this.label.node.width>this.maxLabelWidth&&(this.label.overflow=cc.Label.Overflow.RESIZE_HEIGHT,this.label.node.width=this.maxLabelWidth),this.bgSprite.node.width=this.label.node.width+this.padding+Math.abs(this.label.node.x-this.bgSprite.node.x),this.node.height=this.label.node.height+2*this.padding,this.bgSprite.node.height=this.node.height},i([c(cc.Label)],t.prototype,"label",void 0),i([c(cc.Sprite)],t.prototype,"bgSprite",void 0),i([r],t)}(cc.Component);a.default=h,cc._RF.pop()},{}],add_desktop_panel:[function(e,t,a){"use strict";cc._RF.push(t,"d4786ClosBA+bwELOQP+fhk","add_desktop_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../KEY"),r=e("../../SSSGF/baesConScripts/winRootNode"),c=e("../../SSSGF/ssscgf"),h=cc._decorator,u=h.ccclass,l=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){this.node.zIndex=999,this.node.active=!0;var e=this.node.getChildByName("Node");e.active=!0,this.scaleBigShow(e,cc.v3(0,0),null)},t.prototype.onClose=function(){var e=this,t=this.node.getChildByName("Node");this.scaleSmallHide(t,cc.v3(0,0),function(){e.node.destroy()})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.tianjia_btn=function(){if(c.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),window.tt){var e=this;tt.addShortcut({success:function(){e.onClose(1),c._pl_fun.getInstance().add_reportAnalytics("event_TianJiaZhuoMianNumbers")},fail:function(e){console.log(e,"fail")}})}else this.onClose(1)},t.prototype.quxiao_btn=function(){c.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1)},i([u],t)}(r.default));a.default=l,cc._RF.pop()},{"../../KEY":"KEY","../../SSSGF/baesConScripts/winRootNode":"winRootNode","../../SSSGF/ssscgf":"ssscgf"}],as_util:[function(e,t,a){"use strict";cc._RF.push(t,"df72fTrQXpI2KyAdae99Teb","as_util"),Object.defineProperty(a,"__esModule",{value:!0}),a.ad_type=a.as_util=void 0;var n=function(){function e(){this.video_callback=null}return Object.defineProperty(e,"Instance",{get:function(){return this._instace||(this._instace=new e),this._instace},enumerable:!1,configurable:!0}),e.prototype.getJsons=function(e){return console.log("----------------getJsons url:",e),new Promise(function(t){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&a.status>=200&&a.status<400){var n=a.responseText,o=JSON.parse(n);t(o)}else 4==a.readyState&&200!=a.status&&(console.error("jss\u7f51\u7edc\u8bf7\u6c42\u9519\u4e86\u554a"),console.log("jss readyState",a.readyState),console.log("jss status",a.status),console.log("jss \u5730\u5740",e),t(null))},a.open("GET",e,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send()})},e.prototype.jsSendJsonDateToJava=function(e){if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID){var t=JSON.stringify(e);jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jsb_activity","get_json","(Ljava/lang/String;)V",t)}},e.prototype.show_jili_video=function(e){console.log("\u663e\u793a\u6fc0\u52b1\u89c6\u9891\u7c7b\u578b"),cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?(e&&(this.video_callback=e),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","callShowAd","(II)V",4,5)):e()},e.prototype.jili_video_reward=function(){console.log("\u6fc0\u52b1\u89c6\u9891\u53d1\u5956\u52b1"),this.video_callback&&(this.video_callback(),this.video_callback=null)},e.prototype.jili_video_back=function(){console.log("\u6fc0\u52b1\u89c6\u9891\u88ab\u9000\u51fa"),this.video_callback=null},e.prototype.show_quanping_video=function(e){cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID&&(e&&(this.video_callback=e),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","callShowAd","(II)V",1,5))},e.prototype.quanping_video_reward=function(){console.log("\u5168\u5c4f\u89c6\u9891\u53d1\u5956\u52b1"),this.video_callback&&(this.video_callback(),this.video_callback=null)},e.prototype.quanping_video_back=function(){console.log("jss\u5168\u5c4f\u89c6\u9891\u9000\u51fa\u4e86"),this.video_callback=null},e.prototype.show_chaping=function(){cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","callShowAd","(II)V",6,5)},e.prototype.show_nativeType=function(){console.log("\u5f39\u51fa\u539f\u751f\u5e7f\u544a"),cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","callShowAd","(II)V",6,5)},e.prototype.back_ui=function(){console.log("\u5f39\u51fa\u5168\u5c4f"),cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","callShowAd","(II)V",1,5)},e.prototype.show_kaiping=function(){cc.sys.isNative&&(cc.sys.os,cc.sys.OS_ANDROID)},e.prototype.show_banner=function(){console.log("\u663e\u793a\u539f\u751fbanner"),cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","callShowAd","(II)V",2,5)},e.prototype.hide_banner=function(){console.log("\u9690\u85cf\u539f\u751fbanner"),cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","callShowAd","(II)V",3,5)},e.prototype.show_yinsi=function(){cc.sys.isNative&&(cc.sys.os,cc.sys.OS_ANDROID)},e.prototype.show_yonghu=function(){cc.sys.isNative&&(cc.sys.os,cc.sys.OS_ANDROID)},e.prototype.test_fun=function(){cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID&&console.log("jss\u5f00\u59cb\u4f20\u8f93")},e.prototype.sendJavaGetRankChannel=function(){var e="";return cc.sys.isNative&&(e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","getRankChannel","()Ljava/lang/String;"),console.log("\u6392\u884c\u699c\u6570\u636e\u6e20\u9053:",e)),e},e.prototype.sendJavaGetChannel=function(){var e="";return cc.sys.isNative&&(e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","setSdk","()Ljava/lang/String;"),console.log("\u6e20\u9053:",e)),e},e.prototype.sendJavaGetDeviceId=function(){var e="";return cc.sys.isNative&&(e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","getDeviceId","()Ljava/lang/String;"),console.log("DeviceId:",e)),e},e.prototype.open=function(e){console.log("url:",e);var t=cc.winSize;this.createWebView({url:e+"?time="+(new Date).getTime(),width:t.width,height:t.height-50,parent:null},{btnUrl:"image/guanBi",width:40,height:40,x:t.width/2-25-10,y:t.height/2-25-5})},e.prototype.createWebView=function(e,t){var a=new cc.Node;a.width=e.width,a.height=e.height,null!=e.parent?a.parent=e.parent:a.parent=cc.find("Canvas"),a.zIndex=9999;var n=new cc.Node;n.width=e.width,n.height=e.height,n.parent=a,n.y=-30,n.addComponent(cc.WebView).url=e.url,this.createMask(a),this.createBtn(a,{url:t.btnUrl,width:t.width,height:t.height,x:t.x,y:t.y,callBack:function(){a.destroy()}})},e.prototype.createMask=function(){},e.prototype.createBtn=function(e,t){var a=new cc.Node;a.width=t.width,a.height=t.height,a.x=t.x,a.y=t.y,a.parent=e;var n=a.addComponent(cc.Sprite);cc.resources.load(t.url,cc.SpriteFrame,function(e,o){e?console.log("\u6309\u94ae\u52a0\u8f7d\u9519\u8bef err:"+e):(n.spriteFrame=o,a.width=t.width,a.height=t.height)}),a.once(cc.Node.EventType.TOUCH_END,t.callBack)},e.prototype.createTextBtn=function(e,t,a){var n=new cc.Node;n.color=cc.Color.BLACK.fromHEX(t.color?t.color:"#51AAF6"),n.setPosition(t.pos),n.parent=e;var o=n.addComponent(cc.Label);o.fontSize=28,o.enableUnderline=!0,o.string=t.str,n.on(cc.Node.EventType.TOUCH_END,a,this)},e}();a.as_util=n.Instance,function(e){e[e.quanping=0]="quanping",e[e.chaping=1]="chaping",e[e.jili=2]="jili",e[e.back_ui=3]="back_ui",e[e.show_banner=4]="show_banner",e[e.hide_banner=5]="hide_banner",e[e.kaiping=6]="kaiping",e[e.yinsi=100]="yinsi",e[e.yonghu=101]="yonghu"}(a.ad_type||(a.ad_type={})),window.as_util=a.as_util,cc._RF.pop()},{}],audioMager:[function(e,t,a){"use strict";cc._RF.push(t,"ac0bfO68YRJ0J1+dtnqmZua","audioMager"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("../ssscgf"),o=function(){function e(){this.audioNames={},this.audioEngine=cc.audioEngine,this._flagTime=!1,this._oldName="",this._audioId=void 0}return e.prototype.init=function(e){var t=this;cc.assetManager.loadBundle("audioRes",function(a,n){t.bundle=n;var o=setTimeout(function(){e(),clearTimeout(o)},500)})},e.prototype.loadAudios=function(){for(var e=this,t=this.bundle._config.assetInfos._map,a=0,n=Object.keys(t);a<n.length;a++){var o=n[a];this.bundle.load(t[o].path,cc.AudioClip,function(){},function(t,a){e.audioNames[a.name]=a})}},e.prototype.playAudioEff=function(e,t,a){var o=this;void 0===e&&(e="btn"),void 0===t&&(t=!1),void 0===a&&(a=1),this._oldName=e,this._flagTime||n.GameDataStorage.gameStateData.isEffect_Open&&("yxcj_chb"==this._oldName&&(this._flagTime=!0,setTimeout(function(){o._flagTime=!1},1e3)),t?this.audioNames[e]?this._audioId=this.audioEngine.play(this.audioNames[e],t,a):this.bundle.load(e,cc.AudioClip,function(){},function(n,i){o.audioNames[e]=i,o._audioId=o.audioEngine.play(o.audioNames[e],t,a)}):this.audioNames[e]?this.audioEngine.play(this.audioNames[e],t,a):this.bundle.load(e,cc.AudioClip,function(){},function(n,i){o.audioNames[e]=i,o.audioEngine.play(o.audioNames[e],t,a)}))},e.prototype.stopAudioEff=function(){this.audioEngine.stop(this._audioId)},e.prototype.stopAllAudioEff=function(){this.audioEngine.stopAll()},e.prototype.playBGM=function(e){var t=this;this.audioEngine.isMusicPlaying()||n.GameDataStorage.gameStateData.isBgm_Open&&this.bundle.load(e,cc.AudioClip,function(){},function(a,n){t.audioNames[e]=n,t.audioEngine.setMusicVolume(.7),t.audioEngine&&(t.bgmId=t.audioEngine.playMusic(t.audioNames[e],!0))})},e.prototype.stopBGM=function(){this.audioEngine.isMusicPlaying()&&this.audioEngine.stopMusic(this.bgmId)},e}();a.default=o,cc._RF.pop()},{"../ssscgf":"ssscgf"}],bagua:[function(e,t,a){"use strict";cc._RF.push(t,"7a3b1XQzNJPDLDLvbWO4Ny/","bagua");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/ssscgf"),r=e("../class_manager"),c=e("../game_manager"),h=e("../zhenfa_joiner"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_number_max=1,t.use_number=0,t.board=null,t.chess_arrayclone=[],t}return o(t,e),t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.board=e},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return this.chess_arrayclone=this.board.get_chess_data_clone(),console.log("\u516b\u5366\u9635\u514b\u9686\u4e86",this.chess_arrayclone),!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(){return this.judge_all()},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return this.use_number=0,!0},t.prototype.one_win=function(){return!0},t.prototype.use_zhenfa=function(){return this.judge_all()},t.prototype.use_zhenfa_finish=function(){return!0},t.prototype.judge_all=function(){var e=this.judge_active();return 0==e&&0==(e=this.judge_new_chess())&&0==(e=this.judge_number())&&0==(e=this.judge_null())&&this.show_bagua(),e},t.prototype.show_bagua=function(){this.use_number++;var e=!1;this.my_player.cos==r.joiner_enum.player?(e=!0,s.conMager.getInstance().playAudioEff("nan/nanbagua")):s.conMager.getInstance().playAudioEff("nv/nvbagua"),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.board.ui_parent,{fileName:"bagua",ani_name:"animation",cb:this.use_bagua.bind(this),is_user:e})},t.prototype.use_bagua=function(){for(var e=this,t=[],a=0;a<this.chess_array.length;a++)for(var n=0;n<this.chess_array[a].length;n++)this.chess_array[a][n].chess_data&&0==this.chess_array[a][n].chess_data.meihua&&0==this.chess_array[a][n].chess_data.dusha&&0==this.chess_array[a][n].chess_data.stone_type&&this.chess_array[a][n].chess_data.state!=this.my_player.state&&t.push(this.chess_array[a][n].chess_data);if(t.length<1)return c.game_manager.get_zhenfa_event(this.my_player,this.data),void console.error("\u6ca1\u6709\u5bf9\u65b9\u7684\u5b50");var o=[];for(a=0;a<2*this.data.level&&!(t.length<1);a++){var i=Math.floor(Math.random()*t.length),h=t[i];o.push(h),t.splice(i,1)}var u="";switch(this.my_player.state){case r.chess_belong.black:u="bianhei";break;case r.chess_belong.white:u="bianbai";break;case r.chess_belong.gold:u="bianjin"}var l=!1;this.my_player.cos==r.joiner_enum.player&&(l=!0);var d=function(t){var a=o[t].node.convertToWorldSpaceAR(cc.v2(0,0)),n=p.board.up_effect.convertToNodeSpaceAR(a);s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,p.board.up_effect,{fileName:"taiji",ani_name:u,cb:function(){o[t].state=e.my_player.state,o[t].show_data(),t==o.length-1&&c.game_manager.get_zhenfa_event(e.my_player,e.data)},is_user:l,pos:n})},p=this;for(a=0;a<o.length;a++)d(a)},t.prototype.judge_new_chess=function(){for(var e=0;e<this.chess_array.length;e++)for(var t=0;t<this.chess_array[e].length;t++)if(this.chess_array[e][t].chess_data&&!this.chess_arrayclone[e][t].chess_data&&this.chess_array[e][t].chess_data.state!=this.my_player.state)return!1;return!0},i([l],t)}(h.default));a.default=d,cc._RF.pop()},{"../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../zhenfa_joiner":"zhenfa_joiner"}],bannerEvent:[function(e,t,a){"use strict";cc._RF.push(t,"f08739pTmJM6Jy+A2LrQiMz","bannerEvent"),Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(){this.isShowBanner=!1,this.bannerHeight=180,this.bannerIdIndex=0,this.showTimes=0,this.showBannerAd=function(e){var t=this;if(cc.sys.platform==cc.sys.BYTEDANCE_GAME&&tt.createBannerAd){if(this.bannerAd)if(this.isShowBanner){if(2==e)return this.showTimes++,void this.bannerAd.show()}else this.bannerAd.hide(),this.bannerIdIndex++,this.bannerIdIndex>=this.bannerIdList.length&&(this.bannerIdIndex=this.bannerIdIndex%this.bannerIdList.length),this.bannerAd.destroy();this.showTimes++;var a=this.bannerIdList[this.bannerIdIndex];this.bannerAd=tt.createBannerAd({adUnitId:a,adIntervals:30,style:{left:5,top:500,width:this.screenIfon.screenHeight-80}}),this.bannerAd.onError(function(){}),this.bannerAd.onLoad(function(){}),this.bannerAd.onResize(function(e){t.bannerHeight=e.height,t.bannerAd.style.left=(t.screenIfon.screenWidth-e.width)/2,t.bannerAd.style.top=t.screenIfon.screenHeight-e.height}),this.isShowBanner?this.bannerAd.show():this.bannerAd.hide()}}}return e.prototype.init=function(e){this.bannerIdList=e,this.bannerIdIndex=Math.floor(Math.random()*this.bannerIdList.length),cc.sys.platform===cc.sys.BYTEDANCE_GAME&&(this.systemIfon=tt.getSystemInfoSync())},e}();a.default=n,cc._RF.pop()},{}],baozha_wulei:[function(e,t,a){"use strict";cc._RF.push(t,"5b2f8FQTfhPEYZPUTeCuv8D","baozha_wulei");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=cc._decorator,h=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this,a=e[0].ani_name;this.node.x=e[0].pos.x,this.node.y=e[0].pos.y,this.node.zIndex=2;var n=s.NumberUtil.randomNum(1,360);this.node.rotation=n;var o=e[0].cb,i=this.node.getComponent(sp.Skeleton);i.setAnimation(0,a,!1),i.setCompleteListener(function(){o&&o(),t.onClose(1)})},t.prototype.onClose=function(){r.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.start=function(){},i([h],t)}(r.winRootNode));a.default=u,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],baseNodeAction:[function(e,t,a){"use strict";cc._RF.push(t,"c1180dOnptCn4O2krQ4veTT","baseNodeAction");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionType={breathAction:"breathAction",minbreathAction:"minbreathAction",upanddownAction:"upanddownAction",rotateAction:"rotateAction",fadeAction:"fadeAction",scaleSmallHide:"scaleSmallHide",moveHide:"moveHide",fadeOut:"fadeOut",scaleBigShow:"scaleBigShow",moveShow:"moveShow",fadeIn:"fadeIn",showTopPopUp:"showTopPopUp",itemShowScaleBig:"itemShowScaleBig",angleChange:"angleChange"},t}return o(t,e),t.prototype.hideAction=function(e,t,a){console.log("---------------\u9690\u85cf",e),this[e](t,a)},t.prototype.showAction=function(e,t,a){console.log("---------------\u663e\u793a",e),this[e](t,a)},t.prototype.nodeAction=function(e,t){console.log("-----------actionType",e),this[e](t)},t.prototype.breathAction=function(e){var t=e.scale;cc.tween(e).sequence(cc.tween().to(1.2,{scaleX:e.scaleX+.2,scaleY:e.scaleY+.1},{easing:"sineOut",number:1.3}),cc.tween().to(.5,{scaleX:e.scaleX+.18,scaleY:e.scaleY+.16}),cc.tween().to(.8,{scaleX:t,scaleY:t},{easing:"sineIn",number:1.3})).repeatForever().start()},t.prototype.rotateAction=function(e){e.scale,cc.tween(e).sequence(cc.tween().by(2,{angle:-180}),cc.tween().by(2,{angle:-180})).repeatForever().start()},t.prototype.fadeAction=function(e){e.scale,e.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.6),cc.fadeIn(.6))))},t.prototype.minbreathAction=function(e){var t=e.scale;cc.tween(e).sequence(cc.tween().to(1.2,{scaleX:e.scaleX+.1,scaleY:e.scaleY+.05},{easing:"sineOut",number:1.3}),cc.tween().to(.5,{scaleX:e.scaleX+.09,scaleY:e.scaleY+.08}),cc.tween().to(.8,{scaleX:t,scaleY:t},{easing:"sineIn",number:1.3})).repeatForever().start()},t.prototype.itemShowScaleBig=function(e,t,a){e.stopAllActions(),e.setScale(.1),cc.tween(e).to(.2,{scale:t},{easing:"sineIn",number:5}).to(.1,{angle:5}).to(.2,{angle:-5}).to(.1,{angle:3}).to(.1,{angle:0}).call(function(){a&&a()}).start()},t.prototype.angleChange=function(e){e.angle=-5,cc.tween(e).sequence(cc.tween().to(1,{angle:5},{easing:"sineOut"}),cc.tween().to(1,{angle:-5},{easing:"sineInOut"})).repeatForever().start()},t.prototype.upanddownAction=function(e){e.angle,cc.tween(e).sequence(cc.tween().by(.4,{y:25},{easing:"sineOut"}),cc.tween().by(.5,{y:-25},{easing:"sineInOut"})).repeatForever().start()},t.prototype.scaleBigShow=function(e,t,a){e.scale=.5,e.opacity=0,e.setScale(0),e.stopAllActions(),e.runAction(cc.sequence(cc.spawn(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.1,1)),cc.fadeIn(.2)),cc.callFunc(function(){a&&a()})))},t.prototype.scaleSmallHide=function(e,t,a){e.stopAllActions(),e.runAction(cc.sequence(cc.spawn(cc.sequence(cc.scaleTo(.1,1.1),cc.scaleTo(.2,0)),cc.fadeOut(.2)),cc.callFunc(function(){a&&a()})))},t.prototype.moveHide=function(e,t,a,n){void 0===n&&(n="backIn"),n&&""!=n||(n="backIn"),e.stopAllActions(),cc.tween(e).to(.7,{position:t},{easing:n}).call(function(){a&&a()}).start()},t.prototype.moveShow=function(e,t,a,n){void 0===n&&(n="backOut"),n&&""!=n||(n="backOut"),e.stopAllActions(),cc.tween(e).to(.7,{position:t},{easing:n}).call(function(){a&&a()}).start()},t.prototype.fadeIn=function(e,t,a){e.opacity=0,cc.tween(e).to(.6,{opacity:255},{easing:"sineIn"}).call(function(){a&&a()}).start()},t.prototype.fadeOut=function(e,t,a){cc.tween(e).to(.5,{opacity:0},{easing:"sineIn"}).call(function(){a&&a()}).start()},t.prototype.showTopPopUp=function(e,t,a){e.setPosition(cc.v2(0,cc.winSize.height)),e.stopAllActions(),cc.tween(e).to(1,{position:t},{easing:"backOut"}).call(function(){a&&a()}).start()},i([r],t)}(cc.Component));a.default=c,cc._RF.pop()},{}],bgNode:[function(e,t,a){"use strict";cc._RF.push(t,"6a413NA7CFDUJjfS8saswm7","bgNode");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){this.node.width=cc.winSize.width,this.node.height=cc.winSize.height},t.prototype.start=function(){},i([r],t)}(cc.Component));a.default=c,cc._RF.pop()},{}],black_chess:[function(e,t,a){"use strict";cc._RF.push(t,"28979p2aApCB4rcehoGHwyB","black_chess");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pos=[],t.judge=!0,t.state=0,t.canyingOpen=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;this.node.opacity=155,this.node.setPosition(e[0].pos),this.node.runAction(cc.sequence(cc.fadeOut(.35),cc.callFunc(function(){t.onClose(1)})))},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.onCollisionEnter=function(){},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf"}],boli_anima:[function(e,t,a){"use strict";cc._RF.push(t,"733d8GGtpxKvoGAqzx0NeR/","boli_anima");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp_anima=null,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){var e=this;this.node.position=cc.Vec3.ZERO,this.node.scale=.35,this.sp_anima.setAnimation(0,"animation3",!1),s.conMager.getInstance().playAudioEff(s.KEY.audioName.boli),this.sp_anima.setCompleteListener(function(){cc.tween(e.node).to(.3,{scale:0}).call(function(){s.conMager.getInstance().putPoolNode(e.node.name,e.node)}).start()})},t.prototype.onClose=function(){},t.prototype.onClear=function(){throw new Error("Method not implemented.")},i([h(sp.Skeleton)],t.prototype,"sp_anima",void 0),i([c],t)}(s.winRootNode);a.default=u,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf"}],canju_game_view:[function(e,t,a){"use strict";cc._RF.push(t,"aaf1dnJ/ZtLcZBHq9VL9qan","canju_game_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=e("../../classCon/configSurface"),h=e("../wuziqi/Piece"),u=e("../../utils/platform"),l=e("../common/setup"),d=e("../wuziqi/canju/CanJuBoard"),p=e("../../utils/commonFunction"),g=e("../../SSSGF/dataController/DATA"),_=cc._decorator,m=_.ccclass,f=_.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item1=null,t.item2=null,t.item3=null,t.gameType=1,t.dsName_string="",t.dsName_label_item2=null,t.dsLevel_label_item2=null,t.dsHeadIcon_item2=null,t.userLevel_label_item2=null,t.userName_label_item2=null,t.userHeadIcon_item2=null,t.user_headPanel=null,t.ds_headPanel=null,t.ds_headIcon=null,t.user_headIcon=null,t.reward_gold=2,t.multiple=0,t.chess_parent=null,t.shubiao_node=null,t.max_gameTime=30,t.ds_headIconIndex=0,t.guanshu=0,t.duoyin_hao=null,t.board=null,t.whiteChess=null,t.blackChess=null,t.quan=null,t.hongDian=null,t.guanqiashu=null,t.block=46,t.chess=null,t.userGameTime=0,t.count_down=null,t.userChess=h.BLACKCHESS,t.is_game_over=!1,t.count_time_itm3=10,t.jiabei_num_item3=0,t.whiePool=new cc.NodePool,t.blackPool=new cc.NodePool,t.RightRate=1,t.TimeDel=!1,t.chess_num=0,t.interval=!0,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t.luozizhong=null,t.quan_judge=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){r._pl_fun.getInstance().startCreateVideo(),this.guanshu=e[0].level_id,this.reward_gold=e[0].reward_gold,r.GameDataStorage.gameStateData.reward=this.reward_gold,r.GameDataStorage.gameStateData.reward_gold=this.reward_gold,this.gameType=e[0].gameType,r.GameDataStorage.gameStateData.gameType=this.gameType,r.GameDataStorage.gameStateData.gameIndex=e[0].level_id,this.node.getChildByName("setup").getComponent(l.default).init_ui(),this.RightRate=.9,this.initGame(),this.node.runAction(cc.fadeIn(.5)),u.platform.now_platform!=u.platform_type.is_tt&&(this.node.getChildByName("luping").active=!1),this.hongDian.zIndex=99},t.prototype.onClose=function(){var e=this;this.unscheduleAllCallbacks(),this.board.removeListennner(),this.node.getChildByName("mask").active=!0,r.conMager.getInstance().hideWinNode(r.KEY.UIName.canju_game_view),r.conMager.getInstance().showWinNode(r.KEY.UIName.slectGmae,null,{gameType:this.gameType}),this.scheduleOnce(function(){e.node.getChildByName("mask").active=!1},.5)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){var e=this;r.conMager.getInstance()._msgAtion.on("ai_renshu",this.ai_renshu,this),r.conMager.getInstance()._msgAtion.on("ai_diaoxian",this.ai_diaoxian,this),r.conMager.getInstance()._msgAtion.on("ai_shangxian",this.ai_shangxian,this),r.conMager.getInstance()._msgAtion.on("renshu",this.return_btn,this),r.conMager.getInstance()._msgAtion.on("pingju",this.pingju,this),r.conMager.getInstance()._msgAtion.on("qiuhe",this.qiuhe,this),r.conMager.getInstance()._msgAtion.on("shubiao",this.shubiao,this),r.conMager.getInstance()._msgAtion.on("huiqi",this.huiqi,this),r.conMager.getInstance()._msgAtion.on("conglai",this.conglai,this),r.conMager.getInstance()._msgAtion.on("closeSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1},this),r.conMager.getInstance()._msgAtion.on("openSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0},this),r.conMager.getInstance()._msgAtion.on("stopTimeDel",function(){e.TimeDel=!0,e.quan_judge=!1},this),r.conMager.getInstance()._msgAtion.on("startTimeDel",function(){e.TimeDel=!1,e.quan_judge=!0},this)},t.prototype.update_ai_RightRate=function(){},t.prototype.RadomZhenFa=function(){},t.prototype.initDsZhenFa=function(){},t.prototype.initGame=function(){var e=this;cc.find("Canvas/money_node").active=!1,r.GameDataStorage.gameStateData.chess_num=0,r.GameDataStorage.gameStateData.rewardmultiple=0,this.initUi(),this.initData(),this.gameType<3?this.kaiChangDongHua():(this.node.getChildByName("heizi").active=!0,this.node.getChildByName("baizi").active=!0,this.node.getChildByName("baizi_label").active=!0,this.node.getChildByName("heizi_label").active=!0,this.node.getChildByName("setup").scale=1),this.board.init(this),cc.resources.load("json/canju_data",cc.JsonAsset,function(t,a){t||e.board.setCanju(a.json[r.GameDataStorage.gameStateData.gameIndex-1])}),this.node.getChildByName("mask").zIndex=99,this.initPool(this.whiePool,this.whiteChess),this.initPool(this.blackPool,this.blackChess)},t.prototype.initUi=function(){this.item1=this.node.getChildByName("item1"),this.item2=this.node.getChildByName("item2"),this.item3=this.node.getChildByName("item3"),this.dsLevel_label_item2=this.item2.getChildByName("left").getChildByName("dsLevel").getComponent(cc.Label),this.dsName_label_item2=this.item2.getChildByName("left").getChildByName("dsName").getComponent(cc.Label),this.userLevel_label_item2=this.item2.getChildByName("right").getChildByName("userLevel").getComponent(cc.Label),this.userName_label_item2=this.item2.getChildByName("right").getChildByName("userName").getComponent(cc.Label),this.user_headPanel=this.node.getChildByName("user_headPanel"),this.ds_headPanel=this.node.getChildByName("ds_headPanel"),this.ds_headIcon=this.node.getChildByName("ds_headIcon").getChildByName("ds_headIcon").getComponent(cc.Sprite),this.user_headIcon=this.node.getChildByName("user_headIcon").getChildByName("user_headIcon").getComponent(cc.Sprite),this.chess_parent=this.node.getChildByName("chess_parent"),this.shubiao_node=this.chess_parent.getChildByName("shubiao_node"),this.duoyin_hao=this.node.getChildByName("duoyin_hao"),this.duoyin_hao.active=!1,this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",this.count_down=this.node.getChildByName("count_down"),this.gameType==g.game_type.canju?(this.ds_headIcon.node.parent.active=!0,this.user_headIcon.node.parent.active=!0,this.ds_headIcon.node.parent.opacity=255,this.user_headIcon.node.parent.opacity=255,this.shubiao_node.active=r.GameDataStorage.gameStateData.shubiaoType,this.node.getChildByName("setup").getChildByName("huishou").getChildByName("shubiao").getChildByName("gou").active=r.GameDataStorage.gameStateData.shubiaoType):(this.node.getChildByName("heiqi").active=!0,this.node.getChildByName("baiqi").active=!0)},t.prototype.initData=function(){var e=r.GameDataStorage.getUser().userData;this.userName_label_item2.string=e.gameName;var t=p.commonFunction.judgeGameLevelName(e.user_level);this.userLevel_label_item2.string=t;var a=c.XingMingData.xing,n=c.XingMingData.ming,o=p.commonFunction.randomGameName(a,n);this.dsName_label_item2.string=o,r.GameDataStorage.gameStateData.ds_name=o;var i=p.commonFunction.judgeAiLevel(e.user_level),h=p.commonFunction.judgeGameLevelName(i);this.dsLevel_label_item2.string=h;var u=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel"),l=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel");u.getChildByName("Name").getComponent(cc.Label).string=this.userName_label_item2.string,u.getChildByName("Level").getComponent(cc.Label).string=this.userLevel_label_item2.string,l.getChildByName("Name").getComponent(cc.Label).string=this.dsName_label_item2.string,l.getChildByName("Level").getComponent(cc.Label).string=this.dsLevel_label_item2.string,"null"!=r.GameDataStorage.getUser().userData.headIconUrl&&p.commonFunction.updateHttpSprite(r.GameDataStorage.getUser().userData.headIconUrl,this.user_headIcon.node);var d=s.NumberUtil.randomNum(1,60);this.ds_headIconIndex=d,s.NumberUtil.randomNum(1,10)<7&&(d=1);var g="canju_icon/"+d;if(g=0==r.GameDataStorage.gameStateData.gameIndex%10?"canju_icon/"+["tx_chazhihaoli","tx_bubeiyouxi","tx_chazhihaoli","tx_bubeiyouxi","tx_doule","tx_douyoushijian","tx_doule","tx_douyoushijian","tx_xiaohualaoshi","tx_doujiling","tx_xiaohualaoshi","tx_doujiling"][r.GameDataStorage.gameStateData.gameIndex/10-1]:"canju_icon/wanning",console.log("\u5bf9\u624b\u7684\u5934\u50cf:",d),p.commonFunction.updateSprite(g,this.ds_headIcon.node),this.guanqiashu.string="\u7b2c"+this.guanshu+"\u5173",this.guanshu%10==0){this.duoyin_hao.active=!0;var _=["\u5dee\u4e4b\u6beb\u5398","\u5e03\u5317\u6e38\u620f","\u5dee\u4e4b\u6beb\u5398","\u5e03\u5317\u6e38\u620f","\u6296\u4e50","\u6296\u6e38\u65f6\u95f4","\u6296\u4e50","\u6296\u6e38\u65f6\u95f4","\u5c0f\u82b1\u8001\u5e08","\u6296\u673a\u7075","\u5c0f\u82b1\u8001\u5e08","\u6296\u673a\u7075"][this.guanshu/10-1],m=["69S6","z5982598","69S6","z5982598","douleyouxi","CY1517.","douleyouxi","CY1517.","hehuzhiyu","DY3067082","hehuzhiyu","DY3067082"][this.guanshu/10-1];this.duoyin_hao.getChildByName("layout").getChildByName("name").getComponent(cc.Label).string="* \u672c\u6b8b\u5c40\u7531 @"+_+" \uff08\u6296\u97f3\u53f7\uff1a",this.duoyin_hao.getChildByName("layout").getChildByName("hao").getComponent(cc.Label).string=m}},t.prototype.initPool=function(e,t){for(var a=0;a<225;a++){var n=cc.instantiate(t);e.put(n)}},t.prototype.moveInChess=function(e,t,a,n){var o,i=this,s=r.GameDataStorage.gameStateData.chess_num;if(2==this.gameType)if(s>30){this.chess_num-=1;var c=2;s>100&&(c=10),s>150&&(c=15),this.chess_num%c==0&&r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi)}else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);this.stopTime(),this.startTime(-a),this.ai_duihua(1);var u=null,l=null;if(a==h.BLACKCHESS?(u=this.blackPool,l=this.blackChess):(u=this.whiePool,l=this.whiteChess),u.size()>0)o=u.get();else{var d=cc.instantiate(l);u.put(d),o=u.get()}var p=Math.floor(e/this.block),g=15*Math.floor(t/this.block)+p;this.board.chess_map[g]=o,o.x=e,o.y=t,this.chess_parent.addChild(o),this.chessAction(o,n),2!=this.gameType&&this.scheduleOnce(function(){i.hongDian.active=!0,i.hongDian.setPosition(e,t+1)},.1)},t.prototype.chessAction=function(e,t){var a=this;e.scale=1.5,e.getChildByName("chess").zIndex=98,e.y+=80,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)),cc.callFunc(function(){if(t){var n=e.getChildByName("jn1");n.active=!0,a.scheduleOnce(function(){n.active=!1},1)}})))},t.prototype.ai_duihua=function(e,t){var a=this;if(!(this.gameType>2)){var n=this.node.getChildByName("ds_biaoqing"),o=this.node.getChildByName("ds_duihua"),i=0;if(1==e){if(!this.interval)return;if(this.interval=!1,this.scheduleOnce(function(){a.interval=!0},8),this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,10)<2&&(s.NumberUtil.randomNum(0,1)>0?(i=1,r.conMager.getInstance().playAudioEff("nv/nvqifeng")):(i=5,r.conMager.getInstance().playAudioEff("nv/nvhaoqi")))}else if(3==e)i=6,r.conMager.getInstance().playAudioEff("nv/nvhengaoxing");else{if(this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,100)<t&&(i=4,r.conMager.getInstance().playAudioEff("nv/nvkeyi"))}i>0&&(o.active=!0,n.active=!0,n.children[i].active=!0,o.children[i].active=!0,this.count_down.y>0&&(this.count_down.opacity=0),this.scheduleOnce(function(){a.count_down.opacity=255,n.children[i].active=!1,o.children[i].active=!1,n.active=!1,o.active=!1},2.2))}},t.prototype.gameOver=function(){if(console.log("\u6e38\u620f\u501f\u5bbf:",this.is_game_over),!this.is_game_over&&(this.is_game_over=!0,this.stopTime(),3!=this.gameType&&(cc.find("Canvas/money_node").active=!0),this.userGameTime>30?this.userChess==this.board.state?(console.log("\u5bf9\u624b\u80dc\u5229"),r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null),r.GameDataStorage.gameStateData.who_sucess=1):(console.log("\u73a9\u5bb6\u80dc\u5229"),r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,{level:this.guanshu-1}),r.GameDataStorage.gameStateData.who_sucess=0):1==this.board.win||-1==this.board.win?this.userChess==this.board.win?(r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,{level:this.guanshu-1}),r.GameDataStorage.gameStateData.who_sucess=0):(r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null),r.GameDataStorage.gameStateData.who_sucess=1):(r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null),r.GameDataStorage.gameStateData.who_sucess=2),this.board.removeListennner(),2==this.gameType&&0==r.GameDataStorage.gameStateData.who_sucess)){var e=r.GameDataStorage.gameStateData.userZhenFaName;r._pl_fun.getInstance().add_reportAnalytics("event_"+e+"_VictoryNumbers")}},t.prototype.kaiChangDongHua=function(){var e=this;r.conMager.getInstance().playAudioEff(r.KEY.audioName.pipeizhong),this.item1.active=!0,this.ds_headIcon.node.getComponent(cc.Button).interactable=!1,this.user_headIcon.node.getComponent(cc.Button).interactable=!1,s.NumberUtil.randomNum(1,3),this.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(r.KEY.audioName.pipeichenggong),e.item1.getChildByName("ppz").getComponent(sp.Skeleton).setAnimation(0,"peipeicg",!1),e.scheduleOnce(function(){e.item1.active=!1,e.item2.active=!0,r.conMager.getInstance().playAudioEff(r.KEY.audioName.kaiju);var t=e.item2.getChildByName("left"),a=e.item2.getChildByName("right"),n=e.item2.getChildByName("pk");n.scale=4,n.y=150,t.active=!0,a.active=!0,t.runAction(cc.sequence(cc.delayTime(.8),cc.callFunc(function(){e.ds_headIcon.node.parent.runAction(cc.fadeIn(.2)),e.user_headIcon.node.parent.runAction(cc.fadeIn(.2))}),cc.fadeIn(.2),cc.delayTime(.7),cc.callFunc(function(){e.ds_headIcon.node.parent.runAction(cc.spawn(cc.moveTo(.35,0,555),cc.sequence(cc.scaleTo(.25,1.8),cc.delayTime(.35),cc.scaleTo(.1,1)))),e.user_headIcon.node.parent.runAction(cc.spawn(cc.moveTo(.35,0,-548),cc.sequence(cc.scaleTo(.25,1.8),cc.delayTime(.35),cc.scaleTo(.1,1))))}),cc.fadeOut(.15),cc.callFunc(function(){e.item3.active=!0,e.item2.active=!1,e.item3.active=!0;var t=e.item3.getChildByName("Node");t.y=1500,r.conMager.getInstance().playAudioEff(r.KEY.audioName.showpanel),cc.tween(t).to(.3,{position:cc.v3(0,0)},{easing:"backOut"}).start(),e.startTime_item3();var a=s.NumberUtil.randomNum(1,2);console.log("\u95f4\u9694\u65f6\u95f4:"),e.scheduleOnce(function(){var t=s.NumberUtil.randomNum(0,2),a=1;1==t?a=2:2==t&&(a=4),e.jiabeiAction(a,1)},a)}))),a.runAction(cc.sequence(cc.delayTime(.8),cc.fadeIn(.2),cc.delayTime(.7),cc.fadeOut(.15)))},1)},2)},t.prototype.caixianshou=function(){if(this.gameType<3){this.node.getChildByName("setup").scale=1;var e=this.node.getChildByName("heizi"),t=this.node.getChildByName("baizi"),a=this.node.getChildByName("baizi_label"),n=this.node.getChildByName("heizi_label");s.NumberUtil.randomNum(0,1)>0?(this.userChess=h.WHITECHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!"),this.board.AIXianShou(),e.setPosition(-270,368),t.setPosition(182,-380),n.setPosition(-225,372),a.setPosition(225,-376)):(this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.userChess=h.BLACKCHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"),t.setPosition(-270,368),e.setPosition(182,-380),a.setPosition(-225,372),n.setPosition(225,-376)),this.ai_duihua(3),e.active=!0,t.active=!0,a.active=!0,n.active=!0}this.startTime(this.board.state)},t.prototype.jiabeiAction=function(e,t){var a=this;this.reward_gold*=e,this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",r.GameDataStorage.gameStateData.reward=this.reward_gold,r.GameDataStorage.gameStateData.rewardmultiple*=e;var n="",o=-380;if(1==t)o=380,n=["nvbujiabei","nvjiabei","nvjiabei","nvchaojijiabei"][e-1];else{this.stopTime_item3(),this.multiple=1,n=["nanbujiabei","nanjiabei","nanbujiabei","nanchaojijiabei"][e-1];var i=this.item3.getChildByName("Node"),s=cc.callFunc(function(){a.item3.active=!1,a.user_headIcon.node.getComponent(cc.Button).interactable=!0,a.caixianshou()});cc.tween(i).sequence(cc.tween().to(.5,{position:cc.v3(0,1500)},{easing:"backIn"}),cc.delayTime(1),s).start()}r.conMager.getInstance().playAudioEff(n),r.conMager.getInstance().getPoolNode(r.KEY.poolName.jiabei,this.node,{pos:cc.v2(0,o),index:e})},t.prototype.jiabei_btn=function(e,t){if(r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),!(this.multiple>0)){var a=parseInt(t);this.jiabeiAction(a,2)}},t.prototype.dsHeadIcon_btn=function(){},t.prototype.userHeadIcon_btn=function(){},t.prototype.biaoQing_btn=function(e,t){var a=this;this.hide_userPenl_btn();var n=parseInt(t),o=this.node.getChildByName("user_biaoqing");o.active=!0,o.children[n].active=!0;var i=this.node.getChildByName("user_duihua");this.count_down.y<0&&(this.count_down.opacity=0),i.active=!0,i.children[n].active=!0,r.conMager.getInstance().playAudioEff("nan/"+this.musicNames[n-1]),this.scheduleOnce(function(){o.active=!1,o.children[n].active=!1,a.count_down.opacity=255,i.active=!1,i.children[n].active=!1},2.2)},t.prototype.fuzhi_btn=function(){var e=this,t=e.duoyin_hao.getChildByName("layout").getChildByName("hao").getComponent(cc.Label).string;window.tt&&tt.setClipboardData({data:t,success:function(){e.node.getChildByName("tipNode").y=-400,e.node.getChildByName("tipNode").active=!0,e.node.stopAllActions(),cc.tween(e.node.getChildByName("tipNode")).to(.5,{y:-200}).call(function(){e.node.getChildByName("tipNode").y=-400,e.node.getChildByName("tipNode").active=!1}).start()},fail:function(){console.log("setClipboardData\u8c03\u7528\u5931\u8d25")}})},t.prototype.conglai=function(){var e=r.GameDataStorage.gameStateData.reward_gold,t=r.GameDataStorage.gameStateData.gameType,a=r.GameDataStorage.gameStateData.gameIndex;r.conMager.getInstance().hideWinNode(r.KEY.UIName.canju_game_view),r.conMager.getInstance().showWinNode(r.KEY.UIName.canju_game_view,cc.find("Canvas"),{reward_gold:e,gameType:t,level_id:a})},t.prototype.hide_userPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!1},t.prototype.hide_dsPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!1},t.prototype.return_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.onClose(1)},t.prototype.luozizhong_action=function(e){e.active=!0,e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.getComponent(cc.Label).string=""}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50\u4e2d"}),cc.delayTime(.6))))},t.prototype.startTime=function(e){this.userGameTime=0,this.count_down.active=!0;var t=this.node.getChildByName("luozizhong");t.stopAllActions(),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+(30-this.userGameTime),this.userChess==e?(this.count_down.active=!1,t.active=!0,this.quan.active=!1,this.count_down.y=-440,t.setPosition(252,-376),this.quan.setPosition(0,-547)):(this.count_down.active=!1,t.active=!1,this.quan.active=!1),t.color=cc.color(51,51,51),this.quan.getComponent(cc.Sprite).fillRange=1,this.luozizhong_action(t),this.count_down.getChildByName("time").color=cc.color(255,255,255)},t.prototype.updateTime=function(){if(this.TimeDel||(this.userGameTime+=1),!this.is_game_over)if(this.userGameTime>this.max_gameTime)this.gameOver();else{var e=this.max_gameTime-this.userGameTime,t=e+"";e<10&&(t="0"+e),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+t,e<15&&(this.count_down.getChildByName("time").color=cc.color(255,0,0),this.TimeDel||r.conMager.getInstance().playAudioEff(r.KEY.audioName.shijian)),this.TimeDel||(12==this.userGameTime?this.ai_duihua(2,5):21==this.userGameTime?this.ai_duihua(2,20):26==this.userGameTime&&this.ai_duihua(2,80))}},t.prototype.stopTime=function(){this.unschedule(this.updateTime),this.count_down.active=!1,this.quan.active=!1,this.quan_judge=!1,this.node.getChildByName("luozizhong").stopAllActions(),this.node.getChildByName("luozizhong").active=!1},t.prototype.startTime_item3=function(){this.count_time_itm3=10,this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label).string=this.count_time_itm3+"s",this.schedule(this.updateTime_item3,1)},t.prototype.updateTime_item3=function(){this.count_time_itm3-=1;var e=this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label);e.string=this.count_time_itm3+"s",this.count_time_itm3<=5&&(e.node.color=cc.color(255,0,0)),this.count_time_itm3<=0&&(e.node.active=!1,r.conMager.getInstance().playAudioEff("nanbujiabei"),this.jiabeiAction(1,2),this.stopTime_item3())},t.prototype.stopTime_item3=function(){this.unschedule(this.updateTime_item3)},t.prototype.renshu=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=1,r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null))},t.prototype.ai_renshu=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=0,r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null))},t.prototype.ai_diaoxian=function(){this.is_game_over||(p.commonFunction.updateSprite("head_icon/diaoxian",this.ds_headIcon.node),this.ds_headIcon.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeIn(.4)))),console.log("\u89e6\u53d1\u6389\u7ebf"))},t.prototype.ai_shangxian=function(){this.is_game_over||(p.commonFunction.updateSprite("head_icon/"+this.ds_headIconIndex,this.ds_headIcon.node),this.ds_headIcon.node.opacity=255,this.ds_headIcon.node.stopAllActions(),console.log("\u89e6\u53d1\u4e0a\u7ebf"))},t.prototype.pingju=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=2,r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null))},t.prototype.qiuhe=function(){},t.prototype.shubiao=function(e){r.GameDataStorage.gameStateData.shubiaoType=e,this.shubiao_node.active=e},t.prototype.huiqi=function(){},t.prototype.update=function(e){this.quan_judge&&(1==Math.floor(e)&&console.log("1\u79d2\u8fc7\u53bb\u4e86"),this.quan.getComponent(cc.Sprite).fillRange-=1/(60*this.max_gameTime))},i([f(d.CanJuBoard)],t.prototype,"board",void 0),i([f(cc.Prefab)],t.prototype,"whiteChess",void 0),i([f(cc.Prefab)],t.prototype,"blackChess",void 0),i([f(cc.Node)],t.prototype,"quan",void 0),i([f(cc.Node)],t.prototype,"hongDian",void 0),i([f(cc.Label)],t.prototype,"guanqiashu",void 0),i([f(cc.Prefab)],t.prototype,"chess",void 0),i([m],t)}(r.winRootNode);a.default=y,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../classCon/configSurface":"configSurface","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform","../common/setup":"setup","../wuziqi/Piece":"Piece","../wuziqi/canju/CanJuBoard":"CanJuBoard","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],canju_node:[function(e,t,a){"use strict";cc._RF.push(t,"e7a27Fqdi1Di64+SpU5t15E","canju_node");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(t){i(t)}}function r(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(s,r)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var a,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(e){return function(t){return c([e,t])}}function c(i){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(r){i=[6,r],n=0}finally{a=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var c=e("../../../SSSGF/ssscgf"),h=e("../../../utils/commonFunction"),u=e("../../view/slectGmae"),l=cc._decorator,d=l.ccclass,p=l.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nd_scrollView=null,t.nd_item=null,t.page_1=null,t.page_2=null,t.page_3=null,t.bgMode=null,t.level_map=new Map,t.svBBoxRect=null,t}return o(t,e),t.prototype.onLoad=function(){cc.sys.isBrowser&&c.GameDataStorage.getUser().userData.canju_id<120&&(c.GameDataStorage.getUser().userData.canjuArr.forEach(function(e,t){c.GameDataStorage.getUser().userData.canjuArr[t]=1}),c.GameDataStorage.getUser().userData.canju_id=120,c.GameDataStorage.preserveGameData()),this.level_map.clear(),this.framingLoad(15),this.node.getChildByName("return").on("touchend",this.return_btn_click,this),this.nd_scrollView.node.on("scrolling",this._onScrollingDrawCallOpt,this)},t.prototype.return_btn_click=function(){var e=this;this.node.getChildByName("mask").active=!0,cc.find("Canvas").getChildByName("slectGmae").getComponent(u.default).canju_return_btn(),this.scheduleOnce(function(){var t=e.nd_scrollView.content.getChildByName("wn");e.nd_scrollView.scrollToOffset(new cc.Vec2(0,Math.abs(t.y)-cc.winSize.height/2)),e._onScrollingDrawCallOpt(),e.node.getChildByName("mask").active=!1},.5)},t.prototype._onScrollingDrawCallOpt=function(){var e=this;0!=this.bgMode.childrenCount&&this.bgMode.children.forEach(function(t){t.getBoundingBoxToWorld().intersects(e.svBBoxRect)?255!=t.opacity&&(t.opacity=255):0!=t.opacity&&(t.opacity=0)})},t.prototype.framingLoad=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,this.executePreFrame(this._getItemGenerator(e),1)];case 1:return t.sent(),[2]}})})},t.prototype._getItemGenerator=function(e){var t;return r(this,function(a){switch(a.label){case 0:t=0,a.label=1;case 1:return t<e?[4,this._initItem(t)]:[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}})},t.prototype._initItem=function(e){var t=null;(t=0==e?cc.instantiate(this.page_3):e%2!=0?cc.instantiate(this.page_2):cc.instantiate(this.page_1)).active=!0,t.setPosition(0,0),t.name=e+"",this.initItem(t),this.bgMode.addChild(t)},t.prototype.refreshHead=function(e,t){h.commonFunction.updateSprite("canju_icon/"+["tx_chazhihaoli","tx_bubeiyouxi","tx_chazhihaoli","tx_bubeiyouxi","tx_doule","tx_douyoushijian","tx_doule","tx_douyoushijian","tx_xiaohualaoshi","tx_doujiling","tx_xiaohualaoshi","tx_doujiling"][e-1],t)},t.prototype.initItem=function(e){var t=this;e.opacity=0,e.children.forEach(function(a,n){0==Number(e.name)?a.name=120-(e.childrenCount-n-1)+"":a.name=120-8*Number(e.name)-(e.childrenCount-n-1)+"";var o=a.getChildByName("false"),i=a.getChildByName("true"),s=a.getChildByName("touxian"),r=a.getChildByName("kuang_true"),h=a.getChildByName("kuang_false");r.active=!1,h.active=!1,s.active=!1;var l=Number(a.name);a.on("touchend",function(){cc.find("Canvas").getChildByName("slectGmae").getComponent(u.default).canju_slect_btn(l)},t),a.getChildByName("level").getComponent(cc.Label).string=a.name;var d=c.GameDataStorage.getUser().userData;t.level_map.set(Number(a.name),a),l-1<d.canju_id?(o.active=!1,i.active=!0,l%10==0&&(r.active=!0,s.active=!0,t.refreshHead(l/10,s))):(o.active=!0,i.active=!1,l%10==0&&(h.active=!0,s.active=!0,t.refreshHead(l/10,s)))})},t.prototype.executePreFrame=function(e,t){var a=this;return new Promise(function(){var n=e,o=function(){for(var e=(new Date).getTime(),i=n.next();;i=n.next()){if(null==i||i.done){var s=c.GameDataStorage.getUser().userData,r=a.nd_scrollView.content.getChildByName("wn"),h=s.canju_id+1>=120?120:s.canju_id+1,u=a.level_map.get(h).convertToWorldSpaceAR(cc.v2()),l=r.parent.convertToNodeSpaceAR(u);return r.setPosition(l),a.nd_scrollView.scrollToOffset(new cc.Vec2(0,Math.abs(r.y)-cc.winSize.height/2)),a.svBBoxRect=a.getRect(),void a._onScrollingDrawCallOpt()}if((new Date).getTime()-e>t)return void a.scheduleOnce(function(){o()})}};o()})},t.prototype.getRect=function(){var e=this.nd_scrollView.node.parent.convertToWorldSpaceAR(cc.v2(this.nd_scrollView.node.x-this.nd_scrollView.node.anchorX*this.nd_scrollView.node.width,this.nd_scrollView.node.y-this.nd_scrollView.node.anchorY*this.nd_scrollView.node.height));return cc.rect(e.x,e.y,this.nd_scrollView.node.width,this.nd_scrollView.node.height)},i([p(cc.ScrollView)],t.prototype,"nd_scrollView",void 0),i([p(cc.Node)],t.prototype,"nd_item",void 0),i([p(cc.Node)],t.prototype,"page_1",void 0),i([p(cc.Node)],t.prototype,"page_2",void 0),i([p(cc.Node)],t.prototype,"page_3",void 0),i([p(cc.Node)],t.prototype,"bgMode",void 0),i([d],t)}(cc.Component);a.default=g,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../../../utils/commonFunction":"commonFunction","../../view/slectGmae":"slectGmae"}],chaoniu_tudiliekai:[function(e,t,a){"use strict";cc._RF.push(t,"308ec4o21FK+pVy7/vhZoTe","chaoniu_tudiliekai");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callback=null,t.pos=[],t.isjude=!0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;this.node.zIndex=99;var a=46*e[0].pos[0],n=46*e[0].pos[1];e[0].bool&&(a-=322,n-=322),this.node.setPosition(a,n);var o=s.GameDataStorage.getUser().userData.skinBoard,i=this.node.getComponent(sp.Skeleton);i.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.REALTIME),i.setAnimation(0,"animation",!1),i.setSkin("pifu"+(o+1)),i.setCompleteListener(function(){s.conMager.getInstance().getPoolNode(s.KEY.poolName.liehen,t.node.parent,{pos:t.node.getPosition(),rotation:t.node.rotation}),t.onClose(1)})},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf"}],chaoniuguangbo:[function(e,t,a){"use strict";cc._RF.push(t,"f62d2duENBDl4ld15UtColF","chaoniuguangbo");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callback=null,t.pos=[],t.isjude=!0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){var e=this;this.node.zIndex=99,s.conMager.getInstance()._msgAtion.on("del_chaoniuguangbo",function(){e.onClose(1)},this)},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf"}],chaoniu:[function(e,t,a){"use strict";cc._RF.push(t,"a04094+F+ZA1a0nb8Fe3bw9","chaoniu");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/ssscgf"),r=e("../../../../utils/commonFunction"),c=e("../class_manager"),h=e("../game_manager"),u=e("../new_chess"),l=e("../zhenfa_joiner"),d=cc._decorator,p=d.ccclass,g=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_number_max=1,t.use_number=0,t.now_chess=null,t.now_chess_pos=null,t.last_play_chess=null,t}return o(t,e),t.prototype.use_zhenfa=function(){return this.judge_use()},t.prototype.use_zhenfa_finish=function(){return!0},t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.board=e},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return h.game_manager.get_chess_player()==this.my_player&&this.last_play_chess==this.my_player&&s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.board.tip_parent,"\u68cb\u76d8\u6bc1\u574f,\u65e0\u5b50\u53ef\u4e0b,\u56de\u5408\u8f6c\u6362"),!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(e){return this.last_play_chess=e,e!=this.my_player||this.judge_use()},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return this.use_number=0,!0},t.prototype.one_win=function(){return!0},t.prototype.judge_use=function(){var e=this.judge_active();return 0!=e||0!=(e=this.judge_number())||0!=(e=this.judge_my_chess())||0!=(e=this.judge_null())||(this.show_chaoniu(),!1)},t.prototype.judge_my_chess=function(){for(var e=!0,t=0;t<this.chess_array.length;t++){for(var a=0;a<this.chess_array[t].length;a++)if(this.chess_array[t][a].chess_data&&this.chess_array[t][a].chess_data.state==this.my_player.state){e=!1,this.now_chess=this.chess_array[t][a];break}if(0==e)break}return 1==e},t.prototype.show_chaoniu=function(){var e=this;this.use_number++;var t=!1;this.my_player.cos==c.joiner_enum.player?(t=!0,s.conMager.getInstance().playAudioEff("nan/nanchaoniu")):s.conMager.getInstance().playAudioEff("nv/nvchaoniu"),this.scheduleOnce(function(){s.conMager.getInstance().playAudioEff("niujiao")},1),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.board.ui_parent,{fileName:"chaoniu",ani_name:"animation",cb:function(){e.chaoniu_zhen()},is_user:t})},t.prototype.chaoniu_zhen=function(){for(var e=[],t=0;t<this.chess_array.length;t++)for(var a=0;a<this.chess_array[t].length;a++)this.chess_array[t][a].chess_data&&this.chess_array[t][a].chess_data.state!=this.my_player.state&&0==this.chess_array[t][a].chess_data.meihua&&0==this.chess_array[t][a].chess_data.dusha&&0==this.chess_array[t][a].chess_data.stone_type&&e.push(this.chess_array[t][a]);var n=this.now_chess.chess_data.node.getPosition();this.now_chess_pos=cc.v3(n.x,n.y),s.conMager.getInstance().getPoolNode(s.KEY.poolName.chaoniuguangbo,this.now_chess.chess_data.node.getComponent(u.default).chess_effect),this.chaoniu_run(e,0)},t.prototype.chaoniu_run=function(e,t){var a=this;if(e.length<1||t>this.data.level)this.end_run();else{var n=Math.floor(Math.random()*e.length),o=e[n];if(!o||!o.chess_data)return e.splice(n,1),void this.chaoniu_run(e,t);s.conMager.getInstance().playAudioEff("chong");var i=o.chess_data.node.getPosition();cc.tween(this.now_chess.chess_data.node).to(.1,{position:cc.v3(i.x,i.y)},{easing:"elasticInOut"}).call(function(){r.commonFunction.pingmuDouDong(a.board.node),a.dilie(o),e.splice(n,1),s.conMager.getInstance().playAudioEff("zhuangji")}).delay(.5).call(function(){t++,a.chaoniu_run(e,t)}).start()}},t.prototype.end_run=function(){var e=this;this.stopTiming(),cc.tween(this.now_chess.chess_data.node).to(.1,{position:this.now_chess_pos}).delay(1).call(function(){s.conMager.getInstance()._msgAtion.emit("del_chaoniuguangbo"),h.game_manager.get_zhenfa_event(e.my_player,e.data)}).start()},t.prototype.startTiming=function(){this.schedule(this.updateTime2,.001)},t.prototype.updateTime2=function(){var e=this;s.conMager.getInstance().getPoolNode(s.KEY.poolName.new_chess,this.board.up_effect,this.now_chess,function(t,a){a();var n=e.now_chess.chess_data.node.convertToWorldSpaceAR(cc.v2(0,0)),o=e.board.up_effect.convertToNodeSpaceAR(n);t.setPosition(o),t.opacity=155,cc.tween(t).to(.35,{opacity:0}).call(function(){s.conMager.getInstance().putPoolNode(s.KEY.poolName.new_chess,t)}).start()})},t.prototype.stopTiming=function(){this.unschedule(this.updateTime2)},t.prototype.dilie=function(e){for(var t=cc.v2(e.board_pos.x-1,e.board_pos.y-1),a=0;a<3;a++)for(var n=0;n<3;n++)this.chess_array[t.x+a]&&this.chess_array[t.x+a][t.y+n]&&(this.chess_array[t.x+a][t.y+n].chaoniu_player=!0),this.chess_array[t.x+a]&&this.chess_array[t.x+a][t.y+n]&&this.chess_array[t.x+a][t.y+n].chess_data&&this.chess_array[t.x+a][t.y+n].chess_data.state!=this.my_player.state&&0==this.chess_array[t.x+a][t.y+n].chess_data.meihua&&0==this.chess_array[t.x+a][t.y+n].chess_data.dusha&&h.game_manager.zhenfa_delect_chess(cc.v2(t.x+a,t.y+n));var o=[e.board_pos.x,e.board_pos.y];s.conMager.getInstance().getPoolNode(s.KEY.poolName.chaoniu_tudiliekai,this.board.down_effect,{pos:o,bool:!0})},i([p],t)}(l.default));a.default=g,cc._RF.pop()},{"../../../../SSSGF/ssscgf":"ssscgf","../../../../utils/commonFunction":"commonFunction","../class_manager":"class_manager","../game_manager":"game_manager","../new_chess":"new_chess","../zhenfa_joiner":"zhenfa_joiner"}],"chessAi _canju":[function(e,t,a){"use strict";cc._RF.push(t,"06325bxqT9Cca5jp+14tC3I","chessAi _canju");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("./CanJuBoard"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t.record=[],t.count=0,t.wins=[],t.myWin=[],t.computerWin=[],t.RightRate=1,t.stateNumber=1,t.is_diaoxian=!1,t.is_new=!1,t.huiqi=!1,t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this),s.conMager.getInstance()._msgAtion.on("user_huiqi_ai",this.user_huiqi_ai,this),s.conMager.getInstance()._msgAtion.on("user_qiuhe_ai",this.user_qiuhe_ai,this),s.conMager.getInstance()._msgAtion.on("all_checkWin",this.all_checkWin,this)},t.prototype.user_huiqi_ai=function(e){this.board.juesha_judge?e&&e(!1):s.NumberUtil.randomNum(1,10)>3?e&&e(!0):(this.is_new=!0,e&&e(!1))},t.prototype.user_qiuhe_ai=function(e){var t=this.jushi_judge();console.log("\u6c42\u548c\u7684\u5206\u6570:",t),this.board.juesha_judge?e(!1):this.board.sum>=180?e(!0):t.myScore_1>t.computerScore_1?e(!0):(t.myScore_1,t.computerScore_1,e(!1))},t.prototype.jushi_judge=function(){for(var e=[],t=[],a=0,n=0,o=0;o<15;o++){e[o]=[],t[o]=[];for(var i=0;i<15;i++)e[o][i]=0,t[o][i]=0}for(o=0;o<15;o++)for(i=0;i<15;i++)if(0!=this.board.maze[o][i])for(var s=0;s<this.count;s++)this.wins[o][i][s]&&(1==this.myWin[s]?(e[o][i]+=200,a+=200):2==this.myWin[s]?(e[o][i]+=400,a+=400):3==this.myWin[s]?(e[o][i]+=2e3,a+=2e3):4==this.myWin[s]&&(e[o][i]+=1e4,a+=1e4),1==this.computerWin[s]?(t[o][i]+=220,n+=200):2==this.computerWin[s]?(t[o][i]+=420,n+=400):3==this.computerWin[s]?(t[o][i]+=2100,n+=2e3):4==this.computerWin[s]&&(t[o][i]+=2e4,n+=1e4));return{myScore_1:a,computerScore_1:n}},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}for(var a=0;a<15;a++){this.wins[a]=[];for(var n=0;n<15;n++)this.wins[a][n]=[]}for(a=0;a<15;a++)for(n=0;n<11;n++){for(var o=0;o<5;o++)this.wins[a][n+o][this.count]=!0;this.count++}for(a=0;a<15;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[n+o][a][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[a+o][n+o][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=14;n>3;n--){for(o=0;o<5;o++)this.wins[a+o][n-o][this.count]=!0;this.count++}for(a=0;a<this.count;a++)this.myWin[a]=0,this.computerWin[a]=0},t.prototype.AIPosition=function(e,t,a,n){var o=this;this.stateCheck(function(){if(e/=o.board.block,t/=o.board.block,o.newX=e,o.newY=t,o.huiqi=!1,n&&(o.huiqi=n),5!=s.GameDataStorage.gameStateData.gameType)for(var i=0;i<o.count;i++)o.wins[e][t][i]&&(o.myWin[i]++,o.computerWin[i]=6);var r=o.computerAI();e=r.x,t=r.y,a&&a(cc.v2(e*o.board.block,t*o.board.block))})},t.prototype.stateCheck=function(e){var t=this,a=(s.NumberUtil.randomNum(1,3),s.NumberUtil.randomNum(0,100));if(this.stateNumber=0,this.stateNumber<=0)return e();15==a?(s.conMager.getInstance()._msgAtion.emit("ai_diaoxian"),this.scheduleOnce(function(){s.conMager.getInstance()._msgAtion.emit("ai_shangxian"),t.stateNumber-=1,e&&e()},s.NumberUtil.randomNum(2,10))):e&&e()},t.prototype.addPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]--):(this.computerWin[n]++,this.myWin[n]--))},t.prototype.addPos2=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]=6):(this.computerWin[n]++,this.myWin[n]=6))},t.prototype.delPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]=0,this.computerWin[n]=0):(this.computerWin[n]=0,this.myWin[n]=0))},t.prototype.initData=function(){for(var e=0;e<this.count;e++)this.myWin[e]=0,this.computerWin[e]=0;for(var t=0;t<this.board.judgeSize;t++)for(var a=0;a<this.board.judgeSize;a++)-1==this.board.maze[t][a]?this.addPos2(t,a,-1):1==this.board.maze[t][a]&&this.addPos2(t,a,1)},t.prototype.computerAI=function(){for(var e=[],t=[],a=0,n=0,o=0,i=0;i<15;i++){e[i]=[],t[i]=[];for(var r=0;r<15;r++)e[i][r]=0,t[i][r]=0}var c,h=[];for(i=0;i<15;i++)for(r=0;r<15;r++)if(0==this.board.maze[i][r]){h.push([i,r]);for(var u=0;u<this.count;u++)this.wins[i][r][u]&&(1==this.myWin[u]?e[i][r]+=200:2==this.myWin[u]?e[i][r]+=400:3==this.myWin[u]?e[i][r]+=2e3:4==this.myWin[u]&&(e[i][r]+=1e4),1==this.computerWin[u]?t[i][r]+=220:2==this.computerWin[u]?t[i][r]+=420:3==this.computerWin[u]?t[i][r]+=2100:4==this.computerWin[u]&&(t[i][r]+=2e4));e[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=e[i][r],n=i,o=r):e[i][r]==a&&t[i][r]>t[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r),t[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=t[i][r],n=i,o=r):t[i][r]==a&&e[i][r]>e[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r)}(this.huiqi&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),5==s.GameDataStorage.gameStateData.gameType)&&(1==this.board.sum&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),console.log("uggggg,",n,o),this.checkWin(n,o));for(0!=this.board.maze[n][o]&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1],console.log("uggggg,",n,o),this.checkWin(n,o)),u=0;u<this.count;u++)this.wins[n][o][u]&&(this.computerWin[u]++,this.myWin[u]=6);return cc.v2(n,o)},t.prototype.checkWin=function(e,t){for(var a=e-1-1,n=t+1,o=0;o<9;o++)if(a+=1,o%3==0&&0!=o&&(a=e-1,n-=1),!(a>14||a<0||n>14||n<0)&&this.board.maze[a][n]==this.board.gameScene.userChess)for(var i=0;i<this.count;i++)this.wins[a][n][i]&&(this.myWin[i]++,this.computerWin[i]=6)},t.prototype.all_checkWin=function(){for(var e=0;e<15;e++)for(var t=0;t<15;t++)if(this.board.maze[e][t]==this.board.gameScene.userChess)for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.myWin[a]++,this.computerWin[a]=6)},i([u(r.CanJuBoard)],t.prototype,"board",void 0),i([h],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","./CanJuBoard":"CanJuBoard"}],chessAi_blxj:[function(e,t,a){"use strict";cc._RF.push(t,"29453G9gLpFrIumj2lVpI9j","chessAi_blxj");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("./GameBoard_blxj"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t.record=[],t.count=0,t.wins=[],t.myWin=[],t.computerWin=[],t.RightRate=1,t.stateNumber=1,t.is_diaoxian=!1,t.is_new=!1,t.huiqi=!1,t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this),s.conMager.getInstance()._msgAtion.on("user_huiqi_ai",this.user_huiqi_ai,this),s.conMager.getInstance()._msgAtion.on("user_qiuhe_ai",this.user_qiuhe_ai,this),s.conMager.getInstance()._msgAtion.on("all_checkWin",this.all_checkWin,this)},t.prototype.user_huiqi_ai=function(e){this.board.juesha_judge?e&&e(!1):s.NumberUtil.randomNum(1,10)>3?e&&e(!0):(this.is_new=!0,e&&e(!1))},t.prototype.user_qiuhe_ai=function(e){var t=this.jushi_judge();console.log("\u6c42\u548c\u7684\u5206\u6570:",t),this.board.juesha_judge?e(!1):this.board.sum>=180?e(!0):t.myScore_1>t.computerScore_1?e(!0):(t.myScore_1,t.computerScore_1,e(!1))},t.prototype.jushi_judge=function(){for(var e=[],t=[],a=0,n=0,o=0;o<15;o++){e[o]=[],t[o]=[];for(var i=0;i<15;i++)e[o][i]=0,t[o][i]=0}for(o=0;o<15;o++)for(i=0;i<15;i++)if(0!=this.board.maze[o][i])for(var s=0;s<this.count;s++)this.wins[o][i][s]&&(1==this.myWin[s]?(e[o][i]+=200,a+=200):2==this.myWin[s]?(e[o][i]+=400,a+=400):3==this.myWin[s]?(e[o][i]+=2e3,a+=2e3):4==this.myWin[s]&&(e[o][i]+=1e4,a+=1e4),1==this.computerWin[s]?(t[o][i]+=220,n+=200):2==this.computerWin[s]?(t[o][i]+=420,n+=400):3==this.computerWin[s]?(t[o][i]+=2100,n+=2e3):4==this.computerWin[s]&&(t[o][i]+=2e4,n+=1e4));return{myScore_1:a,computerScore_1:n}},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}for(var a=0;a<15;a++){this.wins[a]=[];for(var n=0;n<15;n++)this.wins[a][n]=[]}for(a=0;a<15;a++)for(n=0;n<11;n++){for(var o=0;o<5;o++)this.wins[a][n+o][this.count]=!0;this.count++}for(a=0;a<15;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[n+o][a][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[a+o][n+o][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=14;n>3;n--){for(o=0;o<5;o++)this.wins[a+o][n-o][this.count]=!0;this.count++}for(a=0;a<this.count;a++)this.myWin[a]=0,this.computerWin[a]=0},t.prototype.AIPosition=function(e,t,a,n){var o=this;this.stateCheck(function(){if(e/=o.board.block,t/=o.board.block,o.newX=e,o.newY=t,o.huiqi=!1,n&&(o.huiqi=n),5!=s.GameDataStorage.gameStateData.gameType)for(var i=0;i<o.count;i++)o.wins[e][t][i]&&(o.myWin[i]++,o.computerWin[i]=6);var r=o.computerAI();e=r.x,t=r.y,a&&a(cc.v2(e*o.board.block,t*o.board.block))})},t.prototype.stateCheck=function(e){var t=this,a=(s.NumberUtil.randomNum(1,3),s.NumberUtil.randomNum(0,100));if(this.stateNumber<=0)return e();15==a?(s.conMager.getInstance()._msgAtion.emit("ai_diaoxian"),this.scheduleOnce(function(){s.conMager.getInstance()._msgAtion.emit("ai_shangxian"),t.stateNumber-=1,e&&e()},s.NumberUtil.randomNum(2,10))):e&&e()},t.prototype.addPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]--):(this.computerWin[n]++,this.myWin[n]--))},t.prototype.delPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]=0,this.computerWin[n]=0):(this.computerWin[n]=0,this.myWin[n]=0))},t.prototype.resetPos=function(e,t){for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.myWin[a]=6,this.computerWin[a]=6)},t.prototype.computerAI=function(){for(var e=[],t=[],a=0,n=0,o=0,i=0;i<15;i++){e[i]=[],t[i]=[];for(var r=0;r<15;r++)e[i][r]=0,t[i][r]=0}var c,h=[];for(i=0;i<15;i++)for(r=0;r<15;r++)if(0==this.board.maze[i][r]){h.push([i,r]);for(var u=0;u<this.count;u++)this.wins[i][r][u]&&(1==this.myWin[u]?e[i][r]+=200:2==this.myWin[u]?e[i][r]+=400:3==this.myWin[u]?e[i][r]+=2e3:4==this.myWin[u]&&(e[i][r]+=1e4),1==this.computerWin[u]?t[i][r]+=220:2==this.computerWin[u]?t[i][r]+=420:3==this.computerWin[u]?t[i][r]+=2100:4==this.computerWin[u]&&(t[i][r]+=2e4));e[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=e[i][r],n=i,o=r):e[i][r]==a&&t[i][r]>t[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r),t[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=t[i][r],n=i,o=r):t[i][r]==a&&e[i][r]>e[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r)}(this.huiqi&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),5==s.GameDataStorage.gameStateData.gameType)&&(1==this.board.sum&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),console.log("uggggg,",n,o),this.checkWin(n,o));for(0!=this.board.maze[n][o]&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1],console.log("uggggg,",n,o),this.checkWin(n,o)),u=0;u<this.count;u++)this.wins[n][o][u]&&(this.computerWin[u]++,this.myWin[u]=6);return cc.v2(n,o)},t.prototype.checkWin=function(e,t){for(var a=e-1-1,n=t+1,o=0;o<9;o++)if(a+=1,o%3==0&&0!=o&&(a=e-1,n-=1),!(a>14||a<0||n>14||n<0)&&this.board.maze[a][n]==this.board.gameScene.userChess)for(var i=0;i<this.count;i++)this.wins[a][n][i]&&(this.myWin[i]++,this.computerWin[i]=6)},t.prototype.all_checkWin=function(){for(var e=0;e<15;e++)for(var t=0;t<15;t++)if(this.board.maze[e][t]==this.board.gameScene.userChess)for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.myWin[a]++,this.computerWin[a]=6)},i([u(r.Gameboard_blxj)],t.prototype,"board",void 0),i([h],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","./GameBoard_blxj":"GameBoard_blxj"}],chessAi_hbdd:[function(e,t,a){"use strict";cc._RF.push(t,"d1baaQCvK5FV4/cKxd7MXWP","chessAi_hbdd");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("./GameBoard_hbdd"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t.record=[],t.count=0,t.wins=[],t.myWin=[],t.computerWin=[],t.RightRate=1,t.stateNumber=1,t.is_diaoxian=!1,t.is_new=!1,t.huiqi=!1,t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this),s.conMager.getInstance()._msgAtion.on("user_huiqi_ai",this.user_huiqi_ai,this),s.conMager.getInstance()._msgAtion.on("user_qiuhe_ai",this.user_qiuhe_ai,this),s.conMager.getInstance()._msgAtion.on("all_checkWin",this.all_checkWin,this)},t.prototype.user_huiqi_ai=function(e){this.board.juesha_judge?e&&e(!1):s.NumberUtil.randomNum(1,10)>3?e&&e(!0):(this.is_new=!0,e&&e(!1))},t.prototype.user_qiuhe_ai=function(e){var t=this.jushi_judge();console.log("\u6c42\u548c\u7684\u5206\u6570:",t),this.board.juesha_judge?e(!1):this.board.sum>=180?e(!0):t.myScore_1>t.computerScore_1?e(!0):(t.myScore_1,t.computerScore_1,e(!1))},t.prototype.jushi_judge=function(){for(var e=[],t=[],a=0,n=0,o=0;o<15;o++){e[o]=[],t[o]=[];for(var i=0;i<15;i++)e[o][i]=0,t[o][i]=0}for(o=0;o<15;o++)for(i=0;i<15;i++)if(0!=this.board.maze[o][i])for(var s=0;s<this.count;s++)this.wins[o][i][s]&&(1==this.myWin[s]?(e[o][i]+=200,a+=200):2==this.myWin[s]?(e[o][i]+=400,a+=400):3==this.myWin[s]?(e[o][i]+=2e3,a+=2e3):4==this.myWin[s]&&(e[o][i]+=1e4,a+=1e4),1==this.computerWin[s]?(t[o][i]+=220,n+=200):2==this.computerWin[s]?(t[o][i]+=420,n+=400):3==this.computerWin[s]?(t[o][i]+=2100,n+=2e3):4==this.computerWin[s]&&(t[o][i]+=2e4,n+=1e4));return{myScore_1:a,computerScore_1:n}},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}for(var a=0;a<15;a++){this.wins[a]=[];for(var n=0;n<15;n++)this.wins[a][n]=[]}for(a=0;a<15;a++)for(n=0;n<11;n++){for(var o=0;o<5;o++)this.wins[a][n+o][this.count]=!0;this.count++}for(a=0;a<15;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[n+o][a][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[a+o][n+o][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=14;n>3;n--){for(o=0;o<5;o++)this.wins[a+o][n-o][this.count]=!0;this.count++}for(a=0;a<this.count;a++)this.myWin[a]=0,this.computerWin[a]=0},t.prototype.AIPosition=function(e,t,a,n){if(e/=this.board.block,t/=this.board.block,this.newX=e,this.newY=t,this.huiqi=!1,n&&(this.huiqi=n),5!=s.GameDataStorage.gameStateData.gameType)for(var o=0;o<this.count;o++)this.wins[e][t][o]&&(this.myWin[o]++,this.computerWin[o]=6);var i=this.computerAI();e=i.x,t=i.y,a&&a(cc.v2(e*this.board.block,t*this.board.block))},t.prototype.stateCheck=function(e){var t=this,a=(s.NumberUtil.randomNum(1,3),s.NumberUtil.randomNum(0,100));if(this.stateNumber<=0)return e();15==a?(s.conMager.getInstance()._msgAtion.emit("ai_diaoxian"),this.scheduleOnce(function(){s.conMager.getInstance()._msgAtion.emit("ai_shangxian"),t.stateNumber-=1,e&&e()},s.NumberUtil.randomNum(2,10))):e&&e()},t.prototype.addPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]--):(this.computerWin[n]++,this.myWin[n]--))},t.prototype.addPos2=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]=6):(this.computerWin[n]++,this.myWin[n]=6))},t.prototype.delPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]=0,this.computerWin[n]=0):(this.computerWin[n]=0,this.myWin[n]=0))},t.prototype.computerAI=function(){console.log("ai\u7684\u96be\u5ea6\u662f:",this.RightRate),console.log("\u73a9\u5bb6\u7684:",this.myWin),console.log("ai\u7684:",this.computerWin);for(var e=[],t=[],a=0,n=0,o=0,i=0;i<15;i++){e[i]=[],t[i]=[];for(var s=0;s<15;s++)e[i][s]=0,t[i][s]=0}var r=[];for(i=0;i<15;i++)for(s=0;s<15;s++)if(0==this.board.maze[i][s]){r.push([i,s]);for(var c=0;c<this.count;c++)this.wins[i][s][c]&&(1==this.myWin[c]?e[i][s]+=200:2==this.myWin[c]?e[i][s]+=400:3==this.myWin[c]?e[i][s]+=2e3:4==this.myWin[c]&&(e[i][s]+=1e4),1==this.computerWin[c]?t[i][s]+=220:2==this.computerWin[c]?t[i][s]+=420:3==this.computerWin[c]?t[i][s]+=2100:4==this.computerWin[c]&&(t[i][s]+=2e4));e[i][s]>a?(a=e[i][s],n=i,o=s):e[i][s]==a&&t[i][s]>t[n][o]&&(n=i,o=s),t[i][s]>a?(a=t[i][s],n=i,o=s):t[i][s]==a&&e[i][s]>e[n][o]&&(n=i,o=s)}for(c=0;c<this.count;c++)this.wins[n][o][c]&&(this.computerWin[c]++,this.myWin[c]=6);return cc.v2(n,o)},t.prototype.checkWin=function(e,t){for(var a=e-1-1,n=t+1,o=0;o<9;o++)if(a+=1,o%3==0&&0!=o&&(a=e-1,n-=1),!(a>14||a<0||n>14||n<0)&&this.board.maze[a][n]==this.board.gameScene.userChess)for(var i=0;i<this.count;i++)this.wins[a][n][i]&&(this.myWin[i]++,this.computerWin[i]=6)},t.prototype.all_checkWin=function(){for(var e=0;e<15;e++)for(var t=0;t<15;t++)if(this.board.maze[e][t]==this.board.gameScene.userChess)for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.myWin[a]++,this.computerWin[a]=6)},i([u(r.GameBoard_hbdd)],t.prototype,"board",void 0),i([h],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","./GameBoard_hbdd":"GameBoard_hbdd"}],chessAi_jxmc:[function(e,t,a){"use strict";cc._RF.push(t,"d53bclDUAZIzbq4BKTjxDtb","chessAi_jxmc");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("./GameBoard_jxmc"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t.record=[],t.count=0,t.wins=[],t.myWin=[],t.computerWin=[],t.RightRate=1,t.stateNumber=1,t.is_diaoxian=!1,t.is_new=!1,t.huiqi=!1,t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this),s.conMager.getInstance()._msgAtion.on("user_huiqi_ai",this.user_huiqi_ai,this),s.conMager.getInstance()._msgAtion.on("user_qiuhe_ai",this.user_qiuhe_ai,this),s.conMager.getInstance()._msgAtion.on("all_checkWin",this.all_checkWin,this)},t.prototype.user_huiqi_ai=function(e){this.board.juesha_judge?e&&e(!1):s.NumberUtil.randomNum(1,10)>3?e&&e(!0):(this.is_new=!0,e&&e(!1))},t.prototype.user_qiuhe_ai=function(e){var t=this.jushi_judge();console.log("\u6c42\u548c\u7684\u5206\u6570:",t),this.board.juesha_judge?e(!1):this.board.sum>=180?e(!0):t.myScore_1>t.computerScore_1?e(!0):(t.myScore_1,t.computerScore_1,e(!1))},t.prototype.jushi_judge=function(){for(var e=[],t=[],a=0,n=0,o=0;o<15;o++){e[o]=[],t[o]=[];for(var i=0;i<15;i++)e[o][i]=0,t[o][i]=0}for(o=0;o<15;o++)for(i=0;i<15;i++)if(0!=this.board.maze[o][i])for(var s=0;s<this.count;s++)this.wins[o][i][s]&&(1==this.myWin[s]?(e[o][i]+=200,a+=200):2==this.myWin[s]?(e[o][i]+=400,a+=400):3==this.myWin[s]?(e[o][i]+=2e3,a+=2e3):4==this.myWin[s]&&(e[o][i]+=1e4,a+=1e4),1==this.computerWin[s]?(t[o][i]+=220,n+=200):2==this.computerWin[s]?(t[o][i]+=420,n+=400):3==this.computerWin[s]?(t[o][i]+=2100,n+=2e3):4==this.computerWin[s]&&(t[o][i]+=2e4,n+=1e4));return{myScore_1:a,computerScore_1:n}},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}for(var a=0;a<15;a++){this.wins[a]=[];for(var n=0;n<15;n++)this.wins[a][n]=[]}for(a=0;a<15;a++)for(n=0;n<11;n++){for(var o=0;o<5;o++)this.wins[a][n+o][this.count]=!0;this.count++}for(a=0;a<15;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[n+o][a][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[a+o][n+o][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=14;n>3;n--){for(o=0;o<5;o++)this.wins[a+o][n-o][this.count]=!0;this.count++}for(a=0;a<this.count;a++)this.myWin[a]=0,this.computerWin[a]=0},t.prototype.AIPosition=function(e,t,a,n){var o=this;this.stateCheck(function(){if(e/=o.board.block,t/=o.board.block,o.newX=e,o.newY=t,o.huiqi=!1,n&&(o.huiqi=n),5!=s.GameDataStorage.gameStateData.gameType)for(var i=0;i<o.count;i++)o.wins[e][t][i]&&(o.myWin[i]++,o.computerWin[i]=6);var r=o.computerAI();e=r.x,t=r.y,a&&a(cc.v2(e*o.board.block,t*o.board.block))})},t.prototype.stateCheck=function(e){var t=this,a=(s.NumberUtil.randomNum(1,3),s.NumberUtil.randomNum(0,100));if(this.stateNumber<=0)return e();15==a?(s.conMager.getInstance()._msgAtion.emit("ai_diaoxian"),this.scheduleOnce(function(){s.conMager.getInstance()._msgAtion.emit("ai_shangxian"),t.stateNumber-=1,e&&e()},s.NumberUtil.randomNum(2,10))):e&&e()},t.prototype.addPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]--):(this.computerWin[n]++,this.myWin[n]--))},t.prototype.delPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]=0,this.computerWin[n]=0):(this.computerWin[n]=0,this.myWin[n]=0))},t.prototype.computerAI=function(){for(var e=[],t=[],a=0,n=0,o=0,i=0;i<15;i++){e[i]=[],t[i]=[];for(var r=0;r<15;r++)e[i][r]=0,t[i][r]=0}var c,h=[];for(i=0;i<15;i++)for(r=0;r<15;r++)if(0==this.board.maze[i][r]){h.push([i,r]);for(var u=0;u<this.count;u++)this.wins[i][r][u]&&(1==this.myWin[u]?e[i][r]+=200:2==this.myWin[u]?e[i][r]+=400:3==this.myWin[u]?e[i][r]+=2e3:4==this.myWin[u]&&(e[i][r]+=1e4),1==this.computerWin[u]?t[i][r]+=220:2==this.computerWin[u]?t[i][r]+=420:3==this.computerWin[u]?t[i][r]+=2100:4==this.computerWin[u]&&(t[i][r]+=2e4));e[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=e[i][r],n=i,o=r):e[i][r]==a&&t[i][r]>t[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r),t[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=t[i][r],n=i,o=r):t[i][r]==a&&e[i][r]>e[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r)}for(this.huiqi&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),u=0;u<this.count;u++)this.wins[n][o][u]&&(this.computerWin[u]++,this.myWin[u]=6);5==s.GameDataStorage.gameStateData.gameType&&(1==this.board.sum&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),console.log("uggggg,",n,o),this.checkWin(n,o));return cc.v2(n,o)},t.prototype.checkWin=function(e,t){for(var a=e-1-1,n=t+1,o=0;o<9;o++)if(a+=1,o%3==0&&0!=o&&(a=e-1,n-=1),!(a>14||a<0||n>14||n<0)&&this.board.maze[a][n]==this.board.gameScene.userChess)for(var i=0;i<this.count;i++)this.wins[a][n][i]&&(this.myWin[i]++,this.computerWin[i]=6)},t.prototype.all_checkWin=function(){for(var e=0;e<15;e++)for(var t=0;t<15;t++)if(this.board.maze[e][t]==this.board.gameScene.userChess)for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.myWin[a]++,this.computerWin[a]=6)},i([u(r.GameBoard_jxmc)],t.prototype,"board",void 0),i([h],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","./GameBoard_jxmc":"GameBoard_jxmc"}],chessAi_lianzhao:[function(e,t,a){"use strict";cc._RF.push(t,"22a04YlPSJHTYShhDImVeHW","chessAi_lianzhao");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./GameBoard_lianzhao"),r=e("../../../SSSGF/ssscgf"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t.record=[],t.count=0,t.wins=[],t.myWin=[],t.computerWin=[],t.RightRate=1,t.stateNumber=1,t.is_diaoxian=!1,t.is_new=!1,t.huiqi=!1,t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this),r.conMager.getInstance()._msgAtion.on("user_huiqi_ai",this.user_huiqi_ai,this),r.conMager.getInstance()._msgAtion.on("user_qiuhe_ai",this.user_qiuhe_ai,this),r.conMager.getInstance()._msgAtion.on("all_checkWin",this.all_checkWin,this)},t.prototype.user_huiqi_ai=function(e){this.board.juesha_judge?e&&e(!1):r.NumberUtil.randomNum(1,10)>3?e&&e(!0):(this.is_new=!0,e&&e(!1))},t.prototype.user_qiuhe_ai=function(e){var t=this.jushi_judge();console.log("\u6c42\u548c\u7684\u5206\u6570:",t),this.board.juesha_judge?e(!1):this.board.sum>=180?e(!0):t.myScore_1>t.computerScore_1?e(!0):(t.myScore_1,t.computerScore_1,e(!1))},t.prototype.jushi_judge=function(){for(var e=[],t=[],a=0,n=0,o=0;o<15;o++){e[o]=[],t[o]=[];for(var i=0;i<15;i++)e[o][i]=0,t[o][i]=0}for(o=0;o<15;o++)for(i=0;i<15;i++)if(0!=this.board.maze[o][i])for(var s=0;s<this.count;s++)this.wins[o][i][s]&&(1==this.myWin[s]?(e[o][i]+=200,a+=200):2==this.myWin[s]?(e[o][i]+=400,a+=400):3==this.myWin[s]?(e[o][i]+=2e3,a+=2e3):4==this.myWin[s]&&(e[o][i]+=1e4,a+=1e4),1==this.computerWin[s]?(t[o][i]+=220,n+=200):2==this.computerWin[s]?(t[o][i]+=420,n+=400):3==this.computerWin[s]?(t[o][i]+=2100,n+=2e3):4==this.computerWin[s]&&(t[o][i]+=2e4,n+=1e4));return{myScore_1:a,computerScore_1:n}},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}for(var a=0;a<15;a++){this.wins[a]=[];for(var n=0;n<15;n++)this.wins[a][n]=[]}for(a=0;a<15;a++)for(n=0;n<11;n++){for(var o=0;o<5;o++)this.wins[a][n+o][this.count]=!0;this.count++}for(a=0;a<15;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[n+o][a][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[a+o][n+o][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=14;n>3;n--){for(o=0;o<5;o++)this.wins[a+o][n-o][this.count]=!0;this.count++}for(a=0;a<this.count;a++)this.myWin[a]=0,this.computerWin[a]=0},t.prototype.AIPosition=function(e,t,a,n){var o=this;this.stateCheck(function(){if(e/=o.board.block,t/=o.board.block,o.newX=e,o.newY=t,o.huiqi=!1,n&&(o.huiqi=n),5!=r.GameDataStorage.gameStateData.gameType)for(var i=0;i<o.count;i++)o.wins[e][t][i]&&(o.myWin[i]++,o.computerWin[i]=6);var s=o.computerAI();e=s.x,t=s.y,a&&a(cc.v2(e*o.board.block,t*o.board.block))})},t.prototype.stateCheck=function(e){var t=this,a=(r.NumberUtil.randomNum(1,3),r.NumberUtil.randomNum(0,100));if(this.stateNumber<=0)return e();15==a?(r.conMager.getInstance()._msgAtion.emit("ai_diaoxian"),this.scheduleOnce(function(){r.conMager.getInstance()._msgAtion.emit("ai_shangxian"),t.stateNumber-=1,e&&e()},r.NumberUtil.randomNum(2,10))):e&&e()},t.prototype.addPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]--):(this.computerWin[n]++,this.myWin[n]--))},t.prototype.delPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]=0,this.computerWin[n]=0):(this.computerWin[n]=0,this.myWin[n]=0))},t.prototype.computerAI=function(){for(var e=[],t=[],a=0,n=0,o=0,i=0;i<15;i++){e[i]=[],t[i]=[];for(var s=0;s<15;s++)e[i][s]=0,t[i][s]=0}var c,h=[];for(i=0;i<15;i++)for(s=0;s<15;s++)if(0==this.board.maze[i][s]){h.push([i,s]);for(var u=0;u<this.count;u++)this.wins[i][s][u]&&(1==this.myWin[u]?e[i][s]+=200:2==this.myWin[u]?e[i][s]+=400:3==this.myWin[u]?e[i][s]+=2e3:4==this.myWin[u]&&(e[i][s]+=1e4),1==this.computerWin[u]?t[i][s]+=220:2==this.computerWin[u]?t[i][s]+=420:3==this.computerWin[u]?t[i][s]+=2100:4==this.computerWin[u]&&(t[i][s]+=2e4));e[i][s]>a&&Math.floor(Math.random()+this.RightRate)?(a=e[i][s],n=i,o=s):e[i][s]==a&&t[i][s]>t[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=s),t[i][s]>a&&Math.floor(Math.random()+this.RightRate)?(a=t[i][s],n=i,o=s):t[i][s]==a&&e[i][s]>e[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=s)}(this.huiqi&&(n=h[c=r.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),5==r.GameDataStorage.gameStateData.gameType)&&(1==this.board.sum&&(n=h[c=r.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),console.log("uggggg,",n,o),this.checkWin(n,o));for(0!=this.board.maze[n][o]&&(n=h[c=r.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1],console.log("uggggg,",n,o),this.checkWin(n,o)),u=0;u<this.count;u++)this.wins[n][o][u]&&(this.computerWin[u]++,this.myWin[u]=6);return cc.v2(n,o)},t.prototype.checkWin=function(e,t){for(var a=e-1-1,n=t+1,o=0;o<9;o++)if(a+=1,o%3==0&&0!=o&&(a=e-1,n-=1),!(a>14||a<0||n>14||n<0)&&this.board.maze[a][n]==this.board.gameScene.userChess)for(var i=0;i<this.count;i++)this.wins[a][n][i]&&(this.myWin[i]++,this.computerWin[i]=6)},t.prototype.all_checkWin=function(){for(var e=0;e<15;e++)for(var t=0;t<15;t++)if(this.board.maze[e][t]==this.board.gameScene.userChess)for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.myWin[a]++,this.computerWin[a]=6)},i([u(s.GameBoard_lianzhao)],t.prototype,"board",void 0),i([h],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","./GameBoard_lianzhao":"GameBoard_lianzhao"}],chessAi_sanren2:[function(e,t,a){"use strict";cc._RF.push(t,"4f2e0g1lJxESLBBNgUI1x3r","chessAi_sanren2");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("./GameBoard_sanren"),c=cc._decorator,h=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t.record=[],t.count=0,t.wins=[],t.myWin=[],t.computerWin=[],t.computerWin_2=[],t.RightRate=1,t.stateNumber=1,t.is_diaoxian=!1,t.is_new=!1,t.huiqi=!1,t}return o(t,e),t.prototype.onLoad=function(){this.board=this.node.getComponent(r.GameBoard_sanren),this.init(),s.conMager.getInstance()._msgAtion.on("user_huiqi_ai",this.user_huiqi_ai,this),s.conMager.getInstance()._msgAtion.on("user_qiuhe_ai",this.user_qiuhe_ai,this),s.conMager.getInstance()._msgAtion.on("all_checkWin",this.all_checkWin,this)},t.prototype.user_huiqi_ai=function(e){this.board.juesha_judge?e&&e(!1):s.NumberUtil.randomNum(1,10)>3?e&&e(!0):(this.is_new=!0,e&&e(!1))},t.prototype.user_qiuhe_ai=function(e){var t=this.jushi_judge();console.log("\u6c42\u548c\u7684\u5206\u6570:",t),this.board.juesha_judge?e(!1):this.board.sum>=180?e(!0):t.myScore_1>t.computerScore_1?e(!0):(t.myScore_1,t.computerScore_1,e(!1))},t.prototype.jushi_judge=function(){for(var e=[],t=[],a=[],n=0,o=0,i=0;i<15;i++){e[i]=[],t[i]=[],a[i]=[];for(var s=0;s<15;s++)e[i][s]=0,t[i][s]=0,a[i][s]=0}for(i=0;i<15;i++)for(s=0;s<15;s++)if(0!=this.board.maze[i][s])for(var r=0;r<this.count;r++)this.wins[i][s][r]&&(1==this.myWin[r]?(e[i][s]+=201,n+=201):2==this.myWin[r]?(e[i][s]+=2001,n+=2001):3==this.myWin[r]&&(e[i][s]+=10001,n+=10001),1==this.computerWin_2[r]?a[i][s]+=200:2==this.computerWin_2[r]?a[i][s]+=2e3:3==this.computerWin_2[r]&&(a[i][s]+=1e4),1==this.computerWin[r]?(t[i][s]+=220,o+=200):2==this.computerWin[r]?(t[i][s]+=2100,o+=2e3):3==this.computerWin[r]&&(t[i][s]+=2e4,o+=1e4));return{myScore_1:n,computerScore_1:o}},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}for(var a=0;a<15;a++){this.wins[a]=[];for(var n=0;n<15;n++)this.wins[a][n]=[]}for(a=0;a<15;a++)for(n=0;n<11;n++){for(var o=0;o<4;o++)this.wins[a][n+o][this.count]=!0;this.count++}for(a=0;a<15;a++)for(n=0;n<11;n++){for(o=0;o<4;o++)this.wins[n+o][a][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=0;n<11;n++){for(o=0;o<4;o++)this.wins[a+o][n+o][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=14;n>3;n--){for(o=0;o<4;o++)this.wins[a+o][n-o][this.count]=!0;this.count++}for(a=0;a<this.count;a++)this.myWin[a]=0,this.computerWin[a]=0,this.computerWin_2[a]=0},t.prototype.AIPosition=function(e,t,a,n){var o=this;this.stateCheck(function(){e/=o.board.block,t/=o.board.block,o.newX=e,o.newY=t,o.huiqi=!1,n&&(o.huiqi=n);for(var i=0;i<o.count;i++)o.wins[e][t][i]&&(o.myWin[i]++,o.computerWin_2[i]=6,o.computerWin[i]=6);var s=o.computerAI();e=s.x,t=s.y,a&&a(cc.v2(e*o.board.block,t*o.board.block))})},t.prototype.stateCheck=function(e){return s.NumberUtil.randomNum(1,3),s.NumberUtil.randomNum(0,100),e()},t.prototype.addPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]--,this.computerWin_2[n]--):a==this.board.gameScene.ds_chess2?(this.myWin[n]--,this.computerWin[n]--,this.computerWin_2[n]++):(this.computerWin[n]++,this.myWin[n]--,this.computerWin_2[n]--))},t.prototype.delPos=function(e,t){for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.computerWin_2[a]=0,this.computerWin[a]=0,this.myWin[a]=0)},t.prototype.computerAI=function(){this.RightRate=.9;for(var e=[],t=[],a=[],n=0,o=0,i=0,r=0;r<15;r++){e[r]=[],t[r]=[],a[r]=[];for(var c=0;c<15;c++)e[r][c]=0,t[r][c]=0,a[r][c]=0}var h,u=[];for(r=0;r<15;r++)for(c=0;c<15;c++)if(0==this.board.maze[r][c]){u.push([r,c]);for(var l=0;l<this.count;l++)this.wins[r][c][l]&&(1==this.myWin[l]?e[r][c]+=201:2==this.myWin[l]?e[r][c]+=2001:3==this.myWin[l]&&(e[r][c]+=20001),1==this.computerWin[l]?a[r][c]+=200:2==this.computerWin[l]?a[r][c]+=2e3:3==this.computerWin[l]&&(a[r][c]+=2e4),1==this.computerWin[l]?t[r][c]+=220:2==this.computerWin[l]?t[r][c]+=2100:3==this.computerWin[l]&&(t[r][c]+=3e4));e[r][c]>n&&Math.floor(Math.random()+this.RightRate)?(n=e[r][c],o=r,i=c):e[r][c]==n&&t[r][c]>t[o][i]&&Math.floor(Math.random()+this.RightRate)&&(o=r,i=c),t[r][c]>n&&Math.floor(Math.random()+this.RightRate)?(n=t[r][c],o=r,i=c):t[r][c]==n&&e[r][c]>e[o][i]&&Math.floor(Math.random()+this.RightRate)&&(o=r,i=c)}for(this.huiqi&&(o=u[h=s.NumberUtil.randomNum(0,u.length-1)][0],i=u[h][1]),l=0;l<this.count;l++)this.wins[o][i][l]&&(this.computerWin[l]++,this.myWin[l]=6,this.computerWin_2[l]=6);5==s.GameDataStorage.gameStateData.gameType&&(1==this.board.sum&&(o=u[h=s.NumberUtil.randomNum(0,u.length-1)][0],i=u[h][1]),console.log("uggggg,",o,i),this.checkWin(o,i));return cc.v2(o,i)},t.prototype.checkWin=function(e,t){for(var a=e-1-1,n=t+1,o=0;o<9;o++)if(a+=1,o%3==0&&0!=o&&(a=e-1,n-=1),!(a>14||a<0||n>14||n<0)&&this.board.maze[a][n]==this.board.gameScene.userChess)for(var i=0;i<this.count;i++)this.wins[a][n][i]&&(this.myWin[i]++,this.computerWin[i]=6,this.computerWin_2[i]=6)},t.prototype.all_checkWin=function(){for(var e=0;e<15;e++)for(var t=0;t<15;t++)if(this.board.maze[e][t]==this.board.gameScene.userChess)for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.myWin[a]++,this.computerWin[a]=6,this.computerWin_2[a]=6)},i([h],t)}(cc.Component));a.default=u,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","./GameBoard_sanren":"GameBoard_sanren"}],chessAi_sanren:[function(e,t,a){"use strict";cc._RF.push(t,"2b31bWND/ZD6p9TsRpSkJLN","chessAi_sanren");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("./GameBoard_sanren"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t.record=[],t.count=0,t.wins=[],t.myWin=[],t.computerWin=[],t.computerWin_2=[],t.RightRate=1,t.stateNumber=1,t.is_diaoxian=!1,t.is_new=!1,t.huiqi=!1,t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this),s.conMager.getInstance()._msgAtion.on("user_huiqi_ai",this.user_huiqi_ai,this),s.conMager.getInstance()._msgAtion.on("user_qiuhe_ai",this.user_qiuhe_ai,this),s.conMager.getInstance()._msgAtion.on("all_checkWin",this.all_checkWin,this)},t.prototype.user_huiqi_ai=function(e){this.board.juesha_judge?e&&e(!1):s.NumberUtil.randomNum(1,10)>3?e&&e(!0):(this.is_new=!0,e&&e(!1))},t.prototype.user_qiuhe_ai=function(e){var t=this.jushi_judge();console.log("\u6c42\u548c\u7684\u5206\u6570:",t),this.board.juesha_judge?e(!1):this.board.sum>=180?e(!0):t.myScore_1>t.computerScore_1?e(!0):(t.myScore_1,t.computerScore_1,e(!1))},t.prototype.jushi_judge=function(){for(var e=[],t=[],a=[],n=0,o=0,i=0;i<15;i++){e[i]=[],t[i]=[],a[i]=[];for(var s=0;s<15;s++)e[i][s]=0,t[i][s]=0,a[i][s]=0}for(i=0;i<15;i++)for(s=0;s<15;s++)if(0!=this.board.maze[i][s])for(var r=0;r<this.count;r++)this.wins[i][s][r]&&(1==this.myWin[r]?(e[i][s]+=201,n+=201):2==this.myWin[r]?(e[i][s]+=2001,n+=2001):3==this.myWin[r]&&(e[i][s]+=10001,n+=10001),1==this.computerWin_2[r]?a[i][s]+=200:2==this.computerWin_2[r]?a[i][s]+=2e3:3==this.computerWin_2[r]&&(a[i][s]+=1e4),1==this.computerWin[r]?(t[i][s]+=220,o+=200):2==this.computerWin[r]?(t[i][s]+=2100,o+=2100):3==this.computerWin[r]&&(t[i][s]+=2e4,o+=1e4));return{myScore_1:n,computerScore_1:o}},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}for(var a=0;a<15;a++){this.wins[a]=[];for(var n=0;n<15;n++)this.wins[a][n]=[]}for(a=0;a<15;a++)for(n=0;n<11;n++){for(var o=0;o<4;o++)this.wins[a][n+o][this.count]=!0;this.count++}for(a=0;a<15;a++)for(n=0;n<11;n++){for(o=0;o<4;o++)this.wins[n+o][a][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=0;n<11;n++){for(o=0;o<4;o++)this.wins[a+o][n+o][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=14;n>3;n--){for(o=0;o<4;o++)this.wins[a+o][n-o][this.count]=!0;this.count++}for(a=0;a<this.count;a++)this.myWin[a]=0,this.computerWin[a]=0,this.computerWin_2[a]=0},t.prototype.AIPosition=function(e,t,a,n){var o=this;this.stateCheck(function(){if(e/=o.board.block,t/=o.board.block,o.newX=e,o.newY=t,o.huiqi=!1,n&&(o.huiqi=n),5!=s.GameDataStorage.gameStateData.gameType)for(var i=0;i<o.count;i++)o.wins[e][t][i]&&(o.myWin[i]++,o.computerWin_2[i]=6,o.computerWin[i]=6);var r=o.computerAI();e=r.x,t=r.y,a&&a(cc.v2(e*o.board.block,t*o.board.block))})},t.prototype.stateCheck=function(e){return s.NumberUtil.randomNum(1,3),s.NumberUtil.randomNum(0,100),e()},t.prototype.addPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]--,this.computerWin_2[n]--):a==this.board.gameScene.ds_chess2?(this.myWin[n]--,this.computerWin[n]--,this.computerWin_2[n]++):(this.computerWin[n]++,this.myWin[n]--,this.computerWin_2[n]--))},t.prototype.delPos=function(e,t){for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.computerWin_2[a]=0,this.computerWin[a]=0,this.myWin[a]=0)},t.prototype.computerAI=function(){this.RightRate=.9;for(var e=[],t=[],a=[],n=0,o=0,i=0,r=0;r<15;r++){e[r]=[],t[r]=[],a[r]=[];for(var c=0;c<15;c++)e[r][c]=0,t[r][c]=0,a[r][c]=0}var h,u=[];for(r=0;r<15;r++)for(c=0;c<15;c++)if(0==this.board.maze[r][c]){u.push([r,c]);for(var l=0;l<this.count;l++)this.wins[r][c][l]&&(1==this.myWin[l]?e[r][c]+=201:2==this.myWin[l]?e[r][c]+=2001:3==this.myWin[l]&&(e[r][c]+=20001),1==this.computerWin[l]?a[r][c]+=200:2==this.computerWin[l]?a[r][c]+=2e3:3==this.computerWin[l]&&(a[r][c]+=2e4),1==this.computerWin[l]?t[r][c]+=220:2==this.computerWin[l]?t[r][c]+=2100:3==this.computerWin[l]&&(t[r][c]+=3e4));e[r][c]>n&&Math.floor(Math.random()+this.RightRate)?(n=e[r][c],o=r,i=c):e[r][c]==n&&t[r][c]>t[o][i]&&Math.floor(Math.random()+this.RightRate)&&(o=r,i=c),t[r][c]>n&&Math.floor(Math.random()+this.RightRate)?(n=t[r][c],o=r,i=c):t[r][c]==n&&e[r][c]>e[o][i]&&Math.floor(Math.random()+this.RightRate)&&(o=r,i=c)}for(this.huiqi&&(o=u[h=s.NumberUtil.randomNum(0,u.length-1)][0],i=u[h][1]),l=0;l<this.count;l++)this.wins[o][i][l]&&(this.computerWin[l]++,this.myWin[l]=6,this.computerWin_2[l]=6);5==s.GameDataStorage.gameStateData.gameType&&(1==this.board.sum&&(o=u[h=s.NumberUtil.randomNum(0,u.length-1)][0],i=u[h][1]),console.log("uggggg,",o,i),this.checkWin(o,i));return cc.v2(o,i)},t.prototype.checkWin=function(e,t){for(var a=e-1-1,n=t+1,o=0;o<9;o++)if(a+=1,o%3==0&&0!=o&&(a=e-1,n-=1),!(a>14||a<0||n>14||n<0)&&this.board.maze[a][n]==this.board.gameScene.userChess)for(var i=0;i<this.count;i++)this.wins[a][n][i]&&(this.myWin[i]++,this.computerWin[i]=6,this.computerWin_2[i]=6)},t.prototype.all_checkWin=function(){for(var e=0;e<15;e++)for(var t=0;t<15;t++)if(this.board.maze[e][t]==this.board.gameScene.userChess)for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.myWin[a]++,this.computerWin[a]=6,this.computerWin_2[a]=6)},i([u(r.GameBoard_sanren)],t.prototype,"board",void 0),i([h],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","./GameBoard_sanren":"GameBoard_sanren"}],chessAi_tslh:[function(e,t,a){"use strict";cc._RF.push(t,"25937v2R7lHQLKQIu8InPFd","chessAi_tslh");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("./GameBoard_tslh"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t.record=[],t.count=0,t.wins=[],t.myWin=[],t.computerWin=[],t.RightRate=1,t.stateNumber=1,t.is_diaoxian=!1,t.is_new=!1,t.huiqi=!1,t.num=0,t.pos_list=[[6,6],[8,6],[9,6],[10,6],[7,8]],t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this),s.conMager.getInstance()._msgAtion.on("user_huiqi_ai",this.user_huiqi_ai,this),s.conMager.getInstance()._msgAtion.on("user_qiuhe_ai",this.user_qiuhe_ai,this),s.conMager.getInstance()._msgAtion.on("all_checkWin",this.all_checkWin,this)},t.prototype.user_huiqi_ai=function(e){this.board.juesha_judge?e&&e(!1):s.NumberUtil.randomNum(1,10)>3?e&&e(!0):(this.is_new=!0,e&&e(!1))},t.prototype.user_qiuhe_ai=function(e){var t=this.jushi_judge();console.log("\u6c42\u548c\u7684\u5206\u6570:",t),this.board.juesha_judge?e(!1):this.board.sum>=180?e(!0):t.myScore_1>t.computerScore_1?e(!0):(t.myScore_1,t.computerScore_1,e(!1))},t.prototype.jushi_judge=function(){for(var e=[],t=[],a=0,n=0,o=0;o<15;o++){e[o]=[],t[o]=[];for(var i=0;i<15;i++)e[o][i]=0,t[o][i]=0}for(o=0;o<15;o++)for(i=0;i<15;i++)if(0!=this.board.maze[o][i])for(var s=0;s<this.count;s++)this.wins[o][i][s]&&(1==this.myWin[s]?(e[o][i]+=200,a+=200):2==this.myWin[s]?(e[o][i]+=400,a+=400):3==this.myWin[s]?(e[o][i]+=2e3,a+=2e3):4==this.myWin[s]&&(e[o][i]+=1e4,a+=1e4),1==this.computerWin[s]?(t[o][i]+=220,n+=200):2==this.computerWin[s]?(t[o][i]+=420,n+=400):3==this.computerWin[s]?(t[o][i]+=2100,n+=2e3):4==this.computerWin[s]&&(t[o][i]+=2e4,n+=1e4));return{myScore_1:a,computerScore_1:n}},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}for(var a=0;a<15;a++){this.wins[a]=[];for(var n=0;n<15;n++)this.wins[a][n]=[]}for(a=0;a<15;a++)for(n=0;n<11;n++){for(var o=0;o<5;o++)this.wins[a][n+o][this.count]=!0;this.count++}for(a=0;a<15;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[n+o][a][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[a+o][n+o][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=14;n>3;n--){for(o=0;o<5;o++)this.wins[a+o][n-o][this.count]=!0;this.count++}for(a=0;a<this.count;a++)this.myWin[a]=0,this.computerWin[a]=0},t.prototype.AIPosition=function(e,t,a,n){var o=this;this.stateCheck(function(){if(e/=o.board.block,t/=o.board.block,o.newX=e,o.newY=t,o.huiqi=!1,n&&(o.huiqi=n),5!=s.GameDataStorage.gameStateData.gameType)for(var i=0;i<o.count;i++)o.wins[e][t][i]&&(o.myWin[i]++,o.computerWin[i]=6);var r=o.computerAI();e=r.x,t=r.y,a&&a(cc.v2(e*o.board.block,t*o.board.block))})},t.prototype.stateCheck=function(e){var t=this,a=(s.NumberUtil.randomNum(1,3),s.NumberUtil.randomNum(0,100));if(this.stateNumber<=0)return e();15==a?(s.conMager.getInstance()._msgAtion.emit("ai_diaoxian"),this.scheduleOnce(function(){s.conMager.getInstance()._msgAtion.emit("ai_shangxian"),t.stateNumber-=1,e&&e()},s.NumberUtil.randomNum(2,10))):e&&e()},t.prototype.addPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]--):(this.computerWin[n]++,this.myWin[n]--))},t.prototype.delPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]=0,this.computerWin[n]=0):(this.computerWin[n]=0,this.myWin[n]=0))},t.prototype.computerAI=function(){for(var e=[],t=[],a=0,n=0,o=0,i=0;i<15;i++){e[i]=[],t[i]=[];for(var r=0;r<15;r++)e[i][r]=0,t[i][r]=0}var c,h=[];for(i=0;i<15;i++)for(r=0;r<15;r++)if(0==this.board.maze[i][r]){h.push([i,r]);for(var u=0;u<this.count;u++)this.wins[i][r][u]&&(1==this.myWin[u]?e[i][r]+=200:2==this.myWin[u]?e[i][r]+=400:3==this.myWin[u]?e[i][r]+=2e3:4==this.myWin[u]&&(e[i][r]+=1e4),1==this.computerWin[u]?t[i][r]+=220:2==this.computerWin[u]?t[i][r]+=420:3==this.computerWin[u]?t[i][r]+=2100:4==this.computerWin[u]&&(t[i][r]+=2e4));e[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=e[i][r],n=i,o=r):e[i][r]==a&&t[i][r]>t[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r),t[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=t[i][r],n=i,o=r):t[i][r]==a&&e[i][r]>e[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r)}for(this.huiqi&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),u=0;u<this.count;u++)this.wins[n][o][u]&&(this.computerWin[u]++,this.myWin[u]=6);5==s.GameDataStorage.gameStateData.gameType&&(1==this.board.sum&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),console.log("uggggg,",n,o),this.checkWin(n,o));return cc.v2(n,o)},t.prototype.checkWin=function(e,t){for(var a=e-1-1,n=t+1,o=0;o<9;o++)if(a+=1,o%3==0&&0!=o&&(a=e-1,n-=1),!(a>14||a<0||n>14||n<0)&&this.board.maze[a][n]==this.board.gameScene.userChess)for(var i=0;i<this.count;i++)this.wins[a][n][i]&&(this.myWin[i]++,this.computerWin[i]=6)},t.prototype.all_checkWin=function(){for(var e=0;e<15;e++)for(var t=0;t<15;t++)if(this.board.maze[e][t]==this.board.gameScene.userChess)for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.myWin[a]++,this.computerWin[a]=6)},i([u(r.GameBoard_tslh)],t.prototype,"board",void 0),i([h],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","./GameBoard_tslh":"GameBoard_tslh"}],chessAi_zhibo:[function(e,t,a){"use strict";cc._RF.push(t,"2edd548dTRBXpaI/OkhMhUL","chessAi_zhibo");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("./GameBoard_zhibo"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t.record=[],t.count=0,t.wins=[],t.myWin=[],t.computerWin=[],t.RightRate=1,t.huiqi=!1,t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this),s.conMager.getInstance()._msgAtion.on("user_huiqi_ai",this.user_huiqi_ai,this),s.conMager.getInstance()._msgAtion.on("user_qiuhe_ai",this.user_qiuhe_ai,this)},t.prototype.user_huiqi_ai=function(e){this.board.juesha_judge?e&&e(!1):s.NumberUtil.randomNum(1,10)>3?e&&e(!0):e&&e(!1)},t.prototype.user_qiuhe_ai=function(e){var t=this.jushi_judge();console.log("\u6c42\u548c\u7684\u5206\u6570:",t),this.board.juesha_judge?e(!1):this.board.sum>=180?e(!0):t.myScore_1>t.computerScore_1?e(!0):(t.myScore_1,t.computerScore_1,e(!1))},t.prototype.jushi_judge=function(){for(var e=[],t=[],a=0,n=0,o=0;o<15;o++){e[o]=[],t[o]=[];for(var i=0;i<15;i++)e[o][i]=0,t[o][i]=0}for(o=0;o<15;o++)for(i=0;i<15;i++)if(0!=this.board.maze[o][i])for(var s=0;s<this.count;s++)this.wins[o][i][s]&&(1==this.myWin[s]?(e[o][i]+=200,a+=200):2==this.myWin[s]?(e[o][i]+=400,a+=400):3==this.myWin[s]?(e[o][i]+=2e3,a+=2e3):4==this.myWin[s]&&(e[o][i]+=1e4,a+=1e4),1==this.computerWin[s]?(t[o][i]+=220,n+=200):2==this.computerWin[s]?(t[o][i]+=420,n+=400):3==this.computerWin[s]?(t[o][i]+=2100,n+=2e3):4==this.computerWin[s]&&(t[o][i]+=2e4,n+=1e4));return{myScore_1:a,computerScore_1:n}},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}for(var a=0;a<15;a++){this.wins[a]=[];for(var n=0;n<15;n++)this.wins[a][n]=[]}for(a=0;a<15;a++)for(n=0;n<11;n++){for(var o=0;o<5;o++)this.wins[a][n+o][this.count]=!0;this.count++}for(a=0;a<15;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[n+o][a][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[a+o][n+o][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=14;n>3;n--){for(o=0;o<5;o++)this.wins[a+o][n-o][this.count]=!0;this.count++}for(a=0;a<this.count;a++)this.myWin[a]=0,this.computerWin[a]=0},t.prototype.AIPosition=function(e,t,a,n){e/=this.board.block,t/=this.board.block,this.newX=e,this.newY=t,this.huiqi=!1,n&&(this.huiqi=n);for(var o=0;o<this.count;o++)this.wins[e][t][o]&&(this.myWin[o]++,this.computerWin[o]=6);var i=this.computerAI();e=i.x,t=i.y,console.log("222222222222:",e,t),a&&a(cc.v2(e*this.board.block,t*this.board.block))},t.prototype.addPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]--):(this.computerWin[n]++,this.myWin[n]--))},t.prototype.delPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]=0,this.computerWin[n]=0):(this.computerWin[n]=0,this.myWin[n]=0))},t.prototype.computerAI=function(){for(var e=[],t=[],a=0,n=0,o=0,i=0;i<15;i++){e[i]=[],t[i]=[];for(var r=0;r<15;r++)e[i][r]=0,t[i][r]=0}var c=[];for(i=0;i<15;i++)for(r=0;r<15;r++)if(0==this.board.maze[i][r]){c.push([i,r]);for(var h=0;h<this.count;h++)this.wins[i][r][h]&&(1==this.myWin[h]?e[i][r]+=200:2==this.myWin[h]?e[i][r]+=400:3==this.myWin[h]?e[i][r]+=2e3:4==this.myWin[h]&&(e[i][r]+=1e4),1==this.computerWin[h]?t[i][r]+=220:2==this.computerWin[h]?t[i][r]+=420:3==this.computerWin[h]?t[i][r]+=2100:4==this.computerWin[h]&&(t[i][r]+=2e4));e[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=e[i][r],n=i,o=r):e[i][r]==a&&t[i][r]>t[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r),t[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=t[i][r],n=i,o=r):t[i][r]==a&&e[i][r]>e[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r)}if(this.huiqi){var u=s.NumberUtil.randomNum(0,c.length-1);n=c[u][0],o=c[u][1]}for(h=0;h<this.count;h++)this.wins[n][o][h]&&(this.computerWin[h]++,this.myWin[h]=6);return cc.v2(n,o)},i([u(r.GameBoard_zhibo)],t.prototype,"board",void 0),i([h],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","./GameBoard_zhibo":"GameBoard_zhibo"}],chessAi:[function(e,t,a){"use strict";cc._RF.push(t,"6f271j7aLZND4sulY1u2bQC","chessAi");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("./GameBoard"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t.record=[],t.count=0,t.wins=[],t.myWin=[],t.computerWin=[],t.RightRate=1,t.stateNumber=1,t.is_diaoxian=!1,t.is_new=!1,t.huiqi=!1,t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this),s.conMager.getInstance()._msgAtion.on("user_huiqi_ai",this.user_huiqi_ai,this),s.conMager.getInstance()._msgAtion.on("user_qiuhe_ai",this.user_qiuhe_ai,this),s.conMager.getInstance()._msgAtion.on("all_checkWin",this.all_checkWin,this)},t.prototype.user_huiqi_ai=function(e){this.board.juesha_judge?e&&e(!1):s.NumberUtil.randomNum(1,10)>3?e&&e(!0):(this.is_new=!0,e&&e(!1))},t.prototype.user_qiuhe_ai=function(e){var t=this.jushi_judge();console.log("\u6c42\u548c\u7684\u5206\u6570:",t),this.board.juesha_judge?e(!1):this.board.sum>=180?e(!0):t.myScore_1>t.computerScore_1?e(!0):(t.myScore_1,t.computerScore_1,e(!1))},t.prototype.jushi_judge=function(){for(var e=[],t=[],a=0,n=0,o=0;o<15;o++){e[o]=[],t[o]=[];for(var i=0;i<15;i++)e[o][i]=0,t[o][i]=0}for(o=0;o<15;o++)for(i=0;i<15;i++)if(0!=this.board.maze[o][i])for(var s=0;s<this.count;s++)this.wins[o][i][s]&&(1==this.myWin[s]?(e[o][i]+=200,a+=200):2==this.myWin[s]?(e[o][i]+=400,a+=400):3==this.myWin[s]?(e[o][i]+=2e3,a+=2e3):4==this.myWin[s]&&(e[o][i]+=1e4,a+=1e4),1==this.computerWin[s]?(t[o][i]+=220,n+=200):2==this.computerWin[s]?(t[o][i]+=420,n+=400):3==this.computerWin[s]?(t[o][i]+=2100,n+=2e3):4==this.computerWin[s]&&(t[o][i]+=2e4,n+=1e4));return{myScore_1:a,computerScore_1:n}},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}for(var a=0;a<15;a++){this.wins[a]=[];for(var n=0;n<15;n++)this.wins[a][n]=[]}for(a=0;a<15;a++)for(n=0;n<11;n++){for(var o=0;o<5;o++)this.wins[a][n+o][this.count]=!0;this.count++}for(a=0;a<15;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[n+o][a][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[a+o][n+o][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=14;n>3;n--){for(o=0;o<5;o++)this.wins[a+o][n-o][this.count]=!0;this.count++}for(a=0;a<this.count;a++)this.myWin[a]=0,this.computerWin[a]=0},t.prototype.AIPosition=function(e,t,a,n){var o=this;this.stateCheck(function(){if(e/=o.board.block,t/=o.board.block,o.newX=e,o.newY=t,o.huiqi=!1,n&&(o.huiqi=n),5!=s.GameDataStorage.gameStateData.gameType)for(var i=0;i<o.count;i++)o.wins[e][t][i]&&(o.myWin[i]++,o.computerWin[i]=6);var r=o.computerAI();e=r.x,t=r.y,a&&a(cc.v2(e*o.board.block,t*o.board.block))})},t.prototype.stateCheck=function(e){var t=this,a=(s.NumberUtil.randomNum(1,3),s.NumberUtil.randomNum(0,100));if(this.stateNumber<=0)return e();15==a?(s.conMager.getInstance()._msgAtion.emit("ai_diaoxian"),this.scheduleOnce(function(){s.conMager.getInstance()._msgAtion.emit("ai_shangxian"),t.stateNumber-=1,e&&e()},s.NumberUtil.randomNum(2,10))):e&&e()},t.prototype.addPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]--):(this.computerWin[n]++,this.myWin[n]--))},t.prototype.delPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]=0,this.computerWin[n]=0):(this.computerWin[n]=0,this.myWin[n]=0))},t.prototype.computerAI=function(){console.log("\u73a9\u5bb6\u7684:",this.myWin),console.log("ai\u7684:",this.computerWin);for(var e=[],t=[],a=0,n=0,o=0,i=0;i<15;i++){e[i]=[],t[i]=[];for(var r=0;r<15;r++)e[i][r]=0,t[i][r]=0}var c,h=[];for(i=0;i<15;i++)for(r=0;r<15;r++)if(0==this.board.maze[i][r]){h.push([i,r]);for(var u=0;u<this.count;u++)this.wins[i][r][u]&&(1==this.myWin[u]?e[i][r]+=200:2==this.myWin[u]?e[i][r]+=400:3==this.myWin[u]?e[i][r]+=2e3:4==this.myWin[u]&&(e[i][r]+=1e4),1==this.computerWin[u]?t[i][r]+=220:2==this.computerWin[u]?t[i][r]+=420:3==this.computerWin[u]?t[i][r]+=2100:4==this.computerWin[u]&&(t[i][r]+=2e4));e[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=e[i][r],n=i,o=r):e[i][r]==a&&t[i][r]>t[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r),t[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=t[i][r],n=i,o=r):t[i][r]==a&&e[i][r]>e[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r)}(this.huiqi&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),5==s.GameDataStorage.gameStateData.gameType)&&(1==this.board.sum&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),console.log("uggggg,",n,o),this.checkWin(n,o));for(console.log("uggggg,",n,o),console.log("\u770b\u770b\u5f97\u5206",a,e,t),0!=this.board.maze[n][o]&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1],console.log("uggggg,",n,o),this.checkWin(n,o)),u=0;u<this.count;u++)this.wins[n][o][u]&&(this.computerWin[u]++,this.myWin[u]=6);return cc.v2(n,o)},t.prototype.checkWin=function(e,t){for(var a=e-1-1,n=t+1,o=0;o<9;o++)if(a+=1,o%3==0&&0!=o&&(a=e-1,n-=1),!(a>14||a<0||n>14||n<0)&&this.board.maze[a][n]==this.board.gameScene.userChess)for(var i=0;i<this.count;i++)this.wins[a][n][i]&&(this.myWin[i]++,this.computerWin[i]=6)},t.prototype.all_checkWin=function(){for(var e=0;e<15;e++)for(var t=0;t<15;t++)if(this.board.maze[e][t]==this.board.gameScene.userChess)for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.myWin[a]++,this.computerWin[a]=6)},i([u(r.GameBoard)],t.prototype,"board",void 0),i([h],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","./GameBoard":"GameBoard"}],chessClass:[function(e,t,a){"use strict";cc._RF.push(t,"7bfee/U15lH9JB27aWIKspR","chessClass");var n=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.chessClass=void 0;var o=cc._decorator,i=o.ccclass,s=(o.property,function(){function e(){this.id=0,this.state=0,this.pos=[],this.position=null,this.chessNode=null}return n([i],e)}());a.chessClass=s,cc._RF.pop()},{}],chess:[function(e,t,a){"use strict";cc._RF.push(t,"b9a03rMmetJM6Rh+reNRaz8","chess");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pos=[],t.judge=!0,t.state=0,t.canyingOpen=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){var e=this;this.judge=!0,s.conMager.getInstance()._msgAtion.on("start_canyingOpen",function(){console.log("\u63a5\u53d7\u5230\u6d88\u606f"),e.startTiming()},this),s.conMager.getInstance()._msgAtion.on("stop_canyingOpen",function(){console.log("\u505c\u6b62\u6d88\u606f"),e.stopTiming()},this)},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.startTiming=function(){this.schedule(this.updateTime,.05)},t.prototype.updateTime=function(){-1==this.node.getComponent(cc.BoxCollider).tag?s.conMager.getInstance().getPoolNode(s.KEY.poolName.black_chess,this.node,{pos:this.node.getPosition()}):s.conMager.getInstance().getPoolNode(s.KEY.poolName.white_chess,this.node,{pos:this.node.getPosition()})},t.prototype.stopTiming=function(){this.unschedule(this.updateTime)},t.prototype.onLoad=function(){this.judge=!0},t.prototype.onCollisionEnter=function(){},t.prototype.update=function(){},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf"}],class_manager:[function(e,t,a){"use strict";cc._RF.push(t,"510897jvi1OWYURjDU0+dA6","class_manager"),Object.defineProperty(a,"__esModule",{value:!0}),a.player_Rank_Score=a.zhenfa_data=a.win_data=a.chess_data=a.board_data=a.chess_belong=a.joiner_enum=a.zhenfa_enum=a.game_mode=void 0;var n,o=e("./new_chess");(function(e){e.dazhao="dazhao",e.jingdian="jingdian",e.luandou_gssk="luandou_gssk",e.lianzhao="lianzhao",e.test_model="test_model"})(a.game_mode||(a.game_mode={})),function(e){e[e.bagua=0]="bagua",e[e.sijiao=1]="sijiao",e[e.wanning=2]="wanning",e[e.fenlie=3]="fenlie",e[e.meihua=4]="meihua",e[e.chaoniu=5]="chaoniu",e[e.qixing=6]="qixing",e[e.juehu=7]="juehu",e[e.kunlong=8]="kunlong",e[e.xueyuyingsha=9]="xueyuyingsha",e[e.dusha=10]="dusha",e[e.wulei=11]="wulei"}(a.zhenfa_enum||(a.zhenfa_enum={})),function(e){e.player="player",e.ai="ai",e.model="model",e.pvp_player="pvp_player"}(a.joiner_enum||(a.joiner_enum={})),function(e){e[e.black=0]="black",e[e.white=1]="white",e[e.gold=2]="gold",e[e.null=3]="null"}(n=a.chess_belong||(a.chess_belong={}));a.board_data=function(e,t){this.kunlong_player=null,this.chaoniu_player=!1,this.chess_data=null,this.board_pos=null,this.id=e,this.board_pos=t};var i=function(){function e(e,t,a){this.state=n.null,this.pos=null,this.meihua=!1,this.dusha=!1,this.dusha_hit_number=0,this.stone_type=!1,this.node=null,this.id=e,this.state=t,this.pos=a}return e.prototype.win=function(){this.node&&this.node.getComponent(o.default).win_action()},e.prototype.show_data=function(){this.node&&this.node.getComponent(o.default).show_data()},e.prototype.destory_effect=function(){this.node.getComponent(o.default).chess_effect.destroyAllChildren()},e}();a.chess_data=i;a.win_data=function(e,t){this.number=0,this.player=e,this.chess_array=t};a.zhenfa_data=function(e,t,a,n,o){this.id=e,this.name=t,this.ch_name=a,this.attr=n,this.level=o};a.player_Rank_Score=function(){this.duan_wei=0,this.deng_ji=0},cc._RF.pop()},{"./new_chess":"new_chess"}],commonFunction:[function(e,t,a){"use strict";cc._RF.push(t,"c837dlmCYNEZqowlkf0qrNW","commonFunction"),Object.defineProperty(a,"__esModule",{value:!0}),a.commonFunction=void 0;var n=e("../SSSGF/ssscgf");a.commonFunction=new(function(){function e(){this.spriteUrl="image/",this.prefabUrl="prefab/"}return e.prototype.updateSprite=function(e,t,a){if(console.log("\u8282\u70b9\u7684\u540d\u5b57:",t.name),"ds_headIcon"==t.name){var o=n.GameDataStorage.gameStateData.ds_name;"\u5dee\u4e4b\u6beb\u5398"==o?e="canju_icon/tx_chazhihaoli":"\u6296\u6e38\u620f\u65f6\u95f4"==o?e="canju_icon/tx_douyoushijian":"\u5e03\u5317\u6e38\u620f"==o?e="canju_icon/tx_bubeiyouxi":"\u6296\u4e50"==o?e="canju_icon/tx_doule":"\u6296\u673a\u7075"==o?e="canju_icon/tx_doujiling":"\u5c0f\u82b1\u8001\u5e08"==o&&(e="canju_icon/tx_xiaohualaoshi")}cc.loader.loadRes(this.spriteUrl+e,cc.SpriteFrame,function(n,o){n&&(console.log("------------\u52a0\u8f7d\u672c\u5730\u56fe\u7247\u5931\u8d25 \u8def\u5f84 :",e),console.log("------------\u52a0\u8f7d\u672c\u5730\u56fe\u7247\u5931\u8d25 \u9519\u8bef :",n)),console.log("------------\u52a0\u8f7d\u672c\u5730\u56fe\u7247 \u8def\u5f84 :",e),t.getComponent(cc.Sprite).spriteFrame=o,a&&a()}.bind(this))},e.prototype.updateHttpSprite=function(e,t){cc.assetManager.loadRemote(e,function(e,a){var n=new cc.SpriteFrame(a);t.getComponent(cc.Sprite).spriteFrame=n})},e.prototype.createWhiteSteps=function(e,t,a,n){for(var o=Math.floor(a.height/t),i=Math.floor(a.width/e),s=-(a.width/2-i/2),r=i,c=o,h=s,u=a.height/2-o/2,l=e*t,d=0,p=0;p<l;p++){var g=cc.instantiate(n);g.parent=a,g.height=o,g.width=i,g.x=h,g.y=u,g.width<100?(g.getChildByName("sp").scale=.6,g.width<35&&(g.getChildByName("sp").scale=.3)):g.getChildByName("sp").scale=1.2,(d+=1)==e?(d=0,u-=c,h=s):h+=r}},e.prototype.pingmuDouDong=function(e){var t=cc.repeatForever(cc.sequence(cc.moveBy(.02,cc.v2(4,4)),cc.moveBy(.04,cc.v2(-8,-8)),cc.moveBy(.02,cc.v2(4,4))));e.runAction(t);var a=setTimeout(function(){e.stopAllActions(),e.setPosition(0,0),clearTimeout(a)},300)},e.prototype.initSkin=function(e,t){var a=t.armature();a.getSlot("1_qianfa").displayIndex=e,a.getSlot("2_lian").displayIndex=e,a.getSlot("3_shenti").displayIndex=e,a.getSlot("4_qunzi").displayIndex=e,a.getSlot("5_yougebo").displayIndex=e,a.getSlot("6_youshoubi").displayIndex=e,a.getSlot("7_youshou").displayIndex=e,a.getSlot("8_zuogebo").displayIndex=e,a.getSlot("9_zuoshoubi").displayIndex=e,a.getSlot("10_zuoshou").displayIndex=e,a.getSlot("11_kua").displayIndex=e,a.getSlot("12_youdatui").displayIndex=e,a.getSlot("13_youxiaotui").displayIndex=e,a.getSlot("14_zuodatui").displayIndex=e,a.getSlot("15_zuoxiaotui").displayIndex=e,a.getSlot("16_houfa").displayIndex=e},e.prototype.playAnimation=function(e,t,a,n){e.playAnimation(t,a),0!=a&&(e.once(dragonBones.EventObject.COMPLETE,function(){n&&n()}),e.once(dragonBones.EventObject.FRAME_EVENT,function(){}))},e.prototype.judgeGameLevelName=function(e){var t=Math.floor(e/9);return e%9==0&&(t-=1),t>2&&(t=2),["\u4e1a\u4f59","\u68cb\u58eb","\u5927\u5e08","\u5b97\u5e08"][t]+(e-9*t+"\u7ea7")},e.prototype.getDuanWei=function(e){var t="",a=n.UpdataRankData.getRankByScoreJD(e);return t=0==a.duan_wei?"\u521d\u6bb5 ":a.duan_wei+1+"\u6bb5 ",10==a.deng_ji?t+a.deng_ji+"\u7ea7":t+" "+a.deng_ji+"\u7ea7"},e.prototype.judgeAiLevel=function(e){var t=1;if(e<=2)t=n.NumberUtil.randomNum(1,e);else{var a=e-2,o=e+2;t=n.NumberUtil.randomNum(a,o)}return t%9==0&&(t+=1),t},e.prototype.judgeAiScore=function(e){var t=n.NumberUtil.randomNum(e-600,e+600);return t<0&&(t=0),t},e.prototype.ranDomAiFrontLevel=function(){return n.NumberUtil.randomNum(1,10)},e.prototype.randomGameName=function(e,t){var a=e[n.NumberUtil.randomNum(0,e.length)],o=3;a?a.length>1&&(o=2):a="\u590f\u6728";for(var i=n.NumberUtil.randomNum(1,o),s=0;s<i;s++)a+=t[n.NumberUtil.randomNum(0,t.length)];return a},e.prototype.loadSpine=function(e,t){new Promise(function(a){cc.resources.load("meinv/"+t,sp.SkeletonData,function(t,n){t?console.log("\u9aa8\u9abc\u6570\u636e\u52a0\u8f7d\u5931\u8d25"):(e.skeletonData=n,a(n))})}).then(function(){e.setAnimation(0,"daiji",!0)})},e.prototype.loadDragon=function(e,t){var a=new Promise(function(a){cc.resources.load("meinv/"+t+"_ske",dragonBones.DragonBonesAsset,function(t,n){t?console.log("\u9519\u8bef"):(e.dragonAsset=n,a(n))})}),n=new Promise(function(a){cc.resources.load("meinv/"+t+"_tex",dragonBones.DragonBonesAtlasAsset,function(t,n){t||(e.dragonAtlasAsset=n,a(n))})});Promise.all([a,n]).then(function(){e.buildArmature("Armature",e.node),e.setAnimationCacheMode(dragonBones.ArmatureDisplay.AnimationCacheMode.SHARED_CACHE),e.playAnimation("daiji",0)})},e}()),cc._RF.pop()},{"../SSSGF/ssscgf":"ssscgf"}],conMager:[function(e,t,a){"use strict";cc._RF.push(t,"9d236JHUKRKaI6mBX0Apvrm","conMager"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./poolNodeMager"),o=e("./dragonResMager"),i=e("./winNodeMager"),s=e("./audioMager"),r=function(){function e(){}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.init=function(){var e=this;this._poolNodeMager=new n.default,this._winNodeMager=new i.default,this._dragonResMager=new o.default,this._audioMager=new s.default,this._winNodeMager.init(function(){e._msgAtion.emit("loadingRes"),e._msgAtion.emit("loadingRes")}),this._poolNodeMager.init(),this._msgAtion=new cc.EventTarget},e.prototype.initAudio=function(e){this._audioMager.init(function(){e()})},e.prototype.showWinNode=function(e,t){for(var a=[],n=2;n<arguments.length;n++)a[n-2]=arguments[n];var o=function(n){n.parent=t||cc.find("Canvas"),n.active=!0,a.cb&&a.cb(),n.getComponent(e)&&n.getComponent(e).onOpen(a)};this._winNodeMager.showWinNode(e,o)},e.prototype.hideWinNode=function(e){this._winNodeMager.hideWinNode(e)},e.prototype.playAudioEff=function(e,t,a){this._audioMager.playAudioEff(e,t,a)},e.prototype.stopAudioEff=function(){this._audioMager.stopAudioEff()},e.prototype.stopAllAudioEff=function(){this._audioMager.stopAllAudioEff()},e.prototype.playBGM=function(e){this._audioMager.playBGM(e)},e.prototype.stopBGM=function(){this._audioMager.stopBGM()},e.prototype.getPoolNode=function(e,t){for(var a=[],n=2;n<arguments.length;n++)a[n-2]=arguments[n];var o=function(n){n.parent=t||cc.find("/Canvas"),n.active=!0,n.getComponent(e)&&n.getComponent(e).onOpen(a)};this._poolNodeMager.getPoolNode(e,o)},e.prototype.putPoolNode=function(e,t){t.getComponent(e)&&t.getComponent(e).unscheduleAllCallbacks(),this._poolNodeMager.putPoolNode(e,t)},e.prototype.getBoneRes=function(e,t,a){this._dragonResMager.getBoneRes(e,t,a)},e.prototype.removeBoneRes=function(e){this._dragonResMager.removeBoneRes(e)},e}();a.default=r,cc._RF.pop()},{"./audioMager":"audioMager","./dragonResMager":"dragonResMager","./poolNodeMager":"poolNodeMager","./winNodeMager":"winNodeMager"}],conNetErr:[function(e,t,a){"use strict";cc._RF.push(t,"b1c47CVS2dL8K9kVjZEmY2S","conNetErr"),Object.defineProperty(a,"__esModule",{value:!0}),a.ConNetErr=void 0;var n=e("../ssscgf"),o=function(){function e(){}return e.ClientErrLog=function(e){switch(e){case MGOBE.ErrCode.EC_SDK_SEND_FAIL:case MGOBE.ErrCode.EC_SDK_RES_TIMEOUT:n.conMager.getInstance().getPoolNode(n.KEY.poolName.tipNode,cc.find("Canvas"),"\u670d\u52a1\u5668\u65e0\u54cd\u5e94\uff0c\u8bf7\u91cd\u8bd5");break;case MGOBE.ErrCode.EC_SDK_SOCKET_ERROR:case MGOBE.ErrCode.EC_SDK_SOCKET_CLOSE:n.conMager.getInstance().getPoolNode(n.KEY.poolName.tipNode,cc.find("Canvas"),"\u7f51\u7edc\u53d1\u751f\u9519\u8bef")}},e.SystemErrLog=function(e){switch(e){case MGOBE.ErrCode.EC_INNER_ERROR:case MGOBE.ErrCode.EC_TIME_OUT:case MGOBE.ErrCode.EC_SERVER_BUSY:n.conMager.getInstance().getPoolNode(n.KEY.poolName.tipNode,cc.find("Canvas"),"\u670d\u52a1\u5668\u65e0\u54cd\u5e94\uff0c\u8bf7\u91cd\u8bd5");break;case MGOBE.ErrCode.EC_SDK_SOCKET_ERROR:case MGOBE.ErrCode.EC_SDK_SOCKET_CLOSE:n.conMager.getInstance().getPoolNode(n.KEY.poolName.tipNode,cc.find("Canvas"),"\u7f51\u7edc\u53d1\u751f\u9519\u8bef")}},e}();a.ConNetErr=o,cc._RF.pop()},{"../ssscgf":"ssscgf"}],configSurface:[function(e,t,a){"use strict";cc._RF.push(t,"cf945PZhKpLu7c3YFQLkcfX","configSurface"),Object.defineProperty(a,"__esModule",{value:!0}),a.zhenFaWeight=a.XingMingData=void 0,a.XingMingData={xing:["\u8d75","\u94b1","\u5b59","\u674e","\u5468","\u5434","\u90d1","\u738b","\u51af","\u9648","\u891a","\u536b","\u848b","\u6c88","\u97e9","\u6768","\u6731","\u79e6","\u5c24","\u8bb8","\u4f55","\u5415","\u65bd","\u5f20","\u5b54","\u66f9","\u4e25","\u534e","\u91d1","\u9b4f","\u9676","\u59dc","\u621a","\u8c22","\u90b9","\u55bb","\u67cf","\u6c34","\u7aa6","\u7ae0","\u4e91","\u82cf","\u6f58","\u845b","\u595a","\u8303","\u5f6d","\u90ce","\u9c81","\u97e6","\u660c","\u9a6c","\u82d7","\u51e4","\u82b1","\u65b9","\u4fde","\u4efb","\u8881","\u67f3","\u9146","\u9c8d","\u53f2","\u5510","\u8d39","\u5ec9","\u5c91","\u859b","\u96f7","\u8d3a","\u502a","\u6c64","\u6ed5","\u6bb7","\u7f57","\u6bd5","\u90dd","\u90ac","\u5b89","\u5e38","\u4e50","\u4e8e","\u65f6","\u5085","\u76ae","\u535e","\u9f50","\u5eb7","\u4f0d","\u4f59","\u5143","\u535c","\u987e","\u5b5f","\u5e73","\u9ec4","\u548c","\u7a46","\u8427","\u5c39","\u59da","\u90b5","\u582a","\u6c6a","\u7941","\u6bdb","\u79b9","\u72c4","\u7c73","\u8d1d","\u660e","\u81e7","\u8ba1","\u4f0f","\u6210","\u6234","\u8c08","\u5b8b","\u8305","\u5e9e","\u718a","\u7eaa","\u8212","\u5c48","\u9879","\u795d","\u8463","\u6881","\u4e0a\u5b98","\u6155\u5bb9","\u6b27\u9633","\u590f\u4faf"],ming:["\u7684","\u4e00","\u662f","\u4e86","\u6211","\u4e0d","\u4eba","\u5728","\u4ed6","\u6709","\u8fd9","\u4e2a","\u4e0a","\u4eec","\u6765","\u5230","\u65f6","\u5927","\u5730","\u4e3a","\u5b50","\u4e2d","\u4f60","\u8bf4","\u751f","\u56fd","\u5e74","\u7740","\u5c31","\u90a3","\u548c","\u8981","\u5979","\u51fa","\u4e5f","\u5f97","\u91cc","\u540e","\u81ea","\u4ee5","\u4f1a","\u5bb6","\u53ef","\u4e0b","\u800c","\u8fc7","\u5929","\u53bb","\u80fd","\u5bf9","\u5c0f","\u591a","\u7136","\u4e8e","\u5fc3","\u5b66","\u4e48","\u4e4b","\u90fd","\u597d","\u770b","\u8d77","\u53d1","\u5f53","\u6ca1","\u6210","\u53ea","\u5982","\u4e8b","\u628a","\u8fd8","\u7528","\u7b2c","\u6837","\u9053","\u60f3","\u4f5c","\u79cd","\u5f00","\u7f8e","\u603b","\u4ece","\u65e0","\u60c5","\u5df1","\u9762","\u6700","\u5973","\u4f46","\u73b0","\u524d","\u4e9b","\u6240","\u540c","\u65e5","\u624b","\u53c8","\u884c","\u610f","\u52a8","\u65b9","\u671f","\u5b83","\u5934","\u7ecf","\u957f","\u513f","\u56de","\u4f4d","\u5206","\u7231","\u8001","\u56e0","\u5f88","\u7ed9","\u540d","\u6cd5","\u95f4","\u65af","\u77e5","\u4e16","\u4ec0","\u4e24","\u6b21","\u4f7f","\u8eab","\u8005","\u88ab","\u9ad8","\u5df2","\u4eb2","\u5176","\u8fdb","\u6b64","\u8bdd","\u5e38","\u4e0e","\u6d3b","\u6b63","\u611f","\u89c1","\u660e","\u95ee","\u529b","\u7406","\u5c14","\u70b9","\u6587","\u51e0","\u5b9a","\u672c","\u516c","\u7279","\u505a","\u5916","\u5b69","\u76f8","\u897f","\u679c","\u8d70","\u5c06","\u6708","\u5341","\u5b9e","\u5411","\u58f0","\u8f66","\u5168","\u4fe1","\u91cd","\u4e09","\u673a","\u5de5","\u7269","\u6c14","\u6bcf","\u5e76","\u522b","\u771f","\u6253","\u592a","\u65b0","\u6bd4","\u624d","\u4fbf","\u592b","\u518d","\u4e66","\u90e8","\u6c34","\u50cf","\u773c","\u7b49","\u4f53","\u5374","\u52a0","\u7535","\u4e3b","\u754c","\u95e8","\u5229","\u6d77","\u53d7","\u542c","\u8868","\u5fb7","\u5c11","\u514b","\u4ee3","\u5458","\u8bb8","\u7a1c","\u5148","\u53e3","\u7531","\u6b7b","\u5b89","\u5199","\u6027","\u9a6c","\u5149","\u767d","\u6216","\u4f4f","\u96be","\u671b","\u6559","\u547d","\u82b1","\u7ed3","\u4e50","\u8272","\u66f4","\u62c9","\u4e1c","\u795e","\u8bb0","\u5904","\u8ba9","\u6bcd","\u7236","\u5e94","\u76f4","\u5b57","\u573a","\u5e73","\u62a5","\u53cb","\u5173","\u653e","\u81f3","\u5f20","\u8ba4","\u63a5","\u544a","\u5165","\u7b11","\u5185","\u82f1","\u519b","\u5019","\u6c11","\u5c81","\u5f80","\u4f55","\u5ea6","\u5c71","\u89c9","\u8def","\u5e26","\u4e07","\u7537","\u8fb9","\u98ce","\u89e3","\u53eb","\u4efb","\u91d1","\u5feb","\u539f","\u5403","\u5988","\u53d8","\u901a","\u5e08","\u7acb","\u8c61","\u6570","\u56db","\u5931","\u6ee1","\u6218","\u8fdc","\u683c","\u58eb","\u97f3","\u8f7b","\u76ee","\u6761","\u5462","\u75c5","\u59cb","\u8fbe","\u6df1","\u5b8c","\u4eca","\u63d0","\u6c42","\u6e05","\u738b","\u5316","\u7a7a","\u4e1a","\u601d","\u5207","\u600e","\u975e","\u627e","\u7247","\u7f57","\u94b1","\u7d36","\u5417","\u8bed","\u5143","\u559c","\u66fe","\u79bb","\u98de","\u79d1","\u8a00","\u5e72","\u6d41","\u6b22","\u7ea6","\u5404","\u5373","\u6307","\u5408","\u53cd","\u9898","\u5fc5","\u8be5","\u8bba","\u4ea4","\u7ec8","\u6797","\u8bf7","\u533b","\u665a","\u5236","\u7403","\u51b3","\u7aa2","\u4f20","\u753b","\u4fdd","\u8bfb","\u8fd0","\u53ca","\u5219","\u623f","\u65e9","\u9662","\u91cf","\u82e6","\u706b","\u5e03","\u54c1","\u8fd1","\u5750","\u4ea7","\u7b54","\u661f","\u7cbe","\u89c6","\u4e94","\u8fde","\u53f8","\u5df4","\u5947","\u7ba1","\u7c7b","\u672a","\u670b","\u4e14","\u5a5a","\u53f0","\u591c","\u9752","\u5317","\u961f","\u4e45","\u4e4e","\u8d8a","\u89c2","\u843d","\u5c3d","\u5f62","\u5f71","\u7ea2","\u7238","\u767e","\u4ee4","\u5468","\u5427","\u8bc6","\u6b65","\u5e0c","\u4e9a","\u672f","\u7559","\u5e02","\u534a","\u70ed","\u9001","\u5174","\u9020","\u8c08","\u5bb9","\u6781","\u968f","\u6f14","\u6536","\u9996","\u6839","\u8bb2","\u6574","\u5f0f","\u53d6","\u7167","\u529e","\u5f3a","\u77f3","\u53e4","\u534e","\u8ae3","\u62ff","\u8ba1","\u60a8","\u88c5","\u4f3c","\u8db3","\u53cc","\u59bb","\u5c3c","\u8f6c","\u8bc9","\u7c73","\u79f0","\u4e3d","\u5ba2","\u5357","\u9886","\u8282","\u8863","\u7ad9","\u9ed1","\u523b","\u7edf","\u65ad","\u798f","\u57ce","\u6545","\u5386","\u60ca","\u8138","\u9009","\u5305","\u7d27","\u4e89","\u53e6","\u5efa","\u7ef4","\u7edd","\u6811","\u7cfb","\u4f24","\u793a","\u613f","\u6301","\u5343","\u53f2","\u8c01","\u51c6","\u8054","\u5987","\u7eaa","\u57fa","\u4e70","\u5fd7","\u9759","\u963f","\u8bd7","\u72ec","\u590d","\u75db","\u6d88","\u793e","\u7b97","\u4e49","\u7adf","\u786e","\u9152","\u9700","\u5355","\u6cbb","\u5361","\u5e78","\u5170","\u5ff5","\u4e3e","\u4ec5","\u949f","\u6015","\u5171","\u6bdb","\u53e5","\u606f","\u529f","\u5b98","\u5f85","\u7a76","\u8ddf","\u7a7f","\u5ba4","\u6613","\u6e38","\u7a0b","\u53f7","\u5c45","\u8003","\u7a81","\u76ae","\u54ea","\u8d39","\u5012","\u4ef7","\u56fe","\u5177","\u521a","\u8111","\u6c38","\u6b4c","\u54cd","\u5546","\u793c","\u7ec6","\u4e13","\u9ec4","\u5757","\u811a","\u5473","\u7075","\u6539","\u636e","\u822c","\u7834","\u5f15","\u98df","\u4ecd","\u5b58","\u4f17","\u6ce8","\u7b14","\u751a","\u67d0","\u6c89","\u8840","\u5907","\u4e60","\u6821","\u9ed8","\u52a1","\u571f","\u5fae","\u5a18","\u987b","\u8bd5","\u6000","\u6599","\u8c03","\u5e7f","\u8716","\u82cf","\u663e","\u8d5b","\u67e5","\u5bc6","\u8bae","\u5e95","\u5217","\u5bcc","\u68a6","\u9519","\u5ea7","\u53c2","\u516b","\u9664","\u8dd1","\u4eae","\u5047","\u5370","\u8bbe","\u7ebf","\u6e29","\u867d","\u6389","\u4eac","\u521d","\u517b","\u9999","\u505c","\u9645","\u81f4","\u9633","\u7eb8","\u674e","\u7eb3","\u9a8c","\u52a9","\u6fc0","\u591f","\u4e25","\u8bc1","\u5e1d","\u996d","\u5fd8","\u8da3","\u652f","\u6625","\u96c6","\u4e08","\u6728","\u7814","\u73ed","\u666e","\u5bfc","\u987f","\u7761","\u5c55","\u8df3","\u83b7","\u827a","\u516d","\u6ce2","\u5bdf","\u7fa4","\u7687","\u6bb5","\u6025","\u5ead","\u521b","\u533a","\u5965","\u5668","\u8c22","\u5f1f","\u5e97","\u5426","\u5bb3","\u8349","\u6392","\u80cc","\u6b62","\u7ec4","\u5dde","\u671d","\u5c01","\u775b","\u677f","\u89d2","\u51b5","\u66f2","\u9986","\u80b2","\u5fd9","\u8d28","\u6cb3","\u7eed","\u54e5","\u547c","\u82e5","\u63a8","\u5883","\u9047","\u96e8","\u6807","\u59d0","\u5145","\u56f4","\u6848","\u4f26","\u62a4","\u51b7","\u8b66","\u8d1d","\u8457","\u96ea","\u7d22","\u5267","\u554a","\u8239","\u9669","\u70df","\u4f9d","\u6597","\u503c","\u5e2e","\u6c49","\u6162","\u4f5b","\u80af","\u95fb","\u5531","\u6c99","\u5c40","\u4f2f","\u65cf","\u4f4e","\u73a9","\u8d44","\u5c4b","\u51fb","\u901f","\u987e","\u6cea","\u6d32","\u56e2","\u5723","\u65c1","\u5802","\u5175","\u4e03","\u9732","\u56ed","\u725b","\u54ed","\u65c5","\u8857","\u52b3","\u578b","\u70c8","\u59d1","\u9648","\u83ab","\u9c7c","\u5f02","\u62b1","\u5b9d","\u6743","\u9c81","\u7b80","\u6001","\u7ea7","\u7968","\u602a","\u5bfb","\u6740","\u5f8b","\u80dc","\u4efd","\u6c7d","\u53f3","\u6d0b","\u8303","\u5e8a","\u821e","\u79d8","\u5348","\u767b","\u697c","\u8d35","\u5438","\u8d23","\u4f8b","\u8ffd","\u8f83","\u804c","\u5c5e","\u6e10","\u5de6","\u5f55","\u4e1d","\u7259","\u515a","\u7ee7","\u6258","\u8d76","\u7ae0","\u667a","\u51b2","\u53f6","\u80e1","\u5409","\u5356","\u575a","\u559d","\u8089","\u9057","\u6551","\u4fee","\u677e","\u4e34","\u85cf","\u62c5","\u620f","\u5584","\u536b","\u836f","\u60b2","\u6562","\u9760","\u4f0a","\u6751","\u6234","\u8bcd","\u68ee","\u8033","\u5dee","\u77ed","\u7956","\u4e91","\u89c4","\u7a97","\u6563","\u8ff7","\u6cb9","\u65e7","\u9002","\u4e61","\u67b6","\u6069","\u6295","\u5f39","\u94c1","\u535a","\u96f7","\u5e9c","\u538b","\u8d85","\u8d1f","\u52d2","\u6742","\u9192","\u6d17","\u91c7","\u6beb","\u5634","\u6bd5","\u4e5d","\u51b0","\u65e2","\u72b6","\u4e71","\u666f","\u5e2d","\u73cd","\u7ae5","\u9876","\u6d3e","\u7d20","\u8131","\u519c","\u7591","\u7ec3","\u91ce","\u6309","\u72af","\u62cd","\u5f81","\u574f","\u9aa8","\u4f59","\u627f","\u7f6e","\u81d3","\u5f69","\u706f","\u5de8","\u7434","\u514d","\u73af","\u59c6","\u6697","\u6362","\u6280","\u7ffb","\u675f","\u589e","\u5fcd","\u9910","\u6d1b","\u585e","\u7f3a","\u5fc6","\u5224","\u6b27","\u5c42","\u4ed8","\u9635","\u739b","\u6279","\u5c9b","\u9879","\u72d7","\u4f11","\u61c2","\u6b66","\u9769","\u826f","\u6076","\u604b","\u59d4","\u62e5","\u5a1c","\u5999","\u63a2","\u5440","\u8425","\u9000","\u6447","\u5f04","\u684c","\u719f","\u8bfa","\u5ba3","\u94f6","\u52bf","\u5956","\u5bab","\u5ffd","\u5957","\u5eb7","\u4f9b","\u4f18","\u8bfe","\u9e1f","\u558a","\u964d","\u590f","\u56f0","\u5218","\u7f6a","\u4ea1","\u978b","\u5065","\u6a21","\u8d25","\u4f34","\u5b88","\u6325","\u9c9c","\u8d22","\u5b64","\u67aa","\u7981","\u6050","\u4f19","\u6770","\u8ff9","\u59b9","\u85f8","\u904d","\u76d6","\u526f","\u5766","\u724c","\u6c5f","\u987a","\u79cb","\u8428","\u83dc","\u5212","\u6388","\u5f52","\u6d6a","\u542c","\u51e1","\u9884","\u5976","\u96c4","\u5347","\u7883","\u7f16","\u5178","\u888b","\u83b1","\u542b","\u76db","\u6d4e","\u8499","\u68cb","\u7aef","\u817f","\u62db","\u91ca","\u4ecb","\u70e7","\u8bef","\u4e7e","\u5764"]},a.zhenFaWeight={wanning:{wanning:20,bagua:16,kedi:5,sijiao:20,wulei:16,fenlie:20,xueyuyingsha:15,meihua:20,dusha:20,kunlong:16,juehu:16,guiyuan:25,chaoniu:16,qixing:60},bagua:{wanning:25,bagua:15,kedi:2,sijiao:25,wulei:10,fenlie:20,xueyuyingsha:25,meihua:20,dusha:20,kunlong:23,juehu:10,guiyuan:25,chaoniu:10,qixing:0},kedi:{wanning:20,bagua:5,kedi:1,sijiao:20,wulei:5,fenlie:0,xueyuyingsha:30,meihua:20,dusha:5,kunlong:10,juehu:5,guiyuan:30,chaoniu:5,qixing:0},sijiao:{wanning:18,bagua:8,kedi:1,sijiao:20,wulei:10,fenlie:21,xueyuyingsha:20,meihua:20,dusha:25,kunlong:10,juehu:13,guiyuan:20,chaoniu:16,qixing:60},wulei:{wanning:21,bagua:9,kedi:1,sijiao:21,wulei:0,fenlie:21,xueyuyingsha:21,meihua:22,dusha:27,kunlong:19,juehu:13,guiyuan:27,chaoniu:9,qixing:15},fenlie:{wanning:15,bagua:15,kedi:0,sijiao:15,wulei:15,fenlie:16,xueyuyingsha:15,meihua:15,dusha:17,kunlong:15,juehu:17,guiyuan:17,chaoniu:17,qixing:55},xueyuyingsha:{wanning:15,bagua:10,kedi:60,sijiao:15,wulei:5,fenlie:15,xueyuyingsha:15,meihua:12,dusha:15,kunlong:12,juehu:13,guiyuan:18,chaoniu:12,qixing:60},meihua:{wanning:10,bagua:18,kedi:5,sijiao:10,wulei:18,fenlie:10,xueyuyingsha:10,meihua:0,dusha:18,kunlong:20,juehu:20,guiyuan:20,chaoniu:20,qixing:60},dusha:{wanning:15,bagua:25,kedi:2,sijiao:15,wulei:25,fenlie:23,xueyuyingsha:15,meihua:20,dusha:5,kunlong:20,juehu:15,guiyuan:17,chaoniu:17,qixing:60},kunlong:{wanning:20,bagua:10,kedi:2,sijiao:20,wulei:10,fenlie:20,xueyuyingsha:20,meihua:13,dusha:35,kunlong:15,juehu:12,guiyuan:15,chaoniu:10,qixing:60},juehu:{wanning:20,bagua:5,kedi:2,sijiao:20,wulei:8,fenlie:20,xueyuyingsha:20,meihua:20,dusha:12,kunlong:16,juehu:15,guiyuan:17,chaoniu:8,qixing:60},guiyuan:{wanning:15,bagua:8,kedi:60,sijiao:15,wulei:8,fenlie:15,xueyuyingsha:15,meihua:15,dusha:20,kunlong:20,juehu:23,guiyuan:10,chaoniu:8,qixing:55},chaoniu:{wanning:20,bagua:8,kedi:2,sijiao:20,wulei:8,fenlie:20,xueyuyingsha:20,meihua:22,dusha:8,kunlong:20,juehu:8,guiyuan:20,chaoniu:5,qixing:0},qixing:{wanning:15,bagua:15,kedi:2,sijiao:15,wulei:8,fenlie:15,xueyuyingsha:15,meihua:15,dusha:15,kunlong:15,juehu:15,guiyuan:15,chaoniu:15,qixing:8}},cc._RF.pop()},{}],config:[function(e,t,a){"use strict";cc._RF.push(t,"f070fjBSgJFYrm2yjXWol6Z","config"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./global");a.default={gameId:"obg-bkaiv8qn",secretKey:"bbfb43ca4fd9d1d8a1b47f110bdd89e7cab764d8",url:"bkaiv8qn.wxlagame.com",openId:function(){if(""!=n.default.openId)return console.log("--------------------global.openId:",n.default.openId),n.default.openId;for(var e=Date.now().toString(36),t=0;t<7;t++)e+=Math.ceil(Math.random()*Math.pow(10,4)).toString(36);return console.log("--------------------mockOpenId:",e),e}(),matchCode:"match-ohn9vhmi"},cc._RF.pop()},{"./global":"global"}],createVideo_ks:[function(e,t,a){"use strict";cc._RF.push(t,"a4f9aX3JrxMj6kF6A5ZFbIz","createVideo_ks"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("../conMagers/conMager"),o=function(){function e(){this.manager=void 0,this.videoPath=void 0,this.isCreateVing=void 0,this.startCreateVideoTime=void 0,this.initManager=function(){var e=this;this.manager=kwaigame.getGameRecorder(),console.log("-------------\u521d\u59cb\u5316\u5f55\u5c4f\u7ec4\u4ef6------------",this.manager),this.manager.on("start",function(){console.log("-------------\u5f00\u59cb\u5f55\u5c4f------------");var t=new Date;e.startCreateVideoTime=Number(t.getTime().toString()),e.videoPath=void 0}),this.manager.on("stop",function(t){var a=new Date;e.endCreateVideoTime=Number(a.getTime().toString()),console.log("-------------\u7ed3\u675f\u5f55\u5c4fllllllllllllllllll------------"),e.endCreateVideoTime-e.startCreateVideoTime>4e3&&(e.videoPath=t.videoID,console.log("-------------\u7ed3\u675f\u5f55\u5c4f------------",t.videoID))})},this.startCreate=function(){this.manager&&(this.isCreateVing||(this.isCreateVing=!0,this.manager.start()))},this.stopCreate=function(){this.manager&&(this.isCreateVing=!1,this.manager.stop())},this.onShareVideo=function(e){if(null==this.videoPath)return n.default.getInstance().getPoolNode("tipNode",void 0,"\u6682\u65e0\u53ef\u5206\u4eab\u7684\u5f55\u5c4f!"),void e(!0);this.manager.publishVideo({video:this.videoPath,callback:function(t){t?(console.log("\u53d1\u5e03\u5f55\u5c4f\u5931\u8d25\uff1a "+JSON.stringify(t)),e&&e(!1)):(console.log("\u53d1\u5e03\u5f55\u5c4f\u6210\u529f"),e&&e(!0))}})}}return e.prototype.init=function(){this.initManager()},e}();a.default=o,cc._RF.pop()},{"../conMagers/conMager":"conMager"}],createVideo:[function(e,t,a){"use strict";cc._RF.push(t,"94a6eBcQaFEI70RSSyxvGjI","createVideo"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("../conMagers/conMager"),o=function(){function e(){this.manager=void 0,this.videoPath=void 0,this.isCreateVing=void 0,this.startCreateVideoTime=void 0,this.initManager=function(){var e=this;cc.sys.platform===cc.sys.BYTEDANCE_GAME&&tt.getGameRecorderManager&&(this.manager=tt.getGameRecorderManager(),this.manager.onStart(function(){console.log("-------------\u5f00\u59cb\u5f55\u5c4f------------");var t=new Date;e.startCreateVideoTime=Number(t.getTime().toString()),e.videoPath=void 0}),this.manager.onStop(function(t){var a=new Date;e.endCreateVideoTime=Number(a.getTime().toString()),e.endCreateVideoTime-e.startCreateVideoTime>4e3&&(e.videoPath=t.videoPath,console.log("-------------\u7ed3\u675f\u5f55\u5c4f------------",t.videoPath))}))},this.startCreate=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME&&this.manager&&(this.isCreateVing||(this.isCreateVing=!0,this.manager.start({duration:200})))},this.stopCreate=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME&&this.manager&&(this.isCreateVing=!1,this.manager.stop())},this.onShareVideo=function(e){if(null==this.videoPath)return n.default.getInstance().getPoolNode("tipNode",cc.find("Canvas"),"\u6682\u65e0\u5f55\u5c4f\u53ef\u5206\u4eab!"),void e(!1);tt.shareAppMessage({channel:"video",title:"\u4e07\u5b81\u4e94\u5b50\u68cb",desc:"\u770b\u6211\u4e07\u5b81\u9635\u6cd5\u4e00\u5b50\u5b9a\u8f93\u8d62!",imageUrl:"",templateId:"",query:"",extra:{videoPath:this.videoPath,videoTopics:["\u4e07\u5b81\u4e94\u5b50\u68cb"],hashtag_list:["\u4e07\u5b81\u4e94\u5b50\u68cb"],video_title:"\u770b\u6211\u4e07\u5b81\u9635\u6cd5\u4e00\u5b50\u5b9a\u8f93\u8d62!"},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),e&&e(!0)},fail:function(){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25"),e&&(e(!1),n.default.getInstance().getPoolNode("tipNode",cc.find("Canvas"),"\u5206\u4eab\u5931\u8d25"))}})}}return e.prototype.init=function(){this.initManager()},e}();a.default=o,cc._RF.pop()},{"../conMagers/conMager":"conMager"}],dazhao_GameBoard:[function(e,t,a){"use strict";cc._RF.push(t,"36173atVt9HLKHzEiU24YZ6","dazhao_GameBoard");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.dazhao_GameBoard=void 0;var s=e("../../../SSSGF/dataController/DATA"),r=e("../../../SSSGF/ssscgf"),c=e("../Piece"),h=cc._decorator,u=h.ccclass,l=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.judgeSize=15,t.maze=[],t.state=c.BLACKCHESS,t.win=2,t.sum=0,t.block=46,t.whose_round=0,t.gameScene=null,t.AITurn=null,t.myTurn=!0,t.is_ani=!1,t.chess_map=[],t.juehu_chess_map=[],t.juehu_sum=0,t.chess_list=[],t.chess_pos=[],t.new_userChessPso=[],t.new_aiChessPso=[],t.chess_index=[],t.front_com=null,t.newx=0,t.newY=0,t.canWin=[],t.winCount=0,t.myWin=[],t.istouch=!0,t.ai_huiqi=2,t.ai_huiqi_judge=!0,t.ai_qiuhe_judge=!0,t.ai_heqi=2,t.dazhao_num=0,t.yilun_qizi_v2=[],t.bushu=0,t.is_xueyulianzhu=!1,t.zhenfa_level=0,t.qixing_fenlie_v2=[],t.is_zhenfa_over=!1,t.wulei_to_fenlie_max=1,t.wulei_to_fenlie=0,t.bagua_to_fenlie_max=1,t.bagua_to_fenlie=0,t.fenlie_number=0,t.dusha_number=0,t.juehu_number=0,t.chaoniu_number=0,t.qixing_number=0,t.rowSum=0,t.colSum=0,t.biasSumB=0,t.biasSumA=0,t.checkMode=[[1,0],[0,1],[1,1],[1,-1]],t.judge_num=5,t.juesha_judge=!1,t.huiqiJudge=!0,t}return o(t,e),t.prototype.initWin=function(){for(var e=0;e<15;e++){this.canWin[e]=[];for(var t=0;t<15;t++)this.canWin[e][t]=[]}for(e=0;e<15;e++)for(t=0;t<11;t++){for(var a=0;a<5;a++)this.canWin[e][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<15;t++){for(a=0;a<5;a++)this.canWin[e+a][t][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=0;t<11;t++){for(a=0;a<5;a++)this.canWin[e+a][t+a][this.winCount]=!0;this.winCount++}for(e=0;e<11;e++)for(t=14;t>3;t--){for(a=0;a<5;a++)this.canWin[e+a][t-a][this.winCount]=!0;this.winCount++}console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa:",this.winCount),console.log("\u5e94\u53d1\u5b97\u78ca\u8f93\u51fa11111:",this.canWin)},t.prototype.onLoad=function(){r.conMager.getInstance()._msgAtion.on("user_huiqi_fun",this.user_huiqi_fun,this),r.conMager.getInstance()._msgAtion.on("ds_huiqi_fun",this.ds_huiqi_fun,this)},t.prototype.init=function(e){this.gameScene=e,this.gameScene.gameType>=3&&(this.myTurn=!0);for(var t=0,a=0;a<this.judgeSize;a++){this.maze[a]=[],this.juehu_chess_map[a]=[],this.front_com.chaoniu_judgePos[a]=[];for(var n=0;n<this.judgeSize;n++)this.maze[a][n]=0,this.front_com.chaoniu_judgePos[a][n]=0,this.chess_map[t]=null,this.juehu_chess_map[a][n]=null,this.chess_pos[t]=[],t+=1}this.AITurn.RightRate=this.gameScene.RightRate,this.yilun_qizi_v2=[]},t.prototype.AIXianShou=function(){this.bushu++,this.state=-1,this.myTurn=!1,this.scheduleOnce(function(){this.gameScene.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.AITurn.addPos(7,7,this.state),this.new_aiChessPso.push([7,7]),this.changeToJudgeBoard(322,322)},3)},t.prototype.initAI=function(e){this.AITurn=e},t.prototype.initfront=function(e){this.front_com=e},t.prototype.onTouched=function(e){if(console.log("\u89e6\u6478\u5c4f\u5e55:",this.myTurn,this.istouch,this.front_com.chaoniu_judgePos),this.myTurn&&(2!=this.gameScene.gameType&&this.gameScene.gameType!=s.game_type.lianzhao||this.istouch)){var t=r.GameDataStorage.gameStateData.userZhenFaName;"dusha"!=t&&"chaoniu"!=t||(this.myTurn=!1);var a=e.getLocation(),n=this.node.convertToNodeSpaceAR(a),o=this.getPosByInt(Math.floor(n.x)),i=this.getPosByInt(Math.floor(n.y)),c=r.GameDataStorage.gameStateData.dsZhenFaName,h=Math.floor(o/this.block),u=Math.floor(i/this.block);if("kunlong"==c&&this.front_com.kunlong_pos.length>0){if(0!=this.front_com.kunlong_pos[h][u])return r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,null,"\u8bf7\u5728\u6846\u5185\u843d\u5b50"),void r.conMager.getInstance()._msgAtion.emit("action_kunlongkuang",this.state)}else if("chaoniu"==c&&this.front_com.chaoniu_judgePos.length>0&&"chaoniu"!=r.GameDataStorage.gameStateData.userZhenFaName&&0!=this.front_com.chaoniu_judgePos[h][u])return void r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,null,"\u8be5\u533a\u57df\u5df2\u635f\u574f,\u65e0\u6cd5\u843d\u5b50");this.bushu++,this.fenlie_number=0,this.newx=o,this.newY=i,this.new_userChessPso.push([o/this.block,i/this.block]),this.new_userChessPso.length>0&&(1!=r.GameDataStorage.gameStateData.gameType&&3!=r.GameDataStorage.gameStateData.gameType||r.conMager.getInstance()._msgAtion.emit("openHuiqi")),this.front_com.qixingOpen?this.changeToJudgeBoard2(o,i,!0):this.changeToJudgeBoard(o,i,!0),6!=this.gameScene.gameType||this.aiLuozi()}},t.prototype.changeToJudgeBoard2=function(e,t,a){var n=this,o=Math.floor(e/this.block),i=Math.floor(t/this.block);this.newY=t,this.newx=e;var c=r.GameDataStorage.gameStateData.userZhenFaName;a&&(c=r.GameDataStorage.gameStateData.dsZhenFaName);var h=function(){1!=n.gameScene.gameType&&5!=n.gameScene.gameType&&6!=n.gameScene.gameType&&n.gameScene.gameType!=s.game_type.lianzhao||n.updateMyTurn();var a=o+15*i;n.chess_pos[a]=[o,i],n.gameScene.moveInChess(e,t,n.state,!0)};if(r.conMager.getInstance()._msgAtion.emit("update_qixinglianji"),0==this.maze[o][i])h(),this.maze[o][i]=this.state,this.sum+=1;else if(this.getZhenFaName(this.state),"dusha"==c)1!=this.gameScene.gameType&&5!=this.gameScene.gameType&&6!=this.gameScene.gameType&&this.gameScene.gameType!=s.game_type.lianzhao||this.updateMyTurn(),this.gameScene.moveInChess(e,t,this.state,!0);else if("meihua"==c)0!=this.front_com.meihua_chess_poslist[o][i]?(1!=this.gameScene.gameType&&5!=this.gameScene.gameType&&6!=this.gameScene.gameType&&this.gameScene.gameType!=s.game_type.lianzhao||this.updateMyTurn(),this.gameScene.moveInChess(e,t,this.state,!0)):h();else if("fenlie"==c){var u=cc.v2(o,i);this.qixing_fenlie_v2.push(u),h()}else h()},t.prototype.aiLuozi=function(e){for(var t=r.GameDataStorage.gameStateData.userZhenFaName,a=[],n=0;n<15;n++)for(var o=0;o<15;o++)0==this.maze[n][o]&&("kunlong"==t&&this.front_com.kunlong_pos.length>0?0==this.front_com.kunlong_pos[n][o]&&a.push([n,o]):a.push([n,o]));if(3==this.gameScene.gameType||2!=this.win||this.myTurn||!this.ai_huiqi_judge||this.juesha_judge)console.error("\u4f60\u4e2a\u7535\u8111\u600e\u4e48\u5c31\u4e0d\u778e\u5b50\u4e86","\u89e6\u53d1ai",this.win,this.myTurn,this.ai_huiqi_judge,",\u7c7b\u578b\u5462",this.gameScene.gameType,this.state);else{if((1==this.gameScene.gameType||5==this.gameScene.gameType)&&this.ai_qiuhe_judge){var i=r.NumberUtil.randomNum(1,100);if(3==i&&this.ai_huiqi>0)return this.ai_huiqi_judge=!1,void this.ailuozi_public_fun(i,this.ai_huiqi_judge)}this.ailuozi_public_fun(e)}},t.prototype.ailuozi_public_fun=function(e,t){var a=this;void 0===t&&(t=!0),this.bushu++,this.AITurn.AIPosition(this.newx,this.newY,function(n){var o=r.NumberUtil.randomNum(1,3);e&&(o=e),o=1,"qixing"==r.GameDataStorage.gameStateData.dsZhenFaName&&a.front_com.qixingOpen&&(o=0),a.new_aiChessPso.push([n.x/a.block,n.y/a.block]),a.scheduleOnce(function(){a.front_com.qixingOpen?a.changeToJudgeBoard2(n.x,n.y):(console.error("\u6211\u771f\u7684\u591a\u4e0b\u4e86\u4e00\u9897"),a.changeToJudgeBoard(n.x,n.y)),a.gameScene.gameType!=s.game_type.lianzhao&&(t||a.scheduleOnce(function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.heqi_panel,a.node.parent,{type:"ds_huiqi",callBack:function(e){2==e?a.ds_huiqi_fun():(a.ai_huiqi_judge=!0,a.state==-1*a.gameScene.userChess&&a.aiLuozi())}})},2))},o)},!t)},t.prototype.ai_qiuhe=function(){var e=this;this.ai_qiuhe_judge&&(this.ai_heqi<=0||(this.ai_heqi-=1,2!=this.gameScene.gameType&&this.gameScene.gameType!=s.game_type.lianzhao||(this.ai_heqi-=1),this.ai_qiuhe_judge=!1,r.conMager.getInstance().getPoolNode(r.KEY.poolName.heqi_panel,this.node.parent,{type:"ds_qiuhe",callBack:function(t){console.log("\u6094\u68cb\u7684\u56de\u8c03\u542b\u6f31",t),e.ai_qiuhe_judge=!0,2==t&&(e.juesha_judge=!0,r.conMager.getInstance()._msgAtion.emit("pingju"))}})))},t.prototype.getPosByInt=function(e){var t=1;e<0?(e=-e,t=-1):t=1;var a=e%this.block;return e=Math.floor(e/this.block)*this.block,a-this.block/2>=0&&(e+=this.block),e*t},t.prototype.changeToJudgeBoard=function(e,t,a){if(console.error("\u666e\u901a\u843d\u5b50",this.state),this.state!=this.gameScene.userChess||a){var n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(this.newY=t,this.newx=e,0!=this.maze[n][o]){for(var i=[],c=0;c<15;c++)for(var h=0;h<15;h++)0==this.maze[c][h]&&(this.front_com.kunlong_pos.length>0?0==this.front_com.kunlong_pos[c][h]&&i.push([c,h]):i.push([c,h]));if(console.error("\u843d\u5b50\u6251\u8857",i.length),this.state==this.gameScene.userChess)return void(this.myTurn=!0);if(i.length<1)this.updateround();else{var u=i[d=r.NumberUtil.randomNum(0,i.length-1)][0],l=i[d][1];this.changeToJudgeBoard(46*u,46*l)}}else{1!=this.gameScene.gameType&&5!=this.gameScene.gameType&&6!=this.gameScene.gameType&&this.gameScene.gameType!=s.game_type.lianzhao||this.updateMyTurn();var d=n+15*o;this.chess_pos[d]=[n,o],this.maze[n][o]=this.state,this.sum+=1,this.luozi_panding(e,t)}}},t.prototype.luozi_panding=function(e,t){var a=this,n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(2!=this.gameScene.gameType&&this.gameScene.gameType!=s.game_type.lianzhao)console.log("\u5927\u62db\u7c7b\u578b\u7684\u843d\u5b50"),this.update_Whose_round(),this.gameScene.moveInChess(e,t,this.state),this.qipan_shaomiao(this.state,function(){a.updataState()});else{this.yilun_qizi_v2=[];var i=cc.v2(n,o);this.yilun_qizi_v2.push(i),this.showDaZhao()}},t.prototype.xuanze_zhenfa=function(){this.gameScene.change_zhenfa(this.myTurn)},t.prototype.update_Whose_round=function(){0==this.whose_round?this.whose_round=1:this.whose_round=0},t.prototype.updateMyTurn=function(){this.myTurn=!this.myTurn},t.prototype.updataState=function(){this.state*=-1},t.prototype.showDaZhao=function(){var e,t=this,a=Math.floor(this.newx/this.block),n=Math.floor(this.newY/this.block);this.wulei_to_fenlie=0,this.bagua_to_fenlie=0,e=this.getZhenFaName(-1*this.state).zhenFaName;var o=this.getZhenFaName(-1*this.state).level,i=this.getZhenFaName(this.state).level,c=this.getZhenFaName(this.state).zhenFaName,h=r.GameDataStorage.getUser().userData.zhenFaMap[e].attr;this.gameScene.moveInChess(this.newx,this.newY,this.state),this.dazhao_num+=1;var u=r.NumberUtil.randomNum(6,10);this.dazhao_num>=u&&this.gameScene.gameType!=s.game_type.lianzhao&&this.ai_qiuhe();var l=!0;if(this.state!=this.gameScene.userChess&&(l=!1),1==h)if("kunlong"==e){var d=this.getZhenFaName(this.state).zhenFaName;if("kedi"==d){var p=this.getZhenFaName(this.state).level;this.gameScene.gameType==s.game_type.lianzhao&&(p=l?this.gameScene.ds_level:this.gameScene.user_level),this.judge_num=p+5,console.log("\u56f0\u9f99\u7684\u79d1\u8fea:",this.judge_num)}this.qipan_shaomiao(this.state,function(){-1==t.win||1==t.win?(console.log("\u56f0\u9f99\u7684\u79d1\u8fea:",t.judge_num),"bagua"==d||"dusha"==d||"chaoniu"==d?t.start_dazhao(e):t.jueSha()):0==t.win?t.jueSha():t.start_dazhao(e)},this.judge_num)}else this.start_dazhao(e);else if(2==h){if(console.log("\u88ab\u52a8\u6280\u80fd",e,this.state),"fenlie"==e)return void this.start_dazhao(e);if("dusha"==e){if(this.front_com.judgeDusha([a,n],-1*this.state))return console.log("\u6bd2\u6740\u5df2\u7ecf\u505a\u4e86"),void this.start_dazhao(e,this.state);this.dz_judge()}else if("juehu"==e){var g=this.getZhenFaName(this.state).zhenFaName;console.log("\u5bf9\u9762\u662f\u4ec0\u4e48\u6280\u80fd"),"meihua"==g||"fenlie"==g?this.qipan_shaomiao(this.state,function(){if(-1==t.win||1==t.win)t.jueSha();else if(0==t.win)t.jueSha();else{if(t.front_com.judge_juehu(t.state))return console.log("\u7edd\u6237\u5df2\u7ecf\u505a\u4e86"),void t.start_dazhao(e,t.state);t.dz_judge()}},this.judge_num):this.dz_judge()}else if("guiyuan"==e){console.log("\u8f93\u51fa\u4e00\u4e0b\u5f52\u5143\u9635\u7b49\u7ea7:",o,i,c);var _=5-o;if(_<=1&&(_=1),"kedi"==c){var m=o,f=i+5-m;f<=1&&(f=1);var y=function(e,a,n){var o,i=null,s=["nan","nv"],c=t.gameScene.node.getChildByName("ds_duihua"),h=t.gameScene.node.getChildByName("user_duihua");(i=[h,c][o=e?0:1])==h&&t.gameScene.count_down.y<0&&(t.gameScene.count_down.opacity=0),i==c&&t.gameScene.count_down.y>0&&(t.gameScene.count_down.opacity=0),i.getChildByName("str").getComponent(cc.Label).string=a,i.active=!0,t.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(s[o]+"/"+s[o]+n),t.scheduleOnce(function(){i.getChildByName("str").getComponent(cc.Label).string="",i.active=!1,t.gameScene.count_down.opacity=255},1)},1)},v=function(a){r.conMager.getInstance()._msgAtion.emit("closeSet"),r.conMager.getInstance()._msgAtion.emit("stopTimeDel"),r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),y(!l,"\u514b\u654c\u5148\u673a",c),t.front_com.add_zhenfa_ani(c,"animation",function(){},!l),t.scheduleOnce(function(){console.error("\u662f\u5426\u53ef\u4ee5\u64ad\u653e\u541e\u566c\u52a8\u753b\uff01"),y(l,"\u5f52\u5143\u9635",e),t.front_com.add_zhenfa_ani(e,"animation2",function(){t.scheduleOnce(function(){r.conMager.getInstance()._msgAtion.emit("startTimeDel"),r.conMager.getInstance()._msgAtion.emit("openSet"),a()},1.6),r.conMager.getInstance()._msgAtion.emit("updateNum",m)},l)},3)};this.qipan_shaomiao(this.state,function(){-1==t.win||1==t.win?t.qipan_shaomiao(t.state,function(){-1==t.win||1==t.win?v(function(){t.jueSha()}):0==t.win?t.jueSha():v(function(){t.updateround()})},f):0==t.win?t.jueSha():t.updateround()},_)}else if("dusha"==c){for(var b=!1,S=0;S<this.judgeSize;S++)for(var N=0;N<this.judgeSize&&(this.maze[S][N]!=-this.state||!(b=this.front_com.judgeDusha([S,N],this.state)));N++);console.log("\u6bd2\u6740\u5df2\u7ecf\u505a\u4e86",b),b?this.start_dazhao(c,-this.state):this.qipan_shaomiao(this.state,function(){-1==t.win||1==t.win?t.start_dazhao(e):0==t.win?t.jueSha():t.dz_judge()},_)}else if("chaoniu"==c){if((w=this.front_com.judge_chaoniu_zhen(-1*this.state)).dsPosList.length>0&&w.posList.length>0)return void this.start_dazhao(c,-1*this.state);this.qipan_shaomiao(this.state,function(){-1==t.win||1==t.win?t.start_dazhao(e):0==t.win?t.jueSha():t.dz_judge()},_)}else this.qipan_shaomiao(this.state,function(){-1==t.win||1==t.win?t.start_dazhao(e):0==t.win?t.jueSha():t.dz_judge()},_)}else if("chaoniu"==e){var w;if(console.log("\u8d85\u725b\u9635\u5f00\u59cb\u91ca\u653e\u4e86\uff01\uff01\uff01"),(w=this.front_com.judge_chaoniu_zhen(this.state)).dsPosList.length>0&&w.posList.length>0)return void this.start_dazhao(e,this.state);this.dz_judge()}else if("qixing"==e){if(this.front_com.qixingOpen)return;this.dz_judge()}else this.dz_judge()}this.istouch=!1},t.prototype.start_dazhao=function(e,t){if(!this.juesha_judge){var a=this.state;t&&(a=t),this.gameScene.gameType==s.game_type.lianzhao&&this.gameScene.chufa_jineng(a),r.conMager.getInstance()._msgAtion.emit("closeSet"),r.conMager.getInstance()._msgAtion.emit("stopTimeDel"),console.log("\u91ca\u653e\u5927\u62db",e,this.state),this.front_com.showFront(a,e,this.daZhaoCb.bind(this))}},t.prototype.dz_judge=function(e){var t=this,a=Math.floor(this.newx/this.block),n=Math.floor(this.newY/this.block);this.qipan_shaomiao(this.state,function(){var o,i;console.log("\u54ce\u5440kjiomnil",t.win,t.state),"xueyuyingsha"==e&&r.conMager.getInstance()._msgAtion.emit("del_xueXian"),o=t.getZhenFaName(t.state).zhenFaName,i=t.getZhenFaName(t.state).is_user;var s=r.GameDataStorage.getUser().userData.zhenFaMap[o].attr;if(1==s)2!=t.win?t.jueSha():t.updateround();else if(2==s)if("kedi"==o)2!=t.win?(t.judge_num=5,t.judge_num+=i?r.GameDataStorage.gameStateData.ds_zhenfalevel:r.GameDataStorage.getUser().userData.zhenFaMap.kedi.level,t.qipan_shaomiao(t.state,function(){console.log("\u53ef\u654c\u5148\u673a \u8fdb\u6765\u4e86",t.judge_num,t.win,t.state),2==t.win||0==t.win?t.start_dazhao(o):t.jueSha()},t.judge_num)):t.updateround();else if("bagua"==o)t.start_dazhao(o);else if("wulei"==o)2!=t.win?t.jueSha():t.updateround();else if("fenlie"==o)2!=t.win?t.jueSha():t.updateround();else if("dusha"==o)console.log("\u8f6e\u5230\u6211\u4e86\u5417",t.state),2!=t.win?t.front_com.judgeDusha([a,n],-1*t.state)?(console.log("\u654c\u65b9\u662f\u6bd2\u6740\uff0c\u6211\u8981\u8d62\u4e86"),t.start_dazhao(o,-1*t.state)):t.jueSha():t.front_com.judgeDusha([a,n],-1*t.state)?(console.log("\u654c\u65b9\u662f\u6bd2\u6740\uff0c\u6211\u8fd8\u6ca1\u8d62"),t.start_dazhao(o,-1*t.state)):t.updateround();else if("juehu"==o)console.log("\u8f6e\u5230\u6211\u4e86\u5417",t.state),2!=t.win?t.front_com.judge_juehu(-1*t.state)?(console.log("\u654c\u65b9\u662f\u7edd\u6237\uff0c\u6211\u8981\u8d62\u4e86"),t.start_dazhao(o,-1*t.state)):t.jueSha():t.front_com.judge_juehu(-1*t.state)?(console.log("\u654c\u65b9\u662f\u7edd\u6237\uff0c\u6211\u8fd8\u6ca1\u8d62\u4e86"),t.start_dazhao(o,-1*t.state)):t.updateround();else if("guiyuan"==o)console.log("\u8f6e\u5230\u6211\u4e86\u5417\uff1a"+o,t.state),2!=t.win?t.jueSha():t.updateround();else if("chaoniu"==o)if(console.log("\u8f6e\u5230\u6211\u4e86\u5417"+o,t.state),2!=t.win){if((c=t.front_com.judge_chaoniu_zhen(-1*t.state)).dsPosList.length>0&&c.posList.length>0)return void t.start_dazhao(o,-1*t.state);t.jueSha()}else{var c;if((c=t.front_com.judge_chaoniu_zhen(-1*t.state)).dsPosList.length>0&&c.posList.length>0)return void t.start_dazhao(o,-1*t.state);t.updateround()}else"qixing"==o&&(2!=t.win?t.jueSha():t.updateround())},5)},t.prototype.updateround=function(e){var t=this;console.log("\u8fdb\u6765\u8f6c\u63621111111111",this.state);var a=this.getZhenFaName(this.state),n=this.getZhenFaName(-1*this.state);if("chaoniu"==a.zhenFaName&&"chaoniu"==n.zhenFaName);else if("chaoniu"==a.zhenFaName||"chaoniu"==n.zhenFaName){console.log("\u56de\u5408\u662f\u591a\u5c11:",this.state);for(var o=!0,i=0;i<15;i++)for(var c=0;c<15;c++)0==this.maze[i][c]&&0==this.front_com.chaoniu_judgePos[i][c]&&(o=!1);o&&(r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,null,"\u68cb\u76d8\u6bc1\u574f,\u65e0\u5b50\u53ef\u4e0b,\u56de\u5408\u8f6c\u6362"),"chaoniu"==r.GameDataStorage.gameStateData.userZhenFaName&&this.state==this.gameScene.userChess&&(this.state*=-1,this.myTurn=!1),"chaoniu"==r.GameDataStorage.gameStateData.dsZhenFaName&&this.state==-this.gameScene.userChess&&(this.state*=-1,this.myTurn=!0))}this.qixing_fenlie_v2=[];var h=!1;if(this.state==this.gameScene.userChess&&(h=!0),console.log("\u8fdb\u6765\u8f6c\u6362",h,this.state),this.gameScene.gameType==s.game_type.lianzhao&&(this.updateMyTurn(),0==this.bushu%2)){console.error("\u5e94\u8be5\u4e0d\u80fd\u70b9\u4e86"),this.istouch=!0;var u=this.myTurn;return this.myTurn=!1,void this.scheduleOnce(function(){t.gameScene.change_zhenfa(h),console.log("\u91cd\u65b0\u6062\u590d\u70b9\u51fb"),t.myTurn=u},.2)}this.updateMyTurn(),this.update_Whose_round(),this.updataState();var l=r.GameDataStorage.gameStateData.userZhenFaName,d=r.GameDataStorage.gameStateData.dsZhenFaName;this.gameScene.stopTime(),this.gameScene.startTime(this.state),console.log("\u8f6c\u6362\u4e86\u54e6","kunlong"==d||"kunlong"==l,this.state),this.state==this.gameScene.userChess?(this.myTurn=!0,this.istouch=!0):(this.myTurn=!1,this.istouch=!0),this.qixing_number=0,this.scheduleOnce(function(){if(h)"kunlong"==d&&(t.front_com.kunlong_pos=[],r.conMager.getInstance()._msgAtion.emit("del_kunlongkuang",t.state)),"meihua"==d&&t.front_com.ds_meihua_num>0?(r.conMager.getInstance().playAudioEff("nv/nvmeihuapo"),t.front_com.add_zhenfa_ani(d,"po",function(){r.conMager.getInstance()._msgAtion.emit("meihua_zhakai",t.state),t.scheduleOnce(function(){t.aiLuozi(e)},1)},!h)):t.aiLuozi(e);else{"kunlong"==l&&(t.front_com.kunlong_pos=[],r.conMager.getInstance()._msgAtion.emit("del_kunlongkuang",t.state)),t.istouch=!0,"meihua"==l&&t.front_com.user_meihua_num>0&&(r.conMager.getInstance().playAudioEff("nan/nanmeihuapo"),t.front_com.add_zhenfa_ani(l,"po",function(){r.conMager.getInstance()._msgAtion.emit("meihua_zhakai",t.state)},!h));for(var a=[],n=0;n<15;n++)for(var o=0;o<15;o++)0==t.maze[n][o]&&(t.front_com.kunlong_pos.length>0?0==t.front_com.kunlong_pos[n][o]&&a.push([n,o]):a.push([n,o]));a.length<1&&t.updateround()}},.6)},t.prototype.daZhaoCb=function(e,t){var a=this,n=r.GameDataStorage.getUser().userData.zhenFaMap[e].attr,o=!1,i=this.getZhenFaName(this.state),c=this.getZhenFaName(-1*this.state);if(console.log("\u5927\u62db\u64ad\u653e\u5b8c\u6bd5:",i.zhenFaName,e,this.dazhao_num),r.conMager.getInstance()._msgAtion.emit("startTimeDel"),r.conMager.getInstance()._msgAtion.emit("openSet"),2==n){var h=5;if("kedi"==e){var u=i.level;if(this.gameScene.gameType==s.game_type.lianzhao&&(u=this.state==this.gameScene.userChess?this.gameScene.user_level:this.gameScene.ds_level),("qixing"==i.zhenFaName||"qixing"==c.zhenFaName)&&this.qixing_number<=0){var l=-1*this.state;return l="qixing"==r.GameDataStorage.gameStateData.userZhenFaName?this.gameScene.userChess:-this.gameScene.userChess,void this.start_dazhao("qixing",l)}this.judge_num=u+5,h=this.judge_num,this.qipan_shaomiao(this.state,function(){if(console.log("\u514b\u654c\u5148\u673a\u653e\u5b8c\u4e86",a.win,i),2==a.win){if("wulei"==i.zhenFaName||"wulei"==c.zhenFaName)return void a.start_dazhao("wulei",a.state);a.updateround(.5)}else a.updataState(),a.jueSha()},h)}else if("bagua"==e){var d=function(){a.qipan_shaomiao(a.state,function(){2==a.win||0==a.win?a.qipan_shaomiao(-1*a.state,function(){var e=a.getZhenFaName(-1*a.state),t=e.zhenFaName,n=e.level;console.log("\u516b\u5366\u9635\u653e\u5b8c\u4e86",a.win,n+5,t,a.state),"kedi"==t?2!=a.win?a.qipan_shaomiao(-1*a.state,function(){console.log("\u516b\u5366\u9635\u540e\u7684\u514b\u654c\u5148\u673a",a.win,n+5),2==a.win?a.start_dazhao(t,-1*a.state):(a.updataState(),a.jueSha())},n+5):a.updateround(.5):"wulei"==t?a.start_dazhao(e.zhenFaName,-1*a.state):2==a.win?a.updateround(.5):(a.updataState(),a.jueSha())},h):(a.updataState(),a.jueSha())},h)};if("fenlie"==(_=(D=this.getZhenFaName(-1*this.state)).zhenFaName))this.start_dazhao(D.zhenFaName,this.state);else{if("dusha"==_)return this.dusha_number++,void this.start_dazhao(_,this.state);if("juehu"==_)return this.front_com.judge_juehu(this.state)&&0==this.juehu_number?(this.dusha_number++,void this.start_dazhao(_,this.state)):void d();if("qixing"==_)return void(this.qixing_number<=0?this.start_dazhao(_,this.state):d());d()}}else if("wulei"==e){var p=this.getZhenFaName(this.state).zhenFaName,g=5;"kedi"==p&&(this.state==this.gameScene.userChess?g+=r.GameDataStorage.gameStateData.ds_zhenfalevel:g+=r.GameDataStorage.getUser().userData.zhenFaMap.kedi.level);var _=(D=this.getZhenFaName(-1*this.state)).zhenFaName;if(console.log("\u4e94\u96f7\u653e\u5b8c\u4ee5\u540e",p,"dusha"==p,this.state),"fenlie"==_)return void this.start_dazhao(_,this.state);if("dusha"==p)return void this.start_dazhao(p,-1*this.state);if("guiyuan"==p)return(g=5-(u=r.GameDataStorage.getUser().userData.zhenFaMap[p].level))<=1&&(g=1),void this.qipan_shaomiao(this.state,function(){console.log("\u4e94\u96f7\u9635\u653e\u5b8c\u4e86",a.win,p),2==a.win?a.updateround(.5):a.start_dazhao(p,a.state)},g);if("qixing"==_&&this.qixing_number<=0)return void this.start_dazhao(_,this.state);this.qipan_shaomiao(this.state,function(){console.log("\u4e94\u96f7\u9635\u653e\u5b8c\u4e86",a.win,p),2==a.win?a.updateround(.5):(a.updataState(),a.jueSha())},g)}else if("fenlie"==e){var m=this.getZhenFaName(this.state),f=m.zhenFaName;console.log("\u5206\u88c2\u996d\u7897\u4ee5\u540e:",f,this.state,this.fenlie_number);var y=function(){if(2==a.win){var e=a.getZhenFaName(a.state).zhenFaName;"wulei"==e?a.wulei_to_fenlie<a.wulei_to_fenlie_max?(a.wulei_to_fenlie++,a.start_dazhao(e,a.state)):a.updateround(.5):"bagua"==e&&a.bagua_to_fenlie<a.bagua_to_fenlie_max?(a.bagua_to_fenlie++,a.start_dazhao(e,a.state)):a.updateround(.5)}else a.updataState(),a.jueSha()};if("wulei"==f||"bagua"==f)console.log("\u6b21\u6570"),0==this.fenlie_number?y():this.qipan_shaomiao(this.state,function(){y()},h),this.fenlie_number++;else if("kedi"==f)u=m.level,this.judge_num=u+5,this.qipan_shaomiao(this.state,function(){console.log("\u5206\u88c2\u514b\u654c\u80fd\u4e94\u5b50\u8fde\u73e0"),2==a.win?a.updateround(.5):a.qipan_shaomiao(a.state,function(){console.log("\u591a\u5c11\u554a",a.judge_num),2==a.win?a.start_dazhao(f,a.state):(a.updataState(),a.jueSha())},a.judge_num)},5);else if("dusha"==f){if(this.new_userChessPso.length>0)return void this.start_dazhao(m.zhenFaName,-1*this.state);this.qipan_shaomiao(this.state,function(){y()},h)}else if("juehu"==f){if(this.front_com.judge_juehu(-1*this.state)&&0==this.juehu_number)return this.juehu_number++,void this.start_dazhao(m.zhenFaName,-1*this.state);this.qipan_shaomiao(this.state,function(){y()},h)}else if("chaoniu"==f)this.fenlie_number++,(C=this.front_com.judge_chaoniu_zhen(-1*this.state)).dsPosList.length>0&&C.posList.length>0&&this.fenlie_number<2?this.start_dazhao(f,-1*this.state):this.qipan_shaomiao(this.state,function(){y()},h);else{if("qixing"==f)return this.fenlie_number++,void(this.qixing_number<=0?(l=-1*this.state,l="qixing"==r.GameDataStorage.gameStateData.userZhenFaName?this.gameScene.userChess:-this.gameScene.userChess,this.start_dazhao("qixing",l)):this.qipan_shaomiao(this.state,function(){y()},h));this.qipan_shaomiao(this.state,function(){y()},h)}}else if("dusha"==e){var v=-1*this.state,b=c.zhenFaName;"dusha"==b&&"dusha"!=i.zhenFaName&&(b=i.zhenFaName,v=this.state),console.error("\u5bf9\u7c73\u5a1c\u4ec0\u4e48\u96352222222:",b,t,this.state);var S=5;if(d=function(){"bagua"!=b&&(a.dusha_number=0),a.chaoniu_number=0,a.qipan_shaomiao(a.state,function(){console.log("\u6bd2\u6740\u9635\u653e\u5b8c\u4e86",a.win,b),2==a.win?(a.updateround(.5),"xueyuyingsha"==b&&r.conMager.getInstance()._msgAtion.emit("del_xueXian")):(a.updataState(),a.jueSha())},S)},"kedi"==b)this.state==this.gameScene.userChess?S+=r.GameDataStorage.gameStateData.ds_zhenfalevel:S+=r.GameDataStorage.getUser().userData.zhenFaMap.kedi.level,d();else if("wulei"==b)0==this.dusha_number?(this.dusha_number++,this.start_dazhao(b,v)):d();else if("bagua"==b){var N=!0;t?this.state!=this.gameScene.userChess&&(N=!1):this.state!=-1*this.gameScene.userChess&&(N=!1),console.log("\u5495\u5495\u5495\u5495\u5495\u5495\u8fc7\u8fc7\u8fc7",this.dusha_number,N),0==this.dusha_number&&N?(this.dusha_number++,this.start_dazhao(b,v)):(this.dusha_number=0,d())}else{if("juehu"==b)return this.front_com.judge_juehu(-v)&&0==this.juehu_number?(this.dusha_number++,void this.start_dazhao(b,-v)):void d();if("guiyuan"==b){u=r.GameDataStorage.getUser().userData.zhenFaMap[b].level,(S=5-u)<=1&&(S=1);var w=this.gameScene.userChess;t&&(w=-this.gameScene.userChess),this.qipan_shaomiao(w,function(){console.log("\u6bd2\u6740\u9635\u653e\u5b8c\u4e86",a.win,b),2==a.win?a.updateround(.5):a.start_dazhao(b,w)},S)}else if("chaoniu"==b){l=this.gameScene.userChess,t&&(l=-this.gameScene.userChess),console.log("\u6bd2\u6740\u653e\u5b8c\u7684\u8d85\u725b\u662f\u5426\u53ef\u4ee5\u91ca\u653e:",l,this.dusha_number);var C=this.front_com.judge_chaoniu_zhen(l);0==this.chaoniu_number&&C.dsPosList.length>0&&C.posList.length>0?(this.chaoniu_number++,this.start_dazhao(b,l)):d()}else if("qixing"==b){if(this.qixing_number<=0)return l=-1*this.state,l="qixing"==r.GameDataStorage.gameStateData.userZhenFaName?this.gameScene.userChess:-this.gameScene.userChess,this.myTurn=!1,void this.start_dazhao(b,l)}else d()}}else if("juehu"==e){var j=c.zhenFaName;if(v=-1*this.state,j=t?r.GameDataStorage.gameStateData.dsZhenFaName:r.GameDataStorage.gameStateData.userZhenFaName,console.error("\u5bf9\u7c73\u5a1c\u4ec0\u4e48\u96352222222\u7edd\u6237:",j,t,this.state),d=function(){a.juehu_number=0,a.qipan_shaomiao(a.state,function(){console.log("\u7edd\u6237\u9635\u653e\u5b8c\u4e8611111",a.win,j),2==a.win?a.qipan_shaomiao(-a.state,function(){console.log("\u7edd\u6237\u9635\u653e\u5b8c\u4e862222",a.win,j),2==a.win?(a.updateround(.5),"xueyuyingsha"==j&&r.conMager.getInstance()._msgAtion.emit("del_xueXian")):(a.updataState(),a.jueSha())},5):a.jueSha()},5)},"fenlie"==j){var z=0;return r.GameDataStorage.gameStateData.dsZhenFaName==j&&(z=-1*this.gameScene.userChess),r.GameDataStorage.gameStateData.userZhenFaName==j&&(z=this.gameScene.userChess),void this.start_dazhao(j,z)}if("wulei"==j)this.start_dazhao(j,-this.state);else if("qixing"==j){if(this.qixing_number<=0)return l=-1*this.state,l="qixing"==r.GameDataStorage.gameStateData.userZhenFaName?this.gameScene.userChess:-this.gameScene.userChess,void this.start_dazhao(j,l)}else d()}else if("guiyuan"==e){var I=this.getZhenFaName(this.state).zhenFaName;if(u=r.GameDataStorage.getUser().userData.zhenFaMap[e].level,t||(u=r.GameDataStorage.gameStateData.ds_zhenfalevel),(h=5-u)<=1&&(h=1),"wulei"==I)return this.win=2,void this.start_dazhao(I,this.state);if("qixing"==I&&(this.win=2,this.qixing_number<=0))return l=-1*this.state,l="qixing"==r.GameDataStorage.gameStateData.userZhenFaName?this.gameScene.userChess:-this.gameScene.userChess,void this.start_dazhao(I,l);console.log("\u6570\u7ec4\u72b6\u6001:",h,this.state),this.qipan_shaomiao(this.state,function(){2==a.win?a.updateround(.5):(a.updataState(),a.jueSha())},h)}else if("chaoniu"==e){var D,M=this.getZhenFaName(this.state).zhenFaName,k=(D=this.getZhenFaName(-1*this.state)).zhenFaName,A=5;if("kedi"==M&&(this.state==this.gameScene.userChess?A+=r.GameDataStorage.gameStateData.ds_zhenfalevel:A+=r.GameDataStorage.getUser().userData.zhenFaMap.kedi.level),this.chaoniu_number++,console.log("\u8d85\u725b\u653e\u5b8c\u4ee5\u540e",k,"dusha"==k,this.state),"fenlie"==k)return void this.start_dazhao(k,this.state);if("dusha"==k||"dusha"==M)return l=this.gameScene.userChess,t&&(l=-this.gameScene.userChess),console.log("\u4e3a\u54c8\u54c8\u53d1",l),void this.start_dazhao("dusha",l);if("guiyuan"==k)return(A=5-(u=r.GameDataStorage.getUser().userData.zhenFaMap[M].level))<=1&&(A=1),void this.qipan_shaomiao(this.state,function(){console.log("\u8d85\u725b\u9635\u653e\u5b8c\u4e86",a.win,M),2==a.win?a.updateround(.5):a.start_dazhao(M,a.state)},A);if("bagua"==M)return void this.qipan_shaomiao(this.state,function(){console.log("\u8d85\u725b\u9635\u653e\u5b8c\u4e86111111111",a.win,M),2==a.win?a.start_dazhao(M,a.state):a.jueSha()},A);if("wulei"==k||"wulei"==M)return(A=5-(u=r.GameDataStorage.getUser().userData.zhenFaMap[M].level))<=1&&(A=1),void this.qipan_shaomiao(this.state,function(){if(console.log("\u8d85\u725b\u9635\u653e\u5b8c\u4e86111111111",a.win,M),2==a.win){var e=-a.gameScene.userChess;t&&(e=a.gameScene.userChess),a.start_dazhao("wulei",e)}else a.jueSha()},A);if(("qixing"==k||"qixing"==M)&&this.qixing_number<=0)return console.log("\u6211\u6709\u53ef\u4ee5\u653e\u4e86"),l=-1*this.state,l="qixing"==r.GameDataStorage.gameStateData.userZhenFaName?this.gameScene.userChess:-this.gameScene.userChess,void this.start_dazhao("qixing",l);this.qipan_shaomiao(this.state,function(){console.log("\u8d85\u725b\u9635\u653e\u5b8c\u4e86",a.win,k),2==a.win?(a.updateround(.5),"xueyuyingsha"==k&&r.conMager.getInstance()._msgAtion.emit("del_xueXian")):(a.updataState(),a.jueSha())},A)}else if("qixing"==e){console.log("\u4e03\u661f\u9635\u91ca\u653e\u5b8c\u6210",this.state),this.qixing_number+=1;var P=5;if(d=function(){a.qipan_shaomiao(a.state,function(){2==a.win?a.qipan_shaomiao(-a.state,function(){2==a.win?a.updateround(.5):(a.updataState(),a.jueSha())},P):0==a.win?a.qipan_shaomiao(-a.state,function(){2==a.win?a.updateround(.5):(a.updataState(),a.jueSha())},5):a.jueSha()},P)},"fenlie"==c.zhenFaName||"fenlie"==i.zhenFaName)l=0,l="fenlie"==r.GameDataStorage.gameStateData.userZhenFaName?this.gameScene.userChess:-this.gameScene.userChess,this.qixing_fenlie_v2.length>0?this.start_dazhao("fenlie",l):d();else if("guiyuan"==c.zhenFaName||"guiyuan"==i.zhenFaName){u=r.GameDataStorage.getUser().userData.zhenFaMap.guiyuan.level;var O=this.gameScene.userChess;t&&(u=r.GameDataStorage.gameStateData.ds_zhenfalevel,O=-this.gameScene.userChess),(P=5-u)<=1&&(P=1),this.qipan_shaomiao(O,function(){2==a.win?a.qipan_shaomiao(-O,function(){2==a.win?a.updateround(.5):(a.updataState(),a.jueSha())},5):0==a.win?a.qipan_shaomiao(-O,function(){2==a.win?a.updateround(.5):(a.updataState(),a.jueSha())},5):a.jueSha()},P)}else if("kedi"==c.zhenFaName||"kedi"==i.zhenFaName){u=r.GameDataStorage.getUser().userData.zhenFaMap.kedi.level;var B=this.gameScene.userChess;t&&(console.log("\u5341\u842c\u7d1a\u653e\u7684\u554a:"),u=r.GameDataStorage.gameStateData.ds_zhenfalevel,B=-this.gameScene.userChess),P=5+u,console.log("\u9700\u8981\u7684\u5230\u5e95\u662f\u591a\u5c11\u53f7f",P,B),this.qipan_shaomiao(B,function(){2==a.win?a.qipan_shaomiao(-B,function(){2==a.win?a.updateround(.5):(a.updataState(),a.jueSha())},P):0==a.win?a.qipan_shaomiao(-B,function(){2==a.win?a.updateround(.5):(a.updataState(),a.jueSha())},P):a.jueSha()},5)}else d()}}else if(1==n){if(console.log("\u4e3b\u52a8\u6280\u80fd\u653e\u5b8c\u4e86",this.state),"dusha"==i.zhenFaName){if(console.log("\u4e3b\u52a8\u6280\u80fd\u653e\u5b8c\u4e86,\u8fdb\u6765\u6bd2\u6740"),this.new_userChessPso.length>0)return void this.start_dazhao(i.zhenFaName,-1*this.state)}else if("juehu"==i.zhenFaName){if(this.front_com.judge_juehu(-1*this.state)&&0==this.juehu_number)return this.juehu_number+=1,void this.start_dazhao(i.zhenFaName,-1*this.state)}else if("chaoniu"==i.zhenFaName){if((C=this.front_com.judge_chaoniu_zhen(-1*this.state)).dsPosList.length>0&&C.posList.length>0)return void this.start_dazhao(i.zhenFaName,-1*this.state)}else if("qixing"==i.zhenFaName&&this.qixing_number<=0)return l=-1*this.state,l="qixing"==r.GameDataStorage.gameStateData.userZhenFaName?this.gameScene.userChess:-this.gameScene.userChess,void this.start_dazhao("qixing",l);if("xueyuyingsha"==e){var E=this.front_com.xueyuChessPosList.length;if(console.log("\u4e3b\u52a8\u6280\u80fd\u653e\u5b8c\u4e8611111111",E,i.level,i.zhenFaName),"wulei"==i.zhenFaName||"wulei"==c.zhenFaName)return r.conMager.getInstance()._msgAtion.emit("del_xueXian"),void this.start_dazhao("wulei",this.state);if("bagua"==i.zhenFaName)return r.conMager.getInstance()._msgAtion.emit("del_xueXian"),void this.start_dazhao("bagua",this.state);if("kedi"==i.zhenFaName)this.state==this.gameScene.userChess&&(o=!0),u=i.level,E>=5&&E>=u+5?this.front_com.add_zhenfa_ani("pokedi","animation",function(){a.chess_index=a.front_com.xueyuChessPosList,a.win=a.state,a.is_xueyulianzhu=!0,a.jueSha()},!o):this.dz_judge(e);else if("dusha"==i.zhenFaName){if(r.conMager.getInstance()._msgAtion.emit("del_xueXian"),this.new_userChessPso.length>0)return void this.start_dazhao(i.zhenFaName,-1*this.state);this.chess_index=this.front_com.xueyuChessPosList,this.win=this.state,this.is_xueyulianzhu=!0,this.jueSha()}else"qixing"==i.zhenFaName?this.front_com.xueyuChessPosList.length>=5?(this.chess_index=this.front_com.xueyuChessPosList,this.win=this.state,this.is_xueyulianzhu=!0,this.jueSha()):this.qipan_shaomiao(this.state,function(){2==a.win?a.start_dazhao(i.zhenFaName,-1*a.state):(a.updataState(),a.jueSha())},this.judge_num):E>=5?(this.chess_index=this.front_com.xueyuChessPosList,this.win=this.state,this.is_xueyulianzhu=!0,this.jueSha()):this.dz_judge(e)}else{if("wulei"==i.zhenFaName||"wulei"==c.zhenFaName)return void this.start_dazhao(i.zhenFaName,this.state);if("qixing"==i.zhenFaName)return void this.qipan_shaomiao(this.state,function(){2==a.win?a.start_dazhao(i.zhenFaName,-1*a.state):(a.updataState(),a.jueSha())},this.judge_num);this.dz_judge(e)}}},t.prototype.meihuazhencb=function(e){var t=this,a=this.getZhenFaName(this.state);console.log("\u6885\u82b1\u56de\u8c03\u8fdb\u6765\u4e86\u5417",e,a),this.qipan_shaomiao(e,function(){console.log("\u6885\u82b1\u56de\u8c03\u8fdb\u6765\u4e86\u5417222222222222",t.win),2!=t.win&&("kedi"==a.zhenFaName?(t.judge_num=a.level+5,t.qipan_shaomiao(e,function(){console.log("\u6885\u82b1\u56de\u8c03\u8fdb\u6765\u4e86\u54173333333333333",t.win),2!=t.win&&t.jueSha()},t.judge_num)):t.jueSha())})},t.prototype.getZhenFaName=function(e){var t="wanning",a=!1,n=1;return e==this.gameScene.userChess?(a=!0,t=r.GameDataStorage.gameStateData.dsZhenFaName,n=r.GameDataStorage.gameStateData.ds_zhenfalevel):(t=r.GameDataStorage.gameStateData.userZhenFaName,n=r.GameDataStorage.getUser().userData.zhenFaMap[t].level),{zhenFaName:t,is_user:a,level:n}},t.prototype.dazhao_moveInChess=function(e,t,a,n){var o=Math.floor(e/this.block),i=Math.floor(t/this.block);if(cc.v2(o,i),!(o>14||i>14||o<0||i<0)&&0==this.maze[o][i]){if(n&&"meihua"==n){var s;s=a>0?2:-2,this.maze[o][i]=s}else this.maze[o][i]=a;var r=o+15*i;this.chess_pos[r]=[o,i],this.newY=t,this.newx=e,this.sum+=1,this.AITurn.addPos(o,i,a),this.gameScene.moveInChess(e,t,a,!0)}},t.prototype.meihuaZhenLuozi=function(e,t,a){var n=e,o=t;if(e=Math.floor(e*this.block),t=Math.floor(t*this.block),!(n>14||o>14||n<0||o<0)){var i;a>0?2:-2,i=a,this.maze[n][o]=i;var s=n+15*o;this.chess_pos[s]=[n,o],this.newY=t,this.newx=e,this.sum+=1,this.AITurn.addPos(n,o,a),this.gameScene.moveInChess(e,t,a,!0)}},t.prototype.qipan_shaomiao=function(e,t,a){if(!this.juesha_judge)if(a||(a=5),this.win=2,2==this.gameScene.gameType||this.gameScene.gameType==s.game_type.lianzhao)for(var n=0;n<15;n++)for(var o=0;o<15;o++)for(var i=0;i<4;i++){if(this.checkWin(n,o,e,this.checkMode[i],a))return t();if(14==n&&14==o&&3==i)return t()}else for(i=0;i<4;i++){if(this.checkWin(this.newx/46,this.newY/46,e,this.checkMode[i],a))return t();if(3==i)return t()}},t.prototype.checkWin=function(e,t,a,n,o){if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.chess_index=[];var i=[e,t];this.chess_index.push(i);for(var s=1,r=1;r<15;r++)if(this.maze[e+r*n[0]]){var c=e+r*n[0],h=t+r*n[1];if(this.maze[c][h]!=a)break;s++;var u=[c,h];this.chess_index.push(u)}for(var l=1;l<15;l++)if(this.maze[e-l*n[0]]){if(c=e-l*n[0],h=t-l*n[1],this.maze[c][h]!=a)break;s++;var d=[c,h];this.chess_index.push(d)}return s>=o?(this.win=2==a?1:-2==a?-1:a,this.judge(),!0):(this.sum>=225&&(this.win=0),!1)}},t.prototype.judge=function(){2==this.gameScene.gameType||this.gameScene.gameType==s.game_type.lianzhao||2!=this.win&&this.jueSha()},t.prototype.jueSha=function(){var e=this;if(1!=this.juesha_judge)if(r.conMager.getInstance()._msgAtion.emit("closeAllSetBtn"),r.conMager.getInstance()._msgAtion.emit("del_kunlongkuang",this.state),r.conMager.getInstance()._msgAtion.emit("del_kunlongkuang",-this.state),this.juesha_judge=!0,this.ai_qiuhe_judge=!1,this.gameScene.count_down.active=!1,this.gameScene.stopTime(),0!=this.win){var t="nv/nv";this.win==this.gameScene.userChess&&(t="nan/nan"),this.gameScene.node.getChildByName("mask").active=!0,this.myTurn=!1;var a=this.chess_index.length;this.scheduleOnce(function(){var n=.1;a>20&&(n=2/a);for(var o=function(o){var i=e.chess_index[o],s=i[0]+15*i[1];e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff("btn1");var n=e.chess_map[s];n.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.callFunc(function(){n.getChildByName("guang").active=!0,o==a-1&&(e.is_xueyulianzhu?r.conMager.getInstance().getPoolNode(r.KEY.poolName.lianzhu,cc.find("Cnavas"),{num:a,callBack:function(){e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(t+"juesha")},.3),r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}})}}):(e.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(t+"juesha")},.3),r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){e.gameScene.gameOver()}})))})))},o*n)},i=0;i<a;i++)o(i)},.5)}else this.gameScene.gameOver()},t.prototype.addListenner=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.removeListennner=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.user_huiqi_fun=function(){if(console.log("\u6765\u6094\u68cb",this.state,this.gameScene.gameType),6==this.gameScene.gameType){this.state=this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;if(this.new_userChessPso.length<=0)return;return this.gameScene.hongDian.active=!1,void this.huiqi_destory(this.new_userChessPso,this.state)}3==this.gameScene.gameType?this.huiqiJudge?(this.huiqi_destory(this.new_userChessPso),this.updataState(),this.gameScene.startTime(this.state)):r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u8bf7\u5148\u843d\u5b50!"):(this.state=this.gameScene.userChess,e=this.new_aiChessPso.length,t=this.new_userChessPso.length,console.log("\u6094\u68cb\u6570\u7ec4\u957f\u5ea6:  ai:",e+"__\u73a9\u5bb6 :"+t),this.huiqi_destory(this.new_userChessPso,this.state),e>t?this.huiqi_destory(this.new_aiChessPso,-1*this.state):e==t&&-1==this.gameScene.userChess&&this.huiqi_destory(this.new_aiChessPso,-1*this.state)),this.gameScene.hongDian.active=!1,this.new_userChessPso.length<=0&&r.conMager.getInstance()._msgAtion.emit("closeHuiqi")},t.prototype.ds_huiqi_fun=function(){console.log("AI\u6765\u6094\u68cb",this.state),this.state=-1*this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;this.huiqi_destory(this.new_aiChessPso,this.state),t>e?this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess):e==t&&-1!=this.gameScene.userChess&&this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess),this.ai_huiqi-=1,this.gameScene.startTime(this.state),this.myTurn=!1,this.ai_huiqi_judge=!0,this.gameScene.hongDian.active=!1,this.aiLuozi()},t.prototype.huiqi_destory=function(e,t){var a=e[e.length-1],n=a[0]+15*a[1],o=this.chess_map[n];this.chess_map[n]=null,this.maze[a[0]][a[1]]=0,e.splice(e.length-1),this.chess_pos[n]=[],o.destroy(),this.AITurn.delPos(a[0],a[1],-1*t)},i([u],t)}(cc.Component));a.dazhao_GameBoard=l,cc._RF.pop()},{"../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../Piece":"Piece"}],dazhao_chessAi:[function(e,t,a){"use strict";cc._RF.push(t,"ee6c5FiAbVFfrHlSFOSPyIG","dazhao_chessAi");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),e("../../../KEY"),e("../../../SSSGF/dataController/DATA");var s=e("../../../SSSGF/ssscgf"),r=e("./dazhao_GameBoard"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t.record=[],t.count=0,t.wins=[],t.myWin=[],t.computerWin=[],t.RightRate=1,t.stateNumber=1,t.is_diaoxian=!1,t.is_new=!1,t.huiqi=!1,t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this),s.conMager.getInstance()._msgAtion.on("user_huiqi_ai",this.user_huiqi_ai,this),s.conMager.getInstance()._msgAtion.on("user_qiuhe_ai",this.user_qiuhe_ai,this),s.conMager.getInstance()._msgAtion.on("all_checkWin",this.all_checkWin,this)},t.prototype.user_huiqi_ai=function(e){this.board.juesha_judge?e&&e(!1):s.NumberUtil.randomNum(1,10)>3?e&&e(!0):(this.is_new=!0,e&&e(!1))},t.prototype.user_qiuhe_ai=function(e){var t=this.jushi_judge();console.log("\u6c42\u548c\u7684\u5206\u6570:",t),this.board.juesha_judge?e(!1):this.board.sum>=180?e(!0):t.myScore_1>t.computerScore_1?e(!0):(t.myScore_1,t.computerScore_1,e(!1))},t.prototype.jushi_judge=function(){for(var e=[],t=[],a=0,n=0,o=0;o<15;o++){e[o]=[],t[o]=[];for(var i=0;i<15;i++)e[o][i]=0,t[o][i]=0}for(o=0;o<15;o++)for(i=0;i<15;i++)if(0!=this.board.maze[o][i])for(var s=0;s<this.count;s++)this.wins[o][i][s]&&(1==this.myWin[s]?(e[o][i]+=200,a+=200):2==this.myWin[s]?(e[o][i]+=400,a+=400):3==this.myWin[s]?(e[o][i]+=2e3,a+=2e3):4==this.myWin[s]&&(e[o][i]+=1e4,a+=1e4),1==this.computerWin[s]?(t[o][i]+=220,n+=200):2==this.computerWin[s]?(t[o][i]+=420,n+=400):3==this.computerWin[s]?(t[o][i]+=2100,n+=2e3):4==this.computerWin[s]&&(t[o][i]+=2e4,n+=1e4));return{myScore_1:a,computerScore_1:n}},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}for(var a=0;a<15;a++){this.wins[a]=[];for(var n=0;n<15;n++)this.wins[a][n]=[]}for(a=0;a<15;a++)for(n=0;n<11;n++){for(var o=0;o<5;o++)this.wins[a][n+o][this.count]=!0;this.count++}for(a=0;a<15;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[n+o][a][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[a+o][n+o][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=14;n>3;n--){for(o=0;o<5;o++)this.wins[a+o][n-o][this.count]=!0;this.count++}for(a=0;a<this.count;a++)this.myWin[a]=0,this.computerWin[a]=0},t.prototype.AIPosition=function(e,t,a,n){var o=this;this.stateCheck(function(){if(e/=o.board.block,t/=o.board.block,o.newX=e,o.newY=t,o.huiqi=!1,n&&(o.huiqi=n),5!=s.GameDataStorage.gameStateData.gameType&&o.board.maze[e][t]==o.board.gameScene.userChess)for(var i=0;i<o.count;i++)o.wins[e][t][i]&&(o.myWin[i]++,o.computerWin[i]=6);var r=o.computerAI();e=r.x,t=r.y,a&&a(cc.v2(e*o.board.block,t*o.board.block))})},t.prototype.stateCheck=function(e){return s.NumberUtil.randomNum(1,3),s.NumberUtil.randomNum(0,100),this.stateNumber,e()},t.prototype.addPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]--):(this.computerWin[n]++,this.myWin[n]--))},t.prototype.delPos=function(e,t){for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.board.gameScene.userChess,this.myWin[a]--,this.computerWin[a]--)},t.prototype.computerAI=function(){this.RightRate=.9;for(var e=[],t=[],a=0,n=0,o=0,i=0;i<15;i++){e[i]=[],t[i]=[];for(var r=0;r<15;r++)e[i][r]=0,t[i][r]=0}var c,h=[],u=this.board.front_com.kunlong_pos,l=this.board.front_com.chaoniu_judgePos,d=(this.board.getZhenFaName(this.board.state),this.board.getZhenFaName(-this.board.state),s.GameDataStorage.gameStateData.userZhenFaName),p=s.GameDataStorage.gameStateData.dsZhenFaName;if("qixing"==p&&this.board.front_com.qixingOpen){if(n=s.NumberUtil.randomNum(0,14),o=s.NumberUtil.randomNum(0,14),this.board.maze[n][o]!=-this.board.gameScene.userChess)for(var g=0;g<this.count;g++)this.wins[n][o][g]&&(this.computerWin[g]++,this.myWin[g]=6)}else for(i=0;i<15;i++)for(r=0;r<15;r++)if(0==this.board.maze[i][r]){for(h.push([i,r]),g=0;g<this.count;g++)this.wins[i][r][g]&&(1==this.myWin[g]?e[i][r]+=200:2==this.myWin[g]?e[i][r]+=400:3==this.myWin[g]?e[i][r]+=2e3:4==this.myWin[g]&&(e[i][r]+=1e4),1==this.computerWin[g]?t[i][r]+=220:2==this.computerWin[g]?t[i][r]+=420:3==this.computerWin[g]?t[i][r]+=2100:4==this.computerWin[g]&&(t[i][r]+=2e4));e[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=e[i][r],n=i,o=r):e[i][r]==a&&t[i][r]>t[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r),t[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=t[i][r],n=i,o=r):t[i][r]==a&&e[i][r]>e[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r)}if(this.huiqi&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),"kunlong"==d&&u.length>0){var _=[];for(a=0,n=0,o=0,i=0;i<15;i++)for(r=0;r<15;r++)0==u[i][r]&&(_.push([i,r]),e[i][r]>a?(a=e[i][r],n=i,o=r):e[i][r]==a&&t[i][r]>t[n][o]&&(n=i,o=r),t[i][r]>a?(a=t[i][r],n=i,o=r):t[i][r]==a&&e[i][r]>e[n][o]&&(n=i,o=r));0==n&&0==o&&(n=_[c=s.NumberUtil.randomNum(0,_.length-1)][0],o=_[c][1]),"qixing"==p&&this.board.front_com.qixingOpen&&(n=_[c=s.NumberUtil.randomNum(0,_.length-1)][0],o=_[c][1])}if("chaoniu"==d&&l.length>0&&"chaoniu"!=s.GameDataStorage.gameStateData.dsZhenFaName){for(_=[],a=0,n=0,o=0,i=0;i<15;i++)for(r=0;r<15;r++)0==l[i][r]&&(_.push([i,r]),e[i][r]>a?(a=e[i][r],n=i,o=r):e[i][r]==a&&t[i][r]>t[n][o]&&(n=i,o=r),t[i][r]>a?(a=t[i][r],n=i,o=r):t[i][r]==a&&e[i][r]>e[n][o]&&(n=i,o=r));0==n&&0==o&&(n=_[c=s.NumberUtil.randomNum(0,_.length-1)][0],o=_[c][1]),"qixing"==p&&this.board.front_com.qixingOpen&&(n=_[c=s.NumberUtil.randomNum(0,_.length-1)][0],o=_[c][1])}"qixing"==p||this.board.front_com.qixingOpen||(0==n&&0==o&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),0!=this.board.maze[n][o]&&(n=h[c=s.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]));for(g=0;g<this.count;g++)this.wins[n][o][g]&&(this.computerWin[g]++,this.myWin[g]=6);return cc.v2(n,o)},t.prototype.checkWin=function(e,t){for(var a=e-1-1,n=t+1,o=0;o<9;o++)if(a+=1,o%3==0&&0!=o&&(a=e-1,n-=1),!(a>14||a<0||n>14||n<0)&&this.board.maze[a][n]==this.board.gameScene.userChess)for(var i=0;i<this.count;i++)this.wins[a][n][i]&&(this.myWin[i]++,this.computerWin[i]=6)},t.prototype.all_checkWin=function(){for(var e=0;e<15;e++)for(var t=0;t<15;t++)if(this.board.maze[e][t]==this.board.gameScene.userChess)for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.myWin[a]++,this.computerWin[a]=6)},i([u(r.dazhao_GameBoard)],t.prototype,"board",void 0),i([h],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../../../KEY":"KEY","../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","./dazhao_GameBoard":"dazhao_GameBoard"}],dazhao_ds:[function(e,t,a){"use strict";cc._RF.push(t,"e6e42w5w/tCTY+5uSiRw9bS","dazhao_ds");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){},i([r],t)}(cc.Component));a.default=c,cc._RF.pop()},{}],dazhao_front:[function(e,t,a){"use strict";cc._RF.push(t,"1faaajeZ2JB77UubdxJbpdO","dazhao_front");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../KEY"),r=e("../../../SSSGF/dataController/DATA"),c=e("../../../SSSGF/ssscgf"),h=e("../../../utils/commonFunction"),u=e("./dazhao_GameBoard"),l=cc._decorator,d=l.ccclass,p=l.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.whose_round=0,t.is_over=!1,t.user_level=0,t.state=0,t.zhenFaName="",t.zhenFaName_pare="",t.cb=null,t.is_user=!1,t.qixingTime=0,t.qixingOpen=!1,t.qixingState=0,t.qixingmyTurn=!1,t.qixingistouch=!1,t.chaoniu_judgePos=[],t.chaoniu_pos=[],t.chaoniuChess=null,t.juehu_poslist=[],t.juehu_posIndex=[],t.kunlong_pos_x=[],t.kunlong_pos_y=[],t.kunlong_pos=[],t.dusha_pos_array=null,t.meihua_chess_poslist=[],t.user_meihua_num=0,t.ds_meihua_num=0,t.xueyuChessPosList=[],t.xueyuChess_num=0,t.xueyuChess_num_1=0,t.xueyuChess_num_2=0,t.qipanArray=[],t.xueYuIsOver=!1,t.xueYuTime=2,t.checkMode=[[1,0],[0,1]],t.fenlie_max=2,t.fenlie_cishu=0,t.fenlie_first_max=4,t.fenlie_second_max=2,t.fenlie_callback=!1,t.donghua_run=!1,t.yanchi=0,t.bagua_new_posarray=[],t.wulei_new_posarray=[],t}return o(t,e),t.prototype.init_level=function(){var e=c.GameDataStorage.gameStateData.userZhenFaName;return this.user_level=c.GameDataStorage.getUser().userData.zhenFaMap[e].level,this.board.gameScene.gameType==r.game_type.lianzhao&&(this.user_level=c.GameDataStorage.gameStateData.userZhenFaLevel),console.log("\u6280\u80fd\u7b49\u7ea7\u662f",this.user_level),this.user_level},t.prototype.onLoad=function(){this.board.initfront(this)},t.prototype.initData=function(){this.juehu_poslist=[],this.juehu_posIndex=[],this.kunlong_pos_x=[],this.kunlong_pos_y=[],this.kunlong_pos=[],this.dusha_pos_array=[],this.meihua_chess_poslist=[],this.user_meihua_num=0,this.ds_meihua_num=0,this.xueyuChessPosList=[],this.xueyuChess_num=0,this.xueyuChess_num_1=0,this.xueyuChess_num_2=0,this.qipanArray=[],this.xueYuIsOver=!1,this.xueYuTime=2,this.fenlie_max=2,this.fenlie_cishu=0,this.fenlie_first_max=4,this.fenlie_second_max=2,this.fenlie_callback=!1,this.donghua_run=!1,this.yanchi=0,this.bagua_new_posarray=[],this.wulei_new_posarray=[]},t.prototype.showFront=function(e,t,a){var n=this;this.cb=a,this.is_over=!0,this.state=e,this.scheduleOnce(function(){n.zhenFaName=t;var e="\u4e07\u5b81\u9635\u6cd5",a=!1,o=null,i=0,r=["nan","nv"],h=n.board.gameScene.node.getChildByName("ds_duihua"),u=n.board.gameScene.node.getChildByName("user_duihua"),l=[u,h];if("fenlie"!=t&&(n.board.yilun_qizi_v2=[]),n.state!=n.board.gameScene.userChess?i=1:(a=!0,i=0),"fenlie"==n.zhenFaName&&(0==i?i=1:(i=1)&&(i=0)),console.log("\u9078\u4e2d\u7684\u5c0d\u8a71\u6846\u4e82\u641e:",i,n.state),2==c.GameDataStorage.getUser().userData.zhenFaMap[t].attr&&(i=0==i?1:0,a=!a),"wanning"==t)e="\u4e07\u5b81\u9635\u6cd5",n.add_zhenfa_ani(t,"animation",n.wanning_zhen.bind(n),a);else if("bagua"==t)e="\u516b\u5366\u9635",n.add_zhenfa_ani(t,"animation",n.bagua_zhen.bind(n),a);else if("sijiao"==t)e="\u56db\u65b9\u9635",n.add_zhenfa_ani(t,"animation",n.sijiao_zhen.bind(n),a);else if("kedi"==t)e="\u514b\u654c\u5148\u673a",n.add_zhenfa_ani(t,"animation",function(){n.zhenFaCallback()},a);else if("wulei"==t){console.log("\u8981\u91ca\u653e\u4e94\u96f7\u9635\u6cd5"),e="\u4e94\u96f7\u9635";var d=cc.repeatForever(cc.sequence(cc.moveBy(.02,cc.v2(4,4)),cc.moveBy(.04,cc.v2(-8,-8)),cc.moveBy(.02,cc.v2(4,4)))),p=n.node.parent;n.scheduleOnce(function(){c.conMager.getInstance().playAudioEff("wulei/lei"),p.runAction(d),n.scheduleOnce(function(){p.stopAllActions(),p.setPosition(0,0)},.5)},1.3),n.add_zhenfa_ani(t,"animation",function(){n.wulei_zhen()},a)}else if("fenlie"==t)e="\u5206\u88c2\u9635",n.add_zhenfa_ani(t,"animation",function(){n.fenlie_max=n.init_level(),n.state!=n.board.gameScene.userChess&&(n.fenlie_max=c.GameDataStorage.gameStateData.ds_zhenfalevel),n.fenlie_callback=!1,n.donghua_run=!1,n.yanchi=0,n.fenlie_cishu=0,n.fenlie_zhen()},a);else if("xueyuyingsha"==t)e="\u8840\u72f1\u5f71\u6740\u9635",n.add_zhenfa_ani(t,"animation",n.xueyuyingsha_zhen.bind(n),a);else if("meihua"==t)e="\u6885\u82b1\u9635",n.add_zhenfa_ani(t,"ji",n.meihua_zhen_bozhong.bind(n),a);else if("dusha"==t){if(e="\u6bd2\u6740\u9635",i=0==i?1:0,a=!a,n.dusha_check_pos(),!(n.dusha_pos_array.length>0))return void n.zhenFaCallback();n.scheduleOnce(function(){var e=n.dusha_pos_array[0],t=e[0]+15*e[1];console.log("\u6bd2\u6740\u7b2c\u4e00\u4e2a\u5b50\u7684\u7eff\u8272",e,t),n.board.chess_map[t].getChildByName("chess").getChildByName("lvzi_dusha").active=!0},2.2),n.add_zhenfa_ani(t,"animation",n.dusha_zhen.bind(n),a)}else if("kunlong"==t)e="\u56f0\u9f99\u9635",n.add_zhenfa_ani(t,"animation",function(){c.conMager.getInstance().playAudioEff("longjiao"),n.kunlong_zhen()},a);else if("juehu"==t)i=0==i?1:0,a=!a,e="\u7edd\u6237\u9635",n.judge_juehu(n.state)?n.add_zhenfa_ani(t,"animation",function(){n.juehu_zhen()},a):n.zhenFaCallback();else if("guiyuan"==t)i=0==i?1:0,a=!a,e="\u5f52\u5143\u9635",n.add_zhenfa_ani(t,"animation",function(){n.zhenFaCallback()},a);else if("chaoniu"==t){i=0==i?1:0,a=!a,e="\u8d85\u725b\u9635";var g=n.judge_chaoniu_zhen(n.state);g.dsPosList.length>0&&g.posList.length>0?(n.scheduleOnce(function(){c.conMager.getInstance().playAudioEff("niujiao")},1),n.add_zhenfa_ani(t,"animation",n.chaoniu_zhen.bind(n),a)):n.zhenFaCallback()}else"qixing"==t&&(i=0==i?1:0,a=!a,e="\u4e03\u661f\u9635",n.add_zhenfa_ani(t,"animation",n.qixingzhen.bind(n),a));n.is_user=a,(o=l[i])==u&&n.board.gameScene.count_down.y<0&&(n.board.gameScene.count_down.opacity=0),o==h&&n.board.gameScene.count_down.y>0&&(n.board.gameScene.count_down.opacity=0),o.getChildByName("str").getComponent(cc.Label).string=e,o.active=!0,c.conMager.getInstance().playAudioEff(s.KEY.audioName.juesha),n.scheduleOnce(function(){c.conMager.getInstance().playAudioEff(r[i]+"/"+r[i]+t),n.scheduleOnce(function(){o.getChildByName("str").getComponent(cc.Label).string="",o.active=!1,n.board.gameScene.count_down.opacity=255},1)},1)},.3)},t.prototype.add_zhenfa_ani=function(e,t,a,n){c.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.node.parent,{fileName:e,ani_name:t,cb:a,is_user:n})},t.prototype.qixingzhen=function(){this.qixingTime=0,this.qixingOpen=!0,this.qixingState=this.board.state,this.qixingmyTurn=this.board.myTurn,this.qixingistouch=this.board.istouch;var e=0;if(this.is_user)e=this.init_level(),this.board.state=this.board.gameScene.userChess,this.board.myTurn=!0,this.board.istouch=!0;else{if(e=c.GameDataStorage.gameStateData.ds_zhenfalevel,this.board.state=-this.board.gameScene.userChess,this.board.myTurn=!1,"chaoniu"==c.GameDataStorage.gameStateData.userZhenFaName){console.log("\u56de\u5408\u662f\u591a\u5c11:",this.state);for(var t=!0,a=0;a<15;a++)for(var n=0;n<15;n++)0==this.board.maze[a][n]&&0==this.chaoniu_judgePos[a][n]&&(t=!1);if(t)return this.board.state=this.qixingState,this.board.myTurn=this.qixingmyTurn,this.qixingOpen=!1,this.qixingTime=0,void this.zhenFaCallback()}this.qixingUpdateTime2()}this.qixingTime=.5+.1*e,c.conMager.getInstance().getPoolNode(s.KEY.poolName.qixing_zhezhao,this.node.parent.getChildByName("qipan"),{time:this.qixingTime}),this.qixingStartTime()},t.prototype.qixingStartTime=function(){this.schedule(this.qixingUpdateTime,.1)},t.prototype.qixingUpdateTime=function(){this.qixingTime-=.1,this.qixingTime<=0?(this.qixingStopTime(),this.board.state=this.qixingState,this.board.myTurn=this.qixingmyTurn,this.board.istouch=this.qixingistouch,this.zhenFaCallback()):this.is_user||this.board.aiLuozi()},t.prototype.qixingUpdateTime2=function(){var e=this;if(this.qixingOpen){this.board.aiLuozi();var t=c.NumberUtil.randomNum(5,10)/100;this.scheduleOnce(function(){e.qixingUpdateTime2()},t)}},t.prototype.qixingStopTime=function(){this.qixingOpen=!1,this.unschedule(this.qixingUpdateTime)},t.prototype.judge_chaoniu_zhen=function(e){for(var t=[],a=[],n=this.board.judgeSize,o=0;o<n;o++)for(var i=0;i<n;i++)0!=this.board.maze[o][i]&&(this.board.maze[o][i]==e?a.push([o,i]):t.push([o,i]));return{dsPosList:t,posList:a}},t.prototype.chaoniu_zhen=function(){var e=this,t=c.GameDataStorage.gameStateData.ds_zhenfalevel;this.state==this.board.gameScene.userChess&&(t=this.init_level());var a=this.judge_chaoniu_zhen(this.state).posList,n=a[c.NumberUtil.randomNum(0,a.length-1)],o=n[0]+15*n[1],i=this.board.chess_map[o];this.chaoniuChess=i;var r=t,h=this.board.getZhenFaName(this.state).zhenFaName,u=[],l=this.node.getChildByName("chaoniu_mask");l.active=!0,l.zIndex=0;var d=function(){i.stopAllActions(),cc.tween(i).to(.1,{position:cc.v3(46*n[0],46*n[1])},{easing:"elasticInOut"}).delay(1).call(function(){if(c.conMager.getInstance()._msgAtion.emit("del_chaoniuguangbo"),"dusha"==h||"meihua"==h)for(var t=0;t<u.length;t++){var a=u[t];e.board.maze[a[0]][a[1]]=-e.state}e.zhenFaCallback()}).start()},p=function(){var t=e.judge_chaoniu_zhen(e.state).dsPosList;if(t.length<=0)d();else{e.startTiming();var a=t[c.NumberUtil.randomNum(0,t.length-1)];e.chaoniu_pos.push([a[0],a[1]]),i.stopAllActions(),c.conMager.getInstance().playAudioEff("chong"),cc.tween(i).to(.1,{position:cc.v3(46*a[0],46*a[1])}).call(function(){e.stopTiming(),console.log("\u8f93\u51fa\u76ee\u6807:",a[0],a[1]);var t=a[0]-1,n=a[1]+1;e.board.maze[a[0]][a[1]]=0,u.push([a[0],a[1]]),c.conMager.getInstance().playAudioEff("zhuangji");for(var o=0;o<9;o++)if(t<0||t>14||n<0||n>14)t++,(o+1)%3==0&&(t=a[0]-1,n--);else if(e.meihua_chess_poslist.length>0&&0!=e.meihua_chess_poslist[t][n])t++,(o+1)%3==0&&(t=a[0]-1,n--);else{var i=t+15*n,g=e.board.chess_map[i],_=e.board.maze[t][n];if(e.state!=_&&(e.chaoniu_judgePos[t][n]=2,g))if("dusha"==h);else{g.destroy(),e.board.chess_map[i]=null,e.board.maze[t][n]=0,e.board.AITurn.delPos(t,n,_),e.board.sum-=1;var m;if(m=1==_?"animation":"animation2","fenlie"==h){var f=cc.v2(t,n);e.board.yilun_qizi_v2.push(f)}c.conMager.getInstance().getPoolNode(s.KEY.poolName.baozha_wulei,e.node,{ani_name:m,pos:cc.v2(46*t,46*n),cb:function(){}})}t++,(o+1)%3==0&&(t=a[0]-1,n-=1)}e.scheduleOnce(function(){c.conMager.getInstance().getPoolNode(s.KEY.poolName.chaoniu_tudiliekai,l,{pos:a})},.1),e.scheduleOnce(function(){--r<=0?d():p()},.5)}).start()}};c.conMager.getInstance().getPoolNode(s.KEY.poolName.chaoniuguangbo,i,{}),p()},t.prototype.startTiming=function(){this.schedule(this.updateTime2,.001)},t.prototype.updateTime2=function(){-1==this.state?c.conMager.getInstance().getPoolNode(s.KEY.poolName.black_chess,this.node,{pos:this.chaoniuChess.getPosition()}):c.conMager.getInstance().getPoolNode(s.KEY.poolName.white_chess,this.node,{pos:this.chaoniuChess.getPosition()})},t.prototype.stopTiming=function(){this.unschedule(this.updateTime2)},t.prototype.judge_juehu=function(e){var t=this.board.judgeSize,a=[],n=c.GameDataStorage.gameStateData.ds_zhenfalevel;e==this.board.gameScene.userChess&&(n=this.init_level());var o=225-10*n;o<=1&&(o=1);var i=!1;this.juehu_poslist=[],this.juehu_posIndex=[];for(var s=[],r=0;r<t;r++)for(var h=0;h<t;h++){var u=this.board.juehu_chess_map[r][h];if(u&&u.state!=e){var l=u.pos;a.push(l),s.push(u)}if(r==t-1&&h==t-1){if(1==s.length&&1==o){i=!1;break}for(var d=s.length,p=0;p<d-1;p++)for(var g=0;g<d-1-p;g++)if(s[g].id>s[g+1].id){var _=s[g];s[g]=s[g+1],s[g+1]=_}if(s.length>=o&&s.length>0){if(s.length==o)this.juehu_poslist=s;else for(var m=s.length-o,f=0;f<m;f++)this.juehu_poslist[f]=s[f];i=!0}else i=!1}}return i},t.prototype.juehu_zhen=function(){var e=this;if(this.juehu_poslist.length>0){var t=this.juehu_poslist.length,a=1.8/this.juehu_poslist.length;this.juehu_posIndex.splice(t);for(var n=function(t){o.scheduleOnce(function(){var a=e.juehu_poslist[t],n=a.pos,o=a.state,i=n[0]+15*n[1];e.board.chess_map[i].destroy(),e.board.chess_map[i]=null,e.board.maze[n[0]][n[1]]=0,e.board.sum-=1,e.board.AITurn.delPos(n[0],n[1],-1*e.state),c.conMager.getInstance().getPoolNode(s.KEY.poolName.juehun_shou,e.node,{pos:n,state:o}),t==e.juehu_poslist.length-1&&e.scheduleOnce(function(){e.zhenFaCallback()},1),e.board.juehu_chess_map[n[0]][n[1]]=null;var r=e.board.getZhenFaName(e.state).zhenFaName;if("fenlie"==r){var h=cc.v2(n[0],n[1]);e.board.yilun_qizi_v2.push(h)}else"meihua"==r&&c.conMager.getInstance()._msgAtion.emit("del_meihua",n)},t*a)},o=this,i=0;i<t;i++)n(i)}else console.log("\u90fd\u5230\u8fd9\u4e86\uff0c\u6570\u7ec4\u5c45\u7136\u6ca1\u8282\u70b9?")},t.prototype.kunlong_zhen=function(){var e=this,t=c.GameDataStorage.gameStateData.ds_zhenfalevel;this.state==this.board.gameScene.userChess&&(t=this.init_level());var a=this.board.judgeSize,n=15-t;n<=1&&(n=1);for(var o=[],i=0;i<a;i++){this.kunlong_pos[i]=[];for(var r=0;r<a;r++){this.kunlong_pos[i][r]=2;var h=[i,r];if(0==this.board.maze[i][r]&&o.push(h),i==a-1&&r==a-1){console.error("\u56f0\u9f99\u7684\u8303\u56f4",n);var u=c.NumberUtil.randomNum(0,o.length-1),l=o[u];if(n<=1)this.kunlong_pos[l[0]][l[1]]=0,c.conMager.getInstance()._msgAtion.emit("del_kunlongkuang",-this.state),c.conMager.getInstance().getPoolNode(s.KEY.poolName.kunlongkuang,this.node,{pos:l,level:n,state:this.state,pos_list:this.kunlong_pos,callBack:function(){e.zhenFaCallback()}});else{var d=o[u],p=Math.floor(n/2),g=d[0],_=d[1];console.log("\u662f\u591a\u5c113:",g,_,p);var m=g-n;m<0&&(g+=Math.abs(m),m=0);var f=m+(n-1);f>14&&(g-=Math.abs(f-14),f=14);var y=_+n;y>14&&(_-=Math.abs(y-14),y=14);var v=y-(n-1);v<0&&(_+=Math.abs(v),v=0);for(var b=n*n,S=0,N=y,w=m,C=0;C<b;C++)w<=14&&w>=0&&(this.kunlong_pos[w][N]=0),w+=1,this.kunlong_pos_x.push(w),this.kunlong_pos_y.push(N),(S+=1)==n&&(S=0,N-=1,w=m);var j=[m,v];c.conMager.getInstance()._msgAtion.emit("del_kunlongkuang",-this.state),c.conMager.getInstance().getPoolNode(s.KEY.poolName.kunlongkuang,this.node,{pos:j,level:n,state:this.state,pos_list:this.kunlong_pos,callBack:function(){e.zhenFaCallback()}})}}}}},t.prototype.judgeDusha=function(e,t){var a=e[0],n=e[1],o=!1;return a+1<=14&&this.board.maze[a+1][n]==t&&(o=!0),a-1>=0&&this.board.maze[a-1][n]==t&&(o=!0),n+1<=14&&this.board.maze[a][n+1]==t&&(o=!0),n-1>=0&&this.board.maze[a][n-1]==t&&(o=!0),a+1<=14&&n+1<=14&&this.board.maze[a+1][n+1]==t&&(o=!0),a+1<=14&&n-1>=0&&this.board.maze[a+1][n-1]==t&&(o=!0),a-1>=0&&n+1<=14&&this.board.maze[a-1][n+1]==t&&(o=!0),a-1>=0&&n-1>=0&&this.board.maze[a-1][n-1]==t&&(o=!0),o},t.prototype.dusha_check_pos_chongfu=function(e,t){for(var a=!0,n=e.length,o=0;o<n;o++){var i=e[o];if(i[0]==t[0]&&i[1]==t[1]){a=!1;break}}return a},t.prototype.dusha_check_pos=function(){var e=[];this.dusha_pos_array=[];var t=this.board.judgeSize;this.bagua_new_posarray.length>0?(e=JSON.parse(JSON.stringify(this.bagua_new_posarray)),this.bagua_new_posarray=[]):this.wulei_new_posarray.length>0?(e=JSON.parse(JSON.stringify(this.wulei_new_posarray)),this.wulei_new_posarray=[]):this.chaoniu_pos.length>0&&(e=JSON.parse(JSON.stringify(this.chaoniu_pos)),this.chaoniu_pos=[]);for(var a=0;a<t;a++)for(var n=0;n<t;n++){if(this.board.maze[a][n]==this.state){var o=[a,n];this.judgeDusha(o,-1*this.state)&&this.dusha_check_pos_chongfu(e,o)&&e.push(o)}a==t-1&&n==t-1&&(this.dusha_pos_array=e)}},t.prototype.dusha_zhen=function(){var e,t=this;e=this.dusha_pos_array;var a=c.GameDataStorage.gameStateData.ds_zhenfalevel;this.state==this.board.gameScene.userChess&&(a=this.init_level());var n=4+a-1;n>50&&(n=50);var o=this.node.getChildByName("dusha_mask");o.active=!0,o.zIndex=4;for(var i=function(a){var i=e[a],h=0;r.scheduleOnce(function(){var r=i[0]+15*i[1];console.log("\u6bd2\u6740\u7b2c\u560e\u560e\u560e\u4e2a\u5b50\u7684\u7eff\u8272",i,r,t.state);var u=t.board.chess_map[r].getChildByName("chess").getChildByName("lvzi_dusha");u.active=!0,c.conMager.getInstance().playAudioEff("dusha/pen");for(var l=0;l<n;l++){var d=h=l*(360/n),p=c.NumberUtil.rotate(d,cc.v2(0,1e3));c.conMager.getInstance().getPoolNode(s.KEY.poolName.duye,o,{pos:i,angle:h,tag:t.state,position:p,callback:function(e,a,n,o){t.scheduleOnce(function(){var e=o[0],n=o[1];t.board.maze[e][n]=0;var i=e+15*n;t.board.sum-=1,t.board.chess_map[i]=null,t.board.AITurn.delPos(e,n,-1*a)},.5)}})}t.scheduleOnce(function(){u.active=!1},1),a==e.length-1&&t.scheduleOnce(function(){t.zhenFaCallback()},2)},.4*a)},r=this,h=0;h<e.length;h++)i(h)},t.prototype.meihua_zhen_bozhong=function(){var e=this,t=[],a=this.board.judgeSize;if(this.state,this.meihua_chess_poslist.length<=0)for(var n=0;n<this.board.judgeSize;n++){this.meihua_chess_poslist[n]=[];for(var o=0;o<this.board.judgeSize;o++)this.meihua_chess_poslist[n][o]=0}for(n=0;n<a;n++){var i=function(o){if(0==r.board.maze[n][o]){var i=[n,o];t.push(i)}if(n==a-1&&o==a-1){var h=r.init_level();r.state!=r.board.gameScene.userChess&&(h=c.GameDataStorage.gameStateData.ds_zhenfalevel),h=5+2*(h-1);var u=[];(t=c.NumberUtil.outOfOrder(t)).length<h&&(h=t.length);for(var l=0;l<h;l++)if(i=t[l],u.push(i),l==h-1){c.GameDataStorage.gameStateData.chess_num=u.length,r.board.gameScene.chess_num=c.GameDataStorage.gameStateData.chess_num;for(var d=function(t){var a=u[t],n=1/u.length;u.length>=100&&(n=2/u.length),r.scheduleOnce(function(){a[0],e.board.block,a[1],e.board.block,e.state!=e.board.gameScene.userChess?e.ds_meihua_num+=1:e.user_meihua_num+=1;var n;n=e.state<0?-2:2,e.meihua_chess_poslist[a[0]][a[1]]=n,e.board.maze[a[0]][a[1]]=e.state,e.board.meihuaZhenLuozi(a[0],a[1],e.state,"meihua"),c.conMager.getInstance().getPoolNode(s.KEY.poolName.meihua,e.node,{pos:a,state:e.state,callBack:e.meihua_zhen_zhakai.bind(e)}),t==u.length-1&&e.zhenFaCallback()},t*n)},p=0;p<u.length;p++)d(p)}}},r=this;for(o=0;o<a;o++)i(o)}},t.prototype.meihua_zhen_zhakai=function(e,t){var a=e[0],n=e[1],o=[];o.push([a+1,n]),o.push([a-1,n]),o.push([a,n+1]),o.push([a,n-1]);for(var i=0;i<o.length;i++){var s=[o[i][0],o[i][1]];s[0]<0||s[0]>14||s[1]<0||s[1]>14||0==this.board.maze[s[0]][s[1]]&&(this.meihua_chess_poslist[s[0]][s[1]]=t,this.board.meihuaZhenLuozi(s[0],s[1],t,"meihua"))}t==this.board.gameScene.userChess?(this.user_meihua_num-=1,this.user_meihua_num<=0&&this.board.meihuazhencb(t)):(this.ds_meihua_num-=1,this.ds_meihua_num<=0&&this.board.meihuazhencb(t))},t.prototype.wanning_zhen=function(){var e=this,t=[],a=this.board.judgeSize,n=this.board.maze,o=this.board.getZhenFaName(-1*this.state).zhenFaName;console.log("\u6211\u662f\u4e07\u5b81\uff0c\u4f60\u662f\u4ec0\u4e48:",o),this.kunlong_pos.length>0?n=this.kunlong_pos:this.chaoniu_judgePos.length>0&&(n=this.chaoniu_judgePos);for(var i=0;i<a;i++)for(var s=function(o){if(0==n[i][o]){var s=[i,o];t.push(s)}if(i==a-1&&o==a-1){var h=r.init_level();r.state!=r.board.gameScene.userChess&&(h=c.GameDataStorage.gameStateData.ds_zhenfalevel),h*=10;var u=[];(t=c.NumberUtil.outOfOrder(t)).length<h&&(h=t.length);for(var l=0;l<h;l++)if(s=t[l],u.push(s),l==h-1){c.GameDataStorage.gameStateData.chess_num=u.length,r.board.gameScene.chess_num=c.GameDataStorage.gameStateData.chess_num;for(var d=function(t){var a=u[t],n=1/u.length;u.length>=100&&(n=2/u.length),r.scheduleOnce(function(){var n=a[0]*e.board.block,o=a[1]*e.board.block;e.board.dazhao_moveInChess(n,o,e.state),t==u.length-1&&e.zhenFaCallback()},t*n)},p=0;p<u.length;p++)d(p)}}},r=this,h=0;h<a;h++)s(h)},t.prototype.sijiao_zhen=function(){var e=this,t=this.board.newx/this.board.block,a=this.board.newY/this.board.block,n=this.init_level();this.state!=this.board.gameScene.userChess&&(n=c.GameDataStorage.gameStateData.ds_zhenfalevel);var o,i,s,r,h=(n-2)%3,u=2*Math.floor((n-2)/3)+3,l=Math.floor(u/2),d=[];n>1?this.checkWin1(t,a,u,l,d,function(){e.addpos(t,a,h,d,l),e.ailuozi(d)}):(o=[t+1,a],i=[t-1,a],s=[t,a+1],r=[t,a-1],d.push(o),d.push(i),d.push(s),d.push(r),this.ailuozi(d))},t.prototype.xueyuyingsha_zhen=function(){var e=this,t=this.init_level();this.state!=this.board.gameScene.userChess&&(t=c.GameDataStorage.gameStateData.ds_zhenfalevel),this.xueyuChess_num=t+4,this.xueyuChess_num=5+2*(t-1),this.xueyuChess_num>225&&(this.xueyuChess_num=225),this.xueyuChess_num_1=this.xueyuChess_num,this.xueyuChess_num_2=this.xueyuChess_num,this.xueyuChessPosList=[],this.xueYuIsOver=!1;for(var a=0;a<15;a++){this.qipanArray[a]=[];for(var n=0;n<15;n++)this.qipanArray[a][n]=0,0!=this.board.maze[a][n]&&(this.qipanArray[a][n]=this.board.maze[a][n])}console.log("\u54c8\u54c8\u54c8\u54c8\u54c8\u8840\u72f1\u5f71\u6740\u9635\uff01\uff01\uff01",this.xueyuChess_num,this.state,this.qipanArray,this.board.maze),this.startTime();var o=Math.floor(this.board.newx/this.board.block),i=Math.floor(this.board.newY/this.board.block),r=o+15*i,h=(this.board.chess_map[r],[o,i]),u=[];u.push([o+1,i]),u.push([o-1,i]),u.push([o,i+1]),u.push([o,i-1]),this.xueyuChessPosList.push(h),c.conMager.getInstance().playAudioEff(s.KEY.audioName.xueliu,!0);for(var l=0;l<4;l++){var d=[u[l][0],u[l][1]];if(!(d[0]<0||d[0]>14||d[1]<0||d[1]>14||this.kunlong_pos.length>0&&0!=this.kunlong_pos[d[0]][d[1]]||this.chaoniu_judgePos.length>0&&0!=this.chaoniu_judgePos[d[0]][d[1]]))if(0==this.qipanArray[d[0]][d[1]])this.xueXianAction(d,h,!0);else if(this.xueyuChess_num-=1,this.xueyuChess_num<=1)return this.xueyuChess_num<=1&&!this.xueYuIsOver?(c.conMager.getInstance().stopAudioEff(),this.xueYuIsOver=!0,void this.scheduleOnce(function(){e.zhenFaCallback()},1)):void 0}},t.prototype.startTime=function(){this.xueYuTime=1,this.schedule(this.updateTime,.5)},t.prototype.updateTime=function(){this.xueYuTime-=.5,this.xueYuTime<=0&&(this.stopTime(),c.conMager.getInstance().stopAudioEff(),this.xueYuIsOver||(this.xueYuIsOver=!0,this.zhenFaCallback()))},t.prototype.stopTime=function(){this.unschedule(this.updateTime)},t.prototype.xueXianAction=function(e,t){var a=this;if(this.xueyuChess_num<=0&&this.xueyuChess_num<=0&&!this.xueYuIsOver)return c.conMager.getInstance().stopAudioEff(),this.xueYuIsOver=!0,this.stopTime(),void this.scheduleOnce(function(){a.zhenFaCallback()},1);this.xueyuChess_num-=1,this.stopTime(),this.startTime();var n=1;e[0],e[1],e[0]>t[0]?n=1:e[0]<t[0]?n=2:e[1]>t[1]?n=3:e[1]<t[1]&&(n=4);var o=c.NumberUtil.randomNum(0,10);o<11&&e.length>0&&(this.qipanArray[e[0]][e[1]]=this.state,this.xueyuChess_num>0&&this.initXueYuChess(e)),this.xueyuChess_num<=0||e.length<2||c.conMager.getInstance().getPoolNode(s.KEY.poolName.xueXian,this.node,{pos:t,targetPos:e,direction:n,chess_Pbb:o,callBack:function(e,t,n){var o=[];if(c.NumberUtil.randomNum(0,10)>7)a.checkNode(t,function(e,t){a.call(e,t)});else{var i=t[0],s=t[1];1==n?i=t[0]+1:2==n?i=t[0]-1:3==n?s=t[1]+1:4==n&&(s=t[1]-1),i<0||i>14||s<0||s>14?a.checkNode(t,function(e,t){a.call(e,t)}):0!=a.qipanArray[i][s]?a.checkNode(t,function(e,t){a.call(e,t)}):(o=[i,s],a.call(o,t))}}})},t.prototype.initXueYuChess=function(e){var t=this;this.xueyuChessPosList.push(e),this.scheduleOnce(function(){c.NumberUtil.randomNum(0,10)<5&&t.checkNode(e,function(e,a){t.call(e,a)});var a=e[0]*t.board.block,n=e[1]*t.board.block;t.board.dazhao_moveInChess(a,n,t.state),c.conMager.getInstance().getPoolNode(s.KEY.poolName.xueyuChessSke,t.node,{pos:cc.v3(a,n),callBack:function(){}}),t.scheduleOnce(function(){var a=e[0]+15*e[1];t.board.chess_map[a].runAction(cc.sequence(cc.scaleTo(.15,1.15),cc.scaleTo(.1,1),cc.callFunc(function(){})))},.4)},.5)},t.prototype.call=function(e,t){if(this.kunlong_pos.length>0){if(e.length<=0)return;var a=e[0],n=e[1];if(a<0||a>14||n<0||n>14)return;if(0!=this.kunlong_pos[e[0]][e[1]])return}else if(this.chaoniu_judgePos.length>0){if(e.length<=0)return;if(a=e[0],n=e[1],a<0||a>14||n<0||n>14)return;if(0!=this.chaoniu_judgePos[e[0]][e[1]])return}this.xueXianAction(e,t)},t.prototype.checkNode=function(e,t,a){for(var n=[],o=0;o<2;o++){var i=this.checkState(e[0],e[1],this.checkMode[o],a);if(i.length>0)for(var s=0;s<i.length;s++){var r=i[s][0],h=i[s][1];if(this.kunlong_pos.length>0){if(0!=this.kunlong_pos[r][h])continue}else if(this.chaoniu_judgePos.length>0&&0!=this.chaoniu_judgePos[r][h])continue;n.push(i[s])}}var u=[];return n.length>0&&(u=n[c.NumberUtil.randomNum(0,n.length-1)]),t(u,e)},t.prototype.checkState=function(e,t,a,n){void 0===n&&(n=null);var o=[],i=0;a==this.checkMode[0]&&(i=1),a==this.checkMode[1]&&(i=3);for(var s=1;s<2;s++){var r=e+s*a[0],c=t+s*a[1];if(!(r<0||r>14||c<0||c>14||this.kunlong_pos.length>0&&0!=this.kunlong_pos[r][c]||this.chaoniu_judgePos.length>0&&0!=this.chaoniu_judgePos[r][c]||n&&n!=i)){if(0!=this.qipanArray[r][c])break;var h=[r,c];o.push(h)}}a==this.checkMode[0]&&(i=2),a==this.checkMode[1]&&(i=4);for(var u=1;u<2;u++)if(r=e-u*a[0],c=t-u*a[1],!(r<0||r>14||c<0||c>14||this.kunlong_pos.length>0&&0!=this.kunlong_pos[r][c]||this.chaoniu_judgePos.length>0&&0!=this.chaoniu_judgePos[r][c]||n&&n!=i)){if(0!=this.qipanArray[r][c])break;h=[r,c],o.push(h)}return o},t.prototype.fenlie_zhen=function(){var e=this;if(this.fenlie_cishu++,this.fenlie_cishu>this.fenlie_max){if(1==this.fenlie_callback)return;return console.error("\u4e0d\u80fd\u5206\u88c2\u4e86",this.fenlie_cishu,this.fenlie_max),this.fenlie_callback=!0,this.fenlie_cishu=0,void this.scheduleOnce(function(){e.zhenFaCallback()},1)}for(var t=[],a=0;a<this.board.yilun_qizi_v2.length;a++)t.push(this.board.yilun_qizi_v2[a]);for(a=0;a<this.board.qixing_fenlie_v2.length;a++)t.push(this.board.qixing_fenlie_v2[a]);if(this.board.yilun_qizi_v2=[],t.length<1&&0==this.donghua_run)return console.error("\u6c92\u6709\u53ef\u4ee5\u5206\u7684\u6211\u55ce\u554a :"),void this.zhenFaCallback();var n=!1,o=!1,i=function(a){r.yanchi=0;var i=Math.floor(4*Math.random()),u=[];switch(i){case 0:u.push(cc.v2(-1,-1),cc.v2(1,1));break;case 1:u.push(cc.v2(-1,0),cc.v2(1,0));break;case 2:u.push(cc.v2(-1,1),cc.v2(1,-1));break;case 3:u.push(cc.v2(0,1),cc.v2(0,-1))}var l=0;1==r.fenlie_cishu?l=r.fenlie_first_max:2==r.fenlie_cishu&&(l=r.fenlie_second_max);for(var d=Math.floor(Math.random()*(l+1)+1),p=function(i){for(var l=t[a].x+u[i].x*d,p=t[a].y+u[i].y*d,g=function(){var n=t[a].x+15*t[a].y,o=e.board.chess_map[n];o&&(o.stopAllActions(),e.board.maze[t[a].x][t[a].y]!=e.state&&c.conMager.getInstance().getPoolNode(s.KEY.poolName.qizi,e.node,t[a],l,p,function(){},function(){},function(){e.board.maze[t[a].x][t[a].y]=e.state,o.getChildByName("chess").getComponent(cc.BoxCollider).tag=e.state,h.commonFunction.updateSprite("chess/"+e.state,o.getChildByName("chess"))},2))},_=function(){if(r.board.maze[l]&&null!==r.board.maze[l][p]){if(0==r.board.maze[l][p]){if(r.kunlong_pos.length>0){if(0!=r.kunlong_pos[l][p])return l-=u[i].x,p-=u[i].y,g(),l==t[a].x&&l==t[a].y?"break":"continue"}else if(r.chaoniu_judgePos.length>0&&0!=r.chaoniu_judgePos[l][p])return l-=u[i].x,p-=u[i].y,g(),l==t[a].x&&l==t[a].y?"break":"continue";0==n&&(r.donghua_run=!0,n=!0);var h=l*r.board.block,d=p*r.board.block;r.board.yilun_qizi_v2.push(cc.v2(l,p));var _=1;return 1!=r.fenlie_cishu&&(_=0),c.conMager.getInstance().getPoolNode(s.KEY.poolName.qizi,r.node,t[a],l,p,function(){e.board.dazhao_moveInChess(h,d,e.state)},function(){1==n&&0==o&&(o=!0,e.fenlie_zhen())},function(){g()},_),"break"}if(l-=u[i].x,p-=u[i].y,g(),l==t[a].x&&l==t[a].y)return"break"}else if(console.error("\u4e0d\u5728\u68cb\u76d8\u4e0a\u4e86"),g(),l-=u[i].x,p-=u[i].y,l==t[a].x&&l==t[a].y)return console.error("\u6c34\u6ef4\u56de\u9000\u5230\u4e86\u539f\u4f4d\uff0c\u4e0d\u751f\u6210"),"break"},m=0;m<d&&"break"!==_();m++);},g=0;g<u.length;g++)p(g);var _=r.init_level();if(r.state!=r.board.gameScene.userChess&&(_=c.GameDataStorage.gameStateData.ds_zhenfalevel),a+1>=_)return console.error("\u8be5\u6eda\u86cb\u4e86"),"break"},r=this;for(a=0;a<t.length&&"break"!==i(a);a++);0==n&&this.fenlie_zhen()},t.prototype.ailuozi=function(e){c.conMager.getInstance().playAudioEff(s.KEY.audioName.luozi);for(var t=0;t<e.length;t++){var a=e[t],n=a[0]*this.board.block,o=a[1]*this.board.block,i=a[0],r=a[1];if(this.kunlong_pos.length>0){if(i>14||r>14||i<0||r<0)continue;if(0!=this.kunlong_pos[a[0]][a[1]])continue;this.board.dazhao_moveInChess(n,o,this.state)}else if(this.chaoniu_judgePos.length>0){if(i>14||r>14||i<0||r<0)continue;if(0!=this.chaoniu_judgePos[a[0]][a[1]])continue;this.board.dazhao_moveInChess(n,o,this.state)}else this.board.dazhao_moveInChess(n,o,this.state)}this.zhenFaCallback()},t.prototype.addpos=function(e,t,a,n,o){var i,s,r,c,h,u,l,d;a<=0||(i=[e+o+1,t],s=[e-o-1,t],r=[e,t+o+1],c=[e,t-o-1],n.push(i),n.push(s),n.push(r),n.push(c),2==a&&(h=[e+o+1,t+o+1],u=[e-o-1,t-o-1],l=[e+o+1,t-o-1],d=[e-o-1,t+o+1],n.push(h),n.push(u),n.push(l),n.push(d)))},t.prototype.checkWin1=function(e,t,a,n,o,i){for(var s=e-n,r=s,c=t+n,h=a*a,u=0;u<h;u++){var l=[r,c];o.push(l),r+=1,(u+1)%a==0&&(r=s,c-=1),u==h-1&&i()}},t.prototype.bagua_zhen=function(){for(var e=this,t=[],a=this.board.judgeSize,n=0;n<a;n++)for(var o=function(o){if(i.board.maze[n][o]==i.state){var r=[n,o];i.meihua_chess_poslist.length>0?0==i.meihua_chess_poslist[n][o]&&t.push(r):t.push(r)}if(n==a-1&&o==a-1){var u,l=i.init_level(),d=!0;i.state==i.board.gameScene.userChess&&(l=c.GameDataStorage.gameStateData.ds_zhenfalevel,d=!1),u=1==i.state?"bianhei":"bianbai";var p=[];(t=c.NumberUtil.outOfOrder(t)).length<l&&(l=t.length);for(var g=0;g<l;g++)if(r=t[g],p.push(r),g==l-1){i.bagua_new_posarray=JSON.parse(JSON.stringify(p)),console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u516b\u5366:",p.length,p,l,i.bagua_new_posarray);for(var _=function(t){var a=p[t];p.length,p.length>=100&&p.length;var n=a[0]*i.board.block,o=a[1]*i.board.block,r=a[0]+15*a[1],l=i.board.chess_map[r],g=i.board.getZhenFaName(-1*i.state).zhenFaName;if("fenlie"==g){var _=cc.v2(a[0],a[1]);i.board.yilun_qizi_v2.push(_)}if("juehu"==g&&(i.board.juehu_chess_map[a[0]][a[1]].state=-1*i.state),"dusha"!=g){i.board.maze[a[0]][a[1]]=-1*i.state,i.board.AITurn.addPos(a[0],a[1],-1*i.state);var m=-1*i.state;-1==m&&(m=0),l.getChildByName("chess").getComponent(cc.BoxCollider).tag=m,h.commonFunction.updateSprite("chess/"+-1*i.state,l.getChildByName("chess"))}c.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,i.node,{fileName:"taiji",ani_name:u,cb:function(){"dusha"==g||(e.board.maze[a[0]][a[1]]=-1*e.state),t==p.length-1&&e.zhenFaCallback()},is_user:d,pos:cc.v2(n,o+1)})},m=0;m<p.length;m++)_(m)}}},i=this,r=0;r<a;r++)o(r)},t.prototype.wulei_zhen=function(){var e,t=this,a=this.state,n=!1,o=this.init_level();"kedi"==this.zhenFaName_pare&&(a*=-1),e=1==a?"animation":"animation2",a==this.board.gameScene.userChess&&(o=c.GameDataStorage.gameStateData.ds_zhenfalevel,n=!0),o*=2,console.log("\u4e94\u96f7\u8981\u548b\u7761:",a,",",this.board.maze);for(var i=[],s=this.board.judgeSize,r=0;r<s;r++)for(var h=function(h){if(u.board.maze[r][h]==a){var l=[r,h];u.meihua_chess_poslist.length>0?0==u.meihua_chess_poslist[r][h]&&i.push(l):i.push(l)}if(r==s-1&&h==s-1){console.log("\u4e0e\u5076\u8bb0",i);var d=[];if((i=c.NumberUtil.outOfOrder(i)).length<o&&(o=i.length),o<1)return u.zhenFaCallback(),{value:void 0};for(var p=0;p<o;p++)if(l=i[p],d.push(l),p==o-1){u.wulei_new_posarray=JSON.parse(JSON.stringify(d)),console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u4e94\u96f7:",d.length,d,o);for(var g=function(o){var i=d[o],s=1.5/d.length;d.length>=100&&(s=2.5/d.length),u.scheduleOnce(function(){var s=i[0]*t.board.block,r=i[1]*t.board.block,c=t.board.getZhenFaName(-1*t.state).zhenFaName;console.log("\u6211\u662f\u4e94\u96f7\uff0c\u4f60\u662f\u4ec0\u4e48",c);var h=i[0]+15*i[1],u=t.board.chess_map[h];if("dusha"==c||(console.log("\u5c45\u7136\u8fdb\u6765\u4e86\uff1f\uff1f\uff1f"),t.board.maze[i[0]][i[1]]=0,t.board.sum-=1,t.board.AITurn.delPos(i[0],i[1],a)),t.wulei_action(s,r,u,n,e,o,d,c),"fenlie"==c){var l=cc.v2(i[0],i[1]);t.board.yilun_qizi_v2.push(l)}},o*s)},_=0;_<d.length;_++)g(_)}}},u=this,l=0;l<s;l++){var d=h(l);if("object"==typeof d)return d.value}},t.prototype.bezier=function(e,t,a,n){return e.mul((1-n)*(1-n)).add(a.mul(2*n*(1-n))).add(t.mul(n*n))},t.prototype.suijiAction=function(e){e.active=!0;var t=c.NumberUtil.randomNum(100,200),a=c.NumberUtil.randomNum(1,250),n=100;c.NumberUtil.randomNum(1,2)>1&&(a=-a,t=-t,n=-n),a=e.y+a,t=e.x+t,cc.v2(t-n,a+150),cc.tween(e).to(.5,{position:cc.v2(t,a)},{easing:"circOut"}).to(.3,{opacity:0}).start()},t.prototype.wulei_action=function(e,t,a,n,o,i,r,h){var u=this,l=-230;n&&(l=870),c.conMager.getInstance().playAudioEff("wulei/fase"),c.conMager.getInstance().getPoolNode(s.KEY.poolName.zidang_wulei,this.node,{ys:l,pos:cc.v2(e,t),cb:function(){var e=cc.repeatForever(cc.sequence(cc.moveBy(.025,cc.v2(2,2)),cc.moveBy(.05,cc.v2(-4,-4)),cc.moveBy(.025,cc.v2(2,2))));a.getChildByName("dianhaun").active=!0,a.getChildByName("dianhaun").zIndex=99,a.getPosition(),a.runAction(e),i==r.length-1&&u.scheduleOnce(function(){u.board.yilun_qizi_v2=[];for(var e=function(e){var t=r[e];r.length,r.length>=100&&r.length;var a=t[0]*u.board.block,n=t[1]*u.board.block,i=t[0]+15*t[1],l=u.board.chess_map[i];l.stopAllActions(),l.setPosition(cc.v2(a,n)),l.getChildByName("dianhaun").active=!1,u.board.yilun_qizi_v2.push(cc.v2(t[0],t[1])),console.log("\u6211\u662f\u4e94\u96f7\uff0c\u4f60\u662f\u4ec0\u4e4811111111",h,"dusha"==h),"dusha"==h?e==r.length-1&&u.zhenFaCallback():(console.log("\u4e0d\u662f\u6bd2\u6740\u4e5f\u80fd\u8fdb\uff1f\uff1f\uff1f"),u.board.maze[t[0]][t[1]]=0,u.board.sum-=1,l.destroy(),u.board.chess_map[i]=null,0==e&&c.conMager.getInstance().playAudioEff("wulei/bao"),c.conMager.getInstance().getPoolNode(s.KEY.poolName.baozha_wulei,u.node,{ani_name:o,pos:cc.v2(a,n),cb:function(){e==r.length-1&&(l.stopAllActions(),u.zhenFaCallback())}}))},t=0;t<r.length;t++)e(t)},.3)}})},t.prototype.zhenFaCallback=function(){this.zhenFaName_pare=this.zhenFaName,this.zhenFaName_pare,this.cb&&this.cb(this.zhenFaName,this.is_user)},t.prototype.update=function(){},i([p(u.dazhao_GameBoard)],t.prototype,"board",void 0),i([d],t)}(cc.Component);a.default=g,cc._RF.pop()},{"../../../KEY":"KEY","../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../../../utils/commonFunction":"commonFunction","./dazhao_GameBoard":"dazhao_GameBoard"}],dazhao_game_view:[function(e,t,a){"use strict";cc._RF.push(t,"d28a0veUTtEx4eLgNdkvyc/","dazhao_game_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../common/chessClass"),r=e("./../wuziqi/dazhao/dazhao_GameBoard"),c=e("./../../utils/commonFunction"),h=e("./../../SSSGF/Utils/NumberUtil"),u=e("../../SSSGF/ssscgf"),l=e("../../classCon/configSurface"),d=e("../wuziqi/Piece"),p=e("../../utils/platform"),g=cc._decorator,_=g.ccclass,m=g.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameType=1,t.dsName_string="",t.user_headPanel=null,t.ds_headPanel=null,t.ds_headIcon=null,t.user_headIcon=null,t.reward_gold=2,t.multiple=0,t.chess_parent=null,t.shubiao_node=null,t.max_gameTime=30,t.ds_headIconIndex=0,t.board=null,t.whiteChess=null,t.blackChess=null,t.quan=null,t.hongDian=null,t.block=46,t.userGameTime=0,t.count_down=null,t.userChess=d.BLACKCHESS,t.is_game_over=!1,t.whiePool=new cc.NodePool,t.blackPool=new cc.NodePool,t.RightRate=1,t.TimeDel=!1,t.chess_num=0,t.interval=!0,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t.luozizhong=null,t.quan_judge=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){console.log("\u5927\u62db\u4e13\u5c5e"),u._pl_fun.getInstance().startCreateVideo(),this.reward_gold=e[0].reward_gold,u.GameDataStorage.gameStateData.reward_gold=this.reward_gold,this.gameType=e[0].gameType,u.GameDataStorage.gameStateData.gameType=this.gameType;var t=e[0].RightRate;this.update_ai_RightRate(t),2==this.gameType&&(this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1),this.initGame(),this.node.runAction(cc.fadeIn(.5)),p.platform.now_platform!=p.platform_type.is_tt&&(this.node.getChildByName("luping").active=!1),this.hongDian.zIndex=99},t.prototype.onClose=function(){this.unscheduleAllCallbacks(),this.board.removeListennner(),u.conMager.getInstance().hideWinNode(this.node.name),u.conMager.getInstance().showWinNode(u.KEY.UIName.slectGmae,null,{gameType:this.gameType})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){var e=this;u.conMager.getInstance()._msgAtion.on("ai_renshu",this.ai_renshu,this),u.conMager.getInstance()._msgAtion.on("ai_diaoxian",this.ai_diaoxian,this),u.conMager.getInstance()._msgAtion.on("ai_shangxian",this.ai_shangxian,this),u.conMager.getInstance()._msgAtion.on("renshu",this.return_btn,this),u.conMager.getInstance()._msgAtion.on("pingju",this.pingju,this),u.conMager.getInstance()._msgAtion.on("shubiao",this.shubiao,this),u.conMager.getInstance()._msgAtion.on("qiuhe",this.qiuhe,this),u.conMager.getInstance()._msgAtion.on("huiqi",this.huiqi,this),u.conMager.getInstance()._msgAtion.on("closeSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1},this),u.conMager.getInstance()._msgAtion.on("openSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0},this),u.conMager.getInstance()._msgAtion.on("stopTimeDel",function(){e.TimeDel=!0,e.quan_judge=!1},this),u.conMager.getInstance()._msgAtion.on("startTimeDel",function(){e.TimeDel=!1,e.quan_judge=!0},this)},t.prototype.update_ai_RightRate=function(e){1==e?this.RightRate=.4:2==e?this.RightRate=.5:3==e?this.RightRate=.7:4==e?this.RightRate=.8:5==e&&(this.RightRate=.9)},t.prototype.RadomZhenFa=function(e){for(var t=l.zhenFaWeight[e],a=0,n=0;n<u.GameDataStorage.gameStateData.zhenFaName.length;n++)a+=t[u.GameDataStorage.gameStateData.zhenFaName[n]];var o=Math.random()*a,i=0,s="wanning";for(n=0;n<u.GameDataStorage.gameStateData.zhenFaName.length;n++)if(o<(i+=t[u.GameDataStorage.gameStateData.zhenFaName[n]])){s=u.GameDataStorage.gameStateData.zhenFaName[n];break}return console.log("hhhhhhhhhhhhhhhh",s,i,a),s},t.prototype.initDsZhenFa=function(){var e=u.GameDataStorage.gameStateData.userZhenFaName,t=this.RadomZhenFa(e);u.GameDataStorage.gameStateData.zhenFaIndex>=u.GameDataStorage.gameStateData.zhenFaName.length&&(u.GameDataStorage.gameStateData.zhenFaIndex=0),u.GameDataStorage.gameStateData.dsZhenFaName=t;var a=u.GameDataStorage.getUser().userData.zhenFaMap[e].level,n=a+5*[-1,1][h.NumberUtil.randomNum(0,1)];if(n<=3&&(n=3),u.GameDataStorage.gameStateData.ds_zhenfalevel=n,"xueyuyingsha"==e&&"kedi"==t&&(u.GameDataStorage.gameStateData.ds_zhenfalevel=h.NumberUtil.randomNum(1,10)),"guiyuan"==e&&"kedi"==t)if(h.NumberUtil.randomNum(0,10)<7){if(a<10){var o=h.NumberUtil.randomNum(0,2);u.GameDataStorage.gameStateData.ds_zhenfalevel=[9,10,11][o]}}else u.GameDataStorage.gameStateData.ds_zhenfalevel=h.NumberUtil.randomNum(100,1e3);console.log("\u5bf9\u624b\u7684\u7b49\u7ea7:",u.GameDataStorage.gameStateData.ds_zhenfalevel)},t.prototype.initGame=function(){cc.find("Canvas/money_node").active=!1,u.GameDataStorage.gameStateData.chess_num=0,u.GameDataStorage.gameStateData.rewardmultiple=0,2==this.gameType&&this.initDsZhenFa(),this.initUi(),this.initData(),3!=this.gameType?this.kaiChangDongHua():(this.node.getChildByName("heizi").active=!0,this.node.getChildByName("baizi").active=!0,this.node.getChildByName("baizi_label").active=!0,this.node.getChildByName("heizi_label").active=!0,u.conMager.getInstance().getPoolNode(u.KEY.poolName.setup,this.node,null)),this.board.init(this),this.node.getChildByName("mask").zIndex=99,this.initPool(this.whiePool,this.whiteChess),this.initPool(this.blackPool,this.blackChess)},t.prototype.initUi=function(){this.user_headPanel=this.node.getChildByName("user_headPanel"),this.ds_headPanel=this.node.getChildByName("ds_headPanel"),this.ds_headIcon=this.node.getChildByName("ds_headIcon").getChildByName("ds_headIcon").getComponent(cc.Sprite),this.user_headIcon=this.node.getChildByName("user_headIcon").getChildByName("user_headIcon").getComponent(cc.Sprite),this.chess_parent=this.node.getChildByName("chess_parent"),this.shubiao_node=this.chess_parent.getChildByName("shubiao_node"),this.count_down=this.node.getChildByName("count_down"),this.gameType<3?(this.ds_headIcon.node.parent.active=!0,this.user_headIcon.node.parent.active=!0):(this.node.getChildByName("heiqi").active=!0,this.node.getChildByName("baiqi").active=!0,this.shubiao_node.active=!0)},t.prototype.initData=function(){u.GameDataStorage.getUser().userData,"null"!=u.GameDataStorage.getUser().userData.headIconUrl&&c.commonFunction.updateHttpSprite(u.GameDataStorage.getUser().userData.headIconUrl,this.user_headIcon.node);var e=h.NumberUtil.randomNum(1,60);this.ds_headIconIndex=e,u.GameDataStorage.gameStateData.ds_headIconIndex=this.ds_headIconIndex,console.log("\u5bf9\u624b\u7684\u5934\u50cf:",e);var t="head_icon/"+e;c.commonFunction.updateSprite(t,this.ds_headIcon.node);var a=this.node.getChildByName("game_info_parent");u.conMager.getInstance().getPoolNode(u.KEY.poolName.game_info,a,null)},t.prototype.initPool=function(e,t){for(var a=0;a<225;a++){var n=cc.instantiate(t);e.put(n)}},t.prototype.moveInChess=function(e,t,a,n){var o,i=this,r=u.GameDataStorage.gameStateData.chess_num;if(2==this.gameType)if(r>30){this.chess_num-=1;var h=2;r>100&&(h=10),r>150&&(h=15),this.chess_num%h==0&&u.conMager.getInstance().playAudioEff(u.KEY.audioName.luozi)}else u.conMager.getInstance().playAudioEff(u.KEY.audioName.luozi);else u.conMager.getInstance().playAudioEff(u.KEY.audioName.luozi);2!=this.gameType&&(this.stopTime(),this.startTime(-a)),this.ai_duihua(1);var l=null,p=null;if(a==d.BLACKCHESS?(l=this.blackPool,p=this.blackChess):(l=this.whiePool,p=this.whiteChess),l.size()>0)o=l.get();else{var g=cc.instantiate(p);l.put(g),o=l.get()}var _=Math.floor(e/this.block),m=Math.floor(t/this.block),f=15*m+_;if(n){var y=this.board.getZhenFaName(this.board.state);if("qixing"==this.board.getZhenFaName(-this.board.state).zhenFaName&&this.board.front_com.qixingOpen&&(u.conMager.getInstance().getPoolNode(u.KEY.poolName.qixing_luozi,o,{}),u.conMager.getInstance().playAudioEff("qixing_luoxia"),null!=this.board.chess_map[f])){var v,b=this.board.chess_map[f],S=this.board.maze[_][m];v=1==S?"animation":"animation2";var N=function(){i.chess_parent.addChild(o),o.zIndex=100,o.x=e,o.y=t,o.scale=1.5,o.getChildByName("chess").zIndex=98,o.y+=80,o.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)),cc.callFunc(function(){u.conMager.getInstance().playAudioEff("wulei/bao"),u.conMager.getInstance().getPoolNode(u.KEY.poolName.baozha_wulei,o,{ani_name:v,pos:cc.v2(0,0),cb:function(){o.stopAllActions(),o.destroy()}})})))};if("dusha"==y.zhenFaName)return void N();if("meihua"==y.zhenFaName){if(0!=this.board.front_com.meihua_chess_poslist[_][m])return void N();this.board.maze[_][m]=this.board.state}else if("fenlie"==y.zhenFaName){var w=cc.v2(_,m);this.board.qixing_fenlie_v2.push(w),this.board.maze[_][m]=this.board.state}else this.board.maze[_][m]=this.board.state;this.scheduleOnce(function(){b.destroy(),u.conMager.getInstance().playAudioEff("wulei/bao"),u.conMager.getInstance().getPoolNode(u.KEY.poolName.baozha_wulei,i.chess_parent,{ani_name:v,pos:cc.v2(e,t),cb:function(){}})},.1)}}this.board.chess_map[f]=o,o.getChildByName("chess").getComponent("chess").pos=[_,m],o.x=e,o.y=t,this.chess_parent.addChild(o),o.zIndex=2;var C=u.GameDataStorage.gameStateData.userZhenFaName,j=u.GameDataStorage.gameStateData.dsZhenFaName,z=a;n?a==this.userChess&&"fenlie"==C||a==-1*this.userChess&&"fenlie"==j||(a==this.userChess&&"xueyuyingsha"==C?o.scale=0:a==-1*this.userChess&&"xueyuyingsha"==j?o.scale=0:a==this.userChess&&"meihua"==C?(z=-1==a?-2:2,2!=this.board.front_com.meihua_chess_poslist[_][m]&&-2!=this.board.front_com.meihua_chess_poslist[_][m]||(z=3),o.getChildByName("chess").getComponent("chess").getComponent(cc.BoxCollider).tag=2,c.commonFunction.updateSprite("chess/hua_"+a,o.getChildByName("chess"),function(){})):a==-1*this.userChess&&"meihua"==j?(z=-1==a?-2:2,2!=this.board.front_com.meihua_chess_poslist[_][m]&&-2!=this.board.front_com.meihua_chess_poslist[_][m]||(z=3),o.getChildByName("chess").getComponent("chess").getComponent(cc.BoxCollider).tag=2,c.commonFunction.updateSprite("chess/hua_"+a,o.getChildByName("chess"),function(){})):this.chessAction(o,n)):this.chessAction(o,n);var I=new s.chessClass;I.id=this.board.sum,I.pos=[_,m],I.position=cc.v2(e,t),I.state=z,I.chessNode=o,this.board.juehu_chess_map[_][m]=I,this.board.juehu_sum+=1,2!=this.gameType&&this.scheduleOnce(function(){i.hongDian.active=!0,i.hongDian.setPosition(e,t+1)},.1)},t.prototype.chessAction=function(e,t){var a=this;e.scale=1.5,e.getChildByName("chess").zIndex=98,e.y+=80,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)),cc.callFunc(function(){if(t){var n=e.getChildByName("jn1");n.active=!0,a.scheduleOnce(function(){n.active=!1},1)}})))},t.prototype.ai_duihua=function(e,t){var a=this;if(!(this.gameType>2)){var n=this.node.getChildByName("ds_biaoqing"),o=this.node.getChildByName("ds_duihua"),i=0;if(1==e){if(!this.interval)return;if(this.interval=!1,this.scheduleOnce(function(){a.interval=!0},8),this.board.state!=this.userChess)return;h.NumberUtil.randomNum(0,10)<2&&(h.NumberUtil.randomNum(0,1)>0?(i=1,u.conMager.getInstance().playAudioEff("nv/nvqifeng")):(i=5,u.conMager.getInstance().playAudioEff("nv/nvhaoqi")))}else if(3==e)i=6,u.conMager.getInstance().playAudioEff("nv/nvhengaoxing");else{if(this.board.state!=this.userChess)return;h.NumberUtil.randomNum(0,100)<t&&(i=4,u.conMager.getInstance().playAudioEff("nv/nvkeyi"))}i>0&&(o.active=!0,n.active=!0,n.children[i].active=!0,o.children[i].active=!0,this.count_down.y>0&&(this.count_down.opacity=0),this.scheduleOnce(function(){a.count_down.opacity=255,n.children[i].active=!1,o.children[i].active=!1,n.active=!1,o.active=!1},2.2))}},t.prototype.gameOver=function(){if(console.log("\u6e38\u620f\u501f\u5bbf:",this.is_game_over,this.board.sum),!this.is_game_over&&(this.is_game_over=!0,this.stopTime(),3!=this.gameType&&(cc.find("Canvas/money_node").active=!0),this.userGameTime>30?this.userChess==this.board.state?(console.log("\u5bf9\u624b\u80dc\u5229"),this.gameType<3?u.conMager.getInstance().showWinNode(u.KEY.UIName.fail_view,this.node.parent,null):u.conMager.getInstance().showWinNode(u.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:1}),u.GameDataStorage.gameStateData.who_sucess=1):(console.log("\u73a9\u5bb6\u80dc\u5229"),this.gameType<3?u.conMager.getInstance().showWinNode(u.KEY.UIName.success_view,this.node.parent,null):u.conMager.getInstance().showWinNode(u.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:0}),u.GameDataStorage.gameStateData.who_sucess=0):1==this.board.win||-1==this.board.win?this.userChess==this.board.win?(this.gameType<3?u.conMager.getInstance().showWinNode(u.KEY.UIName.success_view,this.node.parent,null):u.conMager.getInstance().showWinNode(u.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:0}),u.GameDataStorage.gameStateData.who_sucess=0):(this.gameType<3?u.conMager.getInstance().showWinNode(u.KEY.UIName.fail_view,this.node.parent,null):u.conMager.getInstance().showWinNode(u.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:1}),u.GameDataStorage.gameStateData.who_sucess=1):(this.gameType<3?u.conMager.getInstance().showWinNode(u.KEY.UIName.flat_view,this.node.parent,null):u.conMager.getInstance().showWinNode(u.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:2}),u.GameDataStorage.gameStateData.who_sucess=2),this.board.removeListennner(),2==this.gameType&&0==u.GameDataStorage.gameStateData.who_sucess)){var e=u.GameDataStorage.gameStateData.userZhenFaName;u._pl_fun.getInstance().add_reportAnalytics("event_"+e+"_VictoryNumbers")}},t.prototype.kaiChangDongHua=function(){var e=this;this.ds_headIcon.node.getComponent(cc.Button).interactable=!1,this.user_headIcon.node.getComponent(cc.Button).interactable=!1,u.conMager.getInstance().playAudioEff(u.KEY.audioName.kaiju),u.conMager.getInstance().getPoolNode(u.KEY.poolName.item2,this.node,{callBack:function(){u.conMager.getInstance().getPoolNode(u.KEY.poolName.item3,e.node,{callBack:function(){u.conMager.getInstance().getPoolNode(u.KEY.poolName.setup,e.node,null),e.caixianshou()}})}})},t.prototype.caixianshou=function(){if(this.gameType<3){var e=this.node.getChildByName("heizi"),t=this.node.getChildByName("baizi"),a=this.node.getChildByName("baizi_label"),n=this.node.getChildByName("heizi_label");h.NumberUtil.randomNum(0,1)>0?(this.userChess=d.WHITECHESS,u.conMager.getInstance().getPoolNode(u.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!"),this.board.AIXianShou(),e.setPosition(-270,368),t.setPosition(182,-380),n.setPosition(-225,372),a.setPosition(225,-376)):(this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.userChess=d.BLACKCHESS,u.conMager.getInstance().getPoolNode(u.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"),t.setPosition(-270,368),e.setPosition(182,-380),a.setPosition(-225,372),n.setPosition(225,-376)),this.ai_duihua(3),e.active=!0,t.active=!0,a.active=!0,n.active=!0}this.board.addListenner(),this.startTime(this.board.state)},t.prototype.dsHeadIcon_btn=function(){this.disableClick(),u.conMager.getInstance().playAudioEff(u.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!0},t.prototype.userHeadIcon_btn=function(){this.disableClick(),u.conMager.getInstance().playAudioEff(u.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!0},t.prototype.biaoQing_btn=function(e,t){var a=this;this.hide_userPenl_btn();var n=parseInt(t),o=this.node.getChildByName("user_biaoqing");o.active=!0,o.children[n].active=!0;var i=this.node.getChildByName("user_duihua");this.count_down.y<0&&(this.count_down.opacity=0),i.active=!0,i.children[n].active=!0,u.conMager.getInstance().playAudioEff("nan/"+this.musicNames[n-1]),this.scheduleOnce(function(){o.active=!1,o.children[n].active=!1,a.count_down.opacity=255,i.active=!1,i.children[n].active=!1},2.2)},t.prototype.hide_userPenl_btn=function(){this.disableClick(),u.conMager.getInstance().playAudioEff(u.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!1},t.prototype.hide_dsPenl_btn=function(){this.disableClick(),u.conMager.getInstance().playAudioEff(u.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!1},t.prototype.return_btn=function(){var e=this;this.disableClick(),u.conMager.getInstance().playAudioEff(u.KEY.audioName.btn),3!=this.gameType?u.conMager.getInstance().getPoolNode(u.KEY.poolName.stop_panel,this.node,{callBack:function(t){2==t&&e.renshu()}}):this.onClose(1)},t.prototype.luozizhong_action=function(e){e.active=!0,e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.getComponent(cc.Label).string=""}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50\u4e2d"}),cc.delayTime(.6))))},t.prototype.startTime=function(e){this.userGameTime=0,this.count_down.active=!0;var t=this.node.getChildByName("luozizhong");t.stopAllActions(),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+(30-this.userGameTime),this.userChess==e?(this.count_down.y=-440,t.setPosition(252,-376),this.quan.setPosition(0,-547)):(this.count_down.y=450,t.setPosition(-197,372),this.quan.setPosition(0,554)),t.color=-1==e?cc.color(51,51,51):cc.color(204,204,204),this.quan.getComponent(cc.Sprite).fillRange=1,this.luozizhong_action(t),this.count_down.getChildByName("time").color=cc.color(255,255,255),this.quan.active=!0,this.quan_judge=!0,this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){if(this.TimeDel||(this.userGameTime+=1),!this.is_game_over)if(this.userGameTime>this.max_gameTime)this.gameOver();else{var e=this.max_gameTime-this.userGameTime,t=e+"";e<10&&(t="0"+e),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+t,e<15&&(this.count_down.getChildByName("time").color=cc.color(255,0,0),this.TimeDel||u.conMager.getInstance().playAudioEff(u.KEY.audioName.shijian)),this.TimeDel||(12==this.userGameTime?this.ai_duihua(2,5):21==this.userGameTime?this.ai_duihua(2,20):26==this.userGameTime&&this.ai_duihua(2,80))}},t.prototype.stopTime=function(){this.unschedule(this.updateTime),this.count_down.active=!1,this.quan.active=!1,this.quan_judge=!1,this.node.getChildByName("luozizhong").stopAllActions(),this.node.getChildByName("luozizhong").active=!1},t.prototype.renshu=function(){this.is_game_over||(this.stopTime(),this.is_game_over=!0,u.GameDataStorage.gameStateData.who_sucess=1,u.conMager.getInstance().showWinNode(u.KEY.UIName.fail_view,this.node.parent,null))},t.prototype.ai_renshu=function(){this.is_game_over||(this.stopTime(),this.is_game_over=!0,u.GameDataStorage.gameStateData.who_sucess=0,u.conMager.getInstance().showWinNode(u.KEY.UIName.success_view,this.node.parent,null))},t.prototype.ai_diaoxian=function(){this.is_game_over||(c.commonFunction.updateSprite("head_icon/diaoxian",this.ds_headIcon.node),this.ds_headIcon.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeIn(.4)))),console.log("\u89e6\u53d1\u6389\u7ebf"))},t.prototype.ai_shangxian=function(){this.is_game_over||(c.commonFunction.updateSprite("head_icon/"+this.ds_headIconIndex,this.ds_headIcon.node),this.ds_headIcon.node.opacity=255,this.ds_headIcon.node.stopAllActions(),console.log("\u89e6\u53d1\u4e0a\u7ebf"))},t.prototype.pingju=function(){this.is_game_over||(this.stopTime(),this.board.juesha_judge=!0,this.is_game_over=!0,u.GameDataStorage.gameStateData.who_sucess=2,u.conMager.getInstance().showWinNode(u.KEY.UIName.flat_view,this.node.parent,null))},t.prototype.qiuhe=function(){},t.prototype.shubiao=function(e){this.shubiao_node.active=e},t.prototype.huiqi=function(){},t.prototype.update=function(e){this.quan_judge&&(1==Math.floor(e)&&console.log("1\u79d2\u8fc7\u53bb\u4e86"),this.quan.getComponent(cc.Sprite).fillRange-=1/(60*this.max_gameTime))},i([m(r.dazhao_GameBoard)],t.prototype,"board",void 0),i([m(cc.Prefab)],t.prototype,"whiteChess",void 0),i([m(cc.Prefab)],t.prototype,"blackChess",void 0),i([m(cc.Node)],t.prototype,"quan",void 0),i([m(cc.Node)],t.prototype,"hongDian",void 0),i([_],t)}(u.winRootNode);a.default=f,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../classCon/configSurface":"configSurface","../../utils/platform":"platform","../wuziqi/Piece":"Piece","./../../SSSGF/Utils/NumberUtil":"NumberUtil","./../../utils/commonFunction":"commonFunction","./../common/chessClass":"chessClass","./../wuziqi/dazhao/dazhao_GameBoard":"dazhao_GameBoard"}],dazhao_user:[function(e,t,a){"use strict";cc._RF.push(t,"5310fYBBV1Pi46xMESMCUXy","dazhao_user");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){},i([r],t)}(cc.Component));a.default=c,cc._RF.pop()},{}],dazhao:[function(e,t,a){"use strict";cc._RF.push(t,"bc1540dN3hMTYY14uc62IFP","dazhao");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/dataController/DATA"),r=e("../../../../SSSGF/ssscgf"),c=e("../class_manager"),h=e("../game_manager"),u=e("../model_joiner"),l=cc._decorator,d=l.ccclass,p=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zhenfa_id=0,t.cos=c.joiner_enum.model,t.board=null,t}return o(t,e),t.prototype.model_small_round_win=function(){return!0},t.prototype.one_win=function(){return!0},t.prototype.end_big_game=function(){return!0},t.prototype.end_small_game=function(){return!0},t.prototype.one_player_play_chess=function(){return!0},t.prototype.error_chess_pos=function(){},t.prototype.can_play_chess=function(){},t.prototype.start_small_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_game=function(){return!0},t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t,a){console.error("\u6240\u6709\u4eba\u7684\u9635\u6cd5\u60c5\u51b5\u662f_________________________");for(var n=0;n<a.length;n++){console.log(a[n].joiner_name),r.GameDataStorage.gameStateData.gameType=s.game_type.dazhao;var o=Math.floor(Math.random()*(c.zhenfa_enum.wulei+1)),i=c.zhenfa_enum[o];switch(a[n].cos){case c.joiner_enum.ai:i="sijiao";break;case c.joiner_enum.player:i="dusha"}var u=1;switch(i){case"wanning":u=5;break;case"sijiao":u=3;break;case"wulei":u=5;break;case"bagua":case"fenlie":u=3;break;case"guiyuan":case"meihua":u=5;break;case"chaoniu":u=100;break;case"xueyuyingsha":u=5;break;case"kunlong":u=3;break;case"kedi":u=1;case"dusha":u=3}console.log("\u62bd\u53d6\u5230\u7684\u9635\u6cd5",i);var l=h.game_manager.zhenfa_map.get(i);console.log("\u4e3a\u4ec0\u4e48\u62ff\u4e0d\u5230\u6885\u82b1",l);var d=new(cc.js.getClassByName(i))(this.zhenfa_id,l.ch_name),p=new c.zhenfa_data(this.zhenfa_id,i,l.ch_name,l.attr,u);d.init_zhenfa(p,a[n]),a[n].zhenfa_array.push(d),this.zhenfa_id++}for(n=0;n<a.length;n++)a[n].cos==c.joiner_enum.player&&h.game_manager.init_sort(a[n],1,!0)},t.prototype.init_ui=function(e){this.board=e},i([d],t)}(u.default));a.default=p,cc._RF.pop()},{"../../../../SSSGF/dataController/DATA":"DATA","../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../model_joiner":"model_joiner"}],dragonControll:[function(e,t,a){"use strict";cc._RF.push(t,"d9a14nocq5Ll5k80sUjujj9","dragonControll");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showIndex=-1,t._amdisplay=null,t._armature=null,t.index=0,t}return o(t,e),t.prototype.onLoad=function(){this._amdisplay=this.node.getComponent(dragonBones.ArmatureDisplay),this._armature=this._amdisplay.armature()},t.prototype.changeIndex=function(){var e=[0,2,5,7,8].indexOf(this.index),t=!0,a="Armature1";return-1==e&&(e=[1,3,4,6].indexOf(this.index),t=!1,a="Armature"),{mindex:e,isNan:t,armatureName:a}},t.prototype.initSkin=function(e){this.index=e,this.data=this.changeIndex(),this._amdisplay=this.node.getComponent(dragonBones.ArmatureDisplay),this._amdisplay.armatureName=this.data.armatureName,this._armature=this._amdisplay.armature(),this._amdisplay.playAnimation("daiji",-1),console.log("----------------this.data:",this.data.mindex,e),this.changeView(this.data.mindex,this._armature)},t.prototype.changeView=function(e,t){t.getSlot("1_qianfa").displayIndex=e,t.getSlot("2_lian").displayIndex=e,t.getSlot("3_shenti").displayIndex=e,t.getSlot("4_qunzi").displayIndex=e,t.getSlot("5_yougebo").displayIndex=e,t.getSlot("6_youshoubi").displayIndex=e,t.getSlot("7_youshou").displayIndex=e,t.getSlot("8_zuogebo").displayIndex=e,t.getSlot("9_zuoshoubi").displayIndex=e,t.getSlot("10_zuoshou").displayIndex=e,t.getSlot("11_kua").displayIndex=e,t.getSlot("12_youdatui").displayIndex=e,t.getSlot("14_zuodatui").displayIndex=e,t.getSlot("13_youxiaotui").displayIndex=e,t.getSlot("15_zuoxiaotui").displayIndex=e,t.getSlot("16_houfa").displayIndex=e,this.changeBiaoQing(0)},t.prototype.changeBiaoQing=function(e){this._armature.getSlot("renwu1").displayIndex=0==this.data.mindex?e:-1,this._armature.getSlot("renwu2").displayIndex=1==this.data.mindex?e:-1,this._armature.getSlot("renwu3").displayIndex=2==this.data.mindex?e:-1},t.prototype.playAnim=function(e,t,a){var n=this;this._amdisplay.off(dragonBones.EventObject.FRAME_EVENT),this._amdisplay.playAnimation(e,t),a&&this._amdisplay.once(dragonBones.EventObject.COMPLETE,function(){a()},this),this._amdisplay.on(dragonBones.EventObject.FRAME_EVENT,function(e){console.log("-------------\u52a8\u753b\u5e27\u4e8b\u4ef6\uff1a",e.name);var t=e.name;-1!=t.indexOf("Lz_")||n.changeBiaoQing(t)},this),this._amdisplay.on(dragonBones.EventObject.SOUND_EVENT,function(e){var t=e.name;s.conMager.getInstance().playAudioEff(t)},this)},t.prototype.addLiZiEffect=function(){},i([h],t.prototype,"showIndex",void 0),i([c],t)}(cc.Component);a.default=u,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf"}],dragonResMager:[function(e,t,a){"use strict";cc._RF.push(t,"359d6gZOwRFzax5RsFlq+e9","dragonResMager");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0});var i=function(e){function t(){var t=e.call(this)||this;return t.boneRes={},t.amdisAtla=null,t.amdisAsset=null,t}return o(t,e),t.prototype.init=function(){},t.prototype.getBoneRes=function(e,t){void 0===e&&(e="renwu"),null!=this.boneRes[e]?t(this.boneRes[e].dragonAssets,this.boneRes[e].dragonAtlas):cc.resources.load("ske/renwu/"+e+"_tex",dragonBones.DragonBonesAtlasAsset,function(a,n){cc.resources.load("ske/renwu/"+e+"_ske",dragonBones.DragonBonesAsset,function(e,a){t(n,a)})})},t.prototype.removeBoneRes=function(){},t}(cc.Component);a.default=i,cc._RF.pop()},{}],duishou_node:[function(e,t,a){"use strict";cc._RF.push(t,"76a39Y1Q9lJz6wPdgNYtdip","duishou_node");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.isBtn=!0,t}return o(t,e),t.prototype.onLoad=function(){this.updateState(),this.initState(),s.conMager.getInstance()._msgAtion.on("updateDuishou",this.updateDuishou,this)},t.prototype.initState=function(){},t.prototype.updateDuishou=function(e){this.content.getChildByName("duishou"+e).active=!1},t.prototype.updateState=function(){for(var e=0;e<this.content.childrenCount;e++){var t=this.content.children[e];this.judgeState(t,e+2)&&(t.name="duishou"+(e+2),this.bindClickEvent(t.getComponent(cc.Button),e+2))}},t.prototype.bindClickEvent=function(e,t){var a=new cc.Component.EventHandler;a.target=this.node,a.component="duishou_node",a.handler="btn",a.customEventData=t,e.clickEvents.push(a)},t.prototype.judgeState=function(e,t){return-1==s.GameDataStorage.getUser().userData.duishouUnlockState.indexOf(t)||(e.active=!1,!1)},t.prototype.btn=function(e,t){var a=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.isBtn&&(this.isBtn=!1,this.scheduleOnce(function(){a.isBtn=!0},.3),s.conMager.getInstance().getPoolNode(s.KEY.poolName.duishou_panel,cc.find("Canvas"),{duishou_index:t,callBack:this.callBck}))},t.prototype.callBck=function(){},i([h(cc.Node)],t.prototype,"content",void 0),i([c],t)}(cc.Component);a.default=u,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf"}],duiyi_result_view:[function(e,t,a){"use strict";cc._RF.push(t,"6bc5fvpkv5MqpRK06L0cBlu","duiyi_result_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../scenes/mainScene"),c=cc._decorator,h=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;s._pl_fun.getInstance().stopCreateVideo(),s.conMager.getInstance().playAudioEff("\u7ffb\u724c");var a="hei1",n="hei2";0==e[0].whose_round?(a="hei1",n="hei2"):2==e[0].whose_round?(a="lv1",n="lv2"):(a="bai1",n="bai2");var o=this.node.getChildByName("restart_btn");o.y=-1500;var i=this.node.getChildByName("btn_return");i.y=-1620;var r=this.node.getChildByName("qizi").getComponent(sp.Skeleton);r.node.active=!0,r.setAnimation(0,n,!1),this.scheduleOnce(function(){r.setAnimation(0,a,!0),t.moveShow(o,cc.v3(0,-200),null),t.moveShow(i,cc.v3(0,-320),null)},.95)},t.prototype.onClose=function(e){if(s.conMager.getInstance().hideWinNode(s.KEY.UIName.duiyi_result_view),s.GameDataStorage.gameStateData.reward_gold,s.GameDataStorage.gameStateData.gameType,s.conMager.getInstance().hideWinNode(s.KEY.UIName.jd_game_view),2==e){var t=s.GameDataStorage.gameStateData.reward_gold,a=s.GameDataStorage.gameStateData.gameType;4==s.GameDataStorage.gameStateData.gameType?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.zhibo_game_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.zhibo_game_view,null,{reward_gold:t,gameType:a})):s.conMager.getInstance().showWinNode(s.KEY.UIName.jd_game_view,null,{reward_gold:t,gameType:a})}else if(1==e&&"mainScene"==s.GameDataStorage.gameStateData.sceneName){if(4==s.GameDataStorage.gameStateData.gameType)return;cc.find("Canvas").getComponent(r.default).showHideUi(!0)}},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.return_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1)},t.prototype.restart_btn=function(){this.disableClick(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(2)},i([h],t)}(s.winRootNode));a.default=u,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../scenes/mainScene":"mainScene"}],dusha:[function(e,t,a){"use strict";cc._RF.push(t,"5a895vwCRdIOYgjZKnfsUMf","dusha");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/ssscgf"),r=e("../game_manager"),c=e("../zhenfa_joiner"),h=cc._decorator,u=h.ccclass,l=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_number_max=2,t.use_number=0,t.board=null,t.clone_chess_array=[],t.dusha_pos_array=null,t}return o(t,e),t.prototype.use_zhenfa=function(e){var t=this.judge_active();return console.log("hhhhh\u6bd2\u6740\u96be\u9053\u6ca1\u6cd5\u52a8\u561b1111111111:",t),0!=t||e==this.my_player||(t=this.judge_number(),console.log("hhhh\u6bd2\u6740\u96be\u9053\u6ca1\u6cd5\u52a8\u561b2222222222222:",t),0!=t||(this.dusha_check_pos(),console.log("hhhh\u6bd2\u6740\u96be\u9053\u6ca1\u6cd5\u52a8\u561b:",this.dusha_pos_array.length),!(this.dusha_pos_array.length>0)||(this.dusha_zhen(),t)))},t.prototype.use_zhenfa_finish=function(){return!0},t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.board=e},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return this.updateDuShaState(!0),!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(){var e=this.judge_active();return console.log("\u6bd2\u6740\u96be\u9053\u6ca1\u6cd5\u52a8\u561b1111111111:",e,this.my_player.state),0!=e||(e=this.judge_number(),console.log("\u6bd2\u6740\u96be\u9053\u6ca1\u6cd5\u52a8\u561b2222222222222:",e),0!=e||(this.dusha_check_pos(),console.log("\u6bd2\u6740\u96be\u9053\u6ca1\u6cd5\u52a8\u561b:",this.dusha_pos_array),!(this.dusha_pos_array.length>0)||(this.dusha_zhen(),e)))},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return this.use_number=0,this.updateDuShaState(!1),!0},t.prototype.one_win=function(){return!0},t.prototype.judgeDusha=function(e,t){for(var a=e[0]-1,n=e[1]-1,o=!1,i=0;i<3;i++)for(var s=0;s<3;s++)this.chess_array[a+i]&&this.chess_array[a+i][n+s]&&this.chess_array[a+i][n+s].chess_data&&this.chess_array[a+i][n+s].chess_data.state!=t&&(o=!0);return o},t.prototype.dusha_check_pos_chongfu=function(e,t){for(var a=!0,n=e.length,o=0;o<n;o++){var i=e[o];if(i[0]==t[0]&&i[1]==t[1]){a=!1;break}}return a},t.prototype.dusha_check_pos=function(){var e=[];this.dusha_pos_array=[];for(var t=0;t<15;t++)for(var a=0;a<15;a++){if(this.chess_array[t]&&this.chess_array[t][a]&&this.chess_array[t][a].chess_data&&this.chess_array[t][a].chess_data.state==this.my_player.state){var n=[t,a];this.chess_array[t][a].chess_data.dusha_hit_number>0&&this.dusha_check_pos_chongfu(e,n)&&e.push(n),this.judgeDusha(n,this.my_player.state)&&this.dusha_check_pos_chongfu(e,n)&&e.push(n)}14==t&&14==a&&(this.dusha_pos_array=e)}},t.prototype.dusha_zhen=function(){var e,t=this;e=this.dusha_pos_array;var a=4+this.data.level-1;this.use_number+=1,a>50&&(a=50);for(var n=function(n){var i=e[n],c=0;o.scheduleOnce(function(){console.log("\u6bd2\u6740\u7b2c\u560e\u560e\u560e\u4e2a\u5b50\u7684\u7eff\u8272",i,t.my_player.state);var o=t.chess_array[i[0]][i[1]].chess_data.node;o.active=!0,o.color=cc.color(155,155,155),s.conMager.getInstance().playAudioEff("dusha/pen");for(var h=0;h<a;h++){var u=c=h*(360/a),l=s.NumberUtil.rotate(u,cc.v2(0,1e3));s.conMager.getInstance().getPoolNode(s.KEY.poolName.new_duye,t.board.down_effect,{bool:!0,pos:i,angle:c,tag:t.my_player.state,position:l,callback:function(e,a,n,o){t.scheduleOnce(function(){var e=o[0],a=o[1];r.game_manager.zhenfa_delect_chess(t.chess_array[e][a].chess_data.pos)},.5)}})}t.scheduleOnce(function(){o.color=cc.color(255,255,255)},1),n==e.length-1&&t.scheduleOnce(function(){r.game_manager.get_zhenfa_event(t.my_player,t.data)},2)},.4*n)},o=this,i=0;i<e.length;i++)n(i)},t.prototype.updateDuShaState=function(e){for(var t=0;t<15;t++)for(var a=0;a<15;a++)this.chess_array[t]&&this.chess_array[t][a]&&this.chess_array[t][a].chess_data&&this.chess_array[t][a].chess_data.state==this.my_player.state&&(e||this.chess_array[t][a].chess_data.dusha_hit_number>0&&(this.chess_array[t][a].chess_data.dusha_hit_number=0),this.chess_array[t][a].chess_data.dusha&&(this.chess_array[t][a].chess_data.dusha=e))},i([u],t)}(c.default));a.default=l,cc._RF.pop()},{"../../../../SSSGF/ssscgf":"ssscgf","../game_manager":"game_manager","../zhenfa_joiner":"zhenfa_joiner"}],duye_rongjie:[function(e,t,a){"use strict";cc._RF.push(t,"bc0f59ZXRhCI7WkYFrDbFFd","duye_rongjie");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this,a=e[0].ani_name;this.node.x=e[0].pos.x,this.node.y=e[0].pos.y;var n=s.NumberUtil.randomNum(1,360);this.node.rotation=n;var o=this.node.getComponent(sp.Skeleton);o.setAnimation(0,a,!1),o.setCompleteListener(function(){t.onClose(1)})},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.start=function(){},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf"}],duye:[function(e,t,a){"use strict";cc._RF.push(t,"d4b679PkZFMLbpwH0JuW4b2","duye");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callback=null,t.pos=[],t.isjude=!0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;this.node.opacity=255,this.node.zIndex=4;var a=e[0].pos;this.pos=a,this.callback=e[0].callback;var n=46*a[0],o=46*a[1];this.node.setPosition(n,o);var i=e[0].position,s=e[0].angle;this.node.angle=s;var r=e[0].tag;if(console.log("\u4f20\u8fdb\u6765tag\u662f\u591a\u5c11:",r),-1==r&&(r=0),e[0].bool){var c=cc.v2(Math.floor(46*a[0])+22,Math.floor(46*a[1])+22);c=cc.v2(c.x-322-22,c.y-322-22),this.node.setPosition(c.x,c.y)}this.node.getComponent(cc.BoxCollider).tag=r,this.isjude=!0,cc.tween(this.node).by(7,{position:cc.v3(i.x,i.y)},{easing:"expoOut"}).call(function(){t.onClose(1)}).start()},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.onCollisionEnter=function(e){if(this.isjude){var t=e.node.getComponent(cc.BoxCollider).tag,a=this.node.getComponent(cc.BoxCollider).tag;if("chess"==e.node.name){var n=e.node.getComponent(e.node.name).pos,o=e.node.getComponent(e.node.name).judge;if(console.log("\u5bf9\u65b9\u7684\u4f4d\u7f6e",t,a,o),t!=a&&(1==t||0==t)&&o){e.node.getComponent(e.node.name).judge=!1;var i=e.node.parent,r=this.pos[0],c=this.pos[1],h=n[0],u=n[1],l=cc.v2(h-r,u-c),d=s.NumberUtil.randomNum(2,5);e.node.parent.zIndex=8,e.node.getChildByName("liewen_dusha").active=!0;var p=46*l.x*d,g=46*l.y*d,_=cc.v2(46*h,46*u),m=cc.v2(p,g),f=_.sub(m).mag()/46/18;cc.tween(i).by(f,{x:p,y:g},{easing:"circOut"}).to(.2,{opacity:0}).call(function(){i.destroy()}).start(),this.callback&&this.callback(this.pos,a,i,n)}}}},t.prototype.update=function(){},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf"}],fail_view:[function(e,t,a){"use strict";cc._RF.push(t,"a097aF6IvVChJtzQPjZf6er","fail_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/platform"),c=e("../../SSSGF/dataController/DATA"),h=e("../../utils/as_util"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callBack=null,t.gameType=0,t.judgeVideo=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){s._pl_fun.getInstance().stopCreateVideo(),s.conMager.getInstance().playAudioEff("\u9519\u8bef");var e=this.node.getChildByName("Node");this.scaleBigShow(e,cc.v3(0,0),null),this.initData(e);var t=this.node.getChildByName("shibai").getComponent(sp.Skeleton);t.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.REALTIME),t.setAnimation(0,"a-hui",!1);var a=!0;t.setCompleteListener(function(){a&&(a=!1,t.setAnimation(0,"b-hui",!0))});var n=e.getChildByName("jibeikuang");if(s.GameDataStorage.gameStateData.rewardmultiple>=2?(n.getChildByName("text").getComponent(cc.Label).string=s.GameDataStorage.gameStateData.rewardmultiple+"\u500d",n.active=!0):n.active=!1,console.log("\u8f93\u4e86\u9700\u8981\u6263\u9664\u7684\u91d1\u5e01:",s.GameDataStorage.gameStateData.reward),s.conMager.getInstance()._msgAtion.emit("updateMoney",-s.GameDataStorage.gameStateData.reward),r.platform.now_platform!=r.platform_type.is_tt){e.getChildByName("btn_share").active=!1,e.getChildByName("btn_next").x=0,h.as_util.show_banner();var o=setTimeout(function(){r.platform.now_platform!=r.platform_type.is_vivo&&r.platform.now_platform!=r.platform_type.is_topon||h.as_util.show_nativeType(),clearTimeout(o)},500)}5==s.GameDataStorage.gameStateData.gameType&&s._pl_fun.getInstance().add_reportAnalytics("event_LuanDouMiWuBaiLv"),s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_hbdd&&s._pl_fun.getInstance().add_reportAnalytics("event_LuanDouHeiBaiBaiLv"),s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_jxmc&&s._pl_fun.getInstance().add_reportAnalytics("LD_jixiemicheng_fail"),s.GameDataStorage.gameStateData.gameType==c.game_type.sanren&&s._pl_fun.getInstance().add_reportAnalytics("event_SanRenMoShiBaiLv"),s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_blxj&&s._pl_fun.getInstance().add_reportAnalytics("event_LuanDouBoLiBaiLv")},t.prototype.onClose=function(){var e=this;console.log("\u5931\u8d25\u4e86",s.GameDataStorage.gameStateData.gameType);var t=this.node.getChildByName("Node");this.scaleSmallHide(t,cc.v3(0,0),function(){s.conMager.getInstance().hideWinNode(s.KEY.UIName.fail_view),5==s.GameDataStorage.gameStateData.gameType?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_game_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.canju?s.conMager.getInstance()._msgAtion.emit("conglai"):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_hbdd?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_hbdd_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.lianzhao?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.lianzhao_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.sanren?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.sanren_view),s.GameDataStorage.gameStateData.who_sucess=1,s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_jxmc?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_jxmc_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_tslh?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_tslh_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_blxj?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_blxj_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_gssk?s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,e.node.parent,null):s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,e.node.parent,null),s.GameDataStorage.gameStateData.game_mode&&(s.conMager.getInstance().hideWinNode(s.KEY.UIName.game_board),s.GameDataStorage.gameStateData.game_mode=null)})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.initData=function(e){var t=e.getChildByName("y_name").getComponent(cc.Label),a=e.getChildByName("s_name").getComponent(cc.Label),n=e.getChildByName("y_money").getComponent(cc.Label),o=e.getChildByName("s_money").getComponent(cc.Label),i=e.getChildByName("s_name_2").getComponent(cc.Label),r=e.getChildByName("s_money_2").getComponent(cc.Label);0==s.GameDataStorage.gameStateData.who_sucess?(t.string=s.GameDataStorage.getUser().userData.gameName,a.string=s.GameDataStorage.gameStateData.ds_name,s.GameDataStorage.gameStateData.gameType==c.game_type.sanren&&(i.string=s.GameDataStorage.gameStateData.ds_name2)):(t.string=s.GameDataStorage.gameStateData.ds_name,a.string=s.GameDataStorage.getUser().userData.gameName),s.GameDataStorage.gameStateData.gameType==c.game_type.canju&&(t.node.active=!1,n.node.active=!1,e.getChildByName("qian_1").active=!1,a.string=s.GameDataStorage.getUser().userData.gameName,a.node.y=104,o.node.y=104,e.getChildByName("qian").y=104),s.GameDataStorage.gameStateData.gameType==c.game_type.jingdian&&(s.GameDataStorage.getUser().userData.failNum++,s.GameDataStorage.preserveGameData()),s.GameDataStorage.gameStateData.reward>s.GameDataStorage.getUser().userData.money&&(s.GameDataStorage.gameStateData.reward=s.GameDataStorage.getUser().userData.money),i.node.active=!1,r.node.active=!1,e.getChildByName("qian_2").active=!1,s.GameDataStorage.gameStateData.gameType==c.game_type.sanren?(i.node.active=!0,r.node.active=!0,e.getChildByName("qian_2").active=!0,3==s.GameDataStorage.gameStateData.who_sucess?(n.string="-"+s.GameDataStorage.gameStateData.reward/2,r.string="+"+s.GameDataStorage.gameStateData.reward,o.string="-"+s.GameDataStorage.gameStateData.reward/2):4==s.GameDataStorage.gameStateData.who_sucess?(n.string="+"+s.GameDataStorage.gameStateData.reward/2,r.string="+"+s.GameDataStorage.gameStateData.reward/2,o.string="-"+s.GameDataStorage.gameStateData.reward):(n.string="+"+s.GameDataStorage.gameStateData.reward,r.string="-"+s.GameDataStorage.gameStateData.reward/2,o.string="-"+s.GameDataStorage.gameStateData.reward/2)):(n.string="+"+s.GameDataStorage.gameStateData.reward,o.string="-"+s.GameDataStorage.gameStateData.reward)},t.prototype.share_btn=function(){var e=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.judgeVideo||(this.judgeVideo=!0,this.scheduleOnce(function(){e.judgeVideo=!1},3),s._pl_fun.getInstance().onShareVideo(function(t){e.judgeVideo=!1,t&&s._pl_fun.getInstance().add_reportAnalytics("event_FenXiangSuccessNumbers")}))},t.prototype.next_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.judgeVideo||(this.judgeVideo=!0,this.onClose(2))},i([l],t)}(s.winRootNode));a.default=d,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../utils/as_util":"as_util","../../utils/platform":"platform"}],fenlie:[function(e,t,a){"use strict";cc._RF.push(t,"a30cdUu90NLz4I3audQFXB+","fenlie");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/ssscgf"),r=e("../class_manager"),c=e("../game_manager"),h=e("../zhenfa_joiner"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_number_max=2,t.use_number=0,t.board=null,t.clone_chess_array=[],t.fenlie_max=2,t.fenlie_cishu=0,t.fenlie_first_max=4,t.fenlie_second_max=2,t.fenlie_callback=!1,t.donghua_run=!1,t.last_fenlie_pos=[],t}return o(t,e),t.prototype.use_zhenfa=function(e){var t=this.judge_active();return console.log("\u600e\u4e48\u56de\u4e8b\u554a\uff01",e.joiner_name,",",t),e==this.my_player||0!=t||(console.log("1"),0!=(t=this.judge_number())||(console.log("2"),this.judge_show_fenlie()))},t.prototype.use_zhenfa_finish=function(){return!0},t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.board=e},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return this.clone_chess_board(),!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(e){var t=this.judge_active();return e==this.my_player&&0==t?0!=(t=this.judge_number())||(t=this.judge_show_fenlie()):(this.clone_chess_board(),!0)},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return this.use_number=0,!0},t.prototype.one_win=function(){return!0},t.prototype.judge_show_fenlie=function(){var e=this.get_change_chess();if(e.length>=1){for(var t=0;t<e.length;t++)this.last_fenlie_pos.push(cc.v2(e[t].board_pos.x,e[t].board_pos.y));return this.show_fenlie(),!1}return!0},t.prototype.show_fenlie=function(){var e=this;this.use_number++;var t=!1;this.my_player.cos==r.joiner_enum.player?(t=!0,s.conMager.getInstance().playAudioEff("nan/nanfenlie")):s.conMager.getInstance().playAudioEff("nv/nvfenlie"),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.board.ui_parent,{fileName:"fenlie",ani_name:"animation",cb:function(){e.fenlie_max=e.data.level,e.fenlie_callback=!1,e.donghua_run=!1,e.fenlie_zhen()},is_user:t})},t.prototype.fenlie_zhen=function(){var e=this;if(this.fenlie_cishu++,this.fenlie_cishu>this.fenlie_max){if(1==this.fenlie_callback)return;return this.fenlie_callback=!0,this.fenlie_cishu=0,void this.scheduleOnce(function(){e.clone_chess_board(),c.game_manager.get_zhenfa_event(e.my_player,e.data)},.5)}for(var t=[],a=0;a<this.data.level&&!(this.last_fenlie_pos.length<1);a++){var n=Math.floor(Math.random()*this.last_fenlie_pos.length);t.push(this.last_fenlie_pos[n]),this.last_fenlie_pos.splice(n,1)}if(this.last_fenlie_pos=[],t.length<1&&0==this.donghua_run)return this.clone_chess_board(),void c.game_manager.get_zhenfa_event(this.my_player,this.data);var o=!1,i=!1,r=function(a){console.log("________________________",a);var n=Math.floor(4*Math.random()),r=[];switch(n){case 0:r.push(cc.v2(-1,-1),cc.v2(1,1));break;case 1:r.push(cc.v2(-1,0),cc.v2(1,0));break;case 2:r.push(cc.v2(-1,1),cc.v2(1,-1));break;case 3:r.push(cc.v2(0,1),cc.v2(0,-1))}var u=0;1==h.fenlie_cishu?u=h.fenlie_first_max:2==h.fenlie_cishu&&(u=h.fenlie_second_max);for(var l=Math.floor(Math.random()*(u+1)+1),d=function(n){for(var u=t[a].x+r[n].x*l,d=t[a].y+r[n].y*l,p=function(){e.chess_array[t[a].x]&&e.chess_array[t[a].x][t[a].y]&&e.chess_array[t[a].x][t[a].y].chess_data&&e.chess_array[t[a].x][t[a].y].chess_data.state!=e.state&&s.conMager.getInstance().getPoolNode(s.KEY.poolName.new_fenlie_qizi,e.board.up_effect,t[a],u,d,function(){},function(){},function(){e.chess_array[t[a].x][t[a].y].chess_data.state=e.my_player.state,e.chess_array[t[a].x][t[a].y].chess_data.show_data()},2)},g=0;g<l;g++)if(h.chess_array[u]&&null!==h.chess_array[u][d]){if(h.chess_array[u]&&h.chess_array[u][d]&&!(h.chess_array[u]&&h.chess_array[u][d]&&h.chess_array[u][d].chess_data)){0==o&&(h.donghua_run=!0,o=!0),h.last_fenlie_pos.push(cc.v2(u,d));var _=1;1!=h.fenlie_cishu&&(_=0),s.conMager.getInstance().getPoolNode(s.KEY.poolName.new_fenlie_qizi,h.board.up_effect,t[a],u,d,function(){var t=cc.tween(e.node).call(function(){});c.game_manager.zhenfa_play_chess(cc.v2(u,d),e.my_player,t)},function(){1==o&&0==i&&(i=!0,e.fenlie_zhen())},function(){p()},_);break}if(u-=r[n].x,d-=r[n].y,p(),u==t[a].x&&u==t[a].y)break}else if(p(),u-=r[n].x,d-=r[n].y,u==t[a].x&&u==t[a].y)break},p=0;p<r.length;p++)d(p)},h=this;for(a=0;a<t.length;a++)r(a);0==o&&this.fenlie_zhen()},t.prototype.clone_chess_board=function(){this.clone_chess_array=this.board.get_chess_data_clone(),this.last_fenlie_pos=[]},t.prototype.get_change_chess=function(){for(var e=[],t=0;t<this.chess_array.length;t++)for(var a=0;a<this.chess_array[t].length;a++)this.chess_array[t][a].chess_data&&!this.clone_chess_array[t][a].chess_data&&this.chess_array[t][a].chess_data.state==this.my_player.state?e.push(this.chess_array[t][a]):!this.chess_array[t][a].chess_data&&this.clone_chess_array[t][a].chess_data&&this.clone_chess_array[t][a].chess_data.state==this.my_player.state?e.push(this.chess_array[t][a]):this.chess_array[t][a].chess_data&&this.clone_chess_array[t][a].chess_data&&this.chess_array[t][a].chess_data.state==this.my_player.state&&this.clone_chess_array[t][a].chess_data.state!=this.my_player.state?e.push(this.chess_array[t][a]):this.chess_array[t][a].chess_data&&this.clone_chess_array[t][a].chess_data&&this.chess_array[t][a].chess_data.state!=this.my_player.state&&this.clone_chess_array[t][a].chess_data.state==this.my_player.state&&e.push(this.chess_array[t][a]);return e},i([l],t)}(h.default));a.default=d,cc._RF.pop()},{"../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../zhenfa_joiner":"zhenfa_joiner"}],flat_view:[function(e,t,a){"use strict";cc._RF.push(t,"7e1bdWHvoNO55nEPpapOrny","flat_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/platform"),c=e("../../SSSGF/dataController/DATA"),h=e("../../utils/as_util"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callBack=null,t.gameType=0,t.judgeVideo=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){s._pl_fun.getInstance().stopCreateVideo(),s.conMager.getInstance().playAudioEff("\u7ffb\u724c");var e=this.node.getChildByName("Node");this.scaleBigShow(e,cc.v3(0,0),null),this.initData(e),s.conMager.getInstance().playAudioEff(s.KEY.audioName.pingju);var t=this.node.getChildByName("shibai").getComponent(sp.Skeleton);t.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.REALTIME),t.setAnimation(0,"a-lv",!1);var a=!0;if(t.setCompleteListener(function(){a&&(a=!1,t.setAnimation(0,"b-lv",!0))}),r.platform.now_platform!=r.platform_type.is_tt){e.getChildByName("btn_share").active=!1,e.getChildByName("btn_next").x=0;var n=setTimeout(function(){r.platform.now_platform!=r.platform_type.is_vivo&&r.platform.now_platform!=r.platform_type.is_topon||h.as_util.show_nativeType(),clearTimeout(n)},500)}5==s.GameDataStorage.gameStateData.gameType?s._pl_fun.getInstance().add_reportAnalytics("event_LuanDouMiWuPingJuLv"):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_hbdd?s._pl_fun.getInstance().add_reportAnalytics("event_LuanDouHeiBaiPingJuLv"):s.GameDataStorage.gameStateData.gameType==c.game_type.sanren?s._pl_fun.getInstance().add_reportAnalytics("event_SanRenMoShiPingJuLv"):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_jxmc?s._pl_fun.getInstance().add_reportAnalytics("LD_jixiemicheng_draw"):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_blxj&&s._pl_fun.getInstance().add_reportAnalytics("event_LuanDouBoLiPingJuLv")},t.prototype.onClose=function(){var e=this;console.log("----------onClose------------\u7ed3\u679c:",s.GameDataStorage.gameStateData.who_sucess);var t=this.node.getChildByName("Node");this.scaleSmallHide(t,cc.v3(0,0),function(){s.conMager.getInstance().hideWinNode(s.KEY.UIName.flat_view),5==s.GameDataStorage.gameStateData.gameType?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_game_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.canju?s.conMager.getInstance()._msgAtion.emit("conglai"):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_hbdd?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_hbdd_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.lianzhao?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.lianzhao_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.sanren?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.sanren_view),s.GameDataStorage.gameStateData.who_sucess=2,s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_jxmc?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_jxmc_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_tslh?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_tslh_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_blxj?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_blxj_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,e.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_gssk?s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,cc.find("Canvas"),null):s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,e.node.parent,null)}),s.GameDataStorage.gameStateData.game_mode&&(s.conMager.getInstance().hideWinNode(s.KEY.UIName.game_board),s.GameDataStorage.gameStateData.game_mode=null)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.initData=function(e){var t=e.getChildByName("y_name").getComponent(cc.Label),a=e.getChildByName("s_name").getComponent(cc.Label),n=e.getChildByName("y_money").getComponent(cc.Label),o=e.getChildByName("s_money").getComponent(cc.Label),i=e.getChildByName("s_name_2").getComponent(cc.Label),r=e.getChildByName("s_money_2").getComponent(cc.Label);t.string=s.GameDataStorage.getUser().userData.gameName,a.string=s.GameDataStorage.gameStateData.ds_name,s.GameDataStorage.gameStateData.gameType==c.game_type.sanren?(i.string=s.GameDataStorage.gameStateData.ds_name2,i.node.active=!0,r.node.active=!0,e.getChildByName("qian_2").active=!0):(i.node.active=!1,r.node.active=!1,e.getChildByName("qian_2").active=!1),s.GameDataStorage.gameStateData.gameType==c.game_type.canju&&(t.node.y=140,n.node.y=140,a.node.active=!1,o.node.active=!1,e.getChildByName("qian_1").y=140,e.getChildByName("qian").active=!1),s.GameDataStorage.gameStateData.gameType==c.game_type.jingdian&&(s.GameDataStorage.getUser().userData.flatNum++,s.GameDataStorage.preserveGameData())},t.prototype.share_btn=function(){var e=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.judgeVideo||(this.judgeVideo=!0,this.scheduleOnce(function(){e.judgeVideo=!1},3),s._pl_fun.getInstance().onShareVideo(function(t){e.judgeVideo=!1,t&&s._pl_fun.getInstance().add_reportAnalytics("event_FenXiangSuccessNumbers")}))},t.prototype.next_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.judgeVideo||(this.judgeVideo=!0,this.onClose(2))},i([l],t)}(s.winRootNode));a.default=d,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../utils/as_util":"as_util","../../utils/platform":"platform"}],front_hbdd:[function(e,t,a){"use strict";cc._RF.push(t,"42fe73L7ydEM7qc+1n8/LFK","front_hbdd");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("../../../utils/commonFunction"),c=e("./chessAi_hbdd"),h=e("./GameBoard_hbdd"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.AI=null,t.whose_round=0,t.is_over=!1,t.state=0,t.zhenFaName="",t.zhenFaName_pare="",t.cb=null,t.fenlie_max=2,t.fenlie_cishu=0,t.fenlie_first_max=4,t.fenlie_second_max=2,t.fenlie_callback=!1,t.donghua_run=!1,t.yanchi=0,t}return o(t,e),t.prototype.onLoad=function(){this.board.initfront(this)},t.prototype.showFront=function(e,t,a){var n=this;this.cb=a,this.is_over=!0,this.state=e,this.scheduleOnce(function(){n.zhenFaName=t;var e="\u4e07\u5b81\u9635\u6cd5",a=!1,o=null,i=0,r=["nan","nv"],c=n.board.gameScene.node.getChildByName("ds_duihua"),h=n.board.gameScene.node.getChildByName("user_duihua"),u=[h,c];if("fenlie"!=t&&(n.board.yilun_qizi_v2=[]),n.state!=n.board.gameScene.userChess?i=1:(a=!0,i=0),"fenlie"==n.zhenFaName&&(0==i?i=1:(i=1)&&(i=0)),console.log("\u9078\u4e2d\u7684\u5c0d\u8a71\u6846\u4e82\u641e:",i,n.state),2==s.GameDataStorage.getUser().userData.zhenFaMap[t].attr&&(i=0==i?1:0,a=!a),"wanning"==t)e="\u4e07\u5b81\u9635\u6cd5",n.add_zhenfa_ani(t,"animation",n.wanning_zhen.bind(n),a);else if("bagua"==t)e="\u516b\u5366\u9635",n.add_zhenfa_ani(t,"animation",n.bagua_zhen.bind(n),a);else if("sijiao"==t)e="\u56db\u65b9\u9635",n.add_zhenfa_ani(t,"animation",n.sijiao_zhen.bind(n),a);else if("kedi"==t)e="\u514b\u654c\u5148\u673a",n.add_zhenfa_ani(t,"animation",function(){n.zhenFaCallback()},a);else if("wulei"==t){console.log("\u8981\u91ca\u653e\u4e94\u96f7\u9635\u6cd5"),e="\u4e94\u96f7\u9635";var l=cc.repeatForever(cc.sequence(cc.moveBy(.02,cc.v2(4,4)),cc.moveBy(.04,cc.v2(-8,-8)),cc.moveBy(.02,cc.v2(4,4)))),d=n.node.parent;n.scheduleOnce(function(){s.conMager.getInstance().playAudioEff("wulei/lei"),d.runAction(l),n.scheduleOnce(function(){d.stopAllActions(),d.setPosition(0,0)},.5)},1.3),n.add_zhenfa_ani(t,"animation",function(){n.wulei_zhen()},a)}else"fenlie"==t&&(e="\u5206\u88c2\u9635",n.add_zhenfa_ani(t,"animation",function(){n.fenlie_max=s.GameDataStorage.getUser().userData.zhenFaMap.fenlie.level,n.fenlie_callback=!1,n.donghua_run=!1,n.yanchi=0,n.fenlie_zhen()},a));(o=u[i])==h&&n.board.gameScene.count_down.y<0&&(n.board.gameScene.count_down.opacity=0),o==c&&n.board.gameScene.count_down.y>0&&(n.board.gameScene.count_down.opacity=0),o.getChildByName("str").getComponent(cc.Label).string=e,o.active=!0,s.conMager.getInstance().playAudioEff(s.KEY.audioName.juesha),n.scheduleOnce(function(){s.conMager.getInstance().playAudioEff(r[i]+"/"+r[i]+t),n.scheduleOnce(function(){o.getChildByName("str").getComponent(cc.Label).string="",o.active=!1,n.board.gameScene.count_down.opacity=255},1)},1)},.3)},t.prototype.add_zhenfa_ani=function(e,t,a,n){s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.node.parent,{fileName:e,ani_name:t,cb:a,is_user:n})},t.prototype.wanning_zhen=function(){for(var e=this,t=[],a=this.board.judgeSize,n=0;n<a;n++)for(var o=function(o){if(0==i.board.maze[n][o]){var r=[n,o];t.push(r)}if(n==a-1&&o==a-1){var c=s.GameDataStorage.getUser().userData.zhenFaMap.wanning.level;i.state!=i.board.gameScene.userChess&&(c=s.GameDataStorage.gameStateData.ds_zhenfalevel),c*=10;var h=[];(t=s.NumberUtil.outOfOrder(t)).length<c&&(c=t.length);for(var u=0;u<c;u++)if(r=t[u],h.push(r),u==c-1){s.GameDataStorage.gameStateData.chess_num=h.length,i.board.gameScene.chess_num=s.GameDataStorage.gameStateData.chess_num;for(var l=function(t){var a=h[t],n=1/h.length;h.length>=100&&(n=2/h.length),i.scheduleOnce(function(){var n=a[0]*e.board.block,o=a[1]*e.board.block;e.board.dazhao_moveInChess(n,o,e.state),t==h.length-1&&e.zhenFaCallback()},t*n)},d=0;d<h.length;d++)l(d)}}},i=this,r=0;r<a;r++)o(r)},t.prototype.sijiao_zhen=function(){var e=this,t=this.board.newx/this.board.block,a=this.board.newY/this.board.block,n=s.GameDataStorage.getUser().userData.zhenFaMap.sijiao.level;this.state!=this.board.gameScene.userChess&&(n=s.GameDataStorage.gameStateData.ds_zhenfalevel);var o,i,r,c,h=(n-2)%3,u=2*Math.floor((n-2)/3)+3,l=Math.floor(u/2),d=[];n>1?this.checkWin1(t,a,u,l,d,function(){e.addpos(t,a,h,d,l),e.ailuozi(d)}):(o=[t+1,a],i=[t-1,a],r=[t,a+1],c=[t,a-1],d.push(o),d.push(i),d.push(r),d.push(c),this.ailuozi(d))},t.prototype.fenlie_zhen=function(){var e=this;if(this.fenlie_cishu++,this.fenlie_cishu>this.fenlie_max){if(1==this.fenlie_callback)return;return this.fenlie_callback=!0,this.fenlie_cishu=0,console.error("\u4e0d\u80fd\u5206\u88c2\u4e86"),void this.scheduleOnce(function(){e.zhenFaCallback()},1)}for(var t=[],a=0;a<this.board.yilun_qizi_v2.length;a++)t.push(this.board.yilun_qizi_v2[a]);this.board.yilun_qizi_v2=[],t.length<1&&0==this.donghua_run&&this.zhenFaCallback();var n=!1,o=!1,i=function(a){c.yanchi=0;var i=Math.floor(4*Math.random()),h=[];switch(i){case 0:h.push(cc.v2(-1,-1),cc.v2(1,1));break;case 1:h.push(cc.v2(-1,0),cc.v2(1,0));break;case 2:h.push(cc.v2(-1,1),cc.v2(1,-1));break;case 3:h.push(cc.v2(0,1),cc.v2(0,-1))}var u=0;1==c.fenlie_cishu?u=c.fenlie_first_max:2==c.fenlie_cishu&&(u=c.fenlie_second_max);for(var l=Math.floor(Math.random()*(u+1)+1),d=function(i){for(var u=t[a].x+h[i].x*l,d=t[a].y+h[i].y*l,p=function(){var n=t[a].x+15*t[a].y,o=e.board.chess_map[n];o&&(o.stopAllActions(),e.board.maze[t[a].x][t[a].y]!=e.state&&s.conMager.getInstance().getPoolNode(s.KEY.poolName.qizi,e.node,t[a],u,d,function(){},function(){},function(){e.board.maze[t[a].x][t[a].y]=e.state,r.commonFunction.updateSprite("chess/"+e.state,o.getChildByName("chess"))},2))},g=function(){if(c.board.maze[u]&&null!==c.board.maze[u][d]){if(0==c.board.maze[u][d]){0==n&&(c.donghua_run=!0,n=!0);var r=u*c.board.block,l=d*c.board.block;c.board.yilun_qizi_v2.push(cc.v2(u,d));var g=1;return 1!=c.fenlie_cishu&&(g=0),s.conMager.getInstance().getPoolNode(s.KEY.poolName.qizi,c.node,t[a],u,d,function(){e.board.dazhao_moveInChess(r,l,e.state)},function(){1==n&&0==o&&(o=!0,e.fenlie_zhen())},function(){p()},g),"break"}if(u-=h[i].x,d-=h[i].y,p(),u==t[a].x&&u==t[a].y)return console.error("\u6c34\u6ef4\u56de\u9000\u5230\u4e86\u539f\u4f4d\uff0c\u4e0d\u751f\u6210"),"break"}else if(console.error("\u4e0d\u5728\u68cb\u76d8\u4e0a\u4e86"),p(),u-=h[i].x,d-=h[i].y,u==t[a].x&&u==t[a].y)return console.error("\u6c34\u6ef4\u56de\u9000\u5230\u4e86\u539f\u4f4d\uff0c\u4e0d\u751f\u6210"),"break"},_=0;_<l&&"break"!==g();_++);},p=0;p<h.length;p++)d(p);var g=s.GameDataStorage.getUser().userData.zhenFaMap.fenlie.level;if(c.state!=c.board.gameScene.userChess&&(g=s.GameDataStorage.gameStateData.ds_zhenfalevel),a+1>=g)return console.error("\u8be5\u6eda\u86cb\u4e86"),"break"},c=this;for(a=0;a<t.length&&"break"!==i(a);a++);0==n&&this.fenlie_zhen()},t.prototype.ailuozi=function(e){s.conMager.getInstance().playAudioEff(s.KEY.audioName.luozi);for(var t=0;t<e.length;t++){var a=e[t],n=a[0]*this.board.block,o=a[1]*this.board.block;this.board.dazhao_moveInChess(n,o,this.state),t==e.length-1&&this.zhenFaCallback()}},t.prototype.addpos=function(e,t,a,n,o){var i,s,r,c,h,u,l,d;a<=0||(i=[e+o+1,t],s=[e-o-1,t],r=[e,t+o+1],c=[e,t-o-1],n.push(i),n.push(s),n.push(r),n.push(c),2==a&&(h=[e+o+1,t+o+1],u=[e-o-1,t-o-1],l=[e+o+1,t-o-1],d=[e-o-1,t+o+1],n.push(h),n.push(u),n.push(l),n.push(d)))},t.prototype.checkWin1=function(e,t,a,n,o,i){for(var s=e-n,r=s,c=t+n,h=a*a,u=0;u<h;u++){var l=[r,c];o.push(l),r+=1,(u+1)%a==0&&(r=s,c-=1),u==h-1&&i()}},t.prototype.bagua_zhen=function(){for(var e=this,t=[],a=this.board.judgeSize,n=0;n<a;n++)for(var o=function(o){if(i.board.maze[n][o]==i.state){var c=[n,o];t.push(c)}if(n==a-1&&o==a-1){var h,u=s.GameDataStorage.getUser().userData.zhenFaMap.bagua.level,l=!0;i.state==i.board.gameScene.userChess&&(u=s.GameDataStorage.gameStateData.ds_zhenfalevel,l=!1),h=1==i.state?"bianhei":"bianbai";var d=[];(t=s.NumberUtil.outOfOrder(t)).length<u&&(u=t.length);for(var p=0;p<u;p++)if(c=t[p],d.push(c),p==u-1){console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u516b\u5366:",d.length,d,u);for(var g=function(t){var a=d[t];d.length,d.length>=100&&d.length;var n=a[0]*i.board.block,o=a[1]*i.board.block,c=a[0]+15*a[1],u=i.board.chess_map[c];if(i.board.maze[a[0]][a[1]]=-1*i.state,i.board.AITurn.addPos(a[0],a[1],-1*i.state),"fenlie"==i.board.getZhenFaName(-1*i.state).zhenFaName){var p=cc.v2(a[0],a[1]);i.board.yilun_qizi_v2.push(p)}r.commonFunction.updateSprite("chess/"+-1*i.state,u.getChildByName("chess")),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,i.node,{fileName:"taiji",ani_name:h,cb:function(){e.board.maze[a[0]][a[1]]=-1*e.state,t==d.length-1&&e.zhenFaCallback()},is_user:l,pos:cc.v2(n,o+1)})},_=0;_<d.length;_++)g(_)}}},i=this,c=0;c<a;c++)o(c)},t.prototype.wulei_zhen=function(){var e,t=this,a=this.state,n=!1,o=s.GameDataStorage.getUser().userData.zhenFaMap.wulei.level;"kedi"==this.zhenFaName_pare&&(a*=-1),e=1==a?"animation":"animation2",a==this.board.gameScene.userChess&&(o=s.GameDataStorage.gameStateData.ds_zhenfalevel,n=!0),o*=2,console.log("\u4e94\u96f7\u8981\u548b\u7761:",a);for(var i=[],r=this.board.judgeSize,c=0;c<r;c++)for(var h=function(h){if(u.board.maze[c][h]==a){var l=[c,h];i.push(l)}if(c==r-1&&h==r-1){var d=[];(i=s.NumberUtil.outOfOrder(i)).length<o&&(o=i.length);for(var p=0;p<o;p++)if(l=i[p],d.push(l),p==o-1){console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u4e94\u96f7:",d.length,d,o);for(var g=function(o){var i=d[o],s=1.5/d.length;d.length>=100&&(s=2.5/d.length),u.scheduleOnce(function(){var s=i[0]*t.board.block,r=i[1]*t.board.block,c=i[0]+15*i[1],h=t.board.chess_map[c];t.board.maze[i[0]][i[1]]=0,t.board.sum-=1,t.board.AITurn.delPos(i[0],i[1],a),t.wulei_action(s,r,h,n,e,o,d);var u=t.board.getZhenFaName(-1*t.state).zhenFaName;if(console.log("\u6211\u662f\u4e94\u96f7\uff0c\u4f60\u662f\u4ec0\u4e48",u),"fenlie"==u){var l=cc.v2(i[0],i[1]);t.board.yilun_qizi_v2.push(l)}},o*s)},_=0;_<d.length;_++)g(_)}}},u=this,l=0;l<r;l++)h(l)},t.prototype.bezier=function(e,t,a,n){return e.mul((1-n)*(1-n)).add(a.mul(2*n*(1-n))).add(t.mul(n*n))},t.prototype.suijiAction=function(e){e.active=!0;var t=s.NumberUtil.randomNum(100,200),a=s.NumberUtil.randomNum(1,250),n=100;s.NumberUtil.randomNum(1,2)>1&&(a=-a,t=-t,n=-n),a=e.y+a,t=e.x+t,cc.v2(t-n,a+150),cc.tween(e).to(.5,{position:cc.v2(t,a)},{easing:"circOut"}).to(.3,{opacity:0}).start()},t.prototype.wulei_action=function(e,t,a,n,o,i,r){var c=this,h=-230;n&&(h=870),s.conMager.getInstance().playAudioEff("wulei/fase"),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zidang_wulei,this.node,{ys:h,pos:cc.v2(e,t),cb:function(){var e=cc.repeatForever(cc.sequence(cc.moveBy(.025,cc.v2(2,2)),cc.moveBy(.05,cc.v2(-4,-4)),cc.moveBy(.025,cc.v2(2,2))));a.getChildByName("dianhaun").active=!0,a.getChildByName("dianhaun").zIndex=99,a.runAction(e),i==r.length-1&&c.scheduleOnce(function(){c.board.yilun_qizi_v2=[];for(var e=function(e){var t=r[e];r.length,r.length>=100&&r.length;var a=t[0]*c.board.block,n=t[1]*c.board.block,i=t[0]+15*t[1],h=c.board.chess_map[i];h.stopAllActions(),c.board.maze[t[0]][t[1]]=0,c.board.sum-=1,h.destroy(),c.board.chess_map[i]=null,c.board.yilun_qizi_v2.push(cc.v2(t[0],t[1])),0==e&&s.conMager.getInstance().playAudioEff("wulei/bao"),s.conMager.getInstance().getPoolNode(s.KEY.poolName.baozha_wulei,c.node,{ani_name:o,pos:cc.v2(a,n),cb:function(){e==r.length-1&&(h.stopAllActions(),c.zhenFaCallback())}})},t=0;t<r.length;t++)e(t)},.3)}})},t.prototype.zhenFaCallback=function(){this.zhenFaName_pare=this.zhenFaName,this.cb&&this.cb(this.zhenFaName)},i([d(h.GameBoard_hbdd)],t.prototype,"board",void 0),i([d(c.default)],t.prototype,"AI",void 0),i([l],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../../../utils/commonFunction":"commonFunction","./GameBoard_hbdd":"GameBoard_hbdd","./chessAi_hbdd":"chessAi_hbdd"}],front_jxmc:[function(e,t,a){"use strict";cc._RF.push(t,"7af38y5WEdF0L5v+FTJoHYk","front_jxmc");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/dataController/DATA"),r=e("../../../SSSGF/ssscgf"),c=e("../../../utils/commonFunction"),h=e("./GameBoard_jxmc"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.whose_round=0,t.is_over=!1,t.user_level=0,t.state=0,t.zhenFaName="",t.zhenFaName_pare="",t.cb=null,t.meihua_chess_poslist=[],t.user_meihua_num=0,t.ds_meihua_num=0,t.xueyuChessPosList=[],t.xueyuChess_num=0,t.xueyuChess_num_1=0,t.xueyuChess_num_2=0,t.qipanArray=[],t.xueYuIsOver=!1,t.xueYuTime=2,t.checkMode=[[1,0],[0,1]],t.fenlie_max=2,t.fenlie_cishu=0,t.fenlie_first_max=4,t.fenlie_second_max=2,t.fenlie_callback=!1,t.donghua_run=!1,t.yanchi=0,t}return o(t,e),t.prototype.init_level=function(){var e=r.GameDataStorage.gameStateData.userZhenFaName;return this.user_level=r.GameDataStorage.getUser().userData.zhenFaMap[e].level,this.board.gameScene.gameType==s.game_type.lianzhao&&(this.user_level=this.board.gameScene.user_level),console.log("\u6280\u80fd\u7b49\u7ea7\u662f",this.user_level),this.user_level},t.prototype.onLoad=function(){this.board.initfront(this)},t.prototype.showFront=function(e,t,a){var n=this;this.cb=a,this.is_over=!0,this.state=e,this.scheduleOnce(function(){n.zhenFaName=t;var e="\u4e07\u5b81\u9635\u6cd5",a=!1,o=null,i=0,s=["nan","nv"],c=n.board.gameScene.node.getChildByName("ds_duihua"),h=n.board.gameScene.node.getChildByName("user_duihua"),u=[h,c];if("fenlie"!=t&&(n.board.yilun_qizi_v2=[]),n.state!=n.board.gameScene.userChess?i=1:(a=!0,i=0),"fenlie"==n.zhenFaName&&(0==i?i=1:(i=1)&&(i=0)),2==r.GameDataStorage.getUser().userData.zhenFaMap[t].attr&&(i=0==i?1:0,a=!a),"wanning"==t)e="\u4e07\u5b81\u9635\u6cd5",n.add_zhenfa_ani(t,"animation",n.wanning_zhen.bind(n),a);else if("bagua"==t)e="\u516b\u5366\u9635",n.add_zhenfa_ani(t,"animation",n.bagua_zhen.bind(n),a);else if("sijiao"==t)e="\u56db\u65b9\u9635",n.add_zhenfa_ani(t,"animation",n.sijiao_zhen.bind(n),a);else if("kedi"==t)e="\u514b\u654c\u5148\u673a",n.add_zhenfa_ani(t,"animation",function(){n.zhenFaCallback()},a);else if("wulei"==t){console.log("\u8981\u91ca\u653e\u4e94\u96f7\u9635\u6cd5"),e="\u4e94\u96f7\u9635";var l=cc.repeatForever(cc.sequence(cc.moveBy(.02,cc.v2(4,4)),cc.moveBy(.04,cc.v2(-8,-8)),cc.moveBy(.02,cc.v2(4,4)))),d=n.node.parent;n.scheduleOnce(function(){r.conMager.getInstance().playAudioEff("wulei/lei"),d.runAction(l),n.scheduleOnce(function(){d.stopAllActions(),d.setPosition(0,0)},.5)},1.3),n.add_zhenfa_ani(t,"animation",function(){n.wulei_zhen()},a)}else"fenlie"==t?(e="\u5206\u88c2\u9635",n.add_zhenfa_ani(t,"animation",function(){n.fenlie_max=n.init_level(),n.fenlie_callback=!1,n.donghua_run=!1,n.yanchi=0,n.fenlie_zhen()},a)):"xueyuyingsha"==t?(e="\u8840\u72f1\u5f71\u6740\u9635",n.add_zhenfa_ani(t,"animation",n.xueyuyingsha_zhen.bind(n),a)):"meihua"==t&&(e="\u6885\u82b1\u9635",n.add_zhenfa_ani(t,"ji",n.meihua_zhen_bozhong.bind(n),a));(o=u[i])==h&&n.board.gameScene.count_down.y<0&&(n.board.gameScene.count_down.opacity=0),o==c&&n.board.gameScene.count_down.y>0&&(n.board.gameScene.count_down.opacity=0),o.getChildByName("str").getComponent(cc.Label).string=e,o.active=!0,r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),n.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(s[i]+"/"+s[i]+t),n.scheduleOnce(function(){o.getChildByName("str").getComponent(cc.Label).string="",o.active=!1,n.board.gameScene.count_down.opacity=255},1)},1)},.3)},t.prototype.add_zhenfa_ani=function(e,t,a,n){r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,this.node.parent,{fileName:e,ani_name:t,cb:a,is_user:n})},t.prototype.meihua_zhen_bozhong=function(){var e=this,t=[],a=this.board.judgeSize;if(this.state,this.meihua_chess_poslist.length<=0)for(var n=0;n<this.board.judgeSize;n++){this.meihua_chess_poslist[n]=[];for(var o=0;o<this.board.judgeSize;o++)this.meihua_chess_poslist[n][o]=0}for(n=0;n<a;n++){var i=function(o){if(0==s.board.maze[n][o]){var i=[n,o];t.push(i)}if(n==a-1&&o==a-1){var c=s.init_level();s.state!=s.board.gameScene.userChess&&(c=r.GameDataStorage.gameStateData.ds_zhenfalevel),c=5+2*(c-1);var h=[];(t=r.NumberUtil.outOfOrder(t)).length<c&&(c=t.length);for(var u=0;u<c;u++)if(i=t[u],h.push(i),u==c-1){r.GameDataStorage.gameStateData.chess_num=h.length,s.board.gameScene.chess_num=r.GameDataStorage.gameStateData.chess_num;for(var l=function(t){var a=h[t],n=1/h.length;h.length>=100&&(n=2/h.length),s.scheduleOnce(function(){a[0],e.board.block,a[1],e.board.block,e.state!=e.board.gameScene.userChess?e.ds_meihua_num+=1:e.user_meihua_num+=1,e.meihua_chess_poslist[a[0]][a[1]]=e.state,e.board.maze[a[0]][a[1]]=e.state,e.board.meihuaZhenLuozi(a[0],a[1],e.state,"meihua"),r.conMager.getInstance().getPoolNode(r.KEY.poolName.meihua,e.node,{pos:a,state:e.state,callBack:e.meihua_zhen_zhakai.bind(e)}),t==h.length-1&&e.zhenFaCallback()},t*n)},d=0;d<h.length;d++)l(d)}}},s=this;for(o=0;o<a;o++)i(o)}},t.prototype.meihua_zhen_zhakai=function(e,t){var a=e[0],n=e[1],o=[];o.push([a+1,n]),o.push([a-1,n]),o.push([a,n+1]),o.push([a,n-1]);for(var i=0;i<o.length;i++){var s=[o[i][0],o[i][1]];s[0]<0||s[0]>14||s[1]<0||s[1]>14||0==this.board.maze[s[0]][s[1]]&&(this.meihua_chess_poslist[s[0]][s[1]]=t,this.board.meihuaZhenLuozi(s[0],s[1],t,"meihua"))}t==this.board.gameScene.userChess?(this.user_meihua_num-=1,this.user_meihua_num<=0&&this.board.meihuazhencb(t)):(this.ds_meihua_num-=1,this.ds_meihua_num<=0&&this.board.meihuazhencb(t))},t.prototype.wanning_zhen=function(){for(var e=this,t=[],a=this.board.judgeSize,n=0;n<a;n++)for(var o=function(o){if(0==i.board.maze[n][o]){var s=[n,o];t.push(s)}if(n==a-1&&o==a-1){var c=i.init_level();i.state!=i.board.gameScene.userChess&&(c=r.GameDataStorage.gameStateData.ds_zhenfalevel),c*=10;var h=[];(t=r.NumberUtil.outOfOrder(t)).length<c&&(c=t.length);for(var u=0;u<c;u++)if(s=t[u],h.push(s),u==c-1){r.GameDataStorage.gameStateData.chess_num=h.length,i.board.gameScene.chess_num=r.GameDataStorage.gameStateData.chess_num;for(var l=function(t){var a=h[t],n=1/h.length;h.length>=100&&(n=2/h.length),i.scheduleOnce(function(){var n=a[0]*e.board.block,o=a[1]*e.board.block;e.board.dazhao_moveInChess(n,o,e.state),t==h.length-1&&e.zhenFaCallback()},t*n)},d=0;d<h.length;d++)l(d)}}},i=this,s=0;s<a;s++)o(s)},t.prototype.sijiao_zhen=function(){var e=this,t=this.board.newx/this.board.block,a=this.board.newY/this.board.block,n=this.init_level();this.state!=this.board.gameScene.userChess&&(n=r.GameDataStorage.gameStateData.ds_zhenfalevel);var o,i,s,c,h=(n-2)%3,u=2*Math.floor((n-2)/3)+3,l=Math.floor(u/2),d=[];n>1?this.checkWin1(t,a,u,l,d,function(){e.addpos(t,a,h,d,l),e.ailuozi(d)}):(o=[t+1,a],i=[t-1,a],s=[t,a+1],c=[t,a-1],d.push(o),d.push(i),d.push(s),d.push(c),this.ailuozi(d))},t.prototype.xueyuyingsha_zhen=function(){var e=this,t=this.init_level();this.state!=this.board.gameScene.userChess&&(t=r.GameDataStorage.gameStateData.ds_zhenfalevel),this.xueyuChess_num=t+4,this.xueyuChess_num=5+2*(t-1),this.xueyuChess_num>225&&(this.xueyuChess_num=225),this.xueyuChess_num_1=this.xueyuChess_num,this.xueyuChess_num_2=this.xueyuChess_num,this.xueyuChessPosList=[],this.xueYuIsOver=!1;for(var a=0;a<15;a++){this.qipanArray[a]=[];for(var n=0;n<15;n++)this.qipanArray[a][n]=0,0!=this.board.maze[a][n]&&(this.qipanArray[a][n]=this.board.maze[a][n])}console.log("\u54c8\u54c8\u54c8\u54c8\u54c8\u8840\u72f1\u5f71\u6740\u9635\uff01\uff01\uff01",this.xueyuChess_num,this.state,this.qipanArray,this.board.maze),this.startTime();var o=Math.floor(this.board.newx/this.board.block),i=Math.floor(this.board.newY/this.board.block),s=o+15*i,c=(this.board.chess_map[s],[o,i]),h=[];h.push([o+1,i]),h.push([o-1,i]),h.push([o,i+1]),h.push([o,i-1]),this.xueyuChessPosList.push(c),r.conMager.getInstance().playAudioEff(r.KEY.audioName.xueliu,!0);for(var u=0;u<4;u++){var l=[h[u][0],h[u][1]];if(!(l[0]<0||l[0]>14||l[1]<0||l[1]>14))if(0==this.qipanArray[l[0]][l[1]])this.xueXianAction(l,c,!0);else if(this.xueyuChess_num-=1,this.xueyuChess_num<=1)return this.xueyuChess_num<=1&&!this.xueYuIsOver?(r.conMager.getInstance().stopAudioEff(),this.xueYuIsOver=!0,void this.scheduleOnce(function(){e.zhenFaCallback()},1)):void 0}},t.prototype.startTime=function(){this.xueYuTime=1,this.schedule(this.updateTime,.5)},t.prototype.updateTime=function(){this.xueYuTime-=.5,this.xueYuTime<=0&&(this.stopTime(),r.conMager.getInstance().stopAudioEff(),this.xueYuIsOver||(this.xueYuIsOver=!0,this.zhenFaCallback()))},t.prototype.stopTime=function(){this.unschedule(this.updateTime)},t.prototype.xueXianAction=function(e,t){var a=this;if(this.xueyuChess_num<=0&&this.xueyuChess_num<=0&&!this.xueYuIsOver)return r.conMager.getInstance().stopAudioEff(),this.xueYuIsOver=!0,this.stopTime(),void this.scheduleOnce(function(){a.zhenFaCallback()},1);this.xueyuChess_num-=1,this.stopTime(),this.startTime();var n=1;e[0],e[1],e[0]>t[0]?n=1:e[0]<t[0]?n=2:e[1]>t[1]?n=3:e[1]<t[1]&&(n=4);var o=r.NumberUtil.randomNum(0,10);o<11&&e.length>0&&(this.qipanArray[e[0]][e[1]]=this.state,this.xueyuChess_num>0&&this.initXueYuChess(e)),this.xueyuChess_num<=0||e.length<2||r.conMager.getInstance().getPoolNode(r.KEY.poolName.xueXian,this.node,{pos:t,targetPos:e,direction:n,chess_Pbb:o,callBack:function(e,t,n){var o=[];if(r.NumberUtil.randomNum(0,10)>7)a.checkNode(t,function(e,t){a.call(e,t)});else{var i=t[0],s=t[1];1==n?i=t[0]+1:2==n?i=t[0]-1:3==n?s=t[1]+1:4==n&&(s=t[1]-1),i<0||i>14||s<0||s>14?a.checkNode(t,function(e,t){a.call(e,t)}):0!=a.qipanArray[i][s]?a.checkNode(t,function(e,t){a.call(e,t)}):(o=[i,s],a.call(o,t))}}})},t.prototype.initXueYuChess=function(e){var t=this;this.xueyuChessPosList.push(e),this.scheduleOnce(function(){r.NumberUtil.randomNum(0,10)<5&&t.checkNode(e,function(e,a){t.call(e,a)});var a=e[0]*t.board.block,n=e[1]*t.board.block;t.board.dazhao_moveInChess(a,n,t.state),r.conMager.getInstance().getPoolNode(r.KEY.poolName.xueyuChessSke,t.node,{pos:cc.v3(a,n),callBack:function(){}}),t.scheduleOnce(function(){var a=e[0]+15*e[1];t.board.chess_map[a].runAction(cc.sequence(cc.scaleTo(.15,1.15),cc.scaleTo(.1,1),cc.callFunc(function(){})))},.4)},.5)},t.prototype.call=function(e,t){this.xueXianAction(e,t)},t.prototype.checkNode=function(e,t,a){for(var n=[],o=0;o<2;o++){var i=this.checkState(e[0],e[1],this.checkMode[o],a);if(i.length>0)for(var s=0;s<i.length;s++)n.push(i[s])}var c=[];return n.length>0&&(c=n[r.NumberUtil.randomNum(0,n.length-1)]),t(c,e)},t.prototype.checkState=function(e,t,a,n){void 0===n&&(n=null);var o=[],i=0;a==this.checkMode[0]&&(i=1),a==this.checkMode[1]&&(i=3);for(var s=1;s<2;s++){var r=e+s*a[0],c=t+s*a[1];if(!(r<0||r>14||c<0||c>14||n&&n!=i)){if(0!=this.qipanArray[r][c])break;var h=[r,c];o.push(h)}}a==this.checkMode[0]&&(i=2),a==this.checkMode[1]&&(i=4);for(var u=1;u<2;u++)if(r=e-u*a[0],c=t-u*a[1],!(r<0||r>14||c<0||c>14||n&&n!=i)){if(0!=this.qipanArray[r][c])break;h=[r,c],o.push(h)}return o},t.prototype.fenlie_zhen=function(){var e=this;if(this.fenlie_cishu++,this.fenlie_cishu>this.fenlie_max){if(1==this.fenlie_callback)return;return this.fenlie_callback=!0,this.fenlie_cishu=0,console.error("\u4e0d\u80fd\u5206\u88c2\u4e86"),void this.scheduleOnce(function(){e.zhenFaCallback()},1)}for(var t=[],a=0;a<this.board.yilun_qizi_v2.length;a++)t.push(this.board.yilun_qizi_v2[a]);this.board.yilun_qizi_v2=[],t.length<1&&0==this.donghua_run&&this.zhenFaCallback();var n=!1,o=!1,i=function(a){s.yanchi=0;var i=Math.floor(4*Math.random()),h=[];switch(i){case 0:h.push(cc.v2(-1,-1),cc.v2(1,1));break;case 1:h.push(cc.v2(-1,0),cc.v2(1,0));break;case 2:h.push(cc.v2(-1,1),cc.v2(1,-1));break;case 3:h.push(cc.v2(0,1),cc.v2(0,-1))}var u=0;1==s.fenlie_cishu?u=s.fenlie_first_max:2==s.fenlie_cishu&&(u=s.fenlie_second_max);for(var l=Math.floor(Math.random()*(u+1)+1),d=function(i){for(var u=t[a].x+h[i].x*l,d=t[a].y+h[i].y*l,p=function(){var n=t[a].x+15*t[a].y,o=e.board.chess_map[n];o&&(o.stopAllActions(),e.board.maze[t[a].x][t[a].y]!=e.state&&r.conMager.getInstance().getPoolNode(r.KEY.poolName.qizi,e.node,t[a],u,d,function(){},function(){},function(){e.board.maze[t[a].x][t[a].y]=e.state,c.commonFunction.updateSprite("chess/"+e.state,o.getChildByName("chess"))},2))},g=function(){if(s.board.maze[u]&&null!==s.board.maze[u][d]){if(0==s.board.maze[u][d]){0==n&&(s.donghua_run=!0,n=!0);var c=u*s.board.block,l=d*s.board.block;s.board.yilun_qizi_v2.push(cc.v2(u,d));var g=1;return 1!=s.fenlie_cishu&&(g=0),r.conMager.getInstance().getPoolNode(r.KEY.poolName.qizi,s.node,t[a],u,d,function(){e.board.dazhao_moveInChess(c,l,e.state)},function(){1==n&&0==o&&(o=!0,e.fenlie_zhen())},function(){p()},g),"break"}if(u-=h[i].x,d-=h[i].y,p(),u==t[a].x&&u==t[a].y)return console.error("\u6c34\u6ef4\u56de\u9000\u5230\u4e86\u539f\u4f4d\uff0c\u4e0d\u751f\u6210"),"break"}else if(console.error("\u4e0d\u5728\u68cb\u76d8\u4e0a\u4e86"),p(),u-=h[i].x,d-=h[i].y,u==t[a].x&&u==t[a].y)return console.error("\u6c34\u6ef4\u56de\u9000\u5230\u4e86\u539f\u4f4d\uff0c\u4e0d\u751f\u6210"),"break"},_=0;_<l&&"break"!==g();_++);},p=0;p<h.length;p++)d(p);var g=s.init_level();if(s.state!=s.board.gameScene.userChess&&(g=r.GameDataStorage.gameStateData.ds_zhenfalevel),a+1>=g)return console.error("\u8be5\u6eda\u86cb\u4e86"),"break"},s=this;for(a=0;a<t.length&&"break"!==i(a);a++);0==n&&this.fenlie_zhen()},t.prototype.ailuozi=function(e){r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);for(var t=0;t<e.length;t++){var a=e[t],n=a[0]*this.board.block,o=a[1]*this.board.block;this.board.dazhao_moveInChess(n,o,this.state),t==e.length-1&&this.zhenFaCallback()}},t.prototype.addpos=function(e,t,a,n,o){var i,s,r,c,h,u,l,d;a<=0||(i=[e+o+1,t],s=[e-o-1,t],r=[e,t+o+1],c=[e,t-o-1],n.push(i),n.push(s),n.push(r),n.push(c),2==a&&(h=[e+o+1,t+o+1],u=[e-o-1,t-o-1],l=[e+o+1,t-o-1],d=[e-o-1,t+o+1],n.push(h),n.push(u),n.push(l),n.push(d)))},t.prototype.checkWin1=function(e,t,a,n,o,i){for(var s=e-n,r=s,c=t+n,h=a*a,u=0;u<h;u++){var l=[r,c];o.push(l),r+=1,(u+1)%a==0&&(r=s,c-=1),u==h-1&&i()}},t.prototype.bagua_zhen=function(){for(var e=this,t=[],a=this.board.judgeSize,n=0;n<a;n++)for(var o=function(o){if(i.board.maze[n][o]==i.state){var s=[n,o];i.meihua_chess_poslist.length>0?0==i.meihua_chess_poslist[n][o]&&t.push(s):t.push(s)}if(n==a-1&&o==a-1){var h,u=i.init_level(),l=!0;i.state==i.board.gameScene.userChess&&(u=r.GameDataStorage.gameStateData.ds_zhenfalevel,l=!1),h=1==i.state?"bianhei":"bianbai";var d=[];(t=r.NumberUtil.outOfOrder(t)).length<u&&(u=t.length);for(var p=0;p<u;p++)if(s=t[p],d.push(s),p==u-1){console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u516b\u5366:",d.length,d,u);for(var g=function(t){var a=d[t];d.length,d.length>=100&&d.length;var n=a[0]*i.board.block,o=a[1]*i.board.block,s=a[0]+15*a[1],u=i.board.chess_map[s];if(i.board.maze[a[0]][a[1]]=-1*i.state,i.board.AITurn.addPos(a[0],a[1],-1*i.state),"fenlie"==i.board.getZhenFaName(-1*i.state).zhenFaName){var p=cc.v2(a[0],a[1]);i.board.yilun_qizi_v2.push(p)}c.commonFunction.updateSprite("chess/"+-1*i.state,u.getChildByName("chess")),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,i.node,{fileName:"taiji",ani_name:h,cb:function(){e.board.maze[a[0]][a[1]]=-1*e.state,t==d.length-1&&e.zhenFaCallback()},is_user:l,pos:cc.v2(n,o+1)})},_=0;_<d.length;_++)g(_)}}},i=this,s=0;s<a;s++)o(s)},t.prototype.wulei_zhen=function(){var e,t=this,a=this.state,n=!1,o=this.init_level();"kedi"==this.zhenFaName_pare&&(a*=-1),e=1==a?"animation":"animation2",a==this.board.gameScene.userChess&&(o=r.GameDataStorage.gameStateData.ds_zhenfalevel,n=!0),o*=2,console.log("\u4e94\u96f7\u8981\u548b\u7761:",a);for(var i=[],s=this.board.judgeSize,c=0;c<s;c++)for(var h=function(h){if(u.board.maze[c][h]==a){var l=[c,h];u.meihua_chess_poslist.length>0?0==u.meihua_chess_poslist[c][h]&&i.push(l):i.push(l)}if(c==s-1&&h==s-1){var d=[];(i=r.NumberUtil.outOfOrder(i)).length<o&&(o=i.length);for(var p=0;p<o;p++)if(l=i[p],d.push(l),p==o-1){console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u4e94\u96f7:",d.length,d,o);for(var g=function(o){var i=d[o],s=1.5/d.length;d.length>=100&&(s=2.5/d.length),u.scheduleOnce(function(){var s=i[0]*t.board.block,r=i[1]*t.board.block,c=i[0]+15*i[1],h=t.board.chess_map[c];t.board.maze[i[0]][i[1]]=0,t.board.sum-=1,t.board.AITurn.delPos(i[0],i[1],a),t.wulei_action(s,r,h,n,e,o,d);var u=t.board.getZhenFaName(-1*t.state).zhenFaName;if(console.log("\u6211\u662f\u4e94\u96f7\uff0c\u4f60\u662f\u4ec0\u4e48",u),"fenlie"==u){var l=cc.v2(i[0],i[1]);t.board.yilun_qizi_v2.push(l)}},o*s)},_=0;_<d.length;_++)g(_)}}},u=this,l=0;l<s;l++)h(l)},t.prototype.bezier=function(e,t,a,n){return e.mul((1-n)*(1-n)).add(a.mul(2*n*(1-n))).add(t.mul(n*n))},t.prototype.suijiAction=function(e){e.active=!0;var t=r.NumberUtil.randomNum(100,200),a=r.NumberUtil.randomNum(1,250),n=100;r.NumberUtil.randomNum(1,2)>1&&(a=-a,t=-t,n=-n),a=e.y+a,t=e.x+t,cc.v2(t-n,a+150),cc.tween(e).to(.5,{position:cc.v2(t,a)},{easing:"circOut"}).to(.3,{opacity:0}).start()},t.prototype.wulei_action=function(e,t,a,n,o,i,s){var c=this,h=-230;n&&(h=870),r.conMager.getInstance().playAudioEff("wulei/fase"),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zidang_wulei,this.node,{ys:h,pos:cc.v2(e,t),cb:function(){var e=cc.repeatForever(cc.sequence(cc.moveBy(.025,cc.v2(2,2)),cc.moveBy(.05,cc.v2(-4,-4)),cc.moveBy(.025,cc.v2(2,2))));a.getChildByName("dianhaun").active=!0,a.getChildByName("dianhaun").zIndex=99,a.runAction(e),i==s.length-1&&c.scheduleOnce(function(){c.board.yilun_qizi_v2=[];for(var e=function(e){var t=s[e];s.length,s.length>=100&&s.length;var a=t[0]*c.board.block,n=t[1]*c.board.block,i=t[0]+15*t[1],h=c.board.chess_map[i];h.stopAllActions(),c.board.maze[t[0]][t[1]]=0,c.board.sum-=1,h.destroy(),c.board.chess_map[i]=null,c.board.yilun_qizi_v2.push(cc.v2(t[0],t[1])),0==e&&r.conMager.getInstance().playAudioEff("wulei/bao"),r.conMager.getInstance().getPoolNode(r.KEY.poolName.baozha_wulei,c.node,{ani_name:o,pos:cc.v2(a,n),cb:function(){e==s.length-1&&(h.stopAllActions(),c.zhenFaCallback())}})},t=0;t<s.length;t++)e(t)},.3)}})},t.prototype.zhenFaCallback=function(){this.zhenFaName_pare=this.zhenFaName,this.cb&&this.cb(this.zhenFaName)},t.prototype.update=function(){},i([d(h.GameBoard_jxmc)],t.prototype,"board",void 0),i([l],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../../../utils/commonFunction":"commonFunction","./GameBoard_jxmc":"GameBoard_jxmc"}],front_lianzhao:[function(e,t,a){"use strict";cc._RF.push(t,"5a38av4GWVEBJuHHTBhHxGD","front_lianzhao");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./GameBoard_lianzhao"),r=e("../../../SSSGF/ssscgf"),c=e("../../../utils/commonFunction"),h=cc._decorator,u=h.ccclass,l=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.whose_round=0,t.is_over=!1,t.state=0,t.zhenFaName="",t.zhenFaName_pare="",t.cb=null,t.xueyuChess_num=0,t.qipanArray=[],t.checkMode=[[1,0],[0,1]],t.fenlie_max=2,t.fenlie_cishu=0,t.fenlie_first_max=4,t.fenlie_second_max=2,t.fenlie_callback=!1,t.donghua_run=!1,t.yanchi=0,t}return o(t,e),t.prototype.onLoad=function(){this.board.initfront(this)},t.prototype.showFront=function(e,t,a){var n=this;this.cb=a,this.is_over=!0,this.state=e,this.scheduleOnce(function(){n.zhenFaName=t;var e="\u4e07\u5b81\u9635\u6cd5",a=!1,o=null,i=0,s=["nan","nv"],c=n.board.gameScene.node.getChildByName("ds_duihua"),h=n.board.gameScene.node.getChildByName("user_duihua"),u=[h,c];if("fenlie"!=t&&(n.board.yilun_qizi_v2=[]),n.state!=n.board.gameScene.userChess?i=1:(a=!0,i=0),"fenlie"==n.zhenFaName&&(0==i?i=1:(i=1)&&(i=0)),console.log("\u9078\u4e2d\u7684\u5c0d\u8a71\u6846\u4e82\u641e:",i,n.state),2==r.GameDataStorage.getUser().userData.zhenFaMap[t].attr&&(i=0==i?1:0,a=!a),"wanning"==t)e="\u4e07\u5b81\u9635\u6cd5",n.add_zhenfa_ani(t,"animation",n.wanning_zhen.bind(n),a);else if("bagua"==t)e="\u516b\u5366\u9635",n.add_zhenfa_ani(t,"animation",n.bagua_zhen.bind(n),a);else if("sijiao"==t)e="\u56db\u65b9\u9635",n.add_zhenfa_ani(t,"animation",n.sijiao_zhen.bind(n),a);else if("kedi"==t)e="\u514b\u654c\u5148\u673a",n.add_zhenfa_ani(t,"animation",function(){n.zhenFaCallback()},a);else if("wulei"==t){console.log("\u8981\u91ca\u653e\u4e94\u96f7\u9635\u6cd5"),e="\u4e94\u96f7\u9635";var l=cc.repeatForever(cc.sequence(cc.moveBy(.02,cc.v2(4,4)),cc.moveBy(.04,cc.v2(-8,-8)),cc.moveBy(.02,cc.v2(4,4)))),d=n.node.parent;n.scheduleOnce(function(){r.conMager.getInstance().playAudioEff("wulei/lei"),d.runAction(l),n.scheduleOnce(function(){d.stopAllActions(),d.setPosition(0,0)},.5)},1.3),n.add_zhenfa_ani(t,"animation",function(){n.wulei_zhen()},a)}else"fenlie"==t?(e="\u5206\u88c2\u9635",n.add_zhenfa_ani(t,"animation",function(){n.fenlie_max=r.GameDataStorage.getUser().userData.zhenFaMap.fenlie.level,n.fenlie_callback=!1,n.donghua_run=!1,n.yanchi=0,n.fenlie_zhen()},a)):"xueyuyingsha"==t&&(e="\u8840\u72f1\u5f71\u6740\u9635",n.add_zhenfa_ani("wulei","animation",n.xueyuyingsha_zhen.bind(n),a));(o=u[i])==h&&n.board.gameScene.count_down.y<0&&(n.board.gameScene.count_down.opacity=0),o==c&&n.board.gameScene.count_down.y>0&&(n.board.gameScene.count_down.opacity=0),o.getChildByName("str").getComponent(cc.Label).string=e,o.active=!0,r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),n.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(s[i]+"/"+s[i]+t),n.scheduleOnce(function(){o.getChildByName("str").getComponent(cc.Label).string="",o.active=!1,n.board.gameScene.count_down.opacity=255},1)},1)},.3)},t.prototype.add_zhenfa_ani=function(e,t,a,n){r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,this.node.parent,{fileName:e,ani_name:t,cb:a,is_user:n})},t.prototype.wanning_zhen=function(){for(var e=this,t=[],a=this.board.judgeSize,n=0;n<a;n++)for(var o=function(o){if(0==i.board.maze[n][o]){var s=[n,o];t.push(s)}if(n==a-1&&o==a-1){var c=r.GameDataStorage.getUser().userData.zhenFaMap.wanning.level;i.state!=i.board.gameScene.userChess&&(c=r.GameDataStorage.gameStateData.ds_zhenfalevel),c*=10;var h=[];(t=r.NumberUtil.outOfOrder(t)).length<c&&(c=t.length);for(var u=0;u<c;u++)if(s=t[u],h.push(s),u==c-1){r.GameDataStorage.gameStateData.chess_num=h.length,i.board.gameScene.chess_num=r.GameDataStorage.gameStateData.chess_num;for(var l=function(t){var a=h[t],n=1/h.length;h.length>=100&&(n=2/h.length),i.scheduleOnce(function(){var n=a[0]*e.board.block,o=a[1]*e.board.block;e.board.dazhao_moveInChess(n,o,e.state),t==h.length-1&&e.zhenFaCallback()},t*n)},d=0;d<h.length;d++)l(d)}}},i=this,s=0;s<a;s++)o(s)},t.prototype.sijiao_zhen=function(){var e=this,t=this.board.newx/this.board.block,a=this.board.newY/this.board.block,n=r.GameDataStorage.getUser().userData.zhenFaMap.sijiao.level;this.state!=this.board.gameScene.userChess&&(n=r.GameDataStorage.gameStateData.ds_zhenfalevel);var o,i,s,c,h=(n-2)%3,u=2*Math.floor((n-2)/3)+3,l=Math.floor(u/2),d=[];n>1?this.checkWin1(t,a,u,l,d,function(){e.addpos(t,a,h,d,l),e.ailuozi(d)}):(o=[t+1,a],i=[t-1,a],s=[t,a+1],c=[t,a-1],d.push(o),d.push(i),d.push(s),d.push(c),this.ailuozi(d))},t.prototype.xueyuyingsha_zhen=function(){this.xueyuChess_num=100,this.qipanArray=this.board.maze,console.log("\u54c8\u54c8\u54c8\u54c8\u54c8\u8840\u72f1\u5f71\u6740\u9635\uff01\uff01\uff01",this.qipanArray);var e=Math.floor(this.board.newx/this.board.block),t=Math.floor(this.board.newY/this.board.block),a=e+15*t,n=(this.board.chess_map[a],[e,t]),o=[];o.push([e+1,t]),o.push([e-1,t]),o.push([e,t+1]),o.push([e,t-1]);for(var i=0;i<4;i++){var s=[o[i][0],o[i][1]];this.xueXianAction(s,n,!0)}},t.prototype.xueXianAction=function(e,t,a){var n=this;if(this.xueyuChess_num<=0)this.zhenFaCallback();else{var o=1,i=e[0],s=e[1];if(e[0]>t[0]?o=1:e[0]<t[0]?o=2:e[1]>t[1]?o=3:e[1]<t[1]&&(o=4),console.log("X\u662f\u591a\u5c11\u554a:",i,s),0!=this.qipanArray[i][s])if(a);else{var c=this.checkNode(t);c.length>0&&(e=c)}e[0]>t[0]?o=1:e[0]<t[0]?o=2:e[1]>t[1]?o=3:e[1]<t[1]&&(o=4),this.qipanArray[t[0]][t[1]]=3,r.conMager.getInstance().getPoolNode(r.KEY.poolName.xueXian,this.node,{pos:t,direction:o,callBack:function(e,t){if(n.xueyuChess_num-=1,r.NumberUtil.randomNum(0,10)>6){e=n.updatePos(t,e);var a=[1,2,3,4];a.splice(a.indexOf(t),1),t=a[r.NumberUtil.randomNum(0,a.length-1)];var o=n.updatePos(t,e);console.log("\u8f6c\u5f2f:",o,e),n.xueXianAction(o,e)}else{e=n.updatePos(t,e);var i=n.updatePos(t,e);console.log("\u4e0d\u8f6c\u5f2f:",i,e),n.xueXianAction(i,e)}}})}},t.prototype.updatePos=function(e,t){var a=t[0],n=t[1],o=[];return 1==e?o=[a+1,n]:2==e?o=[a-1,n]:3==e?o=[a,n+1]:4==e&&(o=[a,n-1]),o[0]>14&&(o[0]=14),o[0]<0&&(o[0]=0),o[1]>14&&(o[1]=14),o[1]<0&&(o[1]=0),o},t.prototype.checkNode=function(e,t){for(var a=[],n=0;n<2;n++)a=this.checkState(e[0],e[1],this.checkMode[n],t);return a},t.prototype.checkState=function(e,t,a){var n=[];this.checkMode[0],this.checkMode[1];for(var o=1;o<1;o++)if(this.qipanArray[e+o*a[0]]){var i=e+o*a[0],s=t+o*a[1];if(0==this.qipanArray[i][s])return[i,s];break}this.checkMode[0],this.checkMode[1];for(var r=1;r<1;r++)if(this.qipanArray[e-r*a[0]]){if(i=e-r*a[0],s=t-r*a[1],0==this.qipanArray[i][s])return[i,s];break}return n},t.prototype.fenlie_zhen=function(){var e=this;if(this.fenlie_cishu++,this.fenlie_cishu>this.fenlie_max){if(1==this.fenlie_callback)return;return this.fenlie_callback=!0,this.fenlie_cishu=0,console.error("\u4e0d\u80fd\u5206\u88c2\u4e86"),void this.scheduleOnce(function(){e.zhenFaCallback()},1)}for(var t=[],a=0;a<this.board.yilun_qizi_v2.length;a++)t.push(this.board.yilun_qizi_v2[a]);this.board.yilun_qizi_v2=[],t.length<1&&0==this.donghua_run&&this.zhenFaCallback();var n=!1,o=!1,i=function(a){s.yanchi=0;var i=Math.floor(4*Math.random()),h=[];switch(i){case 0:h.push(cc.v2(-1,-1),cc.v2(1,1));break;case 1:h.push(cc.v2(-1,0),cc.v2(1,0));break;case 2:h.push(cc.v2(-1,1),cc.v2(1,-1));break;case 3:h.push(cc.v2(0,1),cc.v2(0,-1))}var u=0;1==s.fenlie_cishu?u=s.fenlie_first_max:2==s.fenlie_cishu&&(u=s.fenlie_second_max);for(var l=Math.floor(Math.random()*(u+1)+1),d=function(i){for(var u=t[a].x+h[i].x*l,d=t[a].y+h[i].y*l,p=function(){var n=t[a].x+15*t[a].y,o=e.board.chess_map[n];o&&(o.stopAllActions(),e.board.maze[t[a].x][t[a].y]!=e.state&&r.conMager.getInstance().getPoolNode(r.KEY.poolName.qizi,e.node,t[a],u,d,function(){},function(){},function(){e.board.maze[t[a].x][t[a].y]=e.state,c.commonFunction.updateSprite("chess/"+e.state,o.getChildByName("chess"))},2))},g=function(){if(s.board.maze[u]&&null!==s.board.maze[u][d]){if(0==s.board.maze[u][d]){0==n&&(s.donghua_run=!0,n=!0);var c=u*s.board.block,l=d*s.board.block;s.board.yilun_qizi_v2.push(cc.v2(u,d));var g=1;return 1!=s.fenlie_cishu&&(g=0),r.conMager.getInstance().getPoolNode(r.KEY.poolName.qizi,s.node,t[a],u,d,function(){e.board.dazhao_moveInChess(c,l,e.state)},function(){1==n&&0==o&&(o=!0,e.fenlie_zhen())},function(){p()},g),"break"}if(u-=h[i].x,d-=h[i].y,p(),u==t[a].x&&u==t[a].y)return console.error("\u6c34\u6ef4\u56de\u9000\u5230\u4e86\u539f\u4f4d\uff0c\u4e0d\u751f\u6210"),"break"}else if(console.error("\u4e0d\u5728\u68cb\u76d8\u4e0a\u4e86"),p(),u-=h[i].x,d-=h[i].y,u==t[a].x&&u==t[a].y)return console.error("\u6c34\u6ef4\u56de\u9000\u5230\u4e86\u539f\u4f4d\uff0c\u4e0d\u751f\u6210"),"break"},_=0;_<l&&"break"!==g();_++);},p=0;p<h.length;p++)d(p);var g=r.GameDataStorage.getUser().userData.zhenFaMap.fenlie.level;if(s.state!=s.board.gameScene.userChess&&(g=r.GameDataStorage.gameStateData.ds_zhenfalevel),a+1>=g)return console.error("\u8be5\u6eda\u86cb\u4e86"),"break"},s=this;for(a=0;a<t.length&&"break"!==i(a);a++);0==n&&this.fenlie_zhen()},t.prototype.ailuozi=function(e){r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);for(var t=0;t<e.length;t++){var a=e[t],n=a[0]*this.board.block,o=a[1]*this.board.block;this.board.dazhao_moveInChess(n,o,this.state),t==e.length-1&&this.zhenFaCallback()}},t.prototype.addpos=function(e,t,a,n,o){var i,s,r,c,h,u,l,d;a<=0||(i=[e+o+1,t],s=[e-o-1,t],r=[e,t+o+1],c=[e,t-o-1],n.push(i),n.push(s),n.push(r),n.push(c),2==a&&(h=[e+o+1,t+o+1],u=[e-o-1,t-o-1],l=[e+o+1,t-o-1],d=[e-o-1,t+o+1],n.push(h),n.push(u),n.push(l),n.push(d)))},t.prototype.checkWin1=function(e,t,a,n,o,i){for(var s=e-n,r=s,c=t+n,h=a*a,u=0;u<h;u++){var l=[r,c];o.push(l),r+=1,(u+1)%a==0&&(r=s,c-=1),u==h-1&&i()}},t.prototype.bagua_zhen=function(){for(var e=this,t=[],a=this.board.judgeSize,n=0;n<a;n++)for(var o=function(o){if(i.board.maze[n][o]==i.state){var s=[n,o];t.push(s)}if(n==a-1&&o==a-1){var h,u=r.GameDataStorage.getUser().userData.zhenFaMap.bagua.level,l=!0;i.state==i.board.gameScene.userChess&&(u=r.GameDataStorage.gameStateData.ds_zhenfalevel,l=!1),h=1==i.state?"bianhei":"bianbai";var d=[];(t=r.NumberUtil.outOfOrder(t)).length<u&&(u=t.length);for(var p=0;p<u;p++)if(s=t[p],d.push(s),p==u-1){console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u516b\u5366:",d.length,d,u);for(var g=function(t){var a=d[t];d.length,d.length>=100&&d.length;var n=a[0]*i.board.block,o=a[1]*i.board.block,s=a[0]+15*a[1],u=i.board.chess_map[s];if(i.board.maze[a[0]][a[1]]=-1*i.state,i.board.AITurn.addPos(a[0],a[1],-1*i.state),"fenlie"==i.board.getZhenFaName(-1*i.state).zhenFaName){var p=cc.v2(a[0],a[1]);i.board.yilun_qizi_v2.push(p)}c.commonFunction.updateSprite("chess/"+-1*i.state,u.getChildByName("chess")),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,i.node,{fileName:"taiji",ani_name:h,cb:function(){e.board.maze[a[0]][a[1]]=-1*e.state,t==d.length-1&&e.zhenFaCallback()},is_user:l,pos:cc.v2(n,o+1)})},_=0;_<d.length;_++)g(_)}}},i=this,s=0;s<a;s++)o(s)},t.prototype.wulei_zhen=function(){var e,t=this,a=this.state,n=!1,o=r.GameDataStorage.getUser().userData.zhenFaMap.wulei.level;"kedi"==this.zhenFaName_pare&&(a*=-1),e=1==a?"animation":"animation2",a==this.board.gameScene.userChess&&(o=r.GameDataStorage.gameStateData.ds_zhenfalevel,n=!0),o*=2,console.log("\u4e94\u96f7\u8981\u548b\u7761:",a);for(var i=[],s=this.board.judgeSize,c=0;c<s;c++)for(var h=function(h){if(u.board.maze[c][h]==a){var l=[c,h];i.push(l)}if(c==s-1&&h==s-1){var d=[];(i=r.NumberUtil.outOfOrder(i)).length<o&&(o=i.length);for(var p=0;p<o;p++)if(l=i[p],d.push(l),p==o-1){console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u4e94\u96f7:",d.length,d,o);for(var g=function(o){var i=d[o],s=1.5/d.length;d.length>=100&&(s=2.5/d.length),u.scheduleOnce(function(){var s=i[0]*t.board.block,r=i[1]*t.board.block,c=i[0]+15*i[1],h=t.board.chess_map[c];t.board.maze[i[0]][i[1]]=0,t.board.sum-=1,t.board.AITurn.delPos(i[0],i[1],a),t.wulei_action(s,r,h,n,e,o,d);var u=t.board.getZhenFaName(-1*t.state).zhenFaName;if(console.log("\u6211\u662f\u4e94\u96f7\uff0c\u4f60\u662f\u4ec0\u4e48",u),"fenlie"==u){var l=cc.v2(i[0],i[1]);t.board.yilun_qizi_v2.push(l)}},o*s)},_=0;_<d.length;_++)g(_)}}},u=this,l=0;l<s;l++)h(l)},t.prototype.bezier=function(e,t,a,n){return e.mul((1-n)*(1-n)).add(a.mul(2*n*(1-n))).add(t.mul(n*n))},t.prototype.suijiAction=function(e){e.active=!0;var t=r.NumberUtil.randomNum(100,200),a=r.NumberUtil.randomNum(1,250),n=100;r.NumberUtil.randomNum(1,2)>1&&(a=-a,t=-t,n=-n),a=e.y+a,t=e.x+t,cc.v2(t-n,a+150),cc.tween(e).to(.5,{position:cc.v2(t,a)},{easing:"circOut"}).to(.3,{opacity:0}).start()},t.prototype.wulei_action=function(e,t,a,n,o,i,s){var c=this,h=-230;n&&(h=870),r.conMager.getInstance().playAudioEff("wulei/fase"),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zidang_wulei,this.node,{ys:h,pos:cc.v2(e,t),cb:function(){var e=cc.repeatForever(cc.sequence(cc.moveBy(.025,cc.v2(2,2)),cc.moveBy(.05,cc.v2(-4,-4)),cc.moveBy(.025,cc.v2(2,2))));a.getChildByName("dianhaun").active=!0,a.getChildByName("dianhaun").zIndex=99,a.runAction(e),i==s.length-1&&c.scheduleOnce(function(){c.board.yilun_qizi_v2=[];for(var e=function(e){var t=s[e];s.length,s.length>=100&&s.length;var a=t[0]*c.board.block,n=t[1]*c.board.block,i=t[0]+15*t[1],h=c.board.chess_map[i];h.stopAllActions(),c.board.maze[t[0]][t[1]]=0,c.board.sum-=1,h.destroy(),c.board.chess_map[i]=null,c.board.yilun_qizi_v2.push(cc.v2(t[0],t[1])),0==e&&r.conMager.getInstance().playAudioEff("wulei/bao"),r.conMager.getInstance().getPoolNode(r.KEY.poolName.baozha_wulei,c.node,{ani_name:o,pos:cc.v2(a,n),cb:function(){e==s.length-1&&(h.stopAllActions(),c.zhenFaCallback())}})},t=0;t<s.length;t++)e(t)},.3)}})},t.prototype.zhenFaCallback=function(){this.zhenFaName_pare=this.zhenFaName,this.cb&&this.cb(this.zhenFaName)},i([l(s.GameBoard_lianzhao)],t.prototype,"board",void 0),i([u],t)}(cc.Component);a.default=d,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../../../utils/commonFunction":"commonFunction","./GameBoard_lianzhao":"GameBoard_lianzhao"}],front_sanren:[function(e,t,a){"use strict";cc._RF.push(t,"f6dda3YRmNJBa86GkC6oCOR","front_sanren");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./AI_sanren"),r=e("./GameBoard_sanren"),c=e("../../../SSSGF/ssscgf"),h=e("../../../SSSGF/dataController/DATA"),u=e("../../../utils/commonFunction"),l=cc._decorator,d=l.ccclass,p=l.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.AI=null,t.whose_round=0,t.is_over=!1,t.user_level=0,t.state=0,t.zhenFaName="",t.zhenFaName_pare="",t.cb=null,t.meihua_chess_poslist=[],t.user_meihua_num=0,t.ds_meihua_num=0,t.xueyuChessPosList=[],t.xueyuChess_num=0,t.xueyuChess_num_1=0,t.xueyuChess_num_2=0,t.qipanArray=[],t.xueYuIsOver=!1,t.xueYuTime=2,t.checkMode=[[1,0],[0,1]],t.fenlie_max=2,t.fenlie_cishu=0,t.fenlie_first_max=4,t.fenlie_second_max=2,t.fenlie_callback=!1,t.donghua_run=!1,t.yanchi=0,t}return o(t,e),t.prototype.init_level=function(){var e=c.GameDataStorage.gameStateData.userZhenFaName;return this.user_level=c.GameDataStorage.getUser().userData.zhenFaMap[e].level,this.board.gameScene.gameType==h.game_type.lianzhao&&(this.user_level=this.board.gameScene.user_level),console.log("\u6280\u80fd\u7b49\u7ea7\u662f",this.user_level),this.user_level},t.prototype.onLoad=function(){this.board.initfront(this)},t.prototype.showFront=function(e,t,a){var n=this;this.cb=a,this.is_over=!0,this.state=e,this.scheduleOnce(function(){n.zhenFaName=t;var e="\u4e07\u5b81\u9635\u6cd5",a=!1,o=null,i=0,s=["nan","nv"],r=n.board.gameScene.node.getChildByName("ds_duihua"),h=n.board.gameScene.node.getChildByName("user_duihua"),u=[h,r];if("fenlie"!=t&&(n.board.yilun_qizi_v2=[]),n.state!=n.board.gameScene.userChess?i=1:(a=!0,i=0),"fenlie"==n.zhenFaName&&(0==i?i=1:(i=1)&&(i=0)),2==c.GameDataStorage.getUser().userData.zhenFaMap[t].attr&&(i=0==i?1:0,a=!a),"wanning"==t)e="\u4e07\u5b81\u9635\u6cd5",n.add_zhenfa_ani(t,"animation",n.wanning_zhen.bind(n),a);else if("bagua"==t)e="\u516b\u5366\u9635",n.add_zhenfa_ani(t,"animation",n.bagua_zhen.bind(n),a);else if("sijiao"==t)e="\u56db\u65b9\u9635",n.add_zhenfa_ani(t,"animation",n.sijiao_zhen.bind(n),a);else if("kedi"==t)e="\u514b\u654c\u5148\u673a",n.add_zhenfa_ani(t,"animation",function(){n.zhenFaCallback()},a);else if("wulei"==t){console.log("\u8981\u91ca\u653e\u4e94\u96f7\u9635\u6cd5"),e="\u4e94\u96f7\u9635";var l=cc.repeatForever(cc.sequence(cc.moveBy(.02,cc.v2(4,4)),cc.moveBy(.04,cc.v2(-8,-8)),cc.moveBy(.02,cc.v2(4,4)))),d=n.node.parent;n.scheduleOnce(function(){c.conMager.getInstance().playAudioEff("wulei/lei"),d.runAction(l),n.scheduleOnce(function(){d.stopAllActions(),d.setPosition(0,0)},.5)},1.3),n.add_zhenfa_ani(t,"animation",function(){n.wulei_zhen()},a)}else"fenlie"==t?(e="\u5206\u88c2\u9635",n.add_zhenfa_ani(t,"animation",function(){n.fenlie_max=n.init_level(),n.fenlie_callback=!1,n.donghua_run=!1,n.yanchi=0,n.fenlie_zhen()},a)):"xueyuyingsha"==t?(e="\u8840\u72f1\u5f71\u6740\u9635",n.add_zhenfa_ani(t,"animation",n.xueyuyingsha_zhen.bind(n),a)):"meihua"==t&&(e="\u6885\u82b1\u9635",n.add_zhenfa_ani(t,"ji",n.meihua_zhen_bozhong.bind(n),a));(o=u[i])==h&&n.board.gameScene.count_down.y<0&&(n.board.gameScene.count_down.opacity=0),o==r&&n.board.gameScene.count_down.y>0&&(n.board.gameScene.count_down.opacity=0),o.getChildByName("str").getComponent(cc.Label).string=e,o.active=!0,c.conMager.getInstance().playAudioEff(c.KEY.audioName.juesha),n.scheduleOnce(function(){c.conMager.getInstance().playAudioEff(s[i]+"/"+s[i]+t),n.scheduleOnce(function(){o.getChildByName("str").getComponent(cc.Label).string="",o.active=!1,n.board.gameScene.count_down.opacity=255},1)},1)},.3)},t.prototype.add_zhenfa_ani=function(e,t,a,n){c.conMager.getInstance().getPoolNode(c.KEY.poolName.zhenfa_ani,this.node.parent,{fileName:e,ani_name:t,cb:a,is_user:n})},t.prototype.meihua_zhen_bozhong=function(){var e=this,t=[],a=this.board.judgeSize;if(this.state,this.meihua_chess_poslist.length<=0)for(var n=0;n<this.board.judgeSize;n++){this.meihua_chess_poslist[n]=[];for(var o=0;o<this.board.judgeSize;o++)this.meihua_chess_poslist[n][o]=0}for(n=0;n<a;n++){var i=function(o){if(0==s.board.maze[n][o]){var i=[n,o];t.push(i)}if(n==a-1&&o==a-1){var r=s.init_level();s.state!=s.board.gameScene.userChess&&(r=c.GameDataStorage.gameStateData.ds_zhenfalevel),r=5+2*(r-1);var h=[];(t=c.NumberUtil.outOfOrder(t)).length<r&&(r=t.length);for(var u=0;u<r;u++)if(i=t[u],h.push(i),u==r-1){c.GameDataStorage.gameStateData.chess_num=h.length,s.board.gameScene.chess_num=c.GameDataStorage.gameStateData.chess_num;for(var l=function(t){var a=h[t],n=1/h.length;h.length>=100&&(n=2/h.length),s.scheduleOnce(function(){a[0],e.board.block,a[1],e.board.block,e.state!=e.board.gameScene.userChess?e.ds_meihua_num+=1:e.user_meihua_num+=1,e.meihua_chess_poslist[a[0]][a[1]]=e.state,e.board.maze[a[0]][a[1]]=e.state,e.board.meihuaZhenLuozi(a[0],a[1],e.state,"meihua"),c.conMager.getInstance().getPoolNode(c.KEY.poolName.meihua,e.node,{pos:a,state:e.state,callBack:e.meihua_zhen_zhakai.bind(e)}),t==h.length-1&&e.zhenFaCallback()},t*n)},d=0;d<h.length;d++)l(d)}}},s=this;for(o=0;o<a;o++)i(o)}},t.prototype.meihua_zhen_zhakai=function(e,t){var a=e[0],n=e[1],o=[];o.push([a+1,n]),o.push([a-1,n]),o.push([a,n+1]),o.push([a,n-1]);for(var i=0;i<o.length;i++){var s=[o[i][0],o[i][1]];s[0]<0||s[0]>14||s[1]<0||s[1]>14||0==this.board.maze[s[0]][s[1]]&&(this.meihua_chess_poslist[s[0]][s[1]]=t,this.board.meihuaZhenLuozi(s[0],s[1],t,"meihua"))}t==this.board.gameScene.userChess?(this.user_meihua_num-=1,this.user_meihua_num<=0&&this.board.meihuazhencb(t)):(this.ds_meihua_num-=1,this.ds_meihua_num<=0&&this.board.meihuazhencb(t))},t.prototype.wanning_zhen=function(){for(var e=this,t=[],a=this.board.judgeSize,n=0;n<a;n++)for(var o=function(o){if(0==i.board.maze[n][o]){var s=[n,o];t.push(s)}if(n==a-1&&o==a-1){var r=i.init_level();i.state!=i.board.gameScene.userChess&&(r=c.GameDataStorage.gameStateData.ds_zhenfalevel),r*=10;var h=[];(t=c.NumberUtil.outOfOrder(t)).length<r&&(r=t.length);for(var u=0;u<r;u++)if(s=t[u],h.push(s),u==r-1){c.GameDataStorage.gameStateData.chess_num=h.length,i.board.gameScene.chess_num=c.GameDataStorage.gameStateData.chess_num;for(var l=function(t){var a=h[t],n=1/h.length;h.length>=100&&(n=2/h.length),i.scheduleOnce(function(){var n=a[0]*e.board.block,o=a[1]*e.board.block;e.board.dazhao_moveInChess(n,o,e.state),t==h.length-1&&e.zhenFaCallback()},t*n)},d=0;d<h.length;d++)l(d)}}},i=this,s=0;s<a;s++)o(s)},t.prototype.sijiao_zhen=function(){var e=this,t=this.board.newx/this.board.block,a=this.board.newY/this.board.block,n=this.init_level();this.state!=this.board.gameScene.userChess&&(n=c.GameDataStorage.gameStateData.ds_zhenfalevel);var o,i,s,r,h=(n-2)%3,u=2*Math.floor((n-2)/3)+3,l=Math.floor(u/2),d=[];n>1?this.checkWin1(t,a,u,l,d,function(){e.addpos(t,a,h,d,l),e.ailuozi(d)}):(o=[t+1,a],i=[t-1,a],s=[t,a+1],r=[t,a-1],d.push(o),d.push(i),d.push(s),d.push(r),this.ailuozi(d))},t.prototype.xueyuyingsha_zhen=function(){var e=this,t=this.init_level();this.state!=this.board.gameScene.userChess&&(t=c.GameDataStorage.gameStateData.ds_zhenfalevel),this.xueyuChess_num=t+4,this.xueyuChess_num=4+2*(t-1),this.xueyuChess_num>225&&(this.xueyuChess_num=225),this.xueyuChess_num_1=this.xueyuChess_num,this.xueyuChess_num_2=this.xueyuChess_num,this.xueyuChessPosList=[],this.xueYuIsOver=!1;for(var a=0;a<15;a++){this.qipanArray[a]=[];for(var n=0;n<15;n++)this.qipanArray[a][n]=0,0!=this.board.maze[a][n]&&(this.qipanArray[a][n]=this.board.maze[a][n])}console.log("\u54c8\u54c8\u54c8\u54c8\u54c8\u8840\u72f1\u5f71\u6740\u9635\uff01\uff01\uff01",this.xueyuChess_num,this.state,this.qipanArray,this.board.maze),this.startTime();var o=Math.floor(this.board.newx/this.board.block),i=Math.floor(this.board.newY/this.board.block),s=o+15*i,r=(this.board.chess_map[s],[o,i]),h=[];h.push([o+1,i]),h.push([o-1,i]),h.push([o,i+1]),h.push([o,i-1]),this.xueyuChessPosList.push(r),c.conMager.getInstance().playAudioEff(c.KEY.audioName.xueliu,!0);for(var u=0;u<4;u++){var l=[h[u][0],h[u][1]];if(!(l[0]<0||l[0]>14||l[1]<0||l[1]>14))if(0==this.qipanArray[l[0]][l[1]])this.xueXianAction(l,r,!0);else if(this.xueyuChess_num-=1,this.xueyuChess_num<=1)return this.xueyuChess_num<=1&&!this.xueYuIsOver?(c.conMager.getInstance().stopAudioEff(),this.xueYuIsOver=!0,void this.scheduleOnce(function(){e.zhenFaCallback()},1)):void 0}},t.prototype.startTime=function(){this.xueYuTime=1,this.schedule(this.updateTime,.5)},t.prototype.updateTime=function(){this.xueYuTime-=.5,this.xueYuTime<=0&&(this.stopTime(),c.conMager.getInstance().stopAudioEff(),this.xueYuIsOver||(this.xueYuIsOver=!0,this.zhenFaCallback()))},t.prototype.stopTime=function(){this.unschedule(this.updateTime)},t.prototype.xueXianAction=function(e,t){var a=this;if(this.xueyuChess_num<=0&&this.xueyuChess_num<=0&&!this.xueYuIsOver)return c.conMager.getInstance().stopAudioEff(),this.xueYuIsOver=!0,this.stopTime(),void this.scheduleOnce(function(){a.zhenFaCallback()},1);this.xueyuChess_num-=1,this.stopTime(),this.startTime();var n=1;e[0],e[1],e[0]>t[0]?n=1:e[0]<t[0]?n=2:e[1]>t[1]?n=3:e[1]<t[1]&&(n=4);var o=c.NumberUtil.randomNum(0,10);o<11&&e.length>0&&(this.qipanArray[e[0]][e[1]]=this.state,this.xueyuChess_num>0&&this.initXueYuChess(e)),this.xueyuChess_num<=0||e.length<2||c.conMager.getInstance().getPoolNode(c.KEY.poolName.xueXian,this.node,{pos:t,targetPos:e,direction:n,chess_Pbb:o,callBack:function(e,t,n){var o=[];if(c.NumberUtil.randomNum(0,10)>7)a.checkNode(t,function(e,t){a.call(e,t)});else{var i=t[0],s=t[1];1==n?i=t[0]+1:2==n?i=t[0]-1:3==n?s=t[1]+1:4==n&&(s=t[1]-1),i<0||i>14||s<0||s>14?a.checkNode(t,function(e,t){a.call(e,t)}):0!=a.qipanArray[i][s]?a.checkNode(t,function(e,t){a.call(e,t)}):(o=[i,s],a.call(o,t))}}})},t.prototype.initXueYuChess=function(e){var t=this;this.xueyuChessPosList.push(e),this.scheduleOnce(function(){c.NumberUtil.randomNum(0,10)<5&&t.checkNode(e,function(e,a){t.call(e,a)});var a=e[0]*t.board.block,n=e[1]*t.board.block;t.board.dazhao_moveInChess(a,n,t.state),c.conMager.getInstance().getPoolNode(c.KEY.poolName.xueyuChessSke,t.node,{pos:cc.v3(a,n),callBack:function(){}}),t.scheduleOnce(function(){var a=e[0]+15*e[1];t.board.chess_map[a].runAction(cc.sequence(cc.scaleTo(.15,1.15),cc.scaleTo(.1,1),cc.callFunc(function(){})))},.4)},.5)},t.prototype.call=function(e,t){this.xueXianAction(e,t)},t.prototype.checkNode=function(e,t,a){for(var n=[],o=0;o<2;o++){var i=this.checkState(e[0],e[1],this.checkMode[o],a);if(i.length>0)for(var s=0;s<i.length;s++)n.push(i[s])}var r=[];return n.length>0&&(r=n[c.NumberUtil.randomNum(0,n.length-1)]),t(r,e)},t.prototype.checkState=function(e,t,a,n){void 0===n&&(n=null);var o=[],i=0;a==this.checkMode[0]&&(i=1),a==this.checkMode[1]&&(i=3);for(var s=1;s<2;s++){var r=e+s*a[0],c=t+s*a[1];if(!(r<0||r>14||c<0||c>14||n&&n!=i)){if(0!=this.qipanArray[r][c])break;var h=[r,c];o.push(h)}}a==this.checkMode[0]&&(i=2),a==this.checkMode[1]&&(i=4);for(var u=1;u<2;u++)if(r=e-u*a[0],c=t-u*a[1],!(r<0||r>14||c<0||c>14||n&&n!=i)){if(0!=this.qipanArray[r][c])break;h=[r,c],o.push(h)}return o},t.prototype.fenlie_zhen=function(){var e=this;if(this.fenlie_cishu++,this.fenlie_cishu>this.fenlie_max){if(1==this.fenlie_callback)return;return this.fenlie_callback=!0,this.fenlie_cishu=0,console.error("\u4e0d\u80fd\u5206\u88c2\u4e86"),void this.scheduleOnce(function(){e.zhenFaCallback()},1)}for(var t=[],a=0;a<this.board.yilun_qizi_v2.length;a++)t.push(this.board.yilun_qizi_v2[a]);this.board.yilun_qizi_v2=[],t.length<1&&0==this.donghua_run&&this.zhenFaCallback();var n=!1,o=!1,i=function(a){s.yanchi=0;var i=Math.floor(4*Math.random()),r=[];switch(i){case 0:r.push(cc.v2(-1,-1),cc.v2(1,1));break;case 1:r.push(cc.v2(-1,0),cc.v2(1,0));break;case 2:r.push(cc.v2(-1,1),cc.v2(1,-1));break;case 3:r.push(cc.v2(0,1),cc.v2(0,-1))}var h=0;1==s.fenlie_cishu?h=s.fenlie_first_max:2==s.fenlie_cishu&&(h=s.fenlie_second_max);for(var l=Math.floor(Math.random()*(h+1)+1),d=function(i){for(var h=t[a].x+r[i].x*l,d=t[a].y+r[i].y*l,p=function(){var n=t[a].x+15*t[a].y,o=e.board.chess_map[n];o&&(o.stopAllActions(),e.board.maze[t[a].x][t[a].y]!=e.state&&c.conMager.getInstance().getPoolNode(c.KEY.poolName.qizi,e.node,t[a],h,d,function(){},function(){},function(){e.board.maze[t[a].x][t[a].y]=e.state,u.commonFunction.updateSprite("chess/"+e.state,o.getChildByName("chess"))},2))},g=function(){if(s.board.maze[h]&&null!==s.board.maze[h][d]){if(0==s.board.maze[h][d]){0==n&&(s.donghua_run=!0,n=!0);var u=h*s.board.block,l=d*s.board.block;s.board.yilun_qizi_v2.push(cc.v2(h,d));var g=1;return 1!=s.fenlie_cishu&&(g=0),c.conMager.getInstance().getPoolNode(c.KEY.poolName.qizi,s.node,t[a],h,d,function(){e.board.dazhao_moveInChess(u,l,e.state)},function(){1==n&&0==o&&(o=!0,e.fenlie_zhen())},function(){p()},g),"break"}if(h-=r[i].x,d-=r[i].y,p(),h==t[a].x&&h==t[a].y)return console.error("\u6c34\u6ef4\u56de\u9000\u5230\u4e86\u539f\u4f4d\uff0c\u4e0d\u751f\u6210"),"break"}else if(console.error("\u4e0d\u5728\u68cb\u76d8\u4e0a\u4e86"),p(),h-=r[i].x,d-=r[i].y,h==t[a].x&&h==t[a].y)return console.error("\u6c34\u6ef4\u56de\u9000\u5230\u4e86\u539f\u4f4d\uff0c\u4e0d\u751f\u6210"),"break"},_=0;_<l&&"break"!==g();_++);},p=0;p<r.length;p++)d(p);var g=s.init_level();if(s.state!=s.board.gameScene.userChess&&(g=c.GameDataStorage.gameStateData.ds_zhenfalevel),a+1>=g)return console.error("\u8be5\u6eda\u86cb\u4e86"),"break"},s=this;for(a=0;a<t.length&&"break"!==i(a);a++);0==n&&this.fenlie_zhen()},t.prototype.ailuozi=function(e){c.conMager.getInstance().playAudioEff(c.KEY.audioName.luozi);for(var t=0;t<e.length;t++){var a=e[t],n=a[0]*this.board.block,o=a[1]*this.board.block;this.board.dazhao_moveInChess(n,o,this.state),t==e.length-1&&this.zhenFaCallback()}},t.prototype.addpos=function(e,t,a,n,o){var i,s,r,c,h,u,l,d;a<=0||(i=[e+o+1,t],s=[e-o-1,t],r=[e,t+o+1],c=[e,t-o-1],n.push(i),n.push(s),n.push(r),n.push(c),2==a&&(h=[e+o+1,t+o+1],u=[e-o-1,t-o-1],l=[e+o+1,t-o-1],d=[e-o-1,t+o+1],n.push(h),n.push(u),n.push(l),n.push(d)))},t.prototype.checkWin1=function(e,t,a,n,o,i){for(var s=e-n,r=s,c=t+n,h=a*a,u=0;u<h;u++){var l=[r,c];o.push(l),r+=1,(u+1)%a==0&&(r=s,c-=1),u==h-1&&i()}},t.prototype.bagua_zhen=function(){for(var e=this,t=[],a=this.board.judgeSize,n=0;n<a;n++)for(var o=function(o){if(i.board.maze[n][o]==i.state){var s=[n,o];i.meihua_chess_poslist.length>0?0==i.meihua_chess_poslist[n][o]&&t.push(s):t.push(s)}if(n==a-1&&o==a-1){var r,h=i.init_level(),l=!0;i.state==i.board.gameScene.userChess&&(h=c.GameDataStorage.gameStateData.ds_zhenfalevel,l=!1),r=1==i.state?"bianhei":"bianbai";var d=[];(t=c.NumberUtil.outOfOrder(t)).length<h&&(h=t.length);for(var p=0;p<h;p++)if(s=t[p],d.push(s),p==h-1){console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u516b\u5366:",d.length,d,h);for(var g=function(t){var a=d[t];d.length,d.length>=100&&d.length;var n=a[0]*i.board.block,o=a[1]*i.board.block,s=a[0]+15*a[1],h=i.board.chess_map[s];if(i.board.maze[a[0]][a[1]]=-1*i.state,i.board.AITurn.addPos(a[0],a[1],-1*i.state),"fenlie"==i.board.getZhenFaName(-1*i.state).zhenFaName){var p=cc.v2(a[0],a[1]);i.board.yilun_qizi_v2.push(p)}u.commonFunction.updateSprite("chess/"+-1*i.state,h.getChildByName("chess")),c.conMager.getInstance().getPoolNode(c.KEY.poolName.zhenfa_ani,i.node,{fileName:"taiji",ani_name:r,cb:function(){e.board.maze[a[0]][a[1]]=-1*e.state,t==d.length-1&&e.zhenFaCallback()},is_user:l,pos:cc.v2(n,o+1)})},_=0;_<d.length;_++)g(_)}}},i=this,s=0;s<a;s++)o(s)},t.prototype.wulei_zhen=function(){var e,t=this,a=this.state,n=!1,o=this.init_level();"kedi"==this.zhenFaName_pare&&(a*=-1),e=1==a?"animation":"animation2",a==this.board.gameScene.userChess&&(o=c.GameDataStorage.gameStateData.ds_zhenfalevel,n=!0),o*=2,console.log("\u4e94\u96f7\u8981\u548b\u7761:",a);for(var i=[],s=this.board.judgeSize,r=0;r<s;r++)for(var h=function(h){if(u.board.maze[r][h]==a){var l=[r,h];u.meihua_chess_poslist.length>0?0==u.meihua_chess_poslist[r][h]&&i.push(l):i.push(l)}if(r==s-1&&h==s-1){var d=[];(i=c.NumberUtil.outOfOrder(i)).length<o&&(o=i.length);for(var p=0;p<o;p++)if(l=i[p],d.push(l),p==o-1){console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u4e94\u96f7:",d.length,d,o);for(var g=function(o){var i=d[o],s=1.5/d.length;d.length>=100&&(s=2.5/d.length),u.scheduleOnce(function(){var s=i[0]*t.board.block,r=i[1]*t.board.block,c=i[0]+15*i[1],h=t.board.chess_map[c];t.board.maze[i[0]][i[1]]=0,t.board.sum-=1,t.board.AITurn.delPos(i[0],i[1],a),t.wulei_action(s,r,h,n,e,o,d);var u=t.board.getZhenFaName(-1*t.state).zhenFaName;if(console.log("\u6211\u662f\u4e94\u96f7\uff0c\u4f60\u662f\u4ec0\u4e48",u),"fenlie"==u){var l=cc.v2(i[0],i[1]);t.board.yilun_qizi_v2.push(l)}},o*s)},_=0;_<d.length;_++)g(_)}}},u=this,l=0;l<s;l++)h(l)},t.prototype.bezier=function(e,t,a,n){return e.mul((1-n)*(1-n)).add(a.mul(2*n*(1-n))).add(t.mul(n*n))},t.prototype.suijiAction=function(e){e.active=!0;var t=c.NumberUtil.randomNum(100,200),a=c.NumberUtil.randomNum(1,250),n=100;c.NumberUtil.randomNum(1,2)>1&&(a=-a,t=-t,n=-n),a=e.y+a,t=e.x+t,cc.v2(t-n,a+150),cc.tween(e).to(.5,{position:cc.v2(t,a)},{easing:"circOut"}).to(.3,{opacity:0}).start()},t.prototype.wulei_action=function(e,t,a,n,o,i,s){var r=this,h=-230;n&&(h=870),c.conMager.getInstance().playAudioEff("wulei/fase"),c.conMager.getInstance().getPoolNode(c.KEY.poolName.zidang_wulei,this.node,{ys:h,pos:cc.v2(e,t),cb:function(){var e=cc.repeatForever(cc.sequence(cc.moveBy(.025,cc.v2(2,2)),cc.moveBy(.05,cc.v2(-4,-4)),cc.moveBy(.025,cc.v2(2,2))));a.getChildByName("dianhaun").active=!0,a.getChildByName("dianhaun").zIndex=99,a.runAction(e),i==s.length-1&&r.scheduleOnce(function(){r.board.yilun_qizi_v2=[];for(var e=function(e){var t=s[e];s.length,s.length>=100&&s.length;var a=t[0]*r.board.block,n=t[1]*r.board.block,i=t[0]+15*t[1],h=r.board.chess_map[i];h.stopAllActions(),r.board.maze[t[0]][t[1]]=0,r.board.sum-=1,h.destroy(),r.board.chess_map[i]=null,r.board.yilun_qizi_v2.push(cc.v2(t[0],t[1])),0==e&&c.conMager.getInstance().playAudioEff("wulei/bao"),c.conMager.getInstance().getPoolNode(c.KEY.poolName.baozha_wulei,r.node,{ani_name:o,pos:cc.v2(a,n),cb:function(){e==s.length-1&&(h.stopAllActions(),r.zhenFaCallback())}})},t=0;t<s.length;t++)e(t)},.3)}})},t.prototype.zhenFaCallback=function(){this.zhenFaName_pare=this.zhenFaName,this.cb&&this.cb(this.zhenFaName)},t.prototype.update=function(){},i([p(r.GameBoard_sanren)],t.prototype,"board",void 0),i([p(s.AI_sanren)],t.prototype,"AI",void 0),i([d],t)}(cc.Component);a.default=g,cc._RF.pop()},{"../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../../../utils/commonFunction":"commonFunction","./AI_sanren":"AI_sanren","./GameBoard_sanren":"GameBoard_sanren"}],front_zhibo:[function(e,t,a){"use strict";cc._RF.push(t,"1c1121RSbhKe6R7uD1NNCaA","front_zhibo");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("../../../utils/commonFunction"),c=e("./AI_zhibo"),h=e("./GameBoard_zhibo"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.AI=null,t.whose_round=0,t.is_over=!1,t.state=0,t.zhenFaName="",t.zhenFaName_pare="",t.cb=null,t}return o(t,e),t.prototype.onLoad=function(){this.board.initfront(this)},t.prototype.showFront=function(e,t,a){var n=this;this.cb=a,this.is_over=!0,this.state=e,this.scheduleOnce(function(){n.zhenFaName=t;var e="\u4e07\u5b81\u9635\u6cd5",a=!1,o=null,i=0,r=["nan","nv"],c=n.board.gameScene.node.getChildByName("ds_duihua"),h=n.board.gameScene.node.getChildByName("user_duihua"),u=[h,c];if(n.state!=n.board.gameScene.userChess?i=1:(a=!0,i=0),console.log("\u9078\u4e2d\u7684\u5c0d\u8a71\u6846\u4e82\u641e:",i,n.state),2==s.GameDataStorage.getUser().userData.zhenFaMap[t].attr&&(i=0==i?1:0,a=!a),"wanning"==t)e="\u4e07\u5b81\u9635\u6cd5",n.add_zhenfa_ani(t,"animation",n.wanning_zhen.bind(n),a);else if("bagua"==t)e="\u516b\u5366\u9635",n.add_zhenfa_ani(t,"animation",n.bagua_zhen.bind(n),a);else if("sijiao"==t)e="\u56db\u65b9\u9635",n.add_zhenfa_ani(t,"animation",n.sijiao_zhen.bind(n),a);else if("kedi"==t)e="\u514b\u654c\u5148\u673a",n.add_zhenfa_ani(t,"animation",function(){n.zhenFaCallback()},a);else if("wulei"==t){e="\u4e94\u96f7\u9635";var l=cc.repeatForever(cc.sequence(cc.moveBy(.02,cc.v2(4,4)),cc.moveBy(.04,cc.v2(-8,-8)),cc.moveBy(.02,cc.v2(4,4)))),d=n.node.parent;n.scheduleOnce(function(){s.conMager.getInstance().playAudioEff("wulei/lei"),d.runAction(l),n.scheduleOnce(function(){d.stopAllActions(),d.setPosition(0,0)},.5)},1.3),n.add_zhenfa_ani(t,"animation",function(){n.wulei_zhen()},a)}(o=u[i])==h&&n.board.gameScene.count_down.y<0&&(n.board.gameScene.count_down.opacity=0),o==c&&n.board.gameScene.count_down.y>0&&(n.board.gameScene.count_down.opacity=0),o.getChildByName("str").getComponent(cc.Label).string=e,o.active=!0,s.conMager.getInstance().playAudioEff(s.KEY.audioName.juesha),n.scheduleOnce(function(){s.conMager.getInstance().playAudioEff(r[i]+"/"+r[i]+t),n.scheduleOnce(function(){o.getChildByName("str").getComponent(cc.Label).string="",o.active=!1,n.board.gameScene.count_down.opacity=255},1)},1)},.3)},t.prototype.add_zhenfa_ani=function(e,t,a,n){s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.node.parent,{fileName:e,ani_name:t,cb:a,is_user:n})},t.prototype.wanning_zhen=function(){for(var e=this,t=[],a=this.board.judgeSize,n=0;n<a;n++)for(var o=function(o){if(0==i.board.maze[n][o]){var r=[n,o];t.push(r)}if(n==a-1&&o==a-1){var c=s.GameDataStorage.getUser().userData.zhenFaMap.wanning.level;i.state!=i.board.gameScene.userChess&&(c=s.GameDataStorage.gameStateData.ds_zhenfalevel),c*=10;var h=[];(t=s.NumberUtil.outOfOrder(t)).length<c&&(c=t.length);for(var u=0;u<c;u++)if(r=t[u],h.push(r),u==c-1){s.GameDataStorage.gameStateData.chess_num=h.length,i.board.gameScene.chess_num=s.GameDataStorage.gameStateData.chess_num;for(var l=function(t){var a=h[t],n=1/h.length;h.length>=100&&(n=2/h.length),i.scheduleOnce(function(){var n=a[0]*e.board.block,o=a[1]*e.board.block;e.board.dazhao_moveInChess(n,o,e.state),t==h.length-1&&e.zhenFaCallback()},t*n)},d=0;d<h.length;d++)l(d)}}},i=this,r=0;r<a;r++)o(r)},t.prototype.sijiao_zhen=function(){var e=this,t=this.board.newx/this.board.block,a=this.board.newY/this.board.block,n=s.GameDataStorage.getUser().userData.zhenFaMap.sijiao.level;this.state!=this.board.gameScene.userChess&&(n=s.GameDataStorage.gameStateData.ds_zhenfalevel);var o,i,r,c,h=(n-2)%3,u=2*Math.floor((n-2)/3)+3,l=Math.floor(u/2),d=[];n>1?this.checkWin1(t,a,u,l,d,function(){e.addpos(t,a,h,d,l),e.ailuozi(d)}):(o=[t+1,a],i=[t-1,a],r=[t,a+1],c=[t,a-1],d.push(o),d.push(i),d.push(r),d.push(c),this.ailuozi(d))},t.prototype.ailuozi=function(e){s.conMager.getInstance().playAudioEff(s.KEY.audioName.luozi);for(var t=0;t<e.length;t++){var a=e[t],n=a[0]*this.board.block,o=a[1]*this.board.block;this.board.dazhao_moveInChess(n,o,this.state),t==e.length-1&&this.zhenFaCallback()}},t.prototype.addpos=function(e,t,a,n,o){var i,s,r,c,h,u,l,d;a<=0||(i=[e+o+1,t],s=[e-o-1,t],r=[e,t+o+1],c=[e,t-o-1],n.push(i),n.push(s),n.push(r),n.push(c),2==a&&(h=[e+o+1,t+o+1],u=[e-o-1,t-o-1],l=[e+o+1,t-o-1],d=[e-o-1,t+o+1],n.push(h),n.push(u),n.push(l),n.push(d)))},t.prototype.checkWin1=function(e,t,a,n,o,i){for(var s=e-n,r=s,c=t+n,h=a*a,u=0;u<h;u++){var l=[r,c];o.push(l),r+=1,(u+1)%a==0&&(r=s,c-=1),u==h-1&&i()}},t.prototype.bagua_zhen=function(){for(var e=this,t=[],a=this.board.judgeSize,n=0;n<a;n++)for(var o=function(o){if(i.board.maze[n][o]==i.state){var c=[n,o];t.push(c)}if(n==a-1&&o==a-1){var h,u=s.GameDataStorage.getUser().userData.zhenFaMap.bagua.level,l=!0;i.state==i.board.gameScene.userChess&&(u=s.GameDataStorage.gameStateData.ds_zhenfalevel,l=!1),h=1==i.state?"bianhei":"bianbai";var d=[];(t=s.NumberUtil.outOfOrder(t)).length<u&&(u=t.length);for(var p=0;p<u;p++)if(c=t[p],d.push(c),p==u-1){console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u516b\u5366:",d.length,d,u);for(var g=function(t){var a=d[t];d.length,d.length>=100&&d.length;var n=a[0]*i.board.block,o=a[1]*i.board.block,c=a[0]+15*a[1],u=i.board.chess_map[c];i.board.maze[a[0]][a[1]]=-1*i.state,i.board.AITurn.addPos(a[0],a[1],-1*i.state),r.commonFunction.updateSprite("chess/"+-1*i.state,u.getChildByName("chess")),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,i.node,{fileName:"taiji",ani_name:h,cb:function(){e.board.maze[a[0]][a[1]]=-1*e.state,t==d.length-1&&e.zhenFaCallback()},is_user:l,pos:cc.v2(n,o+1)})},_=0;_<d.length;_++)g(_)}}},i=this,c=0;c<a;c++)o(c)},t.prototype.wulei_zhen=function(){var e,t=this,a=this.state,n=!1,o=s.GameDataStorage.getUser().userData.zhenFaMap.wulei.level;"kedi"==this.zhenFaName_pare&&(a*=-1),e=1==a?"animation":"animation2",a==this.board.gameScene.userChess&&(o=s.GameDataStorage.gameStateData.ds_zhenfalevel,n=!0),o*=2,console.log("\u4e94\u96f7\u8981\u548b\u7761:",a);for(var i=[],r=this.board.judgeSize,c=0;c<r;c++)for(var h=function(h){if(u.board.maze[c][h]==a){var l=[c,h];i.push(l)}if(c==r-1&&h==r-1){var d=[];(i=s.NumberUtil.outOfOrder(i)).length<o&&(o=i.length);for(var p=0;p<o;p++)if(l=i[p],d.push(l),p==o-1){console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u4e94\u96f7:",d.length,d,o);for(var g=function(o){var i=d[o],s=1.5/d.length;d.length>=100&&(s=2.5/d.length),u.scheduleOnce(function(){var s=i[0]*t.board.block,r=i[1]*t.board.block,c=i[0]+15*i[1],h=t.board.chess_map[c];t.board.maze[i[0]][i[1]]=0,t.board.sum-=1,t.board.AITurn.delPos(i[0],i[1],a),t.wulei_action(s,r,h,n,e,o,d)},o*s)},_=0;_<d.length;_++)g(_)}}},u=this,l=0;l<r;l++)h(l)},t.prototype.bezier=function(e,t,a,n){return e.mul((1-n)*(1-n)).add(a.mul(2*n*(1-n))).add(t.mul(n*n))},t.prototype.suijiAction=function(e){e.active=!0;var t=s.NumberUtil.randomNum(100,200),a=s.NumberUtil.randomNum(1,250),n=100;s.NumberUtil.randomNum(1,2)>1&&(a=-a,t=-t,n=-n),a=e.y+a,t=e.x+t,cc.v2(t-n,a+150),cc.tween(e).to(.5,{position:cc.v2(t,a)},{easing:"circOut"}).to(.3,{opacity:0}).start()},t.prototype.wulei_action=function(e,t,a,n,o,i,r){var c=this,h=-230;n&&(h=870),s.conMager.getInstance().playAudioEff("wulei/fase"),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zidang_wulei,this.node,{ys:h,pos:cc.v2(e,t),cb:function(){var e=cc.repeatForever(cc.sequence(cc.moveBy(.025,cc.v2(2,2)),cc.moveBy(.05,cc.v2(-4,-4)),cc.moveBy(.025,cc.v2(2,2))));a.getChildByName("dianhaun").active=!0,a.getChildByName("dianhaun").zIndex=99,a.runAction(e),i==r.length-1&&c.scheduleOnce(function(){for(var e=function(e){var t=r[e];r.length,r.length>=100&&r.length;var a=t[0]*c.board.block,n=t[1]*c.board.block,i=t[0]+15*t[1],h=c.board.chess_map[i];h.stopAllActions(),c.board.maze[t[0]][t[1]]=0,c.board.sum-=1,h.destroy(),0==e&&s.conMager.getInstance().playAudioEff("wulei/bao"),s.conMager.getInstance().getPoolNode(s.KEY.poolName.baozha_wulei,c.node,{ani_name:o,pos:cc.v2(a,n),cb:function(){e==r.length-1&&(h.stopAllActions(),c.zhenFaCallback())}})},t=0;t<r.length;t++)e(t)},.3)}})},t.prototype.zhenFaCallback=function(){this.zhenFaName_pare=this.zhenFaName,this.cb&&this.cb(this.zhenFaName)},i([d(h.GameBoard_zhibo)],t.prototype,"board",void 0),i([d(c.AI_zhibo)],t.prototype,"AI",void 0),i([l],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../../../utils/commonFunction":"commonFunction","./AI_zhibo":"AI_zhibo","./GameBoard_zhibo":"GameBoard_zhibo"}],front:[function(e,t,a){"use strict";cc._RF.push(t,"f44d0XZSyVM3JyAYCAFlBFF","front");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=e("./AI"),h=e("./GameBoard"),u=e("../../SSSGF/dataController/DATA"),l=e("../../utils/commonFunction"),d=cc._decorator,p=d.ccclass,g=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.AI=null,t.whose_round=0,t.is_over=!1,t.user_level=0,t.state=0,t.zhenFaName="",t.zhenFaName_pare="",t.cb=null,t.meihua_chess_poslist=[],t.user_meihua_num=0,t.ds_meihua_num=0,t.xueyuChessPosList=[],t.xueyuChess_num=0,t.xueyuChess_num_1=0,t.xueyuChess_num_2=0,t.qipanArray=[],t.xueYuIsOver=!1,t.xueYuTime=2,t.checkMode=[[1,0],[0,1]],t.fenlie_max=2,t.fenlie_cishu=0,t.fenlie_first_max=4,t.fenlie_second_max=2,t.fenlie_callback=!1,t.donghua_run=!1,t.yanchi=0,t}return o(t,e),t.prototype.init_level=function(){var e=r.GameDataStorage.gameStateData.userZhenFaName;return this.user_level=r.GameDataStorage.getUser().userData.zhenFaMap[e].level,this.board.gameScene.gameType==u.game_type.lianzhao&&(this.user_level=this.board.gameScene.user_level),console.log("\u6280\u80fd\u7b49\u7ea7\u662f",this.user_level),this.user_level},t.prototype.onLoad=function(){this.board.initfront(this)},t.prototype.showFront=function(e,t,a){var n=this;this.cb=a,this.is_over=!0,this.state=e,this.scheduleOnce(function(){n.zhenFaName=t;var e="\u4e07\u5b81\u9635\u6cd5",a=!1,o=null,i=0,s=["nan","nv"],c=n.board.gameScene.node.getChildByName("ds_duihua"),h=n.board.gameScene.node.getChildByName("user_duihua"),u=[h,c];if("fenlie"!=t&&(n.board.yilun_qizi_v2=[]),n.state!=n.board.gameScene.userChess?i=1:(a=!0,i=0),"fenlie"==n.zhenFaName&&(0==i?i=1:(i=1)&&(i=0)),2==r.GameDataStorage.getUser().userData.zhenFaMap[t].attr&&(i=0==i?1:0,a=!a),"wanning"==t)e="\u4e07\u5b81\u9635\u6cd5",n.add_zhenfa_ani(t,"animation",n.wanning_zhen.bind(n),a);else if("bagua"==t)e="\u516b\u5366\u9635",n.add_zhenfa_ani(t,"animation",n.bagua_zhen.bind(n),a);else if("sijiao"==t)e="\u56db\u65b9\u9635",n.add_zhenfa_ani(t,"animation",n.sijiao_zhen.bind(n),a);else if("kedi"==t)e="\u514b\u654c\u5148\u673a",n.add_zhenfa_ani(t,"animation",function(){n.zhenFaCallback()},a);else if("wulei"==t){console.log("\u8981\u91ca\u653e\u4e94\u96f7\u9635\u6cd5"),e="\u4e94\u96f7\u9635";var l=cc.repeatForever(cc.sequence(cc.moveBy(.02,cc.v2(4,4)),cc.moveBy(.04,cc.v2(-8,-8)),cc.moveBy(.02,cc.v2(4,4)))),d=n.node.parent;n.scheduleOnce(function(){r.conMager.getInstance().playAudioEff("wulei/lei"),d.runAction(l),n.scheduleOnce(function(){d.stopAllActions(),d.setPosition(0,0)},.5)},1.3),n.add_zhenfa_ani(t,"animation",function(){n.wulei_zhen()},a)}else"fenlie"==t?(e="\u5206\u88c2\u9635",n.add_zhenfa_ani(t,"animation",function(){n.fenlie_max=n.init_level(),n.fenlie_callback=!1,n.donghua_run=!1,n.yanchi=0,n.fenlie_zhen()},a)):"xueyuyingsha"==t?(e="\u8840\u72f1\u5f71\u6740\u9635",n.add_zhenfa_ani(t,"animation",n.xueyuyingsha_zhen.bind(n),a)):"meihua"==t&&(e="\u6885\u82b1\u9635",n.add_zhenfa_ani(t,"ji",n.meihua_zhen_bozhong.bind(n),a));(o=u[i])==h&&n.board.gameScene.count_down.y<0&&(n.board.gameScene.count_down.opacity=0),o==c&&n.board.gameScene.count_down.y>0&&(n.board.gameScene.count_down.opacity=0),o.getChildByName("str").getComponent(cc.Label).string=e,o.active=!0,r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),n.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(s[i]+"/"+s[i]+t),n.scheduleOnce(function(){o.getChildByName("str").getComponent(cc.Label).string="",o.active=!1,n.board.gameScene.count_down.opacity=255},1)},1)},.3)},t.prototype.add_zhenfa_ani=function(e,t,a,n){r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,this.node.parent,{fileName:e,ani_name:t,cb:a,is_user:n})},t.prototype.meihua_zhen_bozhong=function(){var e=this,t=[],a=this.board.judgeSize;if(this.state,this.meihua_chess_poslist.length<=0)for(var n=0;n<this.board.judgeSize;n++){this.meihua_chess_poslist[n]=[];for(var o=0;o<this.board.judgeSize;o++)this.meihua_chess_poslist[n][o]=0}for(n=0;n<a;n++){var i=function(o){if(0==c.board.maze[n][o]){var i=[n,o];t.push(i)}if(n==a-1&&o==a-1){var h=c.init_level();c.state!=c.board.gameScene.userChess&&(h=r.GameDataStorage.gameStateData.ds_zhenfalevel),h=5+2*(h-1);var u=[];(t=s.NumberUtil.outOfOrder(t)).length<h&&(h=t.length);for(var l=0;l<h;l++)if(i=t[l],u.push(i),l==h-1){r.GameDataStorage.gameStateData.chess_num=u.length,c.board.gameScene.chess_num=r.GameDataStorage.gameStateData.chess_num;for(var d=function(t){var a=u[t],n=1/u.length;u.length>=100&&(n=2/u.length),c.scheduleOnce(function(){a[0],e.board.block,a[1],e.board.block,e.state!=e.board.gameScene.userChess?e.ds_meihua_num+=1:e.user_meihua_num+=1,e.meihua_chess_poslist[a[0]][a[1]]=e.state,e.board.maze[a[0]][a[1]]=e.state,e.board.meihuaZhenLuozi(a[0],a[1],e.state,"meihua"),r.conMager.getInstance().getPoolNode(r.KEY.poolName.meihua,e.node,{pos:a,state:e.state,callBack:e.meihua_zhen_zhakai.bind(e)}),t==u.length-1&&e.zhenFaCallback()},t*n)},p=0;p<u.length;p++)d(p)}}},c=this;for(o=0;o<a;o++)i(o)}},t.prototype.meihua_zhen_zhakai=function(e,t){var a=e[0],n=e[1],o=[];o.push([a+1,n]),o.push([a-1,n]),o.push([a,n+1]),o.push([a,n-1]);for(var i=0;i<o.length;i++){var s=[o[i][0],o[i][1]];s[0]<0||s[0]>14||s[1]<0||s[1]>14||0==this.board.maze[s[0]][s[1]]&&(this.meihua_chess_poslist[s[0]][s[1]]=t,this.board.meihuaZhenLuozi(s[0],s[1],t,"meihua"))}t==this.board.gameScene.userChess?(this.user_meihua_num-=1,this.user_meihua_num<=0&&this.board.meihuazhencb(t)):(this.ds_meihua_num-=1,this.ds_meihua_num<=0&&this.board.meihuazhencb(t))},t.prototype.wanning_zhen=function(){for(var e=this,t=[],a=this.board.judgeSize,n=0;n<a;n++)for(var o=function(o){if(0==i.board.maze[n][o]){var c=[n,o];t.push(c)}if(n==a-1&&o==a-1){var h=i.init_level();i.state!=i.board.gameScene.userChess&&(h=r.GameDataStorage.gameStateData.ds_zhenfalevel),h*=10;var u=[];(t=s.NumberUtil.outOfOrder(t)).length<h&&(h=t.length);for(var l=0;l<h;l++)if(c=t[l],u.push(c),l==h-1){r.GameDataStorage.gameStateData.chess_num=u.length,i.board.gameScene.chess_num=r.GameDataStorage.gameStateData.chess_num;for(var d=function(t){var a=u[t],n=1/u.length;u.length>=100&&(n=2/u.length),i.scheduleOnce(function(){var n=a[0]*e.board.block,o=a[1]*e.board.block;e.board.dazhao_moveInChess(n,o,e.state),t==u.length-1&&e.zhenFaCallback()},t*n)},p=0;p<u.length;p++)d(p)}}},i=this,c=0;c<a;c++)o(c)},t.prototype.sijiao_zhen=function(){var e=this,t=this.board.newx/this.board.block,a=this.board.newY/this.board.block,n=this.init_level();this.state!=this.board.gameScene.userChess&&(n=r.GameDataStorage.gameStateData.ds_zhenfalevel);var o,i,s,c,h=(n-2)%3,u=2*Math.floor((n-2)/3)+3,l=Math.floor(u/2),d=[];n>1?this.checkWin1(t,a,u,l,d,function(){e.addpos(t,a,h,d,l),e.ailuozi(d)}):(o=[t+1,a],i=[t-1,a],s=[t,a+1],c=[t,a-1],d.push(o),d.push(i),d.push(s),d.push(c),this.ailuozi(d))},t.prototype.xueyuyingsha_zhen=function(){var e=this,t=this.init_level();this.state!=this.board.gameScene.userChess&&(t=r.GameDataStorage.gameStateData.ds_zhenfalevel),this.xueyuChess_num=t+4,this.xueyuChess_num=5+2*(t-1),this.xueyuChess_num>225&&(this.xueyuChess_num=225),this.xueyuChess_num_1=this.xueyuChess_num,this.xueyuChess_num_2=this.xueyuChess_num,this.xueyuChessPosList=[],this.xueYuIsOver=!1;for(var a=0;a<15;a++){this.qipanArray[a]=[];for(var n=0;n<15;n++)this.qipanArray[a][n]=0,0!=this.board.maze[a][n]&&(this.qipanArray[a][n]=this.board.maze[a][n])}console.log("\u54c8\u54c8\u54c8\u54c8\u54c8\u8840\u72f1\u5f71\u6740\u9635\uff01\uff01\uff01",this.xueyuChess_num,this.state,this.qipanArray,this.board.maze),this.startTime();var o=Math.floor(this.board.newx/this.board.block),i=Math.floor(this.board.newY/this.board.block),s=o+15*i,c=(this.board.chess_map[s],[o,i]),h=[];h.push([o+1,i]),h.push([o-1,i]),h.push([o,i+1]),h.push([o,i-1]),this.xueyuChessPosList.push(c),r.conMager.getInstance().playAudioEff(r.KEY.audioName.xueliu,!0);for(var u=0;u<4;u++){var l=[h[u][0],h[u][1]];if(!(l[0]<0||l[0]>14||l[1]<0||l[1]>14))if(0==this.qipanArray[l[0]][l[1]])this.xueXianAction(l,c,!0);else if(this.xueyuChess_num-=1,this.xueyuChess_num<=1)return this.xueyuChess_num<=1&&!this.xueYuIsOver?(r.conMager.getInstance().stopAudioEff(),this.xueYuIsOver=!0,void this.scheduleOnce(function(){e.zhenFaCallback()},1)):void 0}},t.prototype.startTime=function(){this.xueYuTime=1,this.schedule(this.updateTime,.5)},t.prototype.updateTime=function(){this.xueYuTime-=.5,this.xueYuTime<=0&&(this.stopTime(),r.conMager.getInstance().stopAudioEff(),this.xueYuIsOver||(this.xueYuIsOver=!0,this.zhenFaCallback()))},t.prototype.stopTime=function(){this.unschedule(this.updateTime)},t.prototype.xueXianAction=function(e,t){var a=this;if(this.xueyuChess_num<=0&&this.xueyuChess_num<=0&&!this.xueYuIsOver)return r.conMager.getInstance().stopAudioEff(),this.xueYuIsOver=!0,this.stopTime(),void this.scheduleOnce(function(){a.zhenFaCallback()},1);this.xueyuChess_num-=1,this.stopTime(),this.startTime();var n=1;e[0],e[1],e[0]>t[0]?n=1:e[0]<t[0]?n=2:e[1]>t[1]?n=3:e[1]<t[1]&&(n=4);var o=s.NumberUtil.randomNum(0,10);o<11&&e.length>0&&(this.qipanArray[e[0]][e[1]]=this.state,this.xueyuChess_num>0&&this.initXueYuChess(e)),this.xueyuChess_num<=0||e.length<2||r.conMager.getInstance().getPoolNode(r.KEY.poolName.xueXian,this.node,{pos:t,targetPos:e,direction:n,chess_Pbb:o,callBack:function(e,t,n){var o=[];if(s.NumberUtil.randomNum(0,10)>7)a.checkNode(t,function(e,t){a.call(e,t)});else{var i=t[0],r=t[1];1==n?i=t[0]+1:2==n?i=t[0]-1:3==n?r=t[1]+1:4==n&&(r=t[1]-1),i<0||i>14||r<0||r>14?a.checkNode(t,function(e,t){a.call(e,t)}):0!=a.qipanArray[i][r]?a.checkNode(t,function(e,t){a.call(e,t)}):(o=[i,r],a.call(o,t))}}})},t.prototype.initXueYuChess=function(e){var t=this;this.xueyuChessPosList.push(e),this.scheduleOnce(function(){s.NumberUtil.randomNum(0,10)<5&&t.checkNode(e,function(e,a){t.call(e,a)});var a=e[0]*t.board.block,n=e[1]*t.board.block;t.board.dazhao_moveInChess(a,n,t.state),r.conMager.getInstance().getPoolNode(r.KEY.poolName.xueyuChessSke,t.node,{pos:cc.v3(a,n),callBack:function(){}}),t.scheduleOnce(function(){var a=e[0]+15*e[1];t.board.chess_map[a].runAction(cc.sequence(cc.scaleTo(.15,1.15),cc.scaleTo(.1,1),cc.callFunc(function(){})))},.4)},.5)},t.prototype.call=function(e,t){this.xueXianAction(e,t)},t.prototype.checkNode=function(e,t,a){for(var n=[],o=0;o<2;o++){var i=this.checkState(e[0],e[1],this.checkMode[o],a);if(i.length>0)for(var r=0;r<i.length;r++)n.push(i[r])}var c=[];return n.length>0&&(c=n[s.NumberUtil.randomNum(0,n.length-1)]),t(c,e)},t.prototype.checkState=function(e,t,a,n){void 0===n&&(n=null);var o=[],i=0;a==this.checkMode[0]&&(i=1),a==this.checkMode[1]&&(i=3);for(var s=1;s<2;s++){var r=e+s*a[0],c=t+s*a[1];if(!(r<0||r>14||c<0||c>14||n&&n!=i)){if(0!=this.qipanArray[r][c])break;var h=[r,c];o.push(h)}}a==this.checkMode[0]&&(i=2),a==this.checkMode[1]&&(i=4);for(var u=1;u<2;u++)if(r=e-u*a[0],c=t-u*a[1],!(r<0||r>14||c<0||c>14||n&&n!=i)){if(0!=this.qipanArray[r][c])break;h=[r,c],o.push(h)}return o},t.prototype.fenlie_zhen=function(){var e=this;if(this.fenlie_cishu++,this.fenlie_cishu>this.fenlie_max){if(1==this.fenlie_callback)return;return this.fenlie_callback=!0,this.fenlie_cishu=0,console.error("\u4e0d\u80fd\u5206\u88c2\u4e86"),void this.scheduleOnce(function(){e.zhenFaCallback()},1)}for(var t=[],a=0;a<this.board.yilun_qizi_v2.length;a++)t.push(this.board.yilun_qizi_v2[a]);this.board.yilun_qizi_v2=[],t.length<1&&0==this.donghua_run&&this.zhenFaCallback();var n=!1,o=!1,i=function(a){s.yanchi=0;var i=Math.floor(4*Math.random()),c=[];switch(i){case 0:c.push(cc.v2(-1,-1),cc.v2(1,1));break;case 1:c.push(cc.v2(-1,0),cc.v2(1,0));break;case 2:c.push(cc.v2(-1,1),cc.v2(1,-1));break;case 3:c.push(cc.v2(0,1),cc.v2(0,-1))}var h=0;1==s.fenlie_cishu?h=s.fenlie_first_max:2==s.fenlie_cishu&&(h=s.fenlie_second_max);for(var u=Math.floor(Math.random()*(h+1)+1),d=function(i){for(var h=t[a].x+c[i].x*u,d=t[a].y+c[i].y*u,p=function(){var n=t[a].x+15*t[a].y,o=e.board.chess_map[n];o&&(o.stopAllActions(),e.board.maze[t[a].x][t[a].y]!=e.state&&r.conMager.getInstance().getPoolNode(r.KEY.poolName.qizi,e.node,t[a],h,d,function(){},function(){},function(){e.board.maze[t[a].x][t[a].y]=e.state,l.commonFunction.updateSprite("chess/"+e.state,o.getChildByName("chess"))},2))},g=function(){if(s.board.maze[h]&&null!==s.board.maze[h][d]){if(0==s.board.maze[h][d]){0==n&&(s.donghua_run=!0,n=!0);var u=h*s.board.block,l=d*s.board.block;s.board.yilun_qizi_v2.push(cc.v2(h,d));var g=1;return 1!=s.fenlie_cishu&&(g=0),r.conMager.getInstance().getPoolNode(r.KEY.poolName.qizi,s.node,t[a],h,d,function(){e.board.dazhao_moveInChess(u,l,e.state)},function(){1==n&&0==o&&(o=!0,e.fenlie_zhen())},function(){p()},g),"break"}if(h-=c[i].x,d-=c[i].y,p(),h==t[a].x&&h==t[a].y)return console.error("\u6c34\u6ef4\u56de\u9000\u5230\u4e86\u539f\u4f4d\uff0c\u4e0d\u751f\u6210"),"break"}else if(console.error("\u4e0d\u5728\u68cb\u76d8\u4e0a\u4e86"),p(),h-=c[i].x,d-=c[i].y,h==t[a].x&&h==t[a].y)return console.error("\u6c34\u6ef4\u56de\u9000\u5230\u4e86\u539f\u4f4d\uff0c\u4e0d\u751f\u6210"),"break"},_=0;_<u&&"break"!==g();_++);},p=0;p<c.length;p++)d(p);var g=s.init_level();if(s.state!=s.board.gameScene.userChess&&(g=r.GameDataStorage.gameStateData.ds_zhenfalevel),a+1>=g)return console.error("\u8be5\u6eda\u86cb\u4e86"),"break"},s=this;for(a=0;a<t.length&&"break"!==i(a);a++);0==n&&this.fenlie_zhen()},t.prototype.ailuozi=function(e){r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);for(var t=0;t<e.length;t++){var a=e[t],n=a[0]*this.board.block,o=a[1]*this.board.block;this.board.dazhao_moveInChess(n,o,this.state),t==e.length-1&&this.zhenFaCallback()}},t.prototype.addpos=function(e,t,a,n,o){var i,s,r,c,h,u,l,d;a<=0||(i=[e+o+1,t],s=[e-o-1,t],r=[e,t+o+1],c=[e,t-o-1],n.push(i),n.push(s),n.push(r),n.push(c),2==a&&(h=[e+o+1,t+o+1],u=[e-o-1,t-o-1],l=[e+o+1,t-o-1],d=[e-o-1,t+o+1],n.push(h),n.push(u),n.push(l),n.push(d)))},t.prototype.checkWin1=function(e,t,a,n,o,i){for(var s=e-n,r=s,c=t+n,h=a*a,u=0;u<h;u++){var l=[r,c];o.push(l),r+=1,(u+1)%a==0&&(r=s,c-=1),u==h-1&&i()}},t.prototype.bagua_zhen=function(){for(var e=this,t=[],a=this.board.judgeSize,n=0;n<a;n++)for(var o=function(o){if(i.board.maze[n][o]==i.state){var c=[n,o];i.meihua_chess_poslist.length>0?0==i.meihua_chess_poslist[n][o]&&t.push(c):t.push(c)}if(n==a-1&&o==a-1){var h,u=i.init_level(),d=!0;i.state==i.board.gameScene.userChess&&(u=r.GameDataStorage.gameStateData.ds_zhenfalevel,d=!1),h=1==i.state?"bianhei":"bianbai";var p=[];(t=s.NumberUtil.outOfOrder(t)).length<u&&(u=t.length);for(var g=0;g<u;g++)if(c=t[g],p.push(c),g==u-1){console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u516b\u5366:",p.length,p,u);for(var _=function(t){var a=p[t];p.length,p.length>=100&&p.length;var n=a[0]*i.board.block,o=a[1]*i.board.block,s=a[0]+15*a[1],c=i.board.chess_map[s];if(i.board.maze[a[0]][a[1]]=-1*i.state,i.board.AITurn.addPos(a[0],a[1],-1*i.state),"fenlie"==i.board.getZhenFaName(-1*i.state).zhenFaName){var u=cc.v2(a[0],a[1]);i.board.yilun_qizi_v2.push(u)}l.commonFunction.updateSprite("chess/"+-1*i.state,c.getChildByName("chess")),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ani,i.node,{fileName:"taiji",ani_name:h,cb:function(){e.board.maze[a[0]][a[1]]=-1*e.state,t==p.length-1&&e.zhenFaCallback()},is_user:d,pos:cc.v2(n,o+1)})},m=0;m<p.length;m++)_(m)}}},i=this,c=0;c<a;c++)o(c)},t.prototype.wulei_zhen=function(){var e,t=this,a=this.state,n=!1,o=this.init_level();"kedi"==this.zhenFaName_pare&&(a*=-1),e=1==a?"animation":"animation2",a==this.board.gameScene.userChess&&(o=r.GameDataStorage.gameStateData.ds_zhenfalevel,n=!0),o*=2,console.log("\u4e94\u96f7\u8981\u548b\u7761:",a);for(var i=[],c=this.board.judgeSize,h=0;h<c;h++)for(var u=function(r){if(l.board.maze[h][r]==a){var u=[h,r];l.meihua_chess_poslist.length>0?0==l.meihua_chess_poslist[h][r]&&i.push(u):i.push(u)}if(h==c-1&&r==c-1){var d=[];(i=s.NumberUtil.outOfOrder(i)).length<o&&(o=i.length);for(var p=0;p<o;p++)if(u=i[p],d.push(u),p==o-1){console.log("\u7b97\u51fa\u7684\u4f4d\u7f6e\u6709\u591a\u5c11\u500b_\u4e94\u96f7:",d.length,d,o);for(var g=function(o){var i=d[o],s=1.5/d.length;d.length>=100&&(s=2.5/d.length),l.scheduleOnce(function(){var s=i[0]*t.board.block,r=i[1]*t.board.block,c=i[0]+15*i[1],h=t.board.chess_map[c];t.board.maze[i[0]][i[1]]=0,t.board.sum-=1,t.board.AITurn.delPos(i[0],i[1],a),t.wulei_action(s,r,h,n,e,o,d);var u=t.board.getZhenFaName(-1*t.state).zhenFaName;if(console.log("\u6211\u662f\u4e94\u96f7\uff0c\u4f60\u662f\u4ec0\u4e48",u),"fenlie"==u){var l=cc.v2(i[0],i[1]);t.board.yilun_qizi_v2.push(l)}},o*s)},_=0;_<d.length;_++)g(_)}}},l=this,d=0;d<c;d++)u(d)},t.prototype.bezier=function(e,t,a,n){return e.mul((1-n)*(1-n)).add(a.mul(2*n*(1-n))).add(t.mul(n*n))},t.prototype.suijiAction=function(e){e.active=!0;var t=s.NumberUtil.randomNum(100,200),a=s.NumberUtil.randomNum(1,250),n=100;s.NumberUtil.randomNum(1,2)>1&&(a=-a,t=-t,n=-n),a=e.y+a,t=e.x+t,cc.v2(t-n,a+150),cc.tween(e).to(.5,{position:cc.v2(t,a)},{easing:"circOut"}).to(.3,{opacity:0}).start()},t.prototype.wulei_action=function(e,t,a,n,o,i,s){var c=this,h=-230;n&&(h=870),r.conMager.getInstance().playAudioEff("wulei/fase"),r.conMager.getInstance().getPoolNode(r.KEY.poolName.zidang_wulei,this.node,{ys:h,pos:cc.v2(e,t),cb:function(){var e=cc.repeatForever(cc.sequence(cc.moveBy(.025,cc.v2(2,2)),cc.moveBy(.05,cc.v2(-4,-4)),cc.moveBy(.025,cc.v2(2,2))));a.getChildByName("dianhaun").active=!0,a.getChildByName("dianhaun").zIndex=99,a.runAction(e),i==s.length-1&&c.scheduleOnce(function(){c.board.yilun_qizi_v2=[];for(var e=function(e){var t=s[e];s.length,s.length>=100&&s.length;var a=t[0]*c.board.block,n=t[1]*c.board.block,i=t[0]+15*t[1],h=c.board.chess_map[i];h.stopAllActions(),c.board.maze[t[0]][t[1]]=0,c.board.sum-=1,h.destroy(),c.board.chess_map[i]=null,c.board.yilun_qizi_v2.push(cc.v2(t[0],t[1])),0==e&&r.conMager.getInstance().playAudioEff("wulei/bao"),r.conMager.getInstance().getPoolNode(r.KEY.poolName.baozha_wulei,c.node,{ani_name:o,pos:cc.v2(a,n),cb:function(){e==s.length-1&&(h.stopAllActions(),c.zhenFaCallback())}})},t=0;t<s.length;t++)e(t)},.3)}})},t.prototype.zhenFaCallback=function(){this.zhenFaName_pare=this.zhenFaName,this.cb&&this.cb(this.zhenFaName)},t.prototype.update=function(){},i([g(h.GameBoard)],t.prototype,"board",void 0),i([g(c.AI)],t.prototype,"AI",void 0),i([p],t)}(cc.Component);a.default=_,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../utils/commonFunction":"commonFunction","./../../SSSGF/Utils/NumberUtil":"NumberUtil","./AI":"AI","./GameBoard":"GameBoard"}],gameDataManager:[function(e,t,a){"use strict";cc._RF.push(t,"7b922wP5RZBiIHKBsyv2TEx","gameDataManager"),Object.defineProperty(a,"__esModule",{value:!0}),a.gameStateData=a.configData=a.User=void 0;var n=e("./storageManager"),o=e("./DATA"),i=function(){function e(e){this.initUserData=o.DATA.Data,this.userData=o.DATA.Data,n.default.init();var t=n.default.ins.getData("userData:"+e);if(console.log("-----------\u7528\u6237\u6570\u636e\uff1a",t),console.log("-----------\u7528\u6237\u6570\u636e22222222222\uff1a",this.initUserData),this.userData=JSON.parse(JSON.stringify(this.initUserData)),console.log("-----------\u7528\u6237\u6570\u636e3333333\uff1a",this.userData),t){t=JSON.parse(t);for(var a=0,i=Object.keys(t);a<i.length;a++)"isQianDao"==(c=i[a])&&console.log("-----------isQianDao",null!=this.userData[c],this.userData[c],t[c]),null!=this.userData[c]&&(this.userData[c]=t[c]);for(var s=0,r=Object.keys(this.initUserData.zhenFaMap);s<r.length;s++){var c=r[s];null==t.zhenFaMap[c]&&(this.userData.zhenFaMap[c]=this.initUserData.zhenFaMap[c])}for(var h=0,u=Object.keys(this.userData.zhenFaMap);h<u.length;h++)"wulei"!=(c=u[h])&&"bagua"!=c&&"kedi"!=c&&"fenlie"!=c&&"dusha"!=c&&"juehu"!=c&&"guiyuan"!=c&&"chaoniu"!=c&&"qixing"!=c||(console.log("-----initUserData------\u8fdb\u7684\u6765\u5417",c),this.userData.zhenFaMap[c].attr=2);console.log("-----initUserData------\u7528\u6237\u6570\u636e\u8f6c\u6362\uff1a",this.userData)}else this.userData=this.initUserData,this.userData.username=e}return e.prototype.getUsername=function(){return this.userData.username},e.prototype.getAllData=function(){return this.userData},e.prototype.updateUserData=function(e){e=e.data,console.log("\u4f20\u5165\u7684\u6570\u636e:",e);for(var t=0,a=Object.keys(e.zhenFaMap);t<a.length;t++){var n=a[t];e.zhenFaMap[n]&&(this.userData.zhenFaMap[n]=e.zhenFaMap[n]),this.userData.zhenFaMap[n].level<1&&(this.userData.zhenFaMap[n].level=1),"wulei"!=n&&"bagua"!=n&&"kedi"!=n&&"fenlie"!=n&&"dusha"!=n&&"juehu"!=n&&"guiyuan"!=n&&"chaoniu"!=n&&"qixing"!=n||(this.userData.zhenFaMap[n].attr=2)}for(var o=0,i=Object.keys(e.dataMap);o<i.length;o++)n=i[o],e.dataMap[n]&&("fenlie"==n?(this.userData.zhenFaMap[n].level=e.dataMap[n],this.userData.zhenFaMap[n].attr=2):"xueyuyingsha"==n?(this.userData.zhenFaMap[n].level=e.dataMap[n],this.userData.zhenFaMap[n].attr=1):"meihua"==n?(this.userData.zhenFaMap[n].level=e.dataMap[n],this.userData.zhenFaMap[n].attr=1):"dusha"==n?(this.userData.zhenFaMap[n].level=e.dataMap[n],this.userData.zhenFaMap[n].attr=2):this.userData[n]=e.dataMap[n]);for(var s=0,r=Object.keys(e);s<r.length;s++)"zhenFaMap"!=(n=r[s])&&e[n]&&(this.userData[n]=e[n]);this.userData.TimeStamp>2e7&&(this.userData.TimeStamp=0),console.log("-----------\u66f4\u65b0\u6570\u636e",this.userData),this.preseverData()},e.prototype.updateMedalCount=function(){this.preseverData()},e.prototype.preseverData=function(){n.default.ins.storageData("userData:"+this.userData.username,JSON.stringify(this.userData)),console.log("\u4fdd\u5b58\u7528\u6237\u6570\u636e:",this.userData)},e.prototype.removeData=function(e){n.default.ins.removeData(e)},e.prototype.initData=function(){this.userData=this.initUserData,this.preseverData()},e}();a.User=i;var s=function(){function e(){}return e.init=function(){this.user=new i("wuziqi_1"),this.configData=new r,this.gameStateData=new c},e.getUser=function(){return this.user},e.setUser=function(e){this.user=e},e.preserveGameData=function(){e.getUser().userData.version_num+=1,this.user.preseverData()},e.updateGameData=function(e){this.user.updateUserData(e)},e.initData=function(){this.user.initData()},e.addTili=function(t){this.user.userData.tiLi+=t,this.user.userData.tiLi>5&&(this.user.userData.tiLi=5,e.setTiLiTimeStamp(1)),e.preserveGameData()},e.reduceTili=function(t){this.user.userData.tiLi-=t,this.user.userData.tiLi<0&&(this.user.userData.tiLi=0),e.preserveGameData()},e.setTiLiTimeStamp=function(t){void 0===t&&(t=null),e.preserveGameData()},e.reduceLife=function(){e.gameStateData.life>0&&(e.gameStateData.life-=1),this.preserveGameData()},e.getLife=function(t){e.gameStateData.life+=t,e.gameStateData.life>10&&(e.gameStateData.life=10),this.preserveGameData()},e.updateMoney=function(t){e.getUser().userData.money+=t,e.preserveGameData()},e.updateLife=function(t){e.gameStateData.life+=t,e.gameStateData.life<0&&(e.gameStateData.life=0),e.gameStateData.life>10&&(e.gameStateData.life=10),e.preserveGameData()},e.getSkeName=function(){},e.user=null,e.configData=null,e.gameStateData=null,e}();a.default=s;var r=function(){this.dragonAssets=null,this.dragonAtlas=null,this.isEnableClick=!0,this.fanhui_time=0,this.channelName=""};a.configData=r;var c=function(){this.gameIndex=1,this.game_mode=null,this.gameLevelName="a_1",this.life=10,this.is_video=!0,this.isDouBtn=!1,this.isGongGao=!1,this.isNeiCe=!0,this.infiniteLifeVideoCount=0,this.shubiaoType=!1,this.steps=0,this.gameType=0,this.zhenFaName=["wanning","bagua","sijiao","kedi","wulei","fenlie","xueyuyingsha","meihua","dusha","kunlong","juehu","guiyuan","chaoniu","qixing"],this.ch_zhenFaName=["\u4e07\u5b81\u9635\u6cd5","\u516b\u5366\u9635","\u56db\u65b9\u9635","\u514b\u654c\u5148\u673a","\u4e94\u96f7\u9635","\u5206\u88c2\u9635","\u8840\u72f1\u5f71\u6740\u9635","\u6885\u82b1\u9635","\u6bd2\u6740\u9635","\u56f0\u9f99\u9635","\u7edd\u6237\u9635","\u5f52\u5143\u9635","\u8d85\u725b\u9635"],this.zhenFaIndex=0,this.dsZhenFa=0,this.ds_zhenfalevel=0,this.ds_name="",this.ds_name2="",this.ds_money=0,this.ds_score=0,this.ds_score2=0,this.ds_headIconIndex=0,this.ds_headIconIndex2=0,this.reward=0,this.rewardmultiple=1,this.who_sucess=0,this.reward_gold=0,this.open_xue_zhan=!1,this.userZhenFaName="",this.userZhenFaLevel=0,this.dsZhenFaName="",this.sceneName="mainScene",this.chess_num=0,this.admission_gold=0,this.zhibo_setting=null,this.heizi_pos=null,this.baizi_pos=null,this.title=null,this.isBgm_Open=!0,this.isEffect_Open=!0,this.room_id="",this.daren_name="",this.startGmaeTime=0,this.luandou_index=-1};a.gameStateData=c,cc._RF.pop()},{"./DATA":"DATA","./storageManager":"storageManager"}],game_board:[function(e,t,a){"use strict";cc._RF.push(t,"39d92RqdmtHD6APyvkk61pB","game_board");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("../../../utils/commonFunction"),c=e("../../../utils/platform"),h=e("./class_manager"),u=e("./game_manager"),l=cc._decorator,d=l.ccclass,p=l.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.qipan=null,t.shubiao=null,t.ui_parent=null,t.chess_parent=null,t.down_effect=null,t.down_effect2=null,t.up_effect=null,t.chess_player_head=null,t.hong_dian=null,t.luozizhong=null,t.count_down=null,t.tip_parent=null,t.lupin_btn=null,t.block=46,t.pad=22,t.game_joiner=[],t.player_array=[],t.play_chess_player=null,t.head_icon_array=[],t.luozi_label_tween=new cc.Tween,t.count_down_tween=new cc.Tween,t.chess_array=[],t.moren_bg=!0,t.moren_window=!0,t}return o(t,e),t.prototype.onOpen=function(){this.init_data(),u.game_manager.init_game(this.init_finish.bind(this),this)},t.prototype.init_data=function(){this.hong_dian.active=!1,this.hong_dian.zIndex=cc.macro.MAX_ZINDEX,this.luozizhong.active=!1,this.count_down.active=!1,this.game_joiner=[],this.player_array=[],this.play_chess_player=null,this.head_icon_array=[],this.chess_array=[],this.moren_bg=!0,c.platform.now_platform==c.platform_type.is_tt?this.lupin_btn.active=!0:this.lupin_btn.active=!1,s.conMager.getInstance()._msgAtion.on("shubiao",this.on_shubiao,this),s.conMager.getInstance()._msgAtion.on("open_qiuhe",this.on_qiuhe,this),s.conMager.getInstance()._msgAtion.on("huiqi",this.on_huiqi,this),s.conMager.getInstance()._msgAtion.on("renshu",this.on_back,this)},t.prototype.init_finish=function(e,t,a){this.game_joiner=e,this.player_array=t,this.chess_array=a;for(var n=0;n<this.game_joiner.length;n++)this.game_joiner[n].init_ui(this);for(n=0;n<t.length;n++)for(var o=0;o<t[n].zhenfa_array.length;o++)t[n].zhenfa_array[o].init_ui(this);this.show_player()},t.prototype.show_player=function(){this.change_bg(),this.new_head_icon()},t.prototype.change_bg=function(){if(1==this.moren_bg){var e=s.GameDataStorage.getUser().userData.skinBoard;r.commonFunction.updateSprite("board/bg"+e,this.bg),r.commonFunction.updateSprite("board/qipan"+e,this.qipan),r.commonFunction.updateSprite("board/subiao"+e,this.shubiao)}},t.prototype.new_head_icon=function(){for(var e=this,t=function(t){s.conMager.getInstance().getPoolNode(s.KEY.poolName.head_icon,a.chess_player_head,function(a){e.head_icon_array.push(a);var n=0,o=null;e.game_joiner[t].cos==h.joiner_enum.ai&&(o=++n),a.node.opacity=0,e.player_array[t].init_head_icon(a,o),t==e.player_array.length-1&&e.show_window()})},a=this,n=0;n<this.player_array.length;n++)t(n)},t.prototype.show_window=function(){this.moren_window&&this.show_juedou()},t.prototype.show_juedou=function(){s.conMager.getInstance().getPoolNode(s.KEY.poolName.item2,this.ui_parent,{callBack:this.show_beilv.bind(this)})},t.prototype.show_beilv=function(){this.head_icon_action(),s.conMager.getInstance().getPoolNode(s.KEY.poolName.item3,this.ui_parent,{callBack:this.start_game.bind(this)}),s.conMager.getInstance().getPoolNode(s.KEY.poolName.setup,this.ui_parent,null)},t.prototype.head_icon_action=function(){if(1==u.game_manager.board_run_head)for(var e=0;e<this.head_icon_array.length;e++){var t=cc.v3(0,0);switch(this.player_array[e].cos){case h.joiner_enum.player:t=cc.v3(1,-548);break;case h.joiner_enum.ai:t=cc.v3(1,555)}this.head_icon_array[e].node.setPosition(t),cc.tween(this.head_icon_array[e].node).to(1,{opacity:255}).start()}},t.prototype.start_game=function(){this.chess_parent.on(cc.Node.EventType.TOUCH_START,this.on_chess_board,this);for(var e=null,t=0,a=0;a<this.player_array.length;a++)if(this.player_array[a].cos==h.joiner_enum.player){e=this.player_array[a],t=a;break}if(e)switch(t){case 0:s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.tip_parent,"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!");break;case 1:s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.tip_parent,"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!");break;case 2:s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.tip_parent,"\u4f60\u62bd\u5230\u91d1\u68cb\u540e\u624b!")}else s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.tip_parent,"\u7535\u8111\u5bf9\u6218\uff0c\u5b89\u9759\u89c2\u6218");u.game_manager.start_game()},t.prototype.show_luozizhong=function(e){var t=this;this.luozizhong.active=!0;var a="image/chess/new_chess/chess_"+e.state;cc.resources.load(a,cc.SpriteFrame,function(e,a){e?console.error("\u843d\u5b50\u4e2d\u56fe\u7247\u83b7\u53d6\u5931\u8d25",e):t.luozizhong.getComponent(cc.Sprite).spriteFrame=a});var n=this.luozizhong.getChildByName("label");switch(e.state){case h.chess_belong.black:n.color=cc.color(51,51,51);break;case h.chess_belong.white:n.color=cc.color(204,204,204);break;case h.chess_belong.gold:n.color=cc.color(255,255,0)}switch(e.cos){case h.joiner_enum.ai:this.luozizhong.setPosition(-270,370);break;case h.joiner_enum.player:this.luozizhong.setPosition(170,-370)}switch(this.luozi_label_tween.stop(),this.luozi_donghua(e,0),this.count_down.active=!0,e.cos){case h.joiner_enum.ai:this.count_down.setPosition(0,440);break;case h.joiner_enum.player:this.count_down.setPosition(0,-440)}this.count_down_tween.stop(),this.count_down_donghua(30);for(var o=0;o<this.head_icon_array.length;o++)this.head_icon_array[o].player==e&&this.head_icon_array[o].start_daojishi(30)},t.prototype.count_down_donghua=function(e){var t=this,a=e.toString();a.length<2&&(a="0"+a),a="00:"+a,this.count_down.getChildByName("time").getComponent(cc.Label).string=a,e>0&&(this.count_down_tween=cc.tween(this.node).delay(1).call(function(){e--,t.count_down_donghua(e)}).start())},t.prototype.luozi_donghua=function(e,t){var a=this,n=this.luozizhong.getChildByName("label"),o="";switch(e.state){case h.chess_belong.black:o="\u9ed1\u5b50";break;case h.chess_belong.white:o="\u767d\u5b50";break;case h.chess_belong.gold:o="\u91d1\u5b50"}switch(t){case 0:o+="";break;case 1:o+="\u843d";break;case 2:o+="\u843d\u5b50";break;case 3:o+="\u843d\u5b50\u4e2d"}n.getComponent(cc.Label).string=o,this.luozi_label_tween=cc.tween(this.node).delay(.6).call(function(){++t>3&&(t=0),a.luozi_donghua(e,t)}).start()},t.prototype.get_chess_player=function(e){this.play_chess_player=e},t.prototype.out_chess_player=function(e){this.play_chess_player!=e&&e.cos!=h.joiner_enum.model||(this.play_chess_player=null)},t.prototype.on_chess_board=function(e){if(this.play_chess_player){var t=e.getLocation(),a=this.chess_parent.convertToNodeSpaceAR(t),n=Math.floor(a.x)-this.pad,o=Math.floor(a.y)-this.pad,i=Math.abs(Math.round(n/this.block)),s=Math.abs(Math.round(o/this.block)),r=cc.v2(i,s);u.game_manager.get_game_event(this.play_chess_player,r)}else console.log("\u6ca1\u6709\u4eba\u6ce8\u518c\u4f7f\u7528\u68cb\u76d8")},t.prototype.sure_play_chess=function(e,t,a){this.play_chess_player=null;var n=cc.v2(e.board_pos.x*this.block+this.pad,e.board_pos.y*this.block+this.pad);this.hong_dian.active=!0;var o=this.chess_parent.convertToWorldSpaceAR(n),i=this.hong_dian.parent.convertToNodeSpaceAR(o);this.hong_dian.setPosition(i),s.conMager.getInstance().getPoolNode(s.KEY.poolName.new_chess,this.chess_parent,e,function(o,i){o.setPosition(n),a&&a(o),e.chess_data.node=o,t?(t.target(o),t.start()):t=cc.tween(o).call(function(){o.y=o.y+100,o.scale=1.5}).to(.1,{position:cc.v3(n.x,n.y),scale:1}).call(function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.luozi)}).start(),i()}),this.hide_luozizhong()},t.prototype.hide_luozizhong=function(){this.luozizhong.active=!1,this.count_down.active=!1,this.count_down_tween.stop();for(var e=0;e<this.head_icon_array.length;e++)this.head_icon_array[e].end_daojishi()},t.prototype.delect_chess=function(e){e.chess_data.destory_effect(),s.conMager.getInstance().putPoolNode(s.KEY.poolName.new_chess,e.chess_data.node),e.chess_data.node=null},t.prototype.sure_win=function(e){var t=this;console.log("\u843d\u5b50\u5bfc\u81f4\u7684\u80dc\u5229");for(var a=0,n=0;n<this.game_joiner.length;n++)this.game_joiner[n].cos==h.joiner_enum.player&&a++;var o="nv/nv";e.player.cos==h.joiner_enum.player&&(o="nan/nan");var i=.1;e.chess_array.length>20&&(i=2/e.chess_array.length);var r=function(n){c.scheduleOnce(function(){e.chess_array[n].win(),n==e.chess_array.length-1&&(t.scheduleOnce(function(){s.conMager.getInstance().playAudioEff(o+"juesha")},.3),s.conMager.getInstance().playAudioEff(s.KEY.audioName.juesha),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,cc.find("Cnavas"),{fileName:"juesha",ani_name:"animation",cb:function(){2==a&&2==t.game_joiner.length?s.conMager.getInstance().showWinNode(s.KEY.UIName.duiyi_result_view,cc.find("Canvas"),{whose_round:e.player.state}):e.player.cos==h.joiner_enum.player?(s.conMager.getInstance().showWinNode(s.KEY.UIName.success_view,cc.find("Canvas"),null),s.GameDataStorage.gameStateData.who_sucess=0):(s.conMager.getInstance().showWinNode(s.KEY.UIName.fail_view,cc.find("Canvas"),null),s.GameDataStorage.gameStateData.who_sucess=1)}}))},n*i)},c=this;for(n=0;n<e.chess_array.length;n++)r(n)},t.prototype.sure_lost=function(e){console.log("\u6295\u964d"),e.cos==h.joiner_enum.player?s.conMager.getInstance().showWinNode(s.KEY.UIName.fail_view,cc.find("Canvas"),null):s.conMager.getInstance().showWinNode(s.KEY.UIName.success_view,cc.find("Canvas"),null)},t.prototype.sure_draw=function(){console.log("\u548c\u68cb"),s.conMager.getInstance().showWinNode(s.KEY.UIName.flat_view,cc.find("Canvas"),null)},t.prototype.on_shubiao=function(){this.shubiao.active=!this.shubiao.active},t.prototype.on_qiuhe=function(){console.log("\u68cb\u76d8\u63a5\u53d7\u5230\u6c42\u548c\u4fe1\u606f");for(var e=null,t=0;t<this.player_array.length;t++)if(this.player_array[t].cos==h.joiner_enum.player){e=this.player_array[t];break}e?u.game_manager.get_draw_request(e):console.error("\u8fde\u771f\u5b9e\u73a9\u5bb6\u90fd\u6ca1\u6709\uff0c\u7ba1\u7406\u9524\u5b50\u4e8b")},t.prototype.finish_qiuhe=function(e){1==e?s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.tip_parent,"\u5bf9\u65b9\u540c\u610f\u4f60\u7684\u548c\u68cb\u7533\u8bf7!"):s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.tip_parent,"\u5bf9\u65b9\u62d2\u7edd\u4f60\u7684\u548c\u68cb\u7533\u8bf7!")},t.prototype.on_huiqi=function(){},t.prototype.onClose=function(){},t.prototype.on_back=function(){var e=this;s.conMager.getInstance().getPoolNode(s.KEY.poolName.stop_panel,this.node,{callBack:function(t){if(2==t){for(var a=null,n=0;n<e.player_array.length;n++)if(e.player_array[n].cos==h.joiner_enum.player){a=e.player_array[n];break}a?e.sure_lost(a):s.conMager.getInstance().hideWinNode(s.KEY.UIName.game_board),u.game_manager.end_game()}}})},t.prototype.get_last_chess=function(){for(var e=null,t=0;t<this.chess_array.length;t++)for(var a=0;a<this.chess_array[t].length;a++)this.chess_array[t][a].chess_data&&(e?this.chess_array[t][a].chess_data.id>e.id&&(e=this.chess_array[t][a].chess_data):e=this.chess_array[t][a].chess_data);return e},t.prototype.get_chess_data_clone=function(){for(var e=[],t=0;t<this.chess_array.length;t++){for(var a=[],n=0;n<this.chess_array[t].length;n++){var o=new h.board_data(0,cc.v2(t,n));if(this.chess_array[t][n].chess_data){var i=this.chess_array[t][n].chess_data;o.chess_data=new h.chess_data(0,i.state,i.pos)}a.push(o)}e.push(a)}return e},t.prototype.get_chess_pos_by_board=function(e){return cc.v2(e.x*this.block+this.pad,e.y*this.block+this.pad)},t.prototype.show_error=function(e){var t=this;switch(u.game_manager.end_game(),e){case 0:console.error("\u5168\u90e8\u4eba\u4e0d\u80fd\u4e0b\u5b50\uff0c\u4f46\u662f\u6ca1\u6709\u5224\u5b9a\u5e73\u5c40",e)}var a=function(){s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,t.tip_parent,"\u6e38\u620f\u51fa\u9519\uff0c\u7a0d\u540e\u91cd\u5f00\uff0c\u9519\u8bef\u7801:"+e)};this.schedule(a.bind(this),2),this.scheduleOnce(function(){t.unschedule(a),s.conMager.getInstance().hideWinNode(s.KEY.UIName.game_board)},5)},t.prototype.inint=function(){},t.prototype.onClear=function(){},i([p({type:cc.Node,tooltip:"\u80cc\u666f\u8282\u70b9"})],t.prototype,"bg",void 0),i([p({type:cc.Node,tooltip:"\u68cb\u76d8"})],t.prototype,"qipan",void 0),i([p({type:cc.Node,tooltip:"\u6570\u6807"})],t.prototype,"shubiao",void 0),i([p({type:cc.Node,tooltip:"\u5f39\u7a97\u7236\u8282\u70b9"})],t.prototype,"ui_parent",void 0),i([p({type:cc.Node,tooltip:"\u68cb\u5b50\u7236\u8282\u70b9"})],t.prototype,"chess_parent",void 0),i([p({type:cc.Node,tooltip:"\u68cb\u5b50\u5e95\u4e0b\u7684\u7279\u6548\u7236\u8282\u70b9"})],t.prototype,"down_effect",void 0),i([p({type:cc.Node,tooltip:"\u68cb\u5b50\u5e95\u4e0b\u7684\u7279\u6548\u7236\u8282\u70b9(\u6ca1\u6709\u906e\u7f69)"})],t.prototype,"down_effect2",void 0),i([p({type:cc.Node,tooltip:"\u68cb\u5b50\u4e0a\u65b9\u7684\u7279\u6548\u7236\u8282\u70b9"})],t.prototype,"up_effect",void 0),i([p({type:cc.Node,tooltip:"\u68cb\u624b\u5934\u50cf\u7236\u8282\u70b9"})],t.prototype,"chess_player_head",void 0),i([p({type:cc.Node,tooltip:"\u7ea2\u70b9"})],t.prototype,"hong_dian",void 0),i([p({type:cc.Node,tooltip:"\u843d\u5b50\u4e2d\u8282\u70b9"})],t.prototype,"luozizhong",void 0),i([p({type:cc.Node,tooltip:"\u8ba1\u65f6\u5668"})],t.prototype,"count_down",void 0),i([p({type:cc.Node,tooltip:"\u63d0\u793a\u6846\u7236\u8282\u70b9"})],t.prototype,"tip_parent",void 0),i([p({type:cc.Node,tooltip:"\u5f55\u5c4f\u6309\u94ae"})],t.prototype,"lupin_btn",void 0),i([d],t)}(s.winRootNode);a.default=g,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../../../utils/commonFunction":"commonFunction","../../../utils/platform":"platform","./class_manager":"class_manager","./game_manager":"game_manager"}],game_info:[function(e,t,a){"use strict";cc._RF.push(t,"fdc88odVOBChqtZ4fWivfBl","game_info");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../SSSGF/dataController/DATA"),r=e("../SSSGF/dataController/gameDataManager"),c=e("../SSSGF/ssscgf"),h=e("../utils/commonFunction"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ds_name=null,t.ds_dw=null,t.wj_name=null,t.wj_dw=null,t.ds_dw_icon=null,t.wj_dw_icon=null,t}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(){this.refreshGameInfo()},t.prototype.onClose=function(){},t.prototype.onClear=function(){},t.prototype.refreshGameInfo=function(){var e="level_icon/duanwei/biankuang/",t=r.default.gameStateData,a=r.default.getUser().userData,n=r.default.gameStateData.gameType;n!=s.game_type.luandou_tslh&&n!=s.game_type.luandou_jxmc||(this.ds_dw_icon.y=565,this.wj_dw_icon.y=-487);var o=c.UpdataRankData.getRankByScoreJD(t.ds_score).duan_wei+1;h.commonFunction.updateSprite(e+o,this.ds_dw_icon),o=c.UpdataRankData.getRankByScoreJD(a.jd_score).duan_wei+1,h.commonFunction.updateSprite(e+o,this.wj_dw_icon)},i([d(cc.Label)],t.prototype,"ds_name",void 0),i([d(cc.Label)],t.prototype,"ds_dw",void 0),i([d(cc.Label)],t.prototype,"wj_name",void 0),i([d(cc.Label)],t.prototype,"wj_dw",void 0),i([d(cc.Node)],t.prototype,"ds_dw_icon",void 0),i([d(cc.Node)],t.prototype,"wj_dw_icon",void 0),i([l],t)}(c.winRootNode);a.default=p,cc._RF.pop()},{"../SSSGF/dataController/DATA":"DATA","../SSSGF/dataController/gameDataManager":"gameDataManager","../SSSGF/ssscgf":"ssscgf","../utils/commonFunction":"commonFunction"}],game_joiner:[function(e,t,a){"use strict";cc._RF.push(t,"580baKcapRHsLFQsYyCNi+g","game_joiner");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(t,a){var n=e.call(this)||this;return n.joiner_name="",n.id=t,n.joiner_name=a||"\u672a\u547d\u540d"+n.id,n}return o(t,e),i([r],t)}(cc.Component));a.default=c,cc._RF.pop()},{}],game_manager:[function(e,t,a){"use strict";cc._RF.push(t,"19a941SU0hHBb/D6TszVw+0","game_manager");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0}),a.game_manager=a.require_event=a.zhenfa_data_=void 0;var i,s=e("../../../SSSGF/ssscgf"),r=e("./class_manager"),c=e("./new_ai"),h=e("./player"),u=function(e,t,a){this.next_callback=e,this.next_callback_data=t,this.joiner=a},l=function(e,t,a,n){this.next_callback=e,this.zhenfa=t,this.joiner=a,this.callback_data=n},d=function(e,t,a){this.the_player=e,this.zhenfa_number=t,this.callback=a},p=function(e,t,a,n,o,i){this.number=e,this.zhenfa_number=t,this.callback=a,this.callback2=n,this.callback2_data=o,this.zhenfa=i},g=function(e,t,a,n){this.next_callback=e,this.next_callback_data=t,this.joiner=a,this.unwin_callback=n},_=function(e,t,a){this.name=e,this.ch_name=t,this.attr=a};a.zhenfa_data_=_,function(e){e[e.not_respond=0]="not_respond",e[e.agree=1]="agree",e[e.refuse=2]="refuse",e[e.un_respond=3]="un_respond"}(i=a.require_event||(a.require_event={}));var m=function(){var e=this;this.bool=!1,this.log=function(t){e.bool&&console.log("\u7ba1\u7406\u5668\u8f93\u51fa:\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f_________________________________"+t)},this.error=function(t){e.bool&&console.error("\u7ba1\u7406\u5668\u8f93\u51fa:\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f\ud83d\udda5\ufe0f_________________________________"+t)}},f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.console=new m,t.callback_data=null,t.zhenfa_callback_data=null,t.zhenfa_finish_data=null,t.win_callback_data=null,t.force_win_callback_data=null,t.callback_data_bool=!0,t.un_no_play_chess=0,t.joiner_number=3,t.win_chess_number=5,t.id_number=0,t.game_mode=null,t.game_mode_class=null,t.player_array=[],t.game_joiner_array=[],t.board=null,t.chess_array=[],t.player_number=0,t.chess_id=0,t.can_use_zhenfa_number=2,t.board_run_head=!0,t.time=31,t.down_time_tween=new cc.Tween,t.game_running=!1,t.qiuhe_renshu=[],t.zhenfa_map=new Map([["wanning",new _("wanning","\u4e07\u5b81\u9635",1)],["bagua",new _("bagua","\u516b\u5366\u9635",2)],["sijiao",new _("sijiao","\u56db\u65b9\u9635",1)],["kedi",new _("kedi","\u514b\u654c\u5148\u673a",2)],["wulei",new _("wulei","\u4e94\u96f7\u9635",2)],["fenlie",new _("fenlie","\u5206\u88c2\u9635",2)],["xueyuyingsha",new _("xueyuyingsha","\u8840\u72f1\u5f71\u6740\u9635",1)],["meihua",new _("meihua","\u6885\u82b1\u9635",1)],["dusha",new _("dusha","\u6bd2\u6740\u9635",2)],["kunlong",new _("kunlong","\u56f0\u9f99\u9635",1)],["juehu",new _("juehu","\u7edd\u6237\u9635",2)],["guiyuan",new _("guiyuan","\u5f52\u5143\u9635",2)],["chaoniu",new _("chaoniu","\u8d85\u725b\u9635",1)],["qixing",new _("qixing","\u4e03\u661f\u9635",2)]]),t}return o(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instace||(this._instace=new t),this._instace},enumerable:!1,configurable:!0}),t.prototype.init_data=function(){this.callback_data=null,this.zhenfa_callback_data=null,this.zhenfa_finish_data=null,this.callback_data_bool=!0,this.joiner_number=2,this.win_chess_number=5,this.id_number=0,this.game_mode=null,this.game_mode_class=null,this.player_array=[],this.game_joiner_array=[],this.board=null,this.chess_array=[],this.player_number=0,this.chess_id=0,this.can_use_zhenfa_number=2,this.board_run_head=!0,this.time=30,this.down_time_tween=null,this.game_running=!1},t.prototype.init_game=function(e,t){this.init_data(),this.console.log("\u6e38\u620f\u5f00\u59cb\u521d\u59cb\u5316"),this.game_running=!0,this.board=t,this.game_mode=s.GameDataStorage.gameStateData.game_mode,this.new_chess_board(),this.game_mode_class=new(cc.js.getClassByName(this.game_mode))(this.id_number,"\u6a21\u5f0f"),this.id_number++,this.game_mode_class.init_game_mode(),this.new_player(),this.sort_player(),this.game_joiner_array.push(this.game_mode_class);for(var a=0;a<this.player_array.length;a++)this.game_joiner_array.push(this.player_array[a]);for(a=0;a<this.game_joiner_array.length;a++)this.game_joiner_array[a].init(this.game_joiner_array,this.chess_array,this.player_array);for(a=0;a<this.player_array.length;a++)for(var n=0;n<this.player_array[a].zhenfa_array.length;n++)this.player_array[a].zhenfa_array[n]&&this.player_array[a].zhenfa_array[n].init(this.game_joiner_array,this.chess_array,this.player_array);e(this.game_joiner_array,this.player_array,this.chess_array)},t.prototype.new_chess_board=function(){for(var e=0,t=0;t<15;t++){for(var a=[],n=0;n<15;n++){var o=new r.board_data(e,cc.v2(t,n));a.push(o),e++}this.chess_array.push(a)}},t.prototype.new_other_player=function(e,t){var a=new(cc.js.getClassByName(e))(this.id_number,t);this.id_number++,this.console.log("\u5916\u90e8\u65b0\u5efa\u4e86\u73a9\u5bb6"+a.joiner_name),this.player_array.push(a)},t.prototype.new_player=function(){if(this.player_array.length<this.joiner_number){var e=new h.default(this.id_number,"player:"+this.id_number);this.player_array.push(e),this.id_number++}for(var t=this.player_array.length;t<this.joiner_number;t++)e=new c.default(this.id_number,"ai"+this.id_number),this.player_array.push(e),this.id_number++},t.prototype.sort_player=function(){var e=this.player_array;this.player_array=[];for(var t=0;t<e.length;){var a=Math.floor(Math.random()*e.length),n=e[a];this.player_array.push(n),e.splice(a,1)}for(t=0;t<this.player_array.length;t++)this.player_array[t].state=t,t>=r.chess_belong.null&&this.console.error("\u73a9\u5bb6\u4eba\u6570\u6ea2\u51fa\u53ef\u652f\u6301\u4eba\u6570\uff01\u6e38\u620f\u4f1a\u51fa\u95ee\u9898")},t.prototype.init_sort=function(e,t,a){if(0!=t){for(var n=0;n<this.game_joiner_array.length;n++)if(this.game_joiner_array[n]==e){var o=this.game_joiner_array[t];if(this.game_joiner_array[t]=e,this.game_joiner_array[n]=o,a){var i=this.game_joiner_array[n].state;this.game_joiner_array[n].state=this.game_joiner_array[t].state,this.game_joiner_array[t].state=i}break}for(n=0;n<this.player_array.length;n++)if(this.player_array[n]==e){o=this.player_array[t-1],this.player_array[t-1]=e,this.player_array[n]=o;break}}else this.console.error("\u73a9\u5bb6\u4e0d\u80fd\u4f18\u5148\u4e8e\u6a21\u5f0f\uff0c\u5148\u624b\u8bf7\u8f93\u51651")},t.prototype.start_game=function(){0!=this.game_running&&(this.console.log("\u6e38\u620f\u5f00\u59cb"),this.start_game_recursion(0))},t.prototype.start_game_recursion=function(e){var t=this;if(0!=this.game_running)if(e!=this.game_joiner_array.length)if(this.console.log("\u5f00\u59cb\u6e38\u620f\u9012\u5f52"+e+","+this.game_joiner_array[e].joiner_name),1==this.game_joiner_array[e].start_game()){var a=function(){e++,t.start_game_recursion(e)};if(e>0){var n=this.get_chess_player(e-1);this.start_game_zhenfa_recursion(n,0,a.bind(this))}else a()}else{var o=e+1;this.new_event_data(function(e){if((e-=1)>0){var a=t.get_chess_player(e-1);t.start_game_zhenfa_recursion(a,0,function(){t.start_game_recursion(e+1)}.bind(t))}else t.start_game_recursion(e+1)}.bind(this),o,this.game_joiner_array[e])}else this.start_big_round()},t.prototype.start_game_zhenfa_recursion=function(e,t,a){if(0!=this.game_running)if(t!=this.can_use_zhenfa_number){this.console.log("\u5f00\u59cb\u6e38\u620f\u6280\u80fd\u9012\u5f52,"+t+","+e.joiner_name);var n=!0;if(e.zhenfa_array[t]&&(n=e.zhenfa_array[t].start_game()),1==n)t++,this.start_game_zhenfa_recursion(e,t,a);else{var o=new d(e,t+1,a);this.new_zhenfa_event_data(this.start_game_zhenfa_recursion.bind(this),e.zhenfa_array[t].data,e,o)}}else a()},t.prototype.start_big_round=function(){0!=this.game_running&&(this.console.log("\u5f00\u59cb\u5927\u56de\u5408"),this.start_big_round_recursion(0))},t.prototype.start_big_round_recursion=function(e){var t=this;if(0!=this.game_running)if(e!=this.game_joiner_array.length)if(this.console.log("\u5927\u56de\u5408\u9012\u5f52"+e+","+this.game_joiner_array[e].joiner_name),1==this.game_joiner_array[e].start_big_game()){var a=function(){e++,t.start_big_round_recursion(e)};if(e>0){var n=this.get_chess_player(e-1);this.start_big_round_zhenfa_recursion(n,0,a.bind(this))}else a()}else{var o=e+1;this.new_event_data(function(e){if((e-=1)>0){var a=t.get_chess_player(e-1);t.start_big_round_zhenfa_recursion(a,0,function(){t.start_big_round_recursion(e+1)}.bind(t))}else t.start_big_round_recursion(e+1)}.bind(this),o,this.game_joiner_array[e])}else this.start_small_round()},t.prototype.start_big_round_zhenfa_recursion=function(e,t,a){if(0!=this.game_running)if(t!=this.can_use_zhenfa_number){this.console.log("\u5927\u56de\u5408\u5f00\u59cb\u6280\u80fd\u9012\u5f52,"+t+","+e.joiner_name);var n=!0;if(e.zhenfa_array[t]&&(n=e.zhenfa_array[t].start_big_game()),1==n)t++,this.start_big_round_zhenfa_recursion(e,t,a);else{var o=new d(e,t+1,a);this.new_zhenfa_event_data(this.start_big_round_zhenfa_recursion.bind(this),e.zhenfa_array[t].data,e,o)}}else a()},t.prototype.start_small_round=function(){0!=this.game_running&&(this.console.log("\u5f00\u59cb\u5c0f\u56de\u5408"),this.start_small_round_recursion(0))},t.prototype.start_small_round_recursion=function(e){var t=this;if(0!=this.game_running)if(e!=this.game_joiner_array.length)if(this.console.log("\u5c0f\u56de\u5408\u9012\u5f52"+e+","+this.game_joiner_array[e].joiner_name),1==this.game_joiner_array[e].start_small_game()){var a=function(){e++,t.start_small_round_recursion(e)};if(e>0){var n=this.get_chess_player(e-1);this.start_small_round_zhenfa_recursion(n,0,a.bind(this))}else a()}else{var o=e+1;this.new_event_data(function(e){if((e-=1)>0){var a=t.get_chess_player(e-1);t.start_small_round_zhenfa_recursion(a,0,function(){t.start_small_round_recursion(e+1)}.bind(t))}else t.start_small_round_recursion(e+1)}.bind(this),o,this.game_joiner_array[e])}else this.play_chess()},t.prototype.start_small_round_zhenfa_recursion=function(e,t,a){if(0!=this.game_running)if(t!=this.can_use_zhenfa_number){this.console.log("\u5c0f\u56de\u5408\u5f00\u59cb\u6280\u80fd\u9012\u5f52,"+t+","+e.joiner_name);var n=!0;if(e.zhenfa_array[t]&&(n=e.zhenfa_array[t].start_small_game()),1==n)t++,this.start_small_round_zhenfa_recursion(e,t,a);else{var o=new d(e,t+1,a);this.new_zhenfa_event_data(this.start_small_round_zhenfa_recursion.bind(this),e.zhenfa_array[t].data,e,o)}}else a()},t.prototype.play_chess=function(){var e=this;if(0!=this.game_running){this.console.log("\u73a9\u5bb6\u5f00\u59cb\u843d\u5b50\u4e86"+this.player_array[this.player_number].joiner_name);for(var t=this.get_chess_player(),a=!1,n=0;n<this.chess_array.length;n++){for(var o=0;o<this.chess_array[n].length;o++)if(!(this.chess_array[n][o].chess_data||null!=this.chess_array[n][o].kunlong_player&&this.chess_array[n][o].kunlong_player!=t||1==this.chess_array[n][o].chaoniu_player&&(t.zhenfa_array[0]&&"chaoniu"!=t.zhenfa_array[0].data.name||t.zhenfa_array[1]&&"chaoniu"!=t.zhenfa_array[1].data.name))){a=!0;break}if(1==a)break}if(1!=a)return console.error("\u65e0\u5b50\u53ef\u843d"),this.un_no_play_chess++,void(this.un_no_play_chess>=this.joiner_number?this.board.show_error(0):this.end_small_round());this.un_no_play_chess=0,t.can_play_chess(),this.new_event_data(function(a){e.chess_array[a.x][a.y].chess_data||e.chess_array[a.x][a.y].kunlong_player&&e.chess_array[a.x][a.y].kunlong_player!=t||!(0==e.chess_array[a.x][a.y].chaoniu_player||t.zhenfa_array[0]&&"chaoniu"==t.zhenfa_array[0].data.name||t.zhenfa_array[1]&&"chaoniu"==t.zhenfa_array[1].data.name)?(e.console.error("\u975e\u6cd5\u7684\u843d\u5b50\u4f4d\u7f6e"+a.x+","+a.y),e.callback_data_bool=!0,t.error_chess_pos()):e.sure_play_chess(a)}.bind(this),null,t),this.board.show_luozizhong(t),this.down_time_tween=cc.tween(this).delay(this.time).call(function(){console.log("\u8fd9\u4e2a\u50bb\u5c4c\u81ea\u52a8\u6295\u964d\u4e86"),e.sure_lost(t)}).start()}},t.prototype.sure_play_chess=function(e){var t=this;if(0!=this.game_running){this.down_time_tween.stop();var a=this.get_chess_player(),n=this.chess_array[e.x][e.y],o=new r.chess_data(this.chess_id,a.state,n.board_pos);n.chess_data=o,this.board.sure_play_chess(n),this.chess_id++,setTimeout(function(){t.finish_play_chess_recursion(0)},100)}},t.prototype.finish_play_chess_recursion=function(e){var t=this;if(0!=this.game_running){var a=0,n=null;if(0==e)a=0,n=this.game_joiner_array[0];else if(a=e-1,(n=this.get_chess_player(a))==this.player_array[this.player_number]&&e>this.player_array.length)return void this.end_small_round();if(this.console.log("\u5b8c\u6210\u843d\u5b50\u9012\u5f52"+e+","+n.joiner_name),1==n.one_player_play_chess(this.get_chess_player())){var o=function(){e++,t.finish_play_chess_recursion(e)};if(e>0){var i=this.get_chess_player(e-1);this.finish_play_chess_zhenfa_recursion(i,0,o.bind(this))}else o()}else{var s=e+1;this.new_event_data(function(e){if((e-=1)>0){var a=t.get_chess_player(e-1);t.finish_play_chess_zhenfa_recursion(a,0,function(){t.finish_play_chess_recursion(e+1)}.bind(t))}else t.finish_play_chess_recursion(e)}.bind(this),s,this.game_joiner_array[e])}}},t.prototype.finish_play_chess_zhenfa_recursion=function(e,t,a){if(0!=this.game_running)if(t!=this.can_use_zhenfa_number){this.console.log("\u5b8c\u6210\u843d\u5b50\u6280\u80fd\u9012\u5f52,"+t+","+e.joiner_name);var n=!0;if(e.zhenfa_array[t]&&(n=e.zhenfa_array[t].one_player_play_chess(this.get_chess_player())),1==n)t++,this.finish_play_chess_zhenfa_recursion(e,t,a);else{var o=new d(e,t+1,a);this.new_zhenfa_event_data(this.finish_play_chess_zhenfa_recursion.bind(this),e.zhenfa_array[t].data,e,o)}}else a()},t.prototype.zhenfa_play_chess=function(e,t,a,n){if(0!=this.game_running){var o=this.chess_array[e.x][e.y],i=new r.chess_data(this.chess_id,t.state,o.board_pos);o.chess_data=i,this.board.sure_play_chess(o,a,n),this.chess_id++}},t.prototype.zhenfa_delect_chess=function(e,t){if(0!=this.game_running){var a=this.chess_array[e.x][e.y];a.chess_data&&(a.chess_data.dusha&&!t?a.chess_data.dusha_hit_number++:(this.board.delect_chess(a),a.chess_data=null))}},t.prototype.end_small_round=function(){var e=this;if(0!=this.game_running){var t=function(){e.console.log("\u5c0f\u56de\u5408\u7ed3\u675f"),e.end_small_recursion(0)},a=this.judge_win(this.player_array[this.player_number]);a?1==this.game_mode_class.model_small_round_win(a)?this.win_recursion(a,t.bind(this)):this.end_small_recursion(0):t()}},t.prototype.end_small_recursion=function(e){var t=this;if(0!=this.game_running)if(e!=this.game_joiner_array.length)if(this.console.log("\u5c0f\u56de\u5408\u7ed3\u675f\u9012\u5f52"+e+","+this.game_joiner_array[e].joiner_name),1==this.game_joiner_array[e].end_small_game()){var a=function(){e++,t.end_small_recursion(e)};if(e>0){var n=this.get_chess_player(e-1);this.end_small_round_zhenfa_recursion(n,0,a.bind(this))}else a()}else{var o=e+1;this.new_event_data(function(e){if((e-=1)>0){var a=t.get_chess_player(e-1);t.end_small_round_zhenfa_recursion(a,0,function(){t.end_small_recursion(e+1)}.bind(t))}else t.end_small_recursion(e+1)}.bind(this),o,this.game_joiner_array[e])}else this.judge_round()},t.prototype.end_small_round_zhenfa_recursion=function(e,t,a){if(0!=this.game_running)if(t!=this.can_use_zhenfa_number){this.console.log("\u5c0f\u56de\u5408\u7ed3\u675f\u6280\u80fd\u9012\u5f52,"+t+","+e.joiner_name);var n=!0;if(e.zhenfa_array[t]&&(n=e.zhenfa_array[t].end_small_game()),1==n)t++,this.end_small_round_zhenfa_recursion(e,t,a);else{var o=new d(e,t+1,a);this.new_zhenfa_event_data(this.end_small_round_zhenfa_recursion.bind(this),e.zhenfa_array[t].data,e,o)}}else a()},t.prototype.judge_round=function(){var e=this;0!=this.game_running&&(this.console.log("\u5224\u5b9a\u6240\u6709\u4eba\u80dc\u8d1f"),this.all_judge_win(function(){e.player_number++,e.player_number>=e.player_array.length?(e.console.log("\u5168\u90e8\u4eba\u843d\u5b50\u5b8c\u6bd5"),e.player_number=0,e.end_big_round()):(e.console.log("\u8fd8\u6709\u4eba\u6ca1\u5b8c\u6210\u843d\u5b50"),e.start_small_round())}.bind(this)))},t.prototype.end_big_round=function(){0!=this.game_running&&(this.console.log("\u5927\u56de\u5408\u7ed3\u675f"),this.end_big_round_recursion(0))},t.prototype.end_big_round_recursion=function(e){var t=this;if(0!=this.game_running)if(e!=this.game_joiner_array.length)if(this.console.log("\u5927\u56de\u5408\u7ed3\u675f\u9012\u5f52"+e+","+this.game_joiner_array[e].joiner_name),1==this.game_joiner_array[e].end_big_game()){var a=function(){e++,t.end_big_round_recursion(e)};if(e>0){var n=this.get_chess_player(e-1);this.end_big_round_zhenfa_recursion(n,0,a.bind(this))}else a()}else{var o=e+1;this.new_event_data(function(e){if((e-=1)>0){var a=t.get_chess_player(e-1);t.end_big_round_zhenfa_recursion(a,0,function(){t.end_big_round_recursion(e+1)}.bind(t))}else t.end_small_recursion(e+1)}.bind(this),o,this.game_joiner_array[e])}else this.start_big_round()},t.prototype.end_big_round_zhenfa_recursion=function(e,t,a){if(0!=this.game_running)if(t!=this.can_use_zhenfa_number){this.console.log("\u5927\u56de\u5408\u7ed3\u675f\u6280\u80fd\u9012\u5f52,"+t+","+e.joiner_name);var n=!0;if(e.zhenfa_array[t]&&(n=e.zhenfa_array[t].end_big_game()),1==n)t++,this.end_big_round_zhenfa_recursion(e,t,a);else{var o=new d(e,t+1,a);this.new_zhenfa_event_data(this.end_big_round_zhenfa_recursion.bind(this),e.zhenfa_array[t].data,e,o)}}else a()},t.prototype.judge_win=function(e,t){if(0!=this.game_running){var n=[[0,1],[1,1],[1,0],[1,-1]],o=t;o||(o=this.win_chess_number);for(var i=[],s=0;s<this.chess_array.length;s++)for(var c=0;c<this.chess_array[s].length;c++)if(this.chess_array[s][c].chess_data){var h=[],u=this.chess_array[s][c].chess_data;if(!(e&&e.state!=u.state||1==u.stone_type))for(var l=0;l<n.length;l++){h.push(u);for(var d=1;d<15;d++){var p=s+d*n[l][0],g=c+d*n[l][1];if(!(this.chess_array[p]&&this.chess_array[p][g]&&this.chess_array[p][g].chess_data&&this.chess_array[p][g].chess_data.state==u.state&&0==this.chess_array[p][g].chess_data.stone_type))break;h.push(this.chess_array[p][g].chess_data)}if(h.length>=o);else for(d=1;d<15&&(p=s-d*n[l][0],g=c-d*n[l][1],this.chess_array[p]&&this.chess_array[p][g]&&this.chess_array[p][g].chess_data&&this.chess_array[p][g].chess_data.state==u.state&&0==this.chess_array[p][g].chess_data.stone_type);d++)h.push(this.chess_array[p][g].chess_data);h.length>=o&&h.length>i.length&&(i=h),h=[]}}var _=null;if(i.length>=o){var m=a.game_manager.get_player_by_state(i[0].state);_=new r.win_data(m,i)}else if(1==this.judge_draw())return void this.sure_draw();return _}},t.prototype.judge_draw=function(){for(var e=!0,t=0;t<this.chess_array.length;t++)for(var a=0;a<this.chess_array[t].length;a++)this.chess_array[t][a].chess_data||(e=!1);return e},t.prototype.all_judge_win=function(e,t){for(var a=0;a<this.joiner_number;a++){var n=this.get_chess_player(a),o=this.judge_win(n,t);if(o)return this.console.log("\u6709\u4eba\u83b7\u80dc"+o.player.joiner_name),void this.win_recursion(o,e)}e()},t.prototype.win_recursion=function(e,t){var a=this;if(0!=this.game_running)if(e.number!=this.game_joiner_array.length)if(this.console.log("\u73a9\u5bb6\u80dc\u5229\u9012\u5f52"+e.number+","+this.game_joiner_array[e.number].joiner_name),1==this.game_joiner_array[e.number].one_win(e)){var n=function(){e.number++,a.win_recursion(e,t)};if(e.number>0){var o=this.get_chess_player(e.number-1);this.win_zhenfa_recursion(o,0,n.bind(this),e)}else n()}else this.new_win_data(function(n){if((n-=1)>0){var o=a.get_chess_player(n-1);a.win_zhenfa_recursion(o,0,function(){a.win_recursion(e,t)}.bind(a),e)}else a.end_small_recursion(n+1)}.bind(this),e,this.game_joiner_array[e.number],t);else this.sure_win(e)},t.prototype.win_zhenfa_recursion=function(e,t,a,n){if(0!=this.game_running)if(t!=this.can_use_zhenfa_number){this.console.log("\u6e38\u620f\u80dc\u5229\u7684\u9635\u6cd5\u9012\u5f52,"+t+","+e.joiner_name);var o=!0;e.zhenfa_array[t]&&(o=e.zhenfa_array[t].one_win(n)),1==o?(t++,this.win_zhenfa_recursion(e,t,a,n)):this.new_win_data(this.win_zhenfa_recursion.bind(this),n,e,a)}else a()},t.prototype.sure_win=function(e){0!=this.game_running&&(this.console.log("\u80dc\u5229\u6e38\u620f\u7ed3\u675f"),this.board.sure_win(e),this.end_game())},t.prototype.sure_lost=function(e){0!=this.game_running&&(this.board.sure_lost(e),this.end_game())},t.prototype.sure_draw=function(){this.board.sure_draw(),this.end_game()},t.prototype.get_draw_request=function(e){this.qiuhe_renshu=[];for(var t=0;t<this.player_array.length;t++)this.player_array[t].close_play_chess(),this.qiuhe_renshu.push(i.un_respond),this.player_array[t]!=e&&(this.qiuhe_renshu[t]=i.not_respond,this.player_array[t].get_qiuhe())},t.prototype.get_draw_event=function(e,t){for(var a=0;a<this.player_array.length;a++)if(this.player_array[a]==e){switch(t){case!0:this.qiuhe_renshu[a]=i.agree;break;case!1:this.qiuhe_renshu[a]=i.refuse}break}this.judge_draw_end()},t.prototype.judge_draw_end=function(){for(var e=0;e<this.qiuhe_renshu.length;e++)if(this.qiuhe_renshu[e]==i.not_respond)return;var t=!0;for(e=0;e<this.qiuhe_renshu.length;e++)if(this.qiuhe_renshu[e]==i.refuse){t=!1;break}if(s.conMager.getInstance()._msgAtion.emit("finish_qiuhe",t),this.board.finish_qiuhe(t),1==t)this.sure_draw();else for(e=0;e<this.player_array.length;e++)this.player_array[e].open_play_chess()},t.prototype.use_zhenfa_recursion=function(e,t,a,n,o,i){if(0!=this.game_running)if(e!=this.player_array.length||t!=this.can_use_zhenfa_number-1){if(e>=this.player_array.length)return t++,e=0,void this.use_zhenfa_recursion(e,t,a,n,o,i);this.console.log("\u73a9\u5bb6\u9635\u6cd5\u9012\u5f52"+e+","+t+","+this.player_array[e].joiner_name);var s=!0;this.player_array[e].zhenfa_array[t]&&(s=this.player_array[e].zhenfa_array[t].use_zhenfa(a,n)),1==s?(e++,this.use_zhenfa_recursion(e,t,a,n,o,i)):this.new_zhenfa_event_data(o,this.player_array[e].zhenfa_array[t].data,this.player_array[e],i)}else this.finish_zhenfa_recursion(0,0,o,i)},t.prototype.finish_zhenfa_recursion=function(e,t,a,n){if(0!=this.game_running)if(e!=this.player_array.length||t!=this.can_use_zhenfa_number-1){if(e>=this.player_array.length)return t++,e=0,void this.finish_zhenfa_recursion(e,t,a,n);this.console.log("\u6280\u80fd\u5faa\u73af\u5b8c\u6210\u9012\u5f52"+e+","+t+","+this.player_array[e].joiner_name);var o=!0;if(this.player_array[e].zhenfa_array[t]&&(o=this.player_array[e].zhenfa_array[t].use_zhenfa_finish()),this.game_running)if(1==o)e++,this.finish_zhenfa_recursion(e,t,a,n);else{var i=e+1;this.new_zhenfa_finish_event_data(i,t,this.finish_zhenfa_recursion.bind(this),a,n,this.player_array[e].zhenfa_array[t])}}else this.all_judge_win(function(){a(n.the_player,n.zhenfa_number,n.callback)})},t.prototype.get_player_by_state=function(e){if(0!=this.game_running)return this.player_array.find(function(t){return t.state==e})},t.prototype.get_chess_player=function(e){if(0!=this.game_running){e||(e=0);for(var t=e%this.player_array.length,a=this.player_number,n=0;n<t;n++)++a==this.player_array.length&&(a=0);return this.player_array[a]}},t.prototype.new_event_data=function(e,t,a){0!=this.game_running&&(this.callback_data_bool=!0,console.log("\u63a5\u53d7\u5230\u7684\u4fe1\u606f\u4eba\u662f",a.joiner_name),this.callback_data=new u(e,t,a))},t.prototype.new_zhenfa_event_data=function(e,t,a,n){0!=this.game_running&&(this.callback_data_bool=!0,this.zhenfa_callback_data=new l(e,t,a,n))},t.prototype.new_zhenfa_finish_event_data=function(e,t,a,n,o,i){0!=this.game_running&&(this.callback_data_bool=!0,this.zhenfa_finish_data=new p(e,t,a,n,o,i))},t.prototype.new_win_data=function(e,t,a,n){0!=this.game_running&&(this.callback_data_bool=!0,this.win_callback_data=new g(e,t,a,n))},t.prototype.get_game_event=function(e,t){0!=this.game_running&&(1==this.callback_data_bool?(console.log("\u9a8c\u8bc1\u6536\u53d6\u4eba\u662f",this.callback_data.joiner.joiner_name,",",e.joiner_name),this.callback_data.joiner==e?(this.callback_data_bool=!1,t&&(this.callback_data.next_callback_data=t),this.callback_data.next_callback(this.callback_data.next_callback_data)):this.console.error("\u975e\u6cd5\u7684\u4fe1\u606f\u53d1\u9001\u4eba!:"+e.joiner_name+",\u6b63\u786e\u7684\u4fe1\u606f\u53d1\u9001\u4eba\u4e3a"+this.callback_data.joiner.joiner_name)):this.console.error("\u4e0d\u518d\u9700\u8981\u63a5\u53d7\u6570\u636e"))},t.prototype.get_zhenfa_event=function(e,t,a){var n=this;0!=this.game_running&&(1==this.callback_data_bool?this.zhenfa_callback_data.joiner==e?(this.console.log("\u63a5\u6536\u5230\u4e86\u5408\u6cd5\u4fe1\u606f"),this.callback_data_bool=!1,t&&(this.zhenfa_callback_data.zhenfa=t),setTimeout(function(){a?n.all_judge_win(function(){n.zhenfa_callback_data.callback_data.callback(n.zhenfa_callback_data.callback_data.the_player,n.zhenfa_callback_data.callback_data.zhenfa_number,n.zhenfa_callback_data.next_callback)}):n.use_zhenfa_recursion(0,0,e,t,n.zhenfa_callback_data.next_callback,n.zhenfa_callback_data.callback_data)},100)):this.console.error("\u975e\u6cd5\u7684\u4fe1\u606f\u53d1\u9001\u4eba!:"+e.joiner_name+",\u6b63\u786e\u7684\u4fe1\u606f\u53d1\u9001\u4eba\u4e3a"+this.zhenfa_callback_data.joiner.joiner_name):this.console.error("\u4e0d\u518d\u9700\u8981\u63a5\u53d7\u6570\u636e"))},t.prototype.get_finish_zhenfa_event=function(e){0!=this.game_running&&(1==this.callback_data_bool?this.zhenfa_finish_data.zhenfa==e?(this.callback_data_bool=!1,this.zhenfa_finish_data.callback(this.zhenfa_finish_data.number,this.zhenfa_finish_data.zhenfa_number,this.zhenfa_finish_data.callback2,this.zhenfa_finish_data.callback2_data)):this.console.error("\u975e\u6cd5\u7684\u4fe1\u606f\u53d1\u9001\u4eba!:"+e.joiner_name+",\u6b63\u786e\u7684\u4fe1\u606f\u53d1\u9001\u4eba\u4e3a"+this.zhenfa_finish_data.zhenfa.joiner_name):this.console.error("\u4e0d\u518d\u9700\u8981\u63a5\u53d7\u6570\u636e"))},t.prototype.get_win_event=function(e,t,a){if(0!=this.game_running)if(1==this.callback_data_bool)if(this.win_callback_data.joiner==e)if(this.callback_data_bool=!1,1==t)this.win_callback_data.next_callback(this.callback_data.next_callback_data);else if(this.console.log("\u6709\u4eba\u5426\u5b9a\u83b7\u80dc"),a){var n=new d(e,0,this.win_callback_data.unwin_callback);this.use_zhenfa_recursion(0,0,e,a,this.win_callback_data.next_callback,n)}else this.win_callback_data.unwin_callback();else this.console.error("\u975e\u6cd5\u7684\u4fe1\u606f\u53d1\u9001\u4eba!:"+e.joiner_name+",\u6b63\u786e\u7684\u4fe1\u606f\u53d1\u9001\u4eba\u4e3a"+this.callback_data.joiner.joiner_name);else this.console.error("\u4e0d\u518d\u9700\u8981\u63a5\u53d7\u6570\u636e")},t.prototype.get_force_win_event=function(e,t,a){0!=this.game_running&&this.win_recursion(a,t)},t.prototype.end_game=function(){this.down_time_tween.stop(),this.init_data()},t.prototype.manager_console=function(e){this.console.bool=e},t}(cc.Component);a.game_manager=f.Instance,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","./class_manager":"class_manager","./new_ai":"new_ai","./player":"player"}],getDataFromServer:[function(e,t,a){"use strict";cc._RF.push(t,"07e6buGFopEYI6BpUSdFoZe","getDataFromServer");var n=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.getDataFromServer=void 0;var o=e("../SSSGF/ssscgf"),i=e("./platform"),s=cc._decorator,r=s.ccclass,c=(s.property,function(){function e(){}var t;return t=e,e.getOpenId=function(e){var t=this;if(window.tt)tt.login({success:function(a){var n=new XMLHttpRequest;n.open("POST","https://www.keepmobi.com/ga/get_openid/",!0);var i={code:a.code,appid:"ttd627a09a491f940002"};console.log("\u767b\u5f55\u7684code:",a.code),n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.onreadystatechange=function(){if(console.log(" getOpenId\u5f53\u524d\u8fd4\u56de\u7684\u72b6\u6001\u7801:",n.readyState,n.status),4==n.readyState)if(n.status>=200&&n.status<=207){var a=n.statusText,i=JSON.parse(n.responseText);console.log("Status: Got GET response! "+a),console.log("\u83b7\u53d6\u56de\u6765\u7684\u51fd\u6570:",i),i.openId&&0==i.errno?(o.GameDataStorage.getUser().userData.openId=i.openId,o.GameDataStorage.preserveGameData(),t.openId=i.openId,e(!0)):e(!1)}else e(!1)},console.log("\u8bf7\u6c42\u7684\u7ad6\u683c\u5f0f:",i),n.send(JSON.stringify(i))},fail:function(e){console.log("login \u8c03\u7528\u5931\u8d25",e.errMsg)}});else if(cc.sys.isNative&&"Android"==cc.sys.os){var a=new XMLHttpRequest;a.open("POST","https://www.keepmobi.com/ga/appgame/genUuid",!0);var n=i.platform.rank_channel,s={platform:n};console.log("\u8bf7\u6c42\u7684\u6e20\u9053:",n),a.setRequestHeader("Content-type","application/json; charset=utf-8"),a.onreadystatechange=function(){if(console.log(" genUuid\u5f53\u524d\u8fd4\u56de\u7684\u72b6\u6001\u7801:",a.readyState,a.status),4==a.readyState)if(a.status>=200&&a.status<=207){var n=a.statusText;console.log("1 \u83b7\u53d6\u56de\u6765\u7684\u51fd\u6570:",a.responseText);var i=JSON.parse(a.responseText);console.log("Status: Got GET response! "+n),console.log("2 \u83b7\u53d6\u56de\u6765\u7684\u51fd\u6570:",i),i.openId&&0==i.errno?(o.GameDataStorage.getUser().userData.openId=i.openId,o.GameDataStorage.getUser().userData.gameName=i.gameName,o.GameDataStorage.preserveGameData(),t.openId=i.openId,e(!0)):e(!1)}else e(!1)},console.log("\u8bf7\u6c42\u7684\u7ad6\u683c\u5f0f:",s),a.send(JSON.stringify(s))}else e(!1)},e.check_openid=function(e){var a="";console.log("11111111111");var n=this;if(n.openId?a=n.openId:o.GameDataStorage.getUser().userData.openId?a=o.GameDataStorage.getUser().userData.openId:t.getOpenId(function(e){e&&(a=n.openId)}),console.log("2222222222222"),!a)return console.log("openID\u662f\u7a7a\u7684:");if(window.tt){var i=cc.loader.getXMLHttpRequest();i.open("POST","https://www.keepmobi.com/ga/check_openid/",!0);var s={openId:a,appid:"ttd627a09a491f940002"};i.setRequestHeader("Content-type","application/json; charset=utf-8"),console.log("3333333333333"),i.onreadystatechange=function(){if(console.log("judgeOpenId\u5f53\u524d\u8fd4\u56de\u7684\u72b6\u6001\u7801:",i.readyState,i.status),4==i.readyState)if(i.status>=200&&i.status<=207){i.statusText;var t=JSON.parse(i.responseText);console.log("\u83b7\u53d6\u56de\u6765\u7684\u51fd\u6570:",t),0==t.errno?e(!0,t):e(!0,null)}else e(!1,null)},console.log("44444444444"),i.send(JSON.stringify(s))}else cc.sys.isNative&&"Android"==cc.sys.os?e(!0,null):e(!1)},e.setUserData=function(e,a){console.log("\u8bbe\u7f6e\u7528\u6237\u6570\u636e");var n="",i=this;if(i.openId?n=i.openId:o.GameDataStorage.getUser().userData.openId?n=o.GameDataStorage.getUser().userData.openId:t.getOpenId(function(e){e&&(n=i.openId)}),!n)return console.log("openID\u662f\u7a7a\u7684:");var s=e.level_experience;s<0&&(s=0,o.GameDataStorage.getUser().userData.level_experience=0,o.GameDataStorage.preserveGameData());var r={gameName:e.gameName,headIconUrl:e.headIconUrl,money:e.money,openId:n,version_num:e.version_num,user_level:e.user_level,zhenFaMap:e.zhenFaMap,level_experience:s,appid:"ttd627a09a491f940002",qianDaoNum:e.qianDaoNum,TimeStamp:e.TimeStamp,jd_score:e.jd_score,jd_lianSheng:e.jd_lianSheng,dz_score:e.dz_score,lz_score:e.lz_score,sr_score:e.sr_score,dataMap:{meinvId:e.meinvId,skinArr:e.skinArr,skinBoard:e.skinBoard,boarArr:e.boarArr,fenlie:e.zhenFaMap.fenlie.level,xueyuyingsha:e.zhenFaMap.xueyuyingsha.level,meihua:e.zhenFaMap.meihua.level,dusha:e.zhenFaMap.dusha.level,kunlong:e.zhenFaMap.kunlong.level,juehu:e.zhenFaMap.juehu.level,guiyuan:e.zhenFaMap.guiyuan.level}},c=cc.loader.getXMLHttpRequest();o.GameDataStorage.getUser().userData.version_num+=1,c.open("POST","https://www.keepmobi.com/ga/save_data/zijie_chess5/",!0),c.setRequestHeader("Content-type","application/json; charset=utf-8"),c.onreadystatechange=function(){if(console.log("setUserData\u5f53\u524d\u8fd4\u56de\u7684\u72b6\u6001\u7801:",c.readyState,c.status),4==c.readyState)if(c.status>=200&&c.status<=207){c.statusText;var e=JSON.parse(c.responseText);console.log("1 setUserData \u83b7\u53d6\u56de\u6765\u7684\u51fd\u6570:",c.responseText),console.log("2 setUserData \u83b7\u53d6\u56de\u6765\u7684\u51fd\u6570:",e),0==e.error?(a(!0),o.GameDataStorage.preserveGameData):a(!1)}else a(!1)},console.log("\u8bf7\u6c42\u7684\u7ad6\u683c\u5f0f:",r),c.send(JSON.stringify(r)),console.log("\u8bf7\u6c42\u7684\u7ad6\u683c\u5f0f11111111111111:")},e.setUserDataAndroid=function(e,a,n){console.log("android \u8bbe\u7f6e\u7528\u6237\u6570\u636e");var i="",s=this;if(s.openId?i=s.openId:o.GameDataStorage.getUser().userData.openId?i=o.GameDataStorage.getUser().userData.openId:t.getOpenId(function(e){e&&(i=s.openId)}),!i)return console.log("openID\u662f\u7a7a\u7684!"),void n(null);var r=e.level_experience;r<0&&(r=0,o.GameDataStorage.getUser().userData.level_experience=0,o.GameDataStorage.preserveGameData());var c={platform:a,gameName:e.gameName,headIconUrl:e.headIconUrl,money:e.money,openId:i,version_num:e.version_num,user_level:e.user_level,zhenFaMap:e.zhenFaMap,level_experience:r,appid:"ttd627a09a491f940002",qianDaoNum:e.qianDaoNum,TimeStamp:e.TimeStamp,jd_score:e.jd_score,jd_lianSheng:e.jd_lianSheng,dz_score:e.dz_score,lz_score:e.lz_score,sr_score:e.sr_score,dataMap:{meinvId:e.meinvId,skinArr:e.skinArr,skinBoard:e.skinBoard,boarArr:e.boarArr,fenlie:e.zhenFaMap.fenlie.level,xueyuyingsha:e.zhenFaMap.xueyuyingsha.level,meihua:e.zhenFaMap.meihua.level,dusha:e.zhenFaMap.dusha.level,kunlong:e.zhenFaMap.kunlong.level}},h=cc.loader.getXMLHttpRequest();o.GameDataStorage.getUser().userData.version_num+=1,h.open("POST","https://www.keepmobi.com/ga/save_data/appgame/",!0),h.setRequestHeader("Content-type","application/json; charset=utf-8"),h.onreadystatechange=function(){if(console.log("setUserData\u5f53\u524d\u8fd4\u56de\u7684\u72b6\u6001\u7801:",h.readyState,h.status),4==h.readyState)if(h.status>=200&&h.status<=207){h.statusText;var e=JSON.parse(h.responseText);console.log("1 setUserData \u83b7\u53d6\u56de\u6765\u7684\u51fd\u6570:",h.responseText),console.log("2 setUserData \u83b7\u53d6\u56de\u6765\u7684\u51fd\u6570:",e),0==e.errno?(n(e),o.GameDataStorage.preserveGameData):n(e)}else n(null)},console.log("\u8bf7\u6c42\u7684\u7ad6\u683c\u5f0f:",c),h.send(JSON.stringify(c)),console.log("\u8bf7\u6c42\u7684\u7ad6\u683c\u5f0f11111111111111:")},e.getUserData=function(e){console.log("\u83b7\u53d6\u7528\u6237\u6570\u636e");var a="",n=this;if(n.openId?a=n.openId:o.GameDataStorage.getUser().userData.openId?a=o.GameDataStorage.getUser().userData.openId:t.getOpenId(function(e){e&&(a=n.openId)}),!a)return console.log("openID\u662f\u7a7a\u7684:");var i={openId:a},s=cc.loader.getXMLHttpRequest();s.open("POST","https://www.keepmobi.com/ga/read_data/zijie_chess5/",!0),s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.onreadystatechange=function(){if(console.log("getUserData\u5f53\u524d\u8fd4\u56de\u7684\u72b6\u6001\u7801:",s.readyState,s.status),4==s.readyState)if(s.status>=200&&s.status<=207){s.statusText,console.log("1 getUserData \u83b7\u53d6\u56de\u6765\u7684\u51fd\u6570:",s.responseText);var t=JSON.parse(s.responseText);console.log("2 getUserData \u83b7\u53d6\u56de\u6765\u7684\u51fd\u6570:",t),0==t.errno?e(!0,t):e(!0,null)}else e(!1)},console.log("\u8bf7\u6c42\u7684\u7ad6\u683c\u5f0f:",i),s.send(JSON.stringify(i))},e.request=function(e,a,n,o){var i=t.ip+e,s=JSON.stringify(a),r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var e=null;""!=r.responseText&&(e=JSON.parse(r.responseText)),0==e.errno?n&&n(e):o&&o(e)}else if(4==r.readyState&&200!=r.status){var t={url:i,readyState:r.readyState,status:r.status,data:s};e=null,console.error("Server Some thing go wrong == ",t),o&&o(t)}},r.open("POST",i,!0),r.setRequestHeader("Content-type","application/json; charset=utf-8"),r.send(s)},e.prototype.formatParams=function(e){var t,a,n,o,i,s,r="";for(t in e)if((a=e[t])instanceof Array)for(s=0;s<a.length;++s)o=a[s],(i={})[t+"[]"]=o,r+=this.formatParams(i)+"&";else if(a instanceof Object)for(n in a)o=a[n],(i={})[t+"["+n+"]"]=o,r+=this.formatParams(i)+"&";else null!=a&&(r+=encodeURIComponent(t)+"="+encodeURIComponent(a)+"&");return r.length?r.substr(0,r.length-1):r},e.openId="",e.ip="https://www.keepmobi.com/ga/",t=n([r],e)}());a.getDataFromServer=c,cc._RF.pop()},{"../SSSGF/ssscgf":"ssscgf","./platform":"platform"}],global:[function(e,t,a){"use strict";cc._RF.push(t,"75de6GuEvhJK7Teki0CCyt4","global"),Object.defineProperty(a,"__esModule",{value:!0});a.default=new function(){this.gameId="",this.openId="",this.room=null,this.selfId="",this.plyingId="",this.duanWang=!1,this.sdkInitFinsh=!1,this.selectType=0,this.selectIndex=0,this.gameMoeny=10,this.RightRate=1,this.isMatching=!1,this.isSendingPlayChessMsg=!1},cc._RF.pop()},{}],gold_buzu_panel:[function(e,t,a){"use strict";cc._RF.push(t,"299f0D5Lc9JHbuLiyVxZ0OF","gold_buzu_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/platform"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shipin_icon=null,t.shipin_icon_spriteframe=null,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){var e=this.node.getChildByName("Node");if(r.platform.now_platform!=r.platform_type.is_tt){this.shipin_icon.spriteFrame=this.shipin_icon_spriteframe,e.getChildByName("close_btn").active=!1;var t=e.getChildByName("close_btn2");t.active=!1,e.getChildByName("lingqu_btn").x=0,this.scheduleOnce(function(){t.active=!0},r.platform.data.time_fanhui)}s.conMager.getInstance().playAudioEff(s.KEY.audioName.showpanel),this.node.active=!0,this.scaleBigShow(e,cc.v3(0,0),null),s.GameDataStorage.getUser().userData.isOneGold&&(e.getChildByName("icon").active=!0,e.getChildByName("lingqu_btn").getChildByName("sp").active=!1,e.getChildByName("lingqu_btn").getChildByName("text").active=!0)},t.prototype.onClose=function(){var e=this,t=this.node.getChildByName("Node");this.scaleSmallHide(t,cc.v3(0,0),function(){s.conMager.getInstance().putPoolNode(e.node.name,e.node)})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.queren_btn=function(){if(this.disableClick(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),s.GameDataStorage.getUser().userData.isOneGold){s.GameDataStorage.getUser().userData.isOneGold=!1,s.GameDataStorage.preserveGameData();var e=this.node.getChildByName("Node");e.getChildByName("icon").active=!1,e.getChildByName("lingqu_btn").getChildByName("sp").active=!0,e.getChildByName("lingqu_btn").getChildByName("text").active=!1,s.conMager.getInstance()._msgAtion.emit("updateMedalCount",300,cc.v3(0,0))}else s._pl_fun.getInstance().showAdVideo(function(){s.conMager.getInstance()._msgAtion.emit("updateMedalCount",300,cc.v3(0,0))})},t.prototype.quxiao_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1)},i([u({type:cc.Sprite,tooltip:"\u89c6\u9891icon"})],t.prototype,"shipin_icon",void 0),i([u({type:cc.SpriteFrame})],t.prototype,"shipin_icon_spriteframe",void 0),i([h],t)}(s.winRootNode);a.default=l,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../utils/platform":"platform"}],gotMedalNode:[function(e,t,a){"use strict";cc._RF.push(t,"08444JLbxBHz4DHiV4G78dg","gotMedalNode");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spr=null,t.sprFrame=[],t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){this.startAction(e[0])},t.prototype.onClose=function(){throw new Error("Method not implemented.")},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.start=function(){},t.prototype.startAction=function(e){this.spr.spriteFrame=this.sprFrame[e.index],e.index,null==e.pos&&"yuWenClassNode_0"==this.node.parent.name&&(e.pos=cc.v2(189,341)),cc.tween(this.node).to(.6,{x:e.pos.x,y:e.pos.y,scale:1}).start()},i([h(cc.Sprite)],t.prototype,"spr",void 0),i([h([cc.SpriteFrame])],t.prototype,"sprFrame",void 0),i([c],t)}(s.winRootNode);a.default=u,cc._RF.pop()},{"./../../SSSGF/ssscgf":"ssscgf"}],gssk_faguang:[function(e,t,a){"use strict";cc._RF.push(t,"7ff69pO1L1KdrTAXJMdqK6w","gssk_faguang");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/baesConScripts/winRootNode"),r=e("../../SSSGF/conMagers/conMager"),c=cc._decorator,h=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(e){var t=this;this.node.setPosition(e[0].pos);var a=e[0].cb,n=this.node.getComponent(sp.Skeleton),o=n.setAnimation(0,"fg",!1);n.setTrackCompleteListener(o,function(){a&&a(),t.onClose(1)})},t.prototype.onClose=function(){r.default.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){},i([h],t)}(s.default));a.default=u,cc._RF.pop()},{"../../SSSGF/baesConScripts/winRootNode":"winRootNode","../../SSSGF/conMagers/conMager":"conMager"}],gssk_line:[function(e,t,a){"use strict";cc._RF.push(t,"00ad2D2TlFPB4uEFiuL+Xs0","gssk_line");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/baesConScripts/winRootNode"),r=e("../../utils/commonFunction"),c=e("../../SSSGF/ssscgf"),h=cc._decorator,u=h.ccclass,l=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(e){var t=this;this.node.angle=e[0].angel,this.node.scaleX=e[0].scaleX,this.node.position=cc.Vec3.ZERO,this.node.setPosition(e[0].pos);var a=0==e[0].time?"chess/new_chess/chess_0":"chess/new_chess/chess_1";r.commonFunction.updateSprite(a,this.node.getChildByName("chess"));var n=this.node.getChildByName("gg").getComponent(sp.Skeleton),o=n.setAnimation(0,"gg",!1);n.setTrackCompleteListener(o,function(){t.onClose(1)})},t.prototype.onClose=function(){c.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){},i([u],t)}(s.default));a.default=l,cc._RF.pop()},{"../../SSSGF/baesConScripts/winRootNode":"winRootNode","../../SSSGF/ssscgf":"ssscgf","../../utils/commonFunction":"commonFunction"}],guiyuan_num:[function(e,t,a){"use strict";cc._RF.push(t,"f9f0eZXebdE4YAXhojHlHhA","guiyuan_num");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callback=null,t.isjude=!1,t.num=0,t.new_num=0,t.sum=0,t._vector=-1,t.labelText=null,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;this.isjude=!1,this.sum=0,this.node.zIndex=99,this.new_num=0,this.kedi_action(e[0].is_user,e[0].zhenFaName),s.conMager.getInstance()._msgAtion.on("del_kedinum",function(){t.onClose(1)},this),s.conMager.getInstance()._msgAtion.on("updateNum",function(e){t.new_num=t.num-e,console.log("\u8f93\u51fa\u4e00\u4e0bnum2:",e,t.num),t.new_num<=1&&(t.new_num=1),t.isjude=!0},this)},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.kedi_action=function(e,t){var a=new cc.Node,n=s.GameDataStorage.gameStateData.ds_zhenfalevel;console.log("\u662f\u8c01\u7684\u514b\u654c\u732e\u796d:",e,t,",",n);var o=this.node.getChildByName("user"),i=this.node.getChildByName("ds");e?(a=o,i.active=!1,"guiyuan"==t&&(a=this.node.getChildByName("ds")),n=s.GameDataStorage.gameStateData.userZhenFaLevel):(a=i,o.active=!1,"guiyuan"==t&&(a=this.node.getChildByName("user"))),a.active=!0;var r=a.getChildByName("num1").getComponent(cc.Label);this.labelText=r,"kedi"==t?this.num=5+n:(this.num=5-n,this.num<=1&&(this.num=1)),r.string=""+this.num;var c=-(40*(a.childrenCount-1)+r.node.width/2)/2;a.active=!0;for(var h=function(e){var t=a.children[e];t.active=!1,u.scheduleOnce(function(){t.scale=4,t.x=c,t.y=-65,t.active=!0,t.runAction(cc.scaleTo(.2,1)),c+=40,a.children[e+1]&&"num1"==a.children[e+1].name&&(c+=r.node.width/2),"num1"==t.name&&(c+=r.node.width/2,t.y=-55)},.1*e)},u=this,l=0;l<a.childrenCount;l++)h(l)},t.prototype.update=function(){this.isjude&&(this.sum+=1,this.sum%2==0&&(this.num+=this._vector,this.num==this.new_num&&(this.num=this.new_num,this.isjude=!1),this.labelText.string=""+this.num,console.log("\u8fdb\u6765\u4e86\u5417:",this.labelText.string)))},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf"}],guiyuan:[function(e,t,a){"use strict";cc._RF.push(t,"2136acx7ItIBrrv0uBhVx6v","guiyuan");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/ssscgf"),r=e("../class_manager"),c=e("../game_manager"),h=e("../zhenfa_joiner"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_number_max=1,t.use_number=0,t.using=!1,t}return o(t,e),t.prototype.use_zhenfa=function(){return!0},t.prototype.use_zhenfa_finish=function(){var e=this;if(1==this.using){this.using=!1;var t=c.game_manager.win_chess_number-this.data.level;t<1&&(t=1);var a=this.judge_win(this.my_player,t);if(a.length>=t){var n=new r.win_data(this.my_player,a);return c.game_manager.get_force_win_event(this.my_player,function(){c.game_manager.get_finish_zhenfa_event(e)}.bind(this),n),!1}return!0}return!0},t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.board=e},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(){var e=this.judge_active();return 0!=e||0!=(e=this.judge_number())||0!=(e=this.judge_guiyuan())||(this.show_guiyuan(),!1)},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return!0},t.prototype.one_win=function(){return!0},t.prototype.judge_guiyuan=function(){var e=c.game_manager.win_chess_number-this.data.level;switch(e<1&&(e=1),this.my_player.cos){case r.joiner_enum.ai:s.GameDataStorage.gameStateData.ds_zhenfalevel=this.data.level;break;case r.joiner_enum.player:s.GameDataStorage.gameStateData.userZhenFaLevel=this.data.level}var t=!0;return this.judge_win(this.my_player,e).length>=e&&(t=!1),1==t},t.prototype.show_guiyuan=function(){var e=this;this.use_number++,this.using=!0;var t=!1;this.my_player.cos==r.joiner_enum.player?(t=!0,s.conMager.getInstance().playAudioEff("nan/nanguiyuan")):s.conMager.getInstance().playAudioEff("nv/nvguiyuan"),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.board.ui_parent,{fileName:"guiyuan",ani_name:"animation",cb:function(){e.scheduleOnce(function(){c.game_manager.get_zhenfa_event(e.my_player,e.data)},1)},is_user:t})},t.prototype.judge_win=function(e,t){var a=[[0,1],[1,1],[1,0],[1,-1]],n=t;n||(n=c.game_manager.win_chess_number);for(var o=[],i=[],s=0;s<this.chess_array.length;s++)for(var r=0;r<this.chess_array[s].length;r++)if(this.chess_array[s][r].chess_data){var h=this.chess_array[s][r].chess_data;if(!(e&&e.state!=h.state||1==h.stone_type))for(var u=0;u<a.length;u++){i.push(h);for(var l=1;l<15;l++){var d=s+l*a[u][0],p=r+l*a[u][1];if(!(this.chess_array[d]&&this.chess_array[d][p]&&this.chess_array[d][p].chess_data&&this.chess_array[d][p].chess_data.state==h.state&&0==this.chess_array[d][p].chess_data.stone_type))break;i.push(this.chess_array[d][p].chess_data)}for(l=1;l<15&&(d=s-l*a[u][0],p=r-l*a[u][1],this.chess_array[d]&&this.chess_array[d][p]&&this.chess_array[d][p].chess_data&&this.chess_array[d][p].chess_data.state==h.state&&0==this.chess_array[d][p].chess_data.stone_type);l++)i.push(this.chess_array[d][p].chess_data);i.length<n?i=[]:(i.length>o.length&&(o=i),i=[])}}return o},i([l],t)}(h.default));a.default=d,cc._RF.pop()},{"../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../zhenfa_joiner":"zhenfa_joiner"}],head_icon:[function(e,t,a){"use strict";cc._RF.push(t,"ae820MpqEdBj6u+mbjwuazf","head_icon");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("./class_manager"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rank_icon=null,t.head_icon=null,t.daojishi=null,t.biaoqing_node=null,t.duihua_parent=null,t.biaoqing=null,t.player=null,t.biaoqing_running=!1,t.daojishi_tween=new cc.Tween,t}return o(t,e),t.prototype.init_head_icon=function(e,t){var a=this;this.player=e;var n="image/level_icon/duanwei/biankuang/"+(this.player.score.duan_wei+1);if(cc.resources.load(n,cc.SpriteFrame,function(e,t){e?console.error("\u83b7\u53d6\u6bb5\u4f4d\u5934\u50cf\u5931\u8d25",e):a.rank_icon.spriteFrame=t}),void 0===t);else{var o="image/head_icon/"+t;cc.resources.load(o,cc.SpriteFrame,function(e,t){e?console.error("\u83b7\u53d6\u5934\u50cf\u5931\u8d25",e):a.head_icon.spriteFrame=t})}this.daojishi.node.active=!1,this.daojishi.fillRange=1},t.prototype.on_show_biaoqing=function(){this.player.cos==r.joiner_enum.player&&1!=this.biaoqing_running&&(this.biaoqing_node.active=!0)},t.prototype.on_hide_biaoqing=function(){this.biaoqing_node.active=!1},t.prototype.biaoQing_btn=function(e,t){var a=this;this.biaoqing_running=!0;var n=parseInt(t);this.on_hide_biaoqing(),this.duihua_parent.active=!0;var o=this.duihua_parent.getChildByName("zi").getComponent(cc.Sprite),i="image/board/zi/zi"+n;cc.resources.load(i,cc.SpriteFrame,function(e,t){e?console.error("\u52a0\u8f7d\u5bf9\u8bdd\u5931\u8d25",e):o.spriteFrame=t}),this.biaoqing.active=!0;var s="";switch(n){case 1:s="niupi";break;case 2:s="happy";break;case 3:s="sad";break;case 4:s="gkd";break;case 5:s="liuliuliu";break;case 6:s="hailo"}var r="spine/biaoqing/"+s,c=this.biaoqing.getChildByName("biaoqing").getComponent(sp.Skeleton);c.skeletonData=null,cc.resources.load(r,sp.SkeletonData,function(e,t){e?console.error("\u52a0\u8f7d\u5bf9\u8bdd\u5931\u8d25",e):(c.skeletonData=t,c.setAnimation(0,"animation",!1))}),this.scheduleOnce(function(){a.biaoqing.active=!1,a.duihua_parent.active=!1,a.biaoqing_running=!1},2.2)},t.prototype.hide_userPenl_btn=function(){this.disableClick(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!1},t.prototype.start_daojishi=function(e){this.daojishi_tween.stop(),this.daojishi.fillRange=1,this.daojishi.node.active=!0,this.daojishi_tween=cc.tween(this.daojishi).to(e,{fillRange:0}).start()},t.prototype.end_daojishi=function(){this.daojishi_tween.stop(),this.daojishi.node.active=!1},t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){e[0](this)},t.prototype.onClose=function(){throw new Error("Method not implemented.")},t.prototype.onClear=function(){throw new Error("Method not implemented.")},i([u({type:cc.Sprite,tooltip:"\u6bb5\u4f4d\u5934\u50cf\u6846"})],t.prototype,"rank_icon",void 0),i([u({type:cc.Sprite,tooltip:"\u5934\u50cf"})],t.prototype,"head_icon",void 0),i([u({type:cc.Sprite,tooltip:"\u5012\u8ba1\u65f6"})],t.prototype,"daojishi",void 0),i([u({type:cc.Node,tooltip:"\u8868\u60c5\u6846"})],t.prototype,"biaoqing_node",void 0),i([u({type:cc.Node,tooltip:"\u5bf9\u8bdd\u6846"})],t.prototype,"duihua_parent",void 0),i([u({type:cc.Node,tooltip:"\u8868\u60c5"})],t.prototype,"biaoqing",void 0),i([h],t)}(s.winRootNode);a.default=l,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","./class_manager":"class_manager"}],heqi_panel:[function(e,t,a){"use strict";cc._RF.push(t,"efd1dyw8BNF+5cUFnWnly1c","heqi_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../KEY"),c=e("../../SSSGF/baesConScripts/winRootNode"),h=e("../../SSSGF/ssscgf"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.user_huiqi=null,t.user_qiuhe=null,t.ds_huiqi=null,t.ds_qiuhe=null,t.daojishi=null,t.sprFrame=[],t.type="",t.callBack=null,t.time=5,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){this.node.zIndex=999,this.type=e[0].type,this.node.active=!0;var t=this.node.getChildByName("Node");t.active=!0,this.scaleBigShow(t,cc.v3(0,0),null),this.time=10,this.callBack=e[0].callBack,h.conMager.getInstance().playAudioEff(r.KEY.audioName.showpanel),this.init();for(var a=0;a<this.node.childrenCount;a++){var n=this.node.children[a];"mask"!=n.name&&"Node"!=n.name?n.active=!1:n.active=!0}this.daojishi.string="\u5012\u8ba1\u65f6:"+this.time,"ds_huiqi"==this.type||"ds_qiuhe"==this.type?(this.daojishi.node.y=320,this.startTime(),t.getChildByName("btn_jixu").getComponent(cc.Sprite).spriteFrame=this.sprFrame[1]):(this.daojishi.node.y=0,t.getChildByName("btn_jixu").getComponent(cc.Sprite).spriteFrame=this.sprFrame[0]),h.conMager.getInstance()._msgAtion.on("finish_qiuhe",this.finish_qiuhe,this)},t.prototype.onClose=function(e){var t=this,a=this.node.getChildByName("Node");this.stopTime(),this.scaleSmallHide(a,cc.v3(0,0),function(){h.conMager.getInstance().putPoolNode(t.node.name,t.node),t.callBack(e)})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.init=function(){this.user_huiqi.active=!1,this.user_qiuhe.active=!1,this.ds_huiqi.active=!1,this.ds_qiuhe.active=!1,this[this.type].active=!0},t.prototype.tongyi_btn=function(){var e=this;if(h.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),"user_huiqi"==this.type||"user_qiuhe"==this.type){if(h.GameDataStorage.gameStateData.game_mode){"user_qiuhe"==this.type&&h.conMager.getInstance()._msgAtion.emit("open_qiuhe");var t=this.node.getChildByName("Node");return t.opacity=0,t.scale=0,void(this.node.getChildByName(this.type+"_title").active=!0)}"user_huiqi"==this.type&&h.conMager.getInstance()._msgAtion.emit("updateMoney",-100);var a=this.node.getChildByName("Node");a.opacity=0,a.scale=0;var n=this.node.getChildByName(this.type+"_title");n.active=!0,this.scaleBigShow(n,cc.v3(0,0),null);var o=s.NumberUtil.randomNum(2,5);h.conMager.getInstance()._msgAtion.emit("stopTimeDel"),this.scheduleOnce(function(){h.conMager.getInstance()._msgAtion.emit("startTimeDel"),h.conMager.getInstance()._msgAtion.emit(e.type+"_ai",function(t){e.scaleSmallHide(n,cc.v3(0,0),null),t?"user_huiqi"==e.type?h.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,e.node,"\u5bf9\u65b9\u540c\u610f\u4f60\u7684\u6094\u68cb\u7533\u8bf7!"):h.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,e.node,"\u5bf9\u65b9\u540c\u610f\u548c\u68cb\u7533\u8bf7\uff0c\u548c\u68cb!"):"user_huiqi"==e.type?h.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,e.node,"\u5bf9\u65b9\u62d2\u7edd\u4f60\u7684\u6094\u68cb\u7533\u8bf7!"):h.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,e.node,"\u5bf9\u65b9\u62d2\u7edd\u4f60\u7684\u548c\u68cb\u7533\u8bf7!"),e.scheduleOnce(function(){t?("user_qiuhe"==e.type?h.conMager.getInstance()._msgAtion.emit("pingju"):h.conMager.getInstance()._msgAtion.emit("user_huiqi_fun"),e.onClose(3)):e.onClose(2)},2)})},o)}else this.onClose(2)},t.prototype.quxiao_btn=function(){h.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),console.log("\u54c8\u54c8\u54c8\u54c8\u54c8\u54c8\u54c8\u53d6\u6d88\u55ae\u6a5f"),this.onClose(1)},t.prototype.startTime=function(){this.daojishi.node.active=!0,this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){this.time-=1,this.daojishi.string="\u5012\u8ba1\u65f6:"+this.time,this.time<=0&&this.onClose(1)},t.prototype.stopTime=function(){this.unschedule(this.updateTime)},t.prototype.finish_qiuhe=function(){this.onClose(2)},i([d(cc.Node)],t.prototype,"user_huiqi",void 0),i([d(cc.Node)],t.prototype,"user_qiuhe",void 0),i([d(cc.Node)],t.prototype,"ds_huiqi",void 0),i([d(cc.Node)],t.prototype,"ds_qiuhe",void 0),i([d(cc.Label)],t.prototype,"daojishi",void 0),i([d([cc.SpriteFrame])],t.prototype,"sprFrame",void 0),i([l],t)}(c.default);a.default=p,cc._RF.pop()},{"../../KEY":"KEY","../../SSSGF/baesConScripts/winRootNode":"winRootNode","../../SSSGF/ssscgf":"ssscgf","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],heqi_sanren_panel:[function(e,t,a){"use strict";cc._RF.push(t,"4298fNRDZNF/bXV2kFYgjdL","heqi_sanren_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../view/sanren_view"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ds_icon_parent=null,t.daojishi=null,t.cishu=0,t.renshu=0,t}return o(t,e),t.prototype.start=function(){},t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){this.type=e[0].type,this.callBack=e[0].callBack,console.log("\u8fdb\u6765\u4e86");for(var t=this.ds_icon_parent.children,a=this.node.parent.getComponent(r.default),n=function(e){var n=a.ds_headIconIndex;1==e&&(n=a.ds_headIconIndex2);var o="image/head_icon/"+n;cc.resources.load(o,cc.SpriteFrame,function(a,n){a?console.error("\u6c42\u548c\u5934\u50cf\u83b7\u53d6\u5931\u8d25"):t[e].getComponent(cc.Sprite).spriteFrame=n}),cc.resources.load("image/sanren/dian",cc.SpriteFrame,function(a,n){a?console.error("\u6c42\u548c\u5934\u50cf\u906e\u7f69\u83b7\u53d6\u5931\u8d25"):t[e].getChildByName("mask").getComponent(cc.Sprite).spriteFrame=n})},o=0;o<t.length;o++)n(o);var i=2*Math.random()+6;this.daojishi_fun(10,i)},t.prototype.daojishi_fun=function(e,t){var a=this;this.daojishi.string=e.toString(),this.scheduleOnce(function(){--e<t?s.conMager.getInstance()._msgAtion.emit("user_qiuhe_ai",function(e){var t="image/sanren/";t+=1==e?"dui":"cuo";var n=a.ds_icon_parent.children;cc.resources.load(t,cc.SpriteFrame,function(t,o){t&&console.error("\u6c42\u548c\u5934\u50cf\u906e\u7f69\u83b7\u53d6\u5931\u8d25"),a.qiuhe_ren(e),n[a.cishu-1].getChildByName("mask").getComponent(cc.Sprite).spriteFrame=o})}):a.daojishi_fun(e,t)},1)},t.prototype.qiuhe_ren=function(e){var t=this;this.cishu++,1==e&&this.renshu++,console.log("\u5224\u5b9a\u4e86\u51e0\u6b21\uff01"),2==this.cishu&&(console.log("\u5f00\u59cb\u5224\u5b9a"),2==this.renshu?(this.scheduleOnce(function(){s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,t.node.parent,"\u5bf9\u65b9\u540c\u610f\u548c\u68cb")},1),this.scheduleOnce(function(){s.conMager.getInstance().hideWinNode(s.KEY.UIName.heqi_sanren_panel),t.callBack(),s.conMager.getInstance().showWinNode(s.KEY.UIName.flat_view,t.node.parent.parent,null)},2)):(s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node.parent,"\u5bf9\u65b9\u4e0d\u540c\u610f\u548c\u68cb"),this.scheduleOnce(function(){s.conMager.getInstance().hideWinNode(s.KEY.UIName.heqi_sanren_panel),t.callBack()},1)))},t.prototype.onClose=function(){},t.prototype.onClear=function(){throw new Error("Method not implemented.")},i([u({type:cc.Node,tooltip:"\u5bf9\u624bicon"})],t.prototype,"ds_icon_parent",void 0),i([u({type:cc.Label,tooltip:"\u5012\u8ba1\u65f6"})],t.prototype,"daojishi",void 0),i([h],t)}(s.winRootNode);a.default=l,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../view/sanren_view":"sanren_view"}],hua:[function(e,t,a){"use strict";cc._RF.push(t,"e2870XUNuxCT47jHiMTd8KQ","hua");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){},t.prototype.onClose=function(){throw new Error("Method not implemented.")},t.prototype.onClear=function(){throw new Error("Method not implemented.")},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../../../../SSSGF/ssscgf":"ssscgf"}],interstitialEvent:[function(e,t,a){"use strict";cc._RF.push(t,"97c99AHI3FCKJCp5wvgpwl+","interstitialEvent"),Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(){this.interstitialAd=void 0,this.adId="",this.judge=!1,this.createrAd=function(){window.tt&&tt.createInterstitialAd&&(this.interstitialAd=tt.createInterstitialAd({adUnitId:this.adId}),console.log("\u51c6\u5907\u63d2\u5c4f\u5e7f\u544a\uff01",this.interstitialAd),this.interstitialAd.onError(function(e){console.log("\u63d2\u5c4f\u5e7f\u544a\u5f02\u5e38\uff01",e)}))},this.showAd=function(){var e=this;if(cc.sys.isNative&&"Android"==cc.sys.os)return console.log("\u663e\u793a\u5168\u5c4f\u89c6\u9891\u7c7b\u578b"),void jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","callShowAd","(II)V",1,5);this.judge&&window.tt&&this.interstitialAd&&(this.judge=!1,console.log("---------------this.interstitialAd:",this.interstitialAd),this.interstitialAd.show(),setTimeout(function(){e.judge=!0,e.createrAd()},6e4))}}return e.prototype.init=function(e){var t=this;this.adId=e,window.tt&&"development"!=tt.env.VERSION&&(this.createrAd(),setTimeout(function(){t.judge=!0},6e4))},e}();a.default=n,cc._RF.pop()},{}],item1:[function(e,t,a){"use strict";cc._RF.push(t,"e7cd7anU/xOL5pa2023Zaom","item1");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=e("../../SSSGF/dataController/DATA"),h=e("../../pvp/script/global"),u=e("../../pvp/script/views/match_controller"),l=cc._decorator,d=l.ccclass,p=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callBack=null,t.gameType=0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;if(this.node.opacity=255,this.callBack=e[0].callBack,r.conMager.getInstance().playAudioEff(r.KEY.audioName.pipeizhong),this.node.active=!0,this.suiji_daren_name(),this.node.getChildByName("ppz").getComponent(sp.Skeleton).setAnimation(0,"ppz",!0),h.default.sdkInitFinsh&&h.default.selectType==c.game_type.jingdian)return console.log("\u5f00\u59cb\u7ecf\u5178\u8054\u673a\u5339\u914d"),void this.node.getComponent(u.default).JdMatchPlayers(function(){t.callBack&&t.callBack(),t.onClose(1)});s.NumberUtil.randomNum(1,3),this.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(r.KEY.audioName.pipeichenggong),t.node.getChildByName("ppz").getComponent(sp.Skeleton).setAnimation(0,"ppcg",!1),t.scheduleOnce(function(){t.node.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){t.onClose(1)}))),t.callBack&&t.callBack()},1)},2)},t.prototype.onClose=function(){this.node.active=!1,r.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){r.conMager.getInstance()._msgAtion.on("matchFinish",this.matchFinish,this)},t.prototype.suiji_daren_name=function(){if(0==r.GameDataStorage.getUser().userData.darenTime){var e=(new Date).getTime(),t=Math.floor((e-r.GameDataStorage.gameStateData.startGmaeTime)/1e3/60);console.log("\u6e38\u620f\u5f00\u59cb\u7684\u65f6\u95f4:",r.GameDataStorage.gameStateData.startGmaeTime,e,t);var a=[];t>=3&&t<=10&&a.push("\u5dee\u4e4b\u6beb\u5398"),t>=5&&t<=15&&a.push("\u6296\u6e38\u620f\u65f6\u95f4"),t>=7&&t<=20&&a.push("\u5e03\u5317\u6e38\u620f"),t>=10&&t<=15&&a.push("\u6296\u4e50"),t>=12&&t<=18&&a.push("\u6296\u673a\u7075");var n=null;if(a.length>0){var o=s.NumberUtil.randomNum(0,a.length-1);1==a.length&&(o=0),n=a[o],console.log("\u6700\u540e\u5f04\u5b8c\u4e86\uff0c",a,n,o),r.GameDataStorage.getUser().userData.is_daren=!0,r.GameDataStorage.gameStateData.ds_name=n;var i=(new Date).getTime();i+=36e5*s.NumberUtil.randomNum(2,5),r.GameDataStorage.getUser().userData.darenTime=i,r.GameDataStorage.preserveGameData()}}},t.prototype.matchFinish=function(){this.onClose(1)},i([d],t)}(r.winRootNode));a.default=p,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../pvp/script/global":"global","../../pvp/script/views/match_controller":"match_controller","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],item2:[function(e,t,a){"use strict";cc._RF.push(t,"392b1DSdMlFkoRSVgMlLvku","item2");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=e("../../classCon/configSurface"),h=e("../../utils/commonFunction"),u=e("../../SSSGF/dataController/DATA"),l=cc._decorator,d=l.ccclass,p=l.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callBack=null,t.gameType=0,t.ds_headIcon=null,t.user_headIcon=null,t.ds_headIconIndex=0,t.right=null,t.left=null,t.userName=null,t.userLevel=null,t.userIcon=null,t.dsName=null,t.dsLevel=null,t.dsIcon=null,t.mask=null,t.ksjx=null,t.vs=null,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;console.log("\u9879\u76ee2\u8fdb\u6765\u4e86\u5417"),this.dsName.string="",this.userName.string="",r.GameDataStorage.gameStateData.gameType!=u.game_type.lianjiduiyi&&this.initData(),this.callBack=e[0].callBack,this.ksjx.setAnimation(0,"dj1",!1),this.vs.node.active=!1,r.conMager.getInstance().playAudioEff(r.KEY.audioName.juesha),this.node.active=!0,this.scheduleOnce(function(){var e=t.node.getChildByName("left"),a=t.node.getChildByName("right"),n=t.node.getChildByName("pk");n.scale=4,n.y=150,e.active=!0,a.active=!0,e.opacity=0,a.opacity=0,e.runAction(cc.sequence(cc.fadeIn(.2),cc.callFunc(function(){t.vs.node.active=!0,t.vs.setAnimation(0,"animation",!1)}),cc.delayTime(1.6),cc.fadeOut(.15),cc.callFunc(function(){t.callBack&&t.callBack(),t.onClose(1)}))),a.runAction(cc.sequence(cc.fadeIn(.2),cc.delayTime(1.6),cc.fadeOut(.15)))},.2)},t.prototype.onClose=function(){this.node.active=!1,r.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.init_user_Data=function(){if(""==this.userName.string){var e=r.GameDataStorage.getUser().userData;this.userName.string=e.gameName;var t=h.commonFunction.getDuanWei(e.jd_score);this.userLevel.string=t,"null"!=r.GameDataStorage.getUser().userData.headIconUrl?-1!=r.GameDataStorage.getUser().userData.headIconUrl.indexOf("http")?h.commonFunction.updateHttpSprite(e.headIconUrl,this.userIcon):h.commonFunction.updateSprite(e.headIconUrl,this.userIcon):h.commonFunction.updateSprite("head_icon/1",this.userIcon)}},t.prototype.suiji_daren_name=function(){return"\u5dee\u4e4b\u6beb\u5398"},t.prototype.init_ds_info=function(e){if(""==this.dsName.string){r.GameDataStorage.gameStateData.ds_name=e.customProfile.username,this.dsName.string=e.customProfile.username;var t=h.commonFunction.getDuanWei(e.customProfile.jd_score);this.dsLevel.string=t,"null"!=r.GameDataStorage.getUser().userData.headIconUrl?-1!=e.customProfile.headIconUrl.indexOf("http")?h.commonFunction.updateHttpSprite(e.customProfile.headIconUrl,this.dsIcon):h.commonFunction.updateSprite(e.customProfile.headIconUrl,this.dsIcon):h.commonFunction.updateSprite("head_icon/1",this.dsIcon)}},t.prototype.initData=function(){this.gameType=r.GameDataStorage.gameStateData.gameType;var e=r.GameDataStorage.getUser().userData;this.userName.string=e.gameName;var t=h.commonFunction.judgeGameLevelName(e.user_level);t=h.commonFunction.getDuanWei(r.GameDataStorage.getUser().userData.jd_score),2==this.gameType?("number"!=typeof r.GameDataStorage.getUser().userData.dz_score&&(r.GameDataStorage.getUser().userData.dz_score=0),t="\u79ef\u5206:"+r.GameDataStorage.getUser().userData.dz_score):this.gameType==u.game_type.lianzhao&&("number"!=typeof r.GameDataStorage.getUser().userData.lz_score&&(r.GameDataStorage.getUser().userData.lz_score=0),t="\u79ef\u5206:"+r.GameDataStorage.getUser().userData.lz_score),this.userLevel.string=t;var a=c.XingMingData.xing,n=c.XingMingData.ming,o=h.commonFunction.randomGameName(a,n),i="";r.GameDataStorage.gameStateData.ds_score=h.commonFunction.judgeAiScore(r.GameDataStorage.getUser().userData.jd_score),r.GameDataStorage.getUser().userData.is_daren&&(console.log("\u8fd9\u91cc\u6ca1\u8fdb\u6765\u561b?",r.GameDataStorage.gameStateData.ds_name),o=r.GameDataStorage.gameStateData.ds_name,r.GameDataStorage.getUser().userData.is_daren=!1,r.GameDataStorage.gameStateData.ds_score=s.NumberUtil.randomNum(12880,2e4)),i=h.commonFunction.getDuanWei(r.GameDataStorage.gameStateData.ds_score),2==this.gameType?(r.GameDataStorage.gameStateData.ds_score=h.commonFunction.judgeAiScore(r.GameDataStorage.getUser().userData.dz_score),"number"!=typeof r.GameDataStorage.gameStateData.ds_score&&(r.GameDataStorage.getUser().userData.dz_score=0),i="\u79ef\u5206:"+r.GameDataStorage.gameStateData.ds_score):this.gameType==u.game_type.lianzhao&&(r.GameDataStorage.gameStateData.ds_score=h.commonFunction.judgeAiScore(r.GameDataStorage.getUser().userData.lz_score),"number"!=typeof r.GameDataStorage.gameStateData.ds_score&&(r.GameDataStorage.getUser().userData.lz_score=0),i="\u79ef\u5206:"+r.GameDataStorage.gameStateData.ds_score),this.dsLevel.string=i,this.dsName.string=o,r.GameDataStorage.gameStateData.ds_name=o,"null"!=r.GameDataStorage.getUser().userData.headIconUrl&&h.commonFunction.updateHttpSprite(r.GameDataStorage.getUser().userData.headIconUrl,this.userIcon),this.ds_headIconIndex=r.GameDataStorage.gameStateData.ds_headIconIndex,console.log("\u5bf9\u624b\u7684\u5934\u50cf:",this.ds_headIconIndex);var l="head_icon/"+this.ds_headIconIndex;h.commonFunction.updateSprite(l,this.dsIcon)},i([p(cc.Node)],t.prototype,"right",void 0),i([p(cc.Node)],t.prototype,"left",void 0),i([p(cc.Label)],t.prototype,"userName",void 0),i([p(cc.Label)],t.prototype,"userLevel",void 0),i([p(cc.Node)],t.prototype,"userIcon",void 0),i([p(cc.Label)],t.prototype,"dsName",void 0),i([p(cc.Label)],t.prototype,"dsLevel",void 0),i([p(cc.Node)],t.prototype,"dsIcon",void 0),i([p(cc.Node)],t.prototype,"mask",void 0),i([p(sp.Skeleton)],t.prototype,"ksjx",void 0),i([p(sp.Skeleton)],t.prototype,"vs",void 0),i([d],t)}(r.winRootNode);a.default=g,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../classCon/configSurface":"configSurface","../../utils/commonFunction":"commonFunction","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],item3:[function(e,t,a){"use strict";cc._RF.push(t,"1e65aKi2yJKuYkZ9nRenf3u","item3");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=cc._decorator,h=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callBack=null,t.count_time_itm3=10,t.jiabei_num_item3=0,t.reward_gold=0,t.multiple=0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;r.conMager.getInstance().playAudioEff(r.KEY.audioName.showpanel);for(var a=0;a<this.node.childrenCount;a++){var n=this.node.children[a];"jiabei"==n.name&&n.destroy()}this.callBack=e[0].callBack;var o=this.node.getChildByName("Node");o.y=1500,this.multiple=0,this.count_time_itm3=10,this.jiabei_num_item3=0,this.reward_gold=r.GameDataStorage.gameStateData.reward_gold,this.node.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",cc.tween(o).to(.3,{position:cc.v3(0,0)},{easing:"backOut"}).start(),this.startTime_item3();var i=s.NumberUtil.randomNum(1,2);this.scheduleOnce(function(){var e=s.NumberUtil.randomNum(0,2),a=1;1==e?a=2:2==e&&(a=4),t.jiabeiAction(a,1)},i)},t.prototype.onClose=function(){this.node.active=!1,r.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.startTime_item3=function(){this.count_time_itm3=10,this.node.getChildByName("Node").getChildByName("time").getComponent(cc.Label).string=this.count_time_itm3+"s",this.schedule(this.updateTime_item3,1)},t.prototype.updateTime_item3=function(){this.count_time_itm3-=1;var e=this.node.getChildByName("Node").getChildByName("time").getComponent(cc.Label);e.string=this.count_time_itm3+"s",this.count_time_itm3<=5&&(e.node.color=cc.color(255,0,0)),this.count_time_itm3<=0&&(e.node.active=!1,r.conMager.getInstance().playAudioEff("nanbujiabei"),this.jiabeiAction(1,2),this.stopTime_item3())},t.prototype.stopTime_item3=function(){this.unschedule(this.updateTime_item3)},t.prototype.jiabeiAction=function(e,t){var a=this;this.reward_gold*=e,this.node.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",r.GameDataStorage.gameStateData.reward=this.reward_gold,r.GameDataStorage.gameStateData.rewardmultiple*=e,console.log("\u500d\u657011111:",r.GameDataStorage.gameStateData.rewardmultiple,r.GameDataStorage.gameStateData.reward);var n="",o=-380;if(1==t)o=380,n=["nvbujiabei","nvjiabei","nvjiabei","nvchaojijiabei"][e-1];else{this.stopTime_item3(),this.multiple=1,n=["nanbujiabei","nanjiabei","nanbujiabei","nanchaojijiabei"][e-1];var i=this.node.getChildByName("Node"),s=cc.callFunc(function(){a.node.active=!1,a.callBack&&a.callBack(),a.onClose(1)});cc.tween(i).sequence(cc.tween().to(.5,{position:cc.v3(0,1500)},{easing:"backIn"}),cc.delayTime(1),s).start()}r.conMager.getInstance().playAudioEff(n),r.conMager.getInstance().getPoolNode(r.KEY.poolName.jiabei,this.node,{pos:cc.v2(0,o),index:e})},t.prototype.jiabei_btn=function(e,t){if(r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),!(this.multiple>0)){var a=parseInt(t);this.jiabeiAction(a,2)}},i([h],t)}(r.winRootNode));a.default=u,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],jd_game_view:[function(e,t,a){"use strict";cc._RF.push(t,"e5d4bfvJ/JFjYTZqp9AczIt","jd_game_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=e("../../classCon/configSurface"),h=e("../wuziqi/GameBoard"),u=e("../wuziqi/Piece"),l=e("../../utils/platform"),d=e("../../utils/commonFunction"),p=cc._decorator,g=p.ccclass,_=p.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameType=1,t.dsName_string="",t.user_headPanel=null,t.ds_headPanel=null,t.ds_headIcon=null,t.user_headIcon=null,t.reward_gold=2,t.multiple=0,t.chess_parent=null,t.shubiao_node=null,t.max_gameTime=30,t.ds_headIconIndex=0,t.board=null,t.whiteChess=null,t.blackChess=null,t.quan=null,t.hongDian=null,t.block=46,t.chess=null,t.userGameTime=0,t.count_down=null,t.userChess=u.BLACKCHESS,t.is_game_over=!1,t.whiePool=new cc.NodePool,t.blackPool=new cc.NodePool,t.RightRate=1,t.TimeDel=!1,t.chess_num=0,t.interval=!0,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t.luozizhong=null,t.quan_judge=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){console.log("\u91d1\u5178\u4e13\u5c5e---------",e[0].gameType),r._pl_fun.getInstance().startCreateVideo(),this.reward_gold=e[0].reward_gold,this.gameType=e[0].gameType,r.GameDataStorage.gameStateData.reward_gold=this.reward_gold,r.GameDataStorage.gameStateData.gameType=this.gameType;var t=e[0].RightRate;this.update_ai_RightRate(t),2==this.gameType&&(this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1),this.initGame(),this.node.runAction(cc.fadeIn(.5)),l.platform.now_platform!=l.platform_type.is_tt&&(this.node.getChildByName("luping").active=!1),this.hongDian.zIndex=99},t.prototype.onClose=function(){this.unscheduleAllCallbacks(),this.board.removeListennner(),r.conMager.getInstance().hideWinNode(r.KEY.UIName.jd_game_view),r.conMager.getInstance().showWinNode(r.KEY.UIName.slectGmae,null,{gameType:this.gameType})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){var e=this;r.conMager.getInstance()._msgAtion.on("ai_renshu",this.ai_renshu,this),r.conMager.getInstance()._msgAtion.on("ai_diaoxian",this.ai_diaoxian,this),r.conMager.getInstance()._msgAtion.on("ai_shangxian",this.ai_shangxian,this),r.conMager.getInstance()._msgAtion.on("renshu",this.return_btn,this),r.conMager.getInstance()._msgAtion.on("pingju",this.pingju,this),r.conMager.getInstance()._msgAtion.on("shubiao",this.shubiao,this),r.conMager.getInstance()._msgAtion.on("qiuhe",this.qiuhe,this),r.conMager.getInstance()._msgAtion.on("huiqi",this.huiqi,this),r.conMager.getInstance()._msgAtion.on("closeSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1},this),r.conMager.getInstance()._msgAtion.on("openSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0},this),r.conMager.getInstance()._msgAtion.on("stopTimeDel",function(){e.TimeDel=!0,e.quan_judge=!1},this),r.conMager.getInstance()._msgAtion.on("startTimeDel",function(){e.TimeDel=!1,e.quan_judge=!0},this)},t.prototype.update_ai_RightRate=function(e){1==e?this.RightRate=.4:2==e?this.RightRate=.5:3==e?this.RightRate=.7:4==e?this.RightRate=.8:5==e&&(this.RightRate=.9)},t.prototype.RadomZhenFa=function(e){for(var t=c.zhenFaWeight[e],a=0,n=0;n<r.GameDataStorage.gameStateData.zhenFaName.length;n++)a+=t[r.GameDataStorage.gameStateData.zhenFaName[n]];var o=Math.random()*a,i=0,s="wanning";for(n=0;n<r.GameDataStorage.gameStateData.zhenFaName.length;n++)if(o<(i+=t[r.GameDataStorage.gameStateData.zhenFaName[n]])){s=r.GameDataStorage.gameStateData.zhenFaName[n];break}return console.log("hhhhhhhhhhhhhhhh",s,i,a),s},t.prototype.initDsZhenFa=function(){var e=r.GameDataStorage.gameStateData.userZhenFaName,t=this.RadomZhenFa(e);r.GameDataStorage.gameStateData.dsZhenFaName=t;var a=r.GameDataStorage.getUser().userData.zhenFaMap[e].level+5*[-1,1][s.NumberUtil.randomNum(0,1)];a<=3&&(a=3),r.GameDataStorage.gameStateData.ds_zhenfalevel=a,"xueyuyingsha"==e&&"kedi"==t&&(r.GameDataStorage.gameStateData.ds_zhenfalevel=s.NumberUtil.randomNum(1,10)),console.log("\u5bf9\u624b\u7684\u7b49\u7ea7:",r.GameDataStorage.gameStateData.ds_zhenfalevel)},t.prototype.initGame=function(){cc.find("Canvas/money_node").active=!1,r.GameDataStorage.gameStateData.chess_num=0,r.GameDataStorage.gameStateData.rewardmultiple=0,2==this.gameType&&this.initDsZhenFa(),this.initUi(),this.initData(),3!=this.gameType?this.kaiChangDongHua():(this.node.getChildByName("heizi").active=!0,this.node.getChildByName("baizi").active=!0,this.node.getChildByName("baizi_label").active=!0,this.node.getChildByName("heizi_label").active=!0,r.conMager.getInstance().getPoolNode(r.KEY.poolName.setup,this.node,null)),this.board.init(this),this.node.getChildByName("mask").zIndex=99,this.initPool(this.whiePool,this.whiteChess),this.initPool(this.blackPool,this.blackChess)},t.prototype.initUi=function(){this.user_headPanel=this.node.getChildByName("user_headPanel"),this.ds_headPanel=this.node.getChildByName("ds_headPanel"),this.ds_headIcon=this.node.getChildByName("ds_headIcon").getChildByName("ds_headIcon").getComponent(cc.Sprite),this.user_headIcon=this.node.getChildByName("user_headIcon").getChildByName("user_headIcon").getComponent(cc.Sprite),this.chess_parent=this.node.getChildByName("chess_parent"),this.shubiao_node=this.chess_parent.getChildByName("shubiao_node"),this.count_down=this.node.getChildByName("count_down"),this.gameType<3?(this.ds_headIcon.node.parent.active=!0,this.user_headIcon.node.parent.active=!0):(this.node.getChildByName("heiqi").active=!0,this.node.getChildByName("baiqi").active=!0,this.shubiao_node.active=!0)},t.prototype.initData=function(){r.GameDataStorage.getUser().userData,"null"!=r.GameDataStorage.getUser().userData.headIconUrl&&d.commonFunction.updateHttpSprite(r.GameDataStorage.getUser().userData.headIconUrl,this.user_headIcon.node);var e=s.NumberUtil.randomNum(1,60);this.ds_headIconIndex=e,r.GameDataStorage.gameStateData.ds_headIconIndex=this.ds_headIconIndex,console.log("\u5bf9\u624b\u7684\u5934\u50cf:",e);var t="head_icon/"+e;d.commonFunction.updateSprite(t,this.ds_headIcon.node);var a=this.node.getChildByName("game_info_parent");r.conMager.getInstance().getPoolNode(r.KEY.poolName.game_info,a,null)},t.prototype.initPool=function(e,t){for(var a=0;a<225;a++){var n=cc.instantiate(t);e.put(n)}},t.prototype.moveInChess=function(e,t,a,n){var o,i=this,s=r.GameDataStorage.gameStateData.chess_num;if(2==this.gameType)if(s>30){this.chess_num-=1;var c=2;s>100&&(c=10),s>150&&(c=15),this.chess_num%c==0&&r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi)}else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);2!=this.gameType&&(this.stopTime(),this.startTime(-a)),this.ai_duihua(1);var h=null,l=null;if(a==u.BLACKCHESS?(h=this.blackPool,l=this.blackChess):(h=this.whiePool,l=this.whiteChess),h.size()>0)o=h.get();else{var p=cc.instantiate(l);h.put(p),o=h.get()}var g=Math.floor(e/this.block),_=15*Math.floor(t/this.block)+g;this.board.chess_map[_]=o,o.x=e,o.y=t,this.chess_parent.addChild(o),o.zIndex=1;var m=r.GameDataStorage.gameStateData.userZhenFaName,f=r.GameDataStorage.gameStateData.dsZhenFaName;n?a==this.userChess&&"fenlie"==m||a==-1*this.userChess&&"fenlie"==f||(a==this.userChess&&"xueyuyingsha"==m?o.scale=0:a==-1*this.userChess&&"xueyuyingsha"==f?o.scale=0:a==this.userChess&&"meihua"==m?d.commonFunction.updateSprite("chess/hua_"+a,o.getChildByName("chess"),function(){}):a==-1*this.userChess&&"meihua"==f?d.commonFunction.updateSprite("chess/hua_"+a,o.getChildByName("chess"),function(){}):this.chessAction(o,n)):this.chessAction(o,n),2!=this.gameType&&this.scheduleOnce(function(){i.hongDian.active=!0,i.hongDian.setPosition(e,t+1)},.1)},t.prototype.chessAction=function(e,t){var a=this;e.scale=1.5,e.getChildByName("chess").zIndex=98,e.y+=80,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)),cc.callFunc(function(){if(t){var n=e.getChildByName("jn1");n.active=!0,a.scheduleOnce(function(){n.active=!1},1)}})))},t.prototype.ai_duihua=function(e,t){var a=this;if(!(this.gameType>2)){var n=this.node.getChildByName("ds_biaoqing"),o=this.node.getChildByName("ds_duihua"),i=0;if(1==e){if(!this.interval)return;if(this.interval=!1,this.scheduleOnce(function(){a.interval=!0},8),this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,10)<2&&(s.NumberUtil.randomNum(0,1)>0?(i=1,r.conMager.getInstance().playAudioEff("nv/nvqifeng")):(i=5,r.conMager.getInstance().playAudioEff("nv/nvhaoqi")))}else if(3==e)i=6,r.conMager.getInstance().playAudioEff("nv/nvhengaoxing");else{if(this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,100)<t&&(i=4,r.conMager.getInstance().playAudioEff("nv/nvkeyi"))}i>0&&(o.active=!0,n.active=!0,n.children[i].active=!0,o.children[i].active=!0,this.count_down.y>0&&(this.count_down.opacity=0),this.scheduleOnce(function(){a.count_down.opacity=255,n.children[i].active=!1,o.children[i].active=!1,n.active=!1,o.active=!1},2.2))}},t.prototype.gameOver=function(){if(console.log("\u6e38\u620f\u501f\u5bbf:",this.is_game_over,this.board.sum),!this.is_game_over&&(this.is_game_over=!0,this.stopTime(),3!=this.gameType&&(cc.find("Canvas/money_node").active=!0),this.userGameTime>30?this.userChess==this.board.state?(console.log("\u5bf9\u624b\u80dc\u5229"),this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:1}),r.GameDataStorage.gameStateData.who_sucess=1):(console.log("\u73a9\u5bb6\u80dc\u5229"),this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:0}),r.GameDataStorage.gameStateData.who_sucess=0):1==this.board.win||-1==this.board.win?this.userChess==this.board.win?(this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:0}),r.GameDataStorage.gameStateData.who_sucess=0):(this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:1}),r.GameDataStorage.gameStateData.who_sucess=1):(this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:2}),r.GameDataStorage.gameStateData.who_sucess=2),this.board.removeListennner(),2==this.gameType&&0==r.GameDataStorage.gameStateData.who_sucess)){var e=r.GameDataStorage.gameStateData.userZhenFaName;r._pl_fun.getInstance().add_reportAnalytics("event_"+e+"_VictoryNumbers")}},t.prototype.kaiChangDongHua=function(){var e=this;this.ds_headIcon.node.getComponent(cc.Button).interactable=!1,this.user_headIcon.node.getComponent(cc.Button).interactable=!1,r.conMager.getInstance().playAudioEff(r.KEY.audioName.kaiju),r.conMager.getInstance().getPoolNode(r.KEY.poolName.item2,this.node,{callBack:function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.item3,e.node,{callBack:function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.setup,e.node,null),e.caixianshou()}})}})},t.prototype.caixianshou=function(){if(this.node.getChildByName("user_name").getComponent(cc.Label).string=r.GameDataStorage.getUser().userData.gameName,this.node.getChildByName("ds_name").getComponent(cc.Label).string=r.GameDataStorage.gameStateData.ds_name,this.gameType<3){var e=this.node.getChildByName("heizi"),t=this.node.getChildByName("baizi"),a=this.node.getChildByName("baizi_label"),n=this.node.getChildByName("heizi_label");s.NumberUtil.randomNum(0,1)>0?(this.userChess=u.WHITECHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!"),this.board.AIXianShou(),e.setPosition(-270,368),t.setPosition(182,-380),n.setPosition(-225,372),a.setPosition(225,-376)):(this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.userChess=u.BLACKCHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"),t.setPosition(-270,368),e.setPosition(182,-380),a.setPosition(-225,372),n.setPosition(225,-376)),this.ai_duihua(3),e.active=!0,t.active=!0,a.active=!0,n.active=!0}this.startTime(this.board.state)},t.prototype.dsHeadIcon_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!0},t.prototype.userHeadIcon_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!0},t.prototype.biaoQing_btn=function(e,t){var a=this;this.hide_userPenl_btn();var n=parseInt(t),o=this.node.getChildByName("user_biaoqing");o.active=!0,o.children[n].active=!0;var i=this.node.getChildByName("user_duihua");this.count_down.y<0&&(this.count_down.opacity=0),i.active=!0,i.children[n].active=!0,r.conMager.getInstance().playAudioEff("nan/"+this.musicNames[n-1]),this.scheduleOnce(function(){o.active=!1,o.children[n].active=!1,a.count_down.opacity=255,i.active=!1,i.children[n].active=!1},2.2)},t.prototype.hide_userPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!1},t.prototype.hide_dsPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!1},t.prototype.return_btn=function(){var e=this;this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),3!=this.gameType?r.conMager.getInstance().getPoolNode(r.KEY.poolName.stop_panel,this.node,{callBack:function(t){2==t&&e.renshu()}}):this.onClose(1)},t.prototype.luozizhong_action=function(e){e.active=!0,e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.getComponent(cc.Label).string=""}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50\u4e2d"}),cc.delayTime(.6))))},t.prototype.startTime=function(e){this.userGameTime=0,this.count_down.active=!0;var t=this.node.getChildByName("luozizhong");t.stopAllActions(),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+(30-this.userGameTime),this.userChess==e?(this.count_down.y=-440,t.setPosition(252,-376),this.quan.setPosition(0,-547)):(this.count_down.y=450,t.setPosition(-197,372),this.quan.setPosition(0,554)),t.color=-1==e?cc.color(51,51,51):cc.color(204,204,204),this.quan.getComponent(cc.Sprite).fillRange=1,this.luozizhong_action(t),this.count_down.getChildByName("time").color=cc.color(255,255,255),this.quan.active=!0,this.quan_judge=!0,this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){if(this.TimeDel||(this.userGameTime+=1),!this.is_game_over)if(this.userGameTime>this.max_gameTime)this.gameOver();else{var e=this.max_gameTime-this.userGameTime,t=e+"";e<10&&(t="0"+e),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+t,e<15&&(this.count_down.getChildByName("time").color=cc.color(255,0,0),this.TimeDel||r.conMager.getInstance().playAudioEff(r.KEY.audioName.shijian)),this.TimeDel||(12==this.userGameTime?this.ai_duihua(2,5):21==this.userGameTime?this.ai_duihua(2,20):26==this.userGameTime&&this.ai_duihua(2,80))}},t.prototype.stopTime=function(){this.unschedule(this.updateTime),this.count_down.active=!1,this.quan.active=!1,this.quan_judge=!1,this.node.getChildByName("luozizhong").stopAllActions(),this.node.getChildByName("luozizhong").active=!1},t.prototype.renshu=function(){this.is_game_over||(this.stopTime(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=1,r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null))},t.prototype.ai_renshu=function(){this.is_game_over||(this.stopTime(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=0,r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null))},t.prototype.ai_diaoxian=function(){this.is_game_over||(d.commonFunction.updateSprite("head_icon/diaoxian",this.ds_headIcon.node),this.ds_headIcon.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeIn(.4)))),console.log("\u89e6\u53d1\u6389\u7ebf"))},t.prototype.ai_shangxian=function(){this.is_game_over||(d.commonFunction.updateSprite("head_icon/"+this.ds_headIconIndex,this.ds_headIcon.node),this.ds_headIcon.node.opacity=255,this.ds_headIcon.node.stopAllActions(),console.log("\u89e6\u53d1\u4e0a\u7ebf"))},t.prototype.pingju=function(){this.is_game_over||(this.stopTime(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=2,r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null))},t.prototype.qiuhe=function(){},t.prototype.shubiao=function(e){this.shubiao_node.active=e},t.prototype.huiqi=function(){},t.prototype.update=function(e){this.quan_judge&&(1==Math.floor(e)&&console.log("1\u79d2\u8fc7\u53bb\u4e86"),this.quan.getComponent(cc.Sprite).fillRange-=1/(60*this.max_gameTime))},i([_(h.GameBoard)],t.prototype,"board",void 0),i([_(cc.Prefab)],t.prototype,"whiteChess",void 0),i([_(cc.Prefab)],t.prototype,"blackChess",void 0),i([_(cc.Node)],t.prototype,"quan",void 0),i([_(cc.Node)],t.prototype,"hongDian",void 0),i([_(cc.Prefab)],t.prototype,"chess",void 0),i([g],t)}(r.winRootNode);a.default=m,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../classCon/configSurface":"configSurface","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform","../wuziqi/GameBoard":"GameBoard","../wuziqi/Piece":"Piece","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],jiabei_sanren:[function(e,t,a){"use strict";cc._RF.push(t,"0db15q7+4pH7Zi1lF01CPnv","jiabei_sanren");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../wuziqi/Piece"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.jiabei=null,t.chess=[],t.callBack=null,t.gameType=0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;this.node.scale=0,this.node.setPosition(e[0]);for(var a=0;a<this.chess.length;a++)this.chess[a].active=!1;switch(e[2]){case r.BLACKCHESS:this.chess[0].active=!0;break;case r.WHITECHESS:this.chess[1].active=!0;break;case r.GOLDCHESS:this.chess[2].active=!0}var n="";switch(e[1]){case 1:n="bujiabei_";break;case 2:n="jiabei_";break;case 4:n="chaojijiabei_"}this.jiabei.spriteFrame=null;var o="image/sanren/"+n+e[2];cc.resources.load(o,cc.SpriteFrame,function(e,a){e?console.error("\u83b7\u53d6\u52a0\u500d\u56fe\u7247\u5931\u8d25",e):(t.jiabei.spriteFrame=a,t.itemShowScaleBig(t.node,1.5,function(){t.scheduleOnce(function(){t.onClose(1)},2)}))})},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},i([u({type:cc.Sprite,tooltip:"\u52a0\u500d"})],t.prototype,"jiabei",void 0),i([u({type:cc.Node,tooltip:"\u68cb\u5b50"})],t.prototype,"chess",void 0),i([h],t)}(s.winRootNode);a.default=l,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../wuziqi/Piece":"Piece"}],jiabei:[function(e,t,a){"use strict";cc._RF.push(t,"ab4cf2LNoFBwpNNP3Iplx5r","jiabei");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/commonFunction"),c=cc._decorator,h=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callBack=null,t.gameType=0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;this.node.scale=0,this.node.setPosition(e[0].pos.x,e[0].pos.y);var a="double_text/jiabei"+e[0].index;r.commonFunction.updateSprite(a,this.node,function(){t.itemShowScaleBig(t.node,1.5,function(){t.scheduleOnce(function(){t.onClose(1)},2)})})},t.prototype.onClose=function(){this.node.scale=0,this.node.destroy()},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},i([h],t)}(s.winRootNode));a.default=u,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../utils/commonFunction":"commonFunction"}],jineng_xuanze:[function(e,t,a){"use strict";cc._RF.push(t,"b81cbCHMoBAcoAbhr2NSNFd","jineng_xuanze");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.ka_type=a.zhenfa_node=a.show_ka_type=void 0;var s,r=e("../../../SSSGF/ssscgf"),c=e("../game_manager/class_manager"),h=e("./zhenfa_ka");(function(e){e[e.get_ka=0]="get_ka",e[e.user_ka=1]="user_ka",e[e.select_ka=2]="select_ka"})(s=a.show_ka_type||(a.show_ka_type={}));var u,l=function(){this.id=0,this.percent=0,this.level_percent=[]};a.zhenfa_node=function(e,t){this.type=u.user_ka,this.data=e,this.node=t},function(e){e[e.user_ka=0]="user_ka",e[e.select_ka=1]="select_ka",e[e.user_hand=2]="user_hand",e[e.user_user_ka=3]="user_user_ka"}(u=a.ka_type||(a.ka_type={}));var d=cc._decorator,p=d.ccclass,g=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.max_ka=5,t.lianzhao_text=null,t.my_time=null,t.lun_node=null,t.lun_label=null,t.pai_parent=null,t.lun_pan=null,t.zhenfa_xuanze=null,t.select_zhenfa_node=null,t.xianshou_sprite=null,t.xianshou_image=null,t.houshou_image=null,t.user_ka_parent=null,t.select_ka_node_parent=null,t.lajitong_node=null,t.max_ka_label=null,t.zhenfa_name=[],t.xuanzhong=null,t.ds_select_zhenfa_bool=!1,t.my_select_zhenfa_bool=!1,t.select_ka_array=[],t.select_ka_zhenfa=[],t.lun=0,t.chongsui_bool=!0,t.type=null,t.kapai_move_node=[],t.user_use_ka=[],t.user_use_ka_node=[],t.user_hand_ka=[],t.user_hand_ka_node=[],t.ds_use_ka=[],t.wanning=1,t.bagua=3,t.sijiao=1,t.kedi=1,t.wulei=3,t.fenlie=1,t.xueyuyingsha=1,t.dusha=1,t.kunlong=2,t.user_ka=[],t.ds_ka=[],t.user_ka_node=[],t.ka_jineng=[],t.hecheng_finish=!0,t.use_zhenfa_map=null,t.game_joiner=[],t.player_zhenfa=[],t.use_zhenfa=[],t.zhenfa_id=0,t.callback=null,t.map=new Map([["wanning",t.wanning],["wulei",t.wulei],["kedi",t.kedi],["bagua",t.bagua],["fenlie",t.fenlie],["sijiao",t.sijiao],["xueyuyingsha",t.xueyuyingsha],["dusha",t.dusha],["kunlong",t.kunlong]]),t.lianzhao_hash=new Map([]),t.suoxiao_window=null,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){this.put_all_ka(),this.player_zhenfa=e[0],this.game_joiner=e[3];for(var t=0;t<this.player_zhenfa.length;t++)if(this.game_joiner[t+1].cos==c.joiner_enum.player){this.user_ka=this.player_zhenfa[t],this.user_use_ka=e[2][t];break}this.use_zhenfa_map=e[1],this.callback=e[6],this.read_data();var a=this.select_ka_node_parent.children;for(t=0;t<a.length;t++)this.kapai_move_node.push(a[t]),this.ka_jineng.push(!1),this.user_use_ka_node.push(null);this.kapai_move_node.push(this.lajitong_node),this.type=s.user_ka,this.game_type_show(),this.init(e[4],e[5]),this.show_user_ka_1(u.user_ka)},t.prototype.onClose=function(){throw new Error("Method not implemented.")},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.read_data=function(){for(var e=[],t=this.lianzhao_text.text.split("\n"),a=1;a<t.length;a++){var n=t[a].split(","),o=new l;o.id=Number(n[0]),o.name=n[1],o.percent=Number(n[2]);for(var i=3;i<n.length;i++)o.level_percent.push(Number(n[i]));e.push(o),this.lianzhao_hash.set(n[1],o)}},t.prototype.show_user_ka_1=function(e){var t=this.user_ka,a=this.user_ka_node;switch(e){case u.user_ka:t=this.user_ka,a=this.user_ka_node;break;case u.user_hand:t=this.user_hand_ka,a=this.user_hand_ka_node}for(var n=function(e){a[e]?(t[e].id=e,a[e].node.getComponent(h.default).user_ka_tween(t.length,!0)):r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ka,o.user_ka_parent,o.type,t[e],-1,function(n){a.push(n),t[e].id=e,n.node.getComponent(h.default).user_ka_tween(t.length,!0)})},o=this,i=0;i<t.length;i++)n(i)},t.prototype.init=function(e,t){var a=this;this.node.getChildByName("mask").getComponent(cc.Sprite).enabled=!0;for(var n=this.select_ka_node_parent.children,o=function(e){cc.resources.load("image/lianzhao/fangpai_weifangru",cc.SpriteFrame,function(t,a){t?console.error("\u653e\u5165\u56fe\u7247\u51fa\u9519",t):n[e].getComponent(cc.Sprite).spriteFrame=a})},i=0;i<n.length;i++)o(i);cc.find("Canvas/money_node").active=!0,this.node.active=!0,this.my_time.node.parent.active=!1,this.my_select_zhenfa_bool=!1,this.ds_select_zhenfa_bool=!1,this.lun=t,this.unschedule(this.suoxiao_window),this.zhenfa_xuanze.scale=1,this.xianshou_sprite.spriteFrame=1==e?this.xianshou_image:this.houshou_image,this.lun_label.string=this.lun.toString(),this.lun_label.node.parent.active=!1,r.conMager.getInstance().playAudioEff(r.KEY.audioName.dijilun),this.lun_pan.scale=1,cc.tween(this.lun_pan).to(.2,{scaleX:0},{easing:"quadOut"}).call(function(){a.lun_label.node.parent.active=!0}).to(.2,{scaleX:1},{easing:"quadIn"}).delay(.5).call(function(){a.my_time.node.parent.active=!0,a.type=s.get_ka,a.game_type_show(),a.get_zhenfa(),a.xuanzhong=a.select_ka_zhenfa[0],a.ds_zhenfa(e),a.jishi(30,a.type),a.show_ka_number(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.chuxianpai)}).start()},t.prototype.get_zhenfa=function(){var e=this;this.zhenfa_name=[],this.select_ka_zhenfa=[];for(var t=[],a=0;a<c.zhenfa_enum.wulei+1;a++)t.push(c.zhenfa_enum[a]);var n=[];for(a=0;a<3;a++){var o=Math.floor(Math.random()*(c.zhenfa_enum.wulei+1-a)),i=this.use_zhenfa_map.get(t[o]),s=this.get_level(i.attr,i.name),l=new c.zhenfa_data(a,i.name,i.ch_name,i.attr,s);n.push(l),t.splice(o,1)}var d=function(t){p.zhenfa_name.push(n[t].name),p.select_ka_zhenfa.push(n[t]);var a=p.xuanzhong;null==a&&(a=p.select_ka_zhenfa[0]),p.select_ka_array[t]?(p.select_ka_array[t].data=n[t],p.select_ka_array[t].node.getComponent(h.default).init_data(p.select_ka_array[t].data,a.id),p.select_ka_array[t].type=u.select_ka):r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ka,p.pai_parent,p.type,n[t],a.id,function(a){e.select_ka_array[t]=a,e.select_ka_array[t].type=u.select_ka})},p=this;for(a=0;a<n.length;a++)d(a);this.chongsui_bool=!0,this.scheduleOnce(function(){e.chongsui_bool=!1},1)},t.prototype.ds_zhenfa=function(){for(var e=0;e<this.player_zhenfa.length;e++)if(this.game_joiner[e+1].cos==c.joiner_enum.ai){for(var t=Math.floor(Math.random()*(c.zhenfa_enum.wulei+1)),a=c.zhenfa_enum[t],n=this.use_zhenfa_map.get(a),o=this.get_level(n.attr,n.name),i=!1,s=0;s<this.player_zhenfa[e].length;s++)if(this.player_zhenfa[e][s].name==n.name){i=!0,this.player_zhenfa[e][s].level+=o;break}if(1==i)break;var r=new c.zhenfa_data(this.zhenfa_id,a,n.ch_name,n.attr,o);this.zhenfa_id++,this.player_zhenfa[e].push(r)}},t.prototype.delect_zhenfa=function(){return!1},t.prototype.jishi=function(e,t){var a=this;if(this.type==t){var n=e.toString();if(n.length<2&&(n="0"+n),this.my_time.string="00:"+n,e<=0)switch(console.error("\u5012\u8ba1\u65f6\u7ed3\u675f\u5566\uff01\uff01\uff01\uff01\uff01"),this.type){case s.get_ka:this.on_get_zhenfa();break;case s.select_ka:if(0==this.hecheng_finish){var o=function(){1==a.hecheng_finish&&(a.on_select_zhenfa(!0),a.unschedule(o))};this.schedule(o,2)}else this.on_select_zhenfa(!0)}else this.scheduleOnce(function(){e--,a.jishi(e,t)},1)}},t.prototype.get_level=function(e,t){var a=1;switch(t){case"wanning":a=this.lun*this.wanning,this.map.set("wanning",a);break;case"bagua":a=this.lun*this.bagua,this.map.set("bagua",a);break;case"sijiao":this.lun%2==0?(a=this.sijiao+1,this.map.set("sijiao",a)):a=this.map.get("sijiao");break;case"kedi":this.lun>3&&this.lun%2==0?(a+=this.kedi,this.map.set("kedi",a)):a=this.map.get("kedi");break;case"wulei":a=this.lun*this.wulei,this.map.set("wulei",a);break;case"fenlie":a=this.lun*this.fenlie,this.map.set("fenlie",a);break;case"xueyuyingsha":this.lun>2&&this.lun%2!=0?(a=this.xueyuyingsha+1,this.map.set("xueyuyingsha",a)):a=this.map.get("xueyuyingsha");break;case"dusha":a=this.lun*this.dusha,this.map.set("dusha",a);break;case"kunlong":a=this.lun*this.kunlong,this.map.set("kunlong",a)}return this.level_correct(t,a)},t.prototype.level_correct=function(e,t){for(var a=this.lianzhao_hash.get(e),n=0,o=0;o<a.level_percent.length;o++)n+=a.level_percent[o];var i=Math.random()*n,s=-3,r=0;for(o=0;o<a.level_percent.length;o++)if(i<(r+=a.level_percent[o])){s+=o;break}return t+=s,(t=Math.floor(t))<1&&(t=1),t},t.prototype.start_game_ma=function(){var e=this,t=function(){e.type=s.select_ka,e.game_type_show();for(var t=0;t<e.user_ka_node.length;t++)e.user_hand_ka_node[t]=e.user_ka_node[t],e.user_hand_ka[t]=e.user_ka[t];e.user_ka_node=[];var a=function(t){e.user_use_ka[t]&&r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhenfa_ka,e.user_ka_parent,e.type,e.user_use_ka[t],-1,function(a){e.user_use_ka_node[t]=a;var n=e.kapai_move_node[t].convertToWorldSpaceAR(cc.v2(0,0)),o=e.user_ka_parent.convertToNodeSpaceAR(n);e.user_use_ka_node[t].node.setPosition(o)})};for(t=0;t<e.user_use_ka.length;t++)a(t);for(t=0;t<e.user_hand_ka.length;t++){e.user_hand_ka_node[t].node.getComponent(h.default).init_type(e.type);for(var n=0;n<e.user_use_ka.length;n++)if(e.user_use_ka[n]&&e.user_hand_ka[t].name==e.user_use_ka[n].name){e.user_hand_ka.splice(t,1),r.conMager.getInstance().putPoolNode(r.KEY.poolName.zhenfa_ka,e.user_hand_ka_node[t].node),e.user_hand_ka_node.splice(t,1),t--;break}}e.arrage_hand_ka(),e.show_ka_number(),e.my_time.node.parent.active=!0,e.my_select_zhenfa_bool=!1,e.jishi(60,e.type),r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,cc.find("Canvas"),"\u9009\u62e9\u8be5\u56de\u5408\u4f7f\u7528\u7684\u9635\u6cd5")};r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,cc.find("Canvas"),"\u7b49\u5f85\u5bf9\u65b9\u9009\u62e9");var a=2*Math.random()+1;this.scheduleOnce(function(){t()},a)},t.prototype.game_type_show=function(){switch(this.type){case s.user_ka:this.lun_node.active=!0,this.zhenfa_xuanze.active=!1,this.user_ka_parent.active=!1,this.select_zhenfa_node.active=!1,this.max_ka_label.node.active=!1;break;case s.get_ka:this.lun_node.active=!1,this.user_ka_parent.active=!0,this.zhenfa_xuanze.active=!0,this.select_zhenfa_node.active=!1,this.max_ka_label.node.active=!0;break;case s.select_ka:this.lun_node.active=!1,this.user_ka_parent.active=!0,this.zhenfa_xuanze.active=!1,this.select_zhenfa_node.active=!0,this.max_ka_label.node.active=!0}},t.prototype.on_get_zhenfa=function(){var e=this;if(1!=this.chongsui_bool){var t=function(){r.GameDataStorage.gameStateData.userZhenFaName=e.xuanzhong.name,e.my_select_zhenfa_bool=!0,e.my_time.node.parent.active=!1,e.add_ka(e.xuanzhong,function(){e.put_get_ka(),e.start_game_ma(!0)}),cc.tween(e.zhenfa_xuanze).to(.5,{scale:0},{easing:"backOut"}).start()};if(this.user_ka.length<5)t();else{for(var a=!1,n=0;n<this.user_ka.length;n++)if(this.user_ka[n].name==this.xuanzhong.name){t(),a=!0;break}1==a&&r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,cc.find("Canvas"),"\u6700\u591a\u9009\u53d65\u5f20\u5361\u724c"),this.start_game_ma(!0)}r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),cc.find("Canvas/money_node").active=!1}},t.prototype.on_select_zhenfa=function(e){for(var t=this,a=!1,n=0;n<this.user_use_ka.length;n++)if(this.user_use_ka[n]){a=!0;break}if(0!=a||1==e){1==e&&(0==a&&(this.user_use_ka[0]=this.user_ka[0]),r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,cc.find("Canvas"),"\u9009\u53d6\u65f6\u95f4\u5230"));var o=function(){t.my_select_zhenfa_bool=!0,t.user_use_ka[0]||(t.user_use_ka[0]=t.user_use_ka[1],t.user_use_ka[1]=null),t.callback(t.user_use_ka),t.init_all_data(),r.conMager.getInstance().putPoolNode(r.KEY.poolName.jineng_xuanze,t.node)};1==e?this.scheduleOnce(function(){o()},1):o()}else r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,cc.find("Canvas"),"\u6ca1\u6709\u9009\u62e9\u5361\u724c")},t.prototype.init_all_data=function(){for(var e=0;e<this.select_ka_array.length;e++)this.select_ka_array[e]&&r.conMager.getInstance().putPoolNode(r.KEY.poolName.zhenfa_ka,this.select_ka_array[e].node);for(this.select_ka_array=[],e=0;e<this.user_ka_node.length;e++)this.user_ka_node[e]&&r.conMager.getInstance().putPoolNode(r.KEY.poolName.zhenfa_ka,this.user_ka_node[e].node);for(e=0;e<this.user_hand_ka_node.length;e++)this.user_hand_ka_node[e]&&r.conMager.getInstance().putPoolNode(r.KEY.poolName.zhenfa_ka,this.user_hand_ka_node[e].node);for(this.user_hand_ka_node=[],e=0;e<this.user_use_ka_node.length;e++)this.user_use_ka_node[e]&&r.conMager.getInstance().putPoolNode(r.KEY.poolName.zhenfa_ka,this.user_use_ka_node[e].node);this.user_use_ka_node=[],this.user_ka_node=[],this.user_use_ka=[],this.ds_use_ka=[],this.ds_ka=[],this.user_ka=[],this.ka_jineng=[],this.xuanzhong=null,this.ds_select_zhenfa_bool=!1,this.my_select_zhenfa_bool=!1,this.select_ka_zhenfa=[],this.lun=0,this.chongsui_bool=!0,this.kapai_move_node=[],this.lianzhao_hash=new Map([]),this.user_hand_ka=[],this.put_all_ka()},t.prototype.put_all_ka=function(){for(var e=this.pai_parent.children,t=0;t<e.length;t++)r.conMager.getInstance().putPoolNode(r.KEY.poolName.zhenfa_ka,e[t]);var a=this.user_ka_parent.children;for(t=0;t<a.length;t++)r.conMager.getInstance().putPoolNode(r.KEY.poolName.zhenfa_ka,a[t])},t.prototype.add_ka=function(e,t){for(var a=this,n=!1,o=function(o){if(e.name==i.user_ka[o].name){n=!0;var s=i.select_ka_array[e.id],c=s.node.convertToWorldSpaceAR(cc.v2(0,0));i.select_ka_array[e.id].node.parent=i.user_ka_parent;var l=i.user_ka_parent.convertToNodeSpaceAR(c);s.node.setPosition(l),s.node.getComponent(h.default).show_select(-1);var d=s.node.getPosition().sub(i.user_ka_node[o].node.getPosition()).div(2);return i.hecheng_finish=!1,cc.tween(s.node).to(.15,{position:cc.v3(d.x,d.y)},{easing:"quadIn"}).call(function(){a.user_ka[o].level+=e.level,a.user_ka_node[o].node.getComponent(h.default).show_data(),r.conMager.getInstance().getPoolNode(r.KEY.poolName.ka_heti,a.user_ka_parent,function(){a.hecheng_finish=!0,a.arrange_ka(),a.show_user_ka_1(u.user_ka),r.conMager.getInstance().putPoolNode(r.KEY.poolName.zhenfa_ka,s.node),a.scheduleOnce(function(){t()},.5)},d)}).start(),cc.tween(i.user_ka_node[o].node).to(.15,{position:cc.v3(d.x,d.y)},{easing:"quadIn"}).start(),"break"}},i=this,s=0;s<this.user_ka.length&&"break"!==o(s);s++);if(0==n){for(s=0;s<this.select_ka_array.length;s++)if(s==this.xuanzhong.id){this.user_ka_node.push(this.select_ka_array[s]),this.select_ka_array[s].node.parent=this.user_ka_parent,this.select_ka_array.splice(s,1);break}this.user_ka.push(e),this.arrange_ka(),this.show_user_ka_1(u.user_ka),t&&t()}},t.prototype.del_ka=function(e){if(this.user_ka.length<2){if(r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,cc.find("Canvas"),"\u81f3\u5c11\u9700\u8981\u6301\u67091\u5f20\u724c"),this.user_hand_ka_node[e.id])this.user_hand_ka_node[e.id].node.getComponent(h.default).user_ka_tween(),this.user_hand_ka_node[e.id].node.getComponent(h.default).ready_delect(!1);else{for(var t=0,a=0;a<this.user_use_ka.length;a++)e.name==this.user_use_ka[a].name&&(t=this.user_use_ka[a].id);this.user_use_ka_node[t].node.getComponent(h.default).user_ka_tween(),this.user_use_ka_node[t].node.getComponent(h.default).ready_delect(!1)}r.conMager.getInstance().playAudioEff(r.KEY.audioName.cuowu_ka)}else{for(a=0;a<this.user_ka.length;a++)if(e.name==this.user_ka[a].name){this.user_ka.splice(a,1);for(var n=0;n<this.user_hand_ka.length;n++)e.name==this.user_hand_ka[n].name&&(this.user_hand_ka.splice(n,1),r.conMager.getInstance().putPoolNode(r.KEY.poolName.zhenfa_ka,this.user_hand_ka_node[n].node),this.user_hand_ka_node.splice(n,1));for(n=0;n<this.user_use_ka.length;n++)this.user_use_ka[n]&&e.name==this.user_use_ka[n].name&&(this.user_use_ka.splice(n,1),r.conMager.getInstance().putPoolNode(r.KEY.poolName.zhenfa_ka,this.user_use_ka_node[n].node),this.user_use_ka_node.splice(n,1));break}this.arrange_ka(),this.arrage_hand_ka(),this.show_ka_number()}},t.prototype.arrange_ka=function(){for(var e=0;e<this.user_ka.length;e++)this.user_ka[e].id=e},t.prototype.arrage_hand_ka=function(){for(var e=0;e<this.user_hand_ka.length;e++)this.user_hand_ka[e].id=e,this.user_hand_ka_node[e].node.getComponent(h.default).user_ka_tween(this.user_hand_ka.length)},t.prototype.put_get_ka=function(){for(var e=0;e<this.select_ka_array.length;e++)r.conMager.getInstance().putPoolNode(r.KEY.poolName.zhenfa_ka,this.select_ka_array[e].node);this.select_ka_array=[]},t.prototype.on_chongsui=function(){1!=this.chongsui_bool&&(r.GameDataStorage.getUser().userData.money<100?r.conMager.getInstance().getPoolNode(r.KEY.poolName.gold_buzu_panel,cc.find("Canvas")):(r.conMager.getInstance()._msgAtion.emit("updateMoney",-100),this.get_zhenfa(),0==this.xuanzhong.id&&(this.xuanzhong=this.select_ka_zhenfa[0])),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn))},t.prototype.xuanzhong_zhenfa=function(e){this.xuanzhong=e.data;for(var t=0;t<this.select_ka_array.length;t++)this.select_ka_array[t].node.getComponent(h.default).show_select(this.xuanzhong.id)},t.prototype.move_emit=function(e){for(var t=!1,a=e.node.convertToWorldSpaceAR(cc.v2(0,0)),n=0;n<this.kapai_move_node.length;n++){var o=this.kapai_move_node[n].convertToWorldSpaceAR(cc.v2(0,0)),i=Math.abs(a.x-o.x),s=Math.abs(a.y-o.y);if(i<=e.node.width/2+this.kapai_move_node[n].width/2&&s<=e.node.height/2+this.kapai_move_node[n].height/2){switch(t=!0,n){case 0:this.sure_in_select_node(0);break;case 1:this.sure_in_select_node(1);break;case 2:e.node.getComponent(h.default).ready_delect(!0)}break}}for(n=0;n<this.kapai_move_node.length&&1!=t;n++)switch(n){case 0:case 1:this.sure_in_select_node(-1);break;case 2:e.node.getComponent(h.default).ready_delect(!1)}},t.prototype.up_emit=function(e){for(var t=!1,a=e.node.convertToWorldSpaceAR(cc.v2(0,0)),n=0;n<this.kapai_move_node.length;n++){var o=this.kapai_move_node[n].convertToWorldSpaceAR(cc.v2(0,0)),i=Math.abs(a.x-o.x),s=Math.abs(a.y-o.y);if(i<=e.node.width/2+this.kapai_move_node[n].width/2&&s<=e.node.height/2+this.kapai_move_node[n].height/2)switch(t=!0,n){case 0:this.use_ka(0,e.data);break;case 1:this.use_ka(1,e.data);break;case 2:this.del_ka(e.data)}if(1==t)break}0==t&&this.un_use_ka(e.data)},t.prototype.use_ka=function(e,t){var a=1;if(this.user_use_ka[e]&&(a=this.user_use_ka[e].name==t.name?0:2),0==a){var n=this.kapai_move_node[e].convertToWorldSpaceAR(cc.v2(0,0)),o=this.user_ka_parent.convertToNodeSpaceAR(n);this.user_use_ka_node[e].node.setPosition(o)}else if(1==a){var i=this.user_hand_ka[t.id],s=this.user_hand_ka_node[t.id],r=!1;if(i&&i.name==t.name||(r=!0),1==r){if(i=this.user_use_ka[0],s=this.user_use_ka_node[0],this.user_use_ka[0]=this.user_use_ka[1],this.user_use_ka_node[0]=this.user_use_ka_node[1],this.user_use_ka[1]=i,this.user_use_ka_node[1]=s,this.user_use_ka[1]){var c=this.kapai_move_node[1].convertToWorldSpaceAR(cc.v2(0,0)),h=this.user_ka_parent.convertToNodeSpaceAR(c);this.user_use_ka_node[1].node.setPosition(h)}if(this.user_use_ka[0]){var u=this.kapai_move_node[0].convertToWorldSpaceAR(cc.v2(0,0)),l=this.user_ka_parent.convertToNodeSpaceAR(u);this.user_use_ka_node[0].node.setPosition(l)}}else this.user_use_ka[e]=i,this.user_use_ka_node[e]=s,this.user_hand_ka.splice(t.id,1),this.user_hand_ka_node.splice(t.id,1),n=this.kapai_move_node[e].convertToWorldSpaceAR(cc.v2(0,0)),o=this.user_ka_parent.convertToNodeSpaceAR(n),this.user_use_ka_node[e].node.setPosition(o)}else if(2==a){var d=this.user_hand_ka_node[t.id],p=this.user_hand_ka[t.id];if(p&&p.name==t.name){var g=this.user_use_ka_node[e];this.user_hand_ka.splice(t.id,1),this.user_hand_ka_node.splice(t.id,1),this.user_hand_ka.push(g.data),this.user_hand_ka_node.push(g),this.user_use_ka[e]=t,this.user_use_ka_node[e]=d,n=this.kapai_move_node[e].convertToWorldSpaceAR(cc.v2(0,0)),o=this.user_ka_parent.convertToNodeSpaceAR(n),this.user_use_ka_node[e].node.setPosition(o)}else i=this.user_use_ka[0],s=this.user_use_ka_node[0],this.user_use_ka[0]=this.user_use_ka[1],this.user_use_ka_node[0]=this.user_use_ka_node[1],this.user_use_ka[1]=i,this.user_use_ka_node[1]=s,this.user_use_ka[1]&&(c=this.kapai_move_node[1].convertToWorldSpaceAR(cc.v2(0,0)),h=this.user_ka_parent.convertToNodeSpaceAR(c),this.user_use_ka_node[1].node.setPosition(h)),this.user_use_ka[0]&&(u=this.kapai_move_node[0].convertToWorldSpaceAR(cc.v2(0,0)),l=this.user_ka_parent.convertToNodeSpaceAR(u),this.user_use_ka_node[0].node.setPosition(l))}this.arrage_hand_ka()},t.prototype.un_use_ka=function(e){r.conMager.getInstance().playAudioEff(r.KEY.audioName.put_out_ka);for(var t=0;t<this.user_use_ka.length;t++)this.user_use_ka[t]&&this.user_use_ka[t].name==e.name&&(this.user_hand_ka.push(e),this.user_hand_ka_node.push(this.user_use_ka_node[t]),this.user_use_ka[t]=null,this.user_use_ka_node[t]=null);this.arrage_hand_ka()},t.prototype.show_ka_number=function(){this.max_ka_label.string=this.user_ka.length+"/"+this.max_ka},t.prototype.sure_in_select_node=function(e){for(var t=function(e,t){var a="wei";1==e&&(a="yi");var n="image/lianzhao/fangpai_"+a+"fangru";cc.resources.load(n,cc.SpriteFrame,function(e,a){e?console.error("\u653e\u5165\u56fe\u7247\u51fa\u9519",e):t.getComponent(cc.Sprite).spriteFrame=a})},a=this.select_ka_node_parent.children,n=0;n<this.ka_jineng.length;n++)1==this.ka_jineng[n]?t(!0,a[n]):t(e==n,a[n])},t.prototype.start=function(){var e=this;this.node.on("xuanze_ka",function(t){var a=t.getUserData();e.xuanzhong_zhenfa(a),t.stopPropagation()}),r.conMager.getInstance()._msgAtion.on("move",this.move_emit,this),r.conMager.getInstance()._msgAtion.on("up",this.up_emit,this)},t.prototype.on_test_ka=function(){console.log("\u770b\u4e0b\u6574\u4f53\u662f\u5565"),console.log("\u5168\u90e8\u724c",this.user_ka),console.log("\u624b\u724c",this.user_hand_ka),console.log("\u4f7f\u7528\u724c",this.user_use_ka),window.tt||(console.log("___________________________________________"),console.log("\u5168\u90e8\u724c",this.user_ka_node),console.log("\u624b\u724c",this.user_hand_ka_node),console.log("\u4f7f\u7528\u724c",this.user_use_ka_node))},i([g({type:cc.TextAsset,tooltip:"\u8fde\u62db\u7684\u6570\u636e\u6587\u4ef6"})],t.prototype,"lianzhao_text",void 0),i([g({type:cc.Label,tooltip:"\u6211\u7684\u65f6\u95f4"})],t.prototype,"my_time",void 0),i([g({type:cc.Node,tooltip:"\u7b2c\u51e0\u8f6e\u7684\u8282\u70b9"})],t.prototype,"lun_node",void 0),i([g({type:cc.Label,tooltip:"\u6bcf\u8f6e\u7684\u5b57"})],t.prototype,"lun_label",void 0),i([g({type:cc.Node,tooltip:"\u724c\u8282\u70b9"})],t.prototype,"pai_parent",void 0),i([g({type:cc.Node,tooltip:"\u76d8"})],t.prototype,"lun_pan",void 0),i([g({type:cc.Node,tooltip:"\u9635\u6cd5\u7a97"})],t.prototype,"zhenfa_xuanze",void 0),i([g({type:cc.Node,tooltip:"\u4e0a\u6280\u80fd\u754c\u9762"})],t.prototype,"select_zhenfa_node",void 0),i([g({type:cc.Sprite,tooltip:"\u5148\u540e\u624b"})],t.prototype,"xianshou_sprite",void 0),i([g({type:cc.SpriteFrame,tooltip:"\u5148\u624b\u56fe"})],t.prototype,"xianshou_image",void 0),i([g({type:cc.SpriteFrame,tooltip:"\u540e\u624b\u56fe"})],t.prototype,"houshou_image",void 0),i([g({type:cc.Node,tooltip:"\u73a9\u5bb6\u6301\u6709\u5361\u7684\u8282\u70b9"})],t.prototype,"user_ka_parent",void 0),i([g({type:cc.Node,tooltip:"\u653e\u5165\u76842\u4e2a\u4f4d\u7f6e"})],t.prototype,"select_ka_node_parent",void 0),i([g({type:cc.Node,tooltip:"\u5783\u573e\u6876"})],t.prototype,"lajitong_node",void 0),i([g({type:cc.Label,tooltip:"\u5361\u724c\u6570\u91cflabel"})],t.prototype,"max_ka_label",void 0),i([p],t)}(r.winRootNode);a.default=_,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../game_manager/class_manager":"class_manager","./zhenfa_ka":"zhenfa_ka"}],jingdian:[function(e,t,a){"use strict";cc._RF.push(t,"4584alIspdMza7mdzZy+y1l","jingdian");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../class_manager"),r=e("../model_joiner"),c=cc._decorator,h=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cos=s.joiner_enum.model,t}return o(t,e),t.prototype.model_small_round_win=function(){return!0},t.prototype.init_game_mode=function(){},t.prototype.init=function(){},t.prototype.init_ui=function(){},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(){return!0},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return!0},t.prototype.one_win=function(){return!0},i([h],t)}(r.default));a.default=u,cc._RF.pop()},{"../class_manager":"class_manager","../model_joiner":"model_joiner"}],join_create_room:[function(e,t,a){"use strict";cc._RF.push(t,"833df9LJiJCUZQv5z/SPOaM","join_create_room");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_title=void 0,t.editBox=void 0,t.btn_confrim=void 0,t.btn_cancle=void 0,t.rootNode=void 0,t.confrimCb=null,t}return o(t,e),t.prototype.onLoad=function(){var e=this;this.btn_confrim.on("touchstart",function(){return e.confrimCb&&e.confrimCb(e.editBox.string)}),this.btn_cancle.on("touchstart",function(){return e.close()})},t.prototype.onEnable=function(){this.rootNode.setScale(0),cc.tween(this.rootNode).to(.3,{scale:1},{easing:"sineIn"}).start()},t.prototype.createRoomId=function(){for(var e=Date.now().toString(36),t=0;t<4;t++)e+=Math.ceil(Math.random()*Math.pow(10,4)).toString(36);return e},t.prototype.close=function(){var e=this;cc.tween(this.rootNode).to(.3,{scale:0},{easing:"sineIn"}).call(function(){e.node.active=!1}).start()},t.prototype.initView=function(e,t){this.label_title.string=1==e?"\u521b\u5efa\u623f\u95f4":"\u52a0\u5165\u623f\u95f4",this.confrimCb=t},t.prototype.init=function(){console.log("------------asdfasdfasdf")},i([c(cc.Label)],t.prototype,"label_title",void 0),i([c(cc.EditBox)],t.prototype,"editBox",void 0),i([c(cc.Node)],t.prototype,"btn_confrim",void 0),i([c(cc.Node)],t.prototype,"btn_cancle",void 0),i([c(cc.Node)],t.prototype,"rootNode",void 0),i([r],t)}(cc.Component);a.default=h,cc._RF.pop()},{}],juehu_shou:[function(e,t,a){"use strict";cc._RF.push(t,"dad97swWPdG16VGoLuLrWs1","juehu_shou");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shou=null,t.chess_parent=null,t.guang=null,t}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(e){var t=this;this.scheduleOnce(function(){s.conMager.getInstance().playAudioEff("juehu2")},.9);var a=e[0],n=a.convertToWorldSpaceAR(cc.v2(0,0)),o=this.node.parent.convertToNodeSpaceAR(n);this.node.setPosition(o),a.parent=this.chess_parent,a.setPosition(0,0),cc.tween(a).delay(.42).by(.3,{position:cc.v3(0,22),scale:.6}).delay(.3).call(function(){a.destroy()}).start();var i=this.shou.setAnimation(0,"animation",!1);this.shou.setTrackCompleteListener(i,function(){s.conMager.getInstance().putPoolNode(s.KEY.poolName.juehu_shou,t.node)}),this.guang.setAnimation(0,"animation",!1)},t.prototype.onClose=function(){},t.prototype.onClear=function(){},i([h({type:sp.Skeleton,tooltip:"\u624b\u52a8\u753b"})],t.prototype,"shou",void 0),i([h({type:cc.Node,tooltip:"\u68cb\u5b50\u7236\u8282\u70b9"})],t.prototype,"chess_parent",void 0),i([h({type:sp.Skeleton,tooltip:"\u5149\u52a8\u753b"})],t.prototype,"guang",void 0),i([c],t)}(s.winRootNode);a.default=u,cc._RF.pop()},{"../../../../../SSSGF/ssscgf":"ssscgf"}],juehun_shou:[function(e,t,a){"use strict";cc._RF.push(t,"1c4b9H15XlIX5fiOY+LGVUa","juehun_shou");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callback=null,t.pos=[],t.isjude=!0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;this.node.opacity=255,this.node.zIndex=4;var a=e[0].pos;this.pos=a;var n=e[0].state,o=46*a[0],i=46*a[1];this.node.setPosition(o,i);var r=1;-1==n?r=1:1==n?r=2:-2==n?r=5:2==n?r=4:3==n&&(r=6),this.scheduleOnce(function(){s.conMager.getInstance().playAudioEff("juehu2")},.9);var c=this.node.getComponent(sp.Skeleton);c.setSkin("qi"+r),c.setAnimation(0,"animation",!1),c.setCompleteListener(function(){t.scheduleOnce(function(){t.onClose(1)},.1)})},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf"}],juehu:[function(e,t,a){"use strict";cc._RF.push(t,"3b04fb8bS9LErzbmpqbevRp","juehu");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/ssscgf"),r=e("../class_manager"),c=e("../game_manager"),h=e("../zhenfa_joiner"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_number_max=1,t.use_number=0,t}return o(t,e),t.prototype.use_zhenfa=function(e){return e!=this.my_player&&this.data,this.judge_use()},t.prototype.use_zhenfa_finish=function(){return!0},t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.board=e},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(e){return e==this.my_player||this.judge_use()},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return this.use_number=0,!0},t.prototype.one_win=function(){return!0},t.prototype.judge_use=function(){var e=this.judge_active();return 0==e&&0==(e=this.judge_destroy())&&0==(e=this.judge_number())&&this.show_juehu(),e},t.prototype.judge_destroy=function(){for(var e=[],t=0;t<this.chess_array.length;t++)for(var a=0;a<this.chess_array[t].length;a++)this.chess_array[t][a].chess_data&&this.chess_array[t][a].chess_data.state!=this.my_player.state&&e.push(this.chess_array[t][a]);var n=255-10*this.data.level;return e.length<2?(c.game_manager.get_zhenfa_event(this.my_player,this.data),!0):!(e.length>n)},t.prototype.show_juehu=function(){this.use_number++;var e=!1;this.my_player.cos==r.joiner_enum.player?(e=!0,s.conMager.getInstance().playAudioEff("nan/nanjuehu")):s.conMager.getInstance().playAudioEff("nv/nvjuehu"),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.board.ui_parent,{fileName:"juehu",ani_name:"animation",cb:this.juehu_zhen.bind(this),is_user:e})},t.prototype.juehu_zhen=function(){for(var e=this,t=[],a=0;a<this.chess_array.length;a++)for(var n=0;n<this.chess_array[a].length;n++)this.chess_array[a][n].chess_data&&this.chess_array[a][n].chess_data.state!=this.my_player.state&&t.push(this.chess_array[a][n]);var o=255-10*this.data.level;if(t.length<2)c.game_manager.get_zhenfa_event(this.my_player,this.data);else{o<1&&(o=1);var i=t.length-o;for(a=0;a<t.length;a++)for(n=0;n<t.length;n++)if(t[a].chess_data.id>t[n].chess_data.id){var r=t[a];t[a]=t[n],t[n]=r}var h=1.8/i,u=function(a){l.scheduleOnce(function(){var n=cc.v2(t[a].board_pos.x,t[a].board_pos.y),o=cc.instantiate(t[a].chess_data.node);o.parent=e.board.chess_parent,setTimeout(function(){s.conMager.getInstance().getPoolNode(s.KEY.poolName.juehu_shou,e.board.up_effect,o)}),c.game_manager.zhenfa_delect_chess(n,!0),1==a&&e.scheduleOnce(function(){c.game_manager.get_zhenfa_event(e.my_player,e.data)},2)},a*h)},l=this;for(a=i;a>0;a--)u(a)}},i([l],t)}(h.default));a.default=d,cc._RF.pop()},{"../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../zhenfa_joiner":"zhenfa_joiner"}],jxmc_jixie:[function(e,t,a){"use strict";cc._RF.push(t,"98fdeyHBNhH44Ums4QDP4X3","jxmc_jixie");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chess_parent=null,t.shadow=null,t.black_chess=null,t.white_chess=null,t.callback=null,t.block=46,t.start_pos=cc.v2(-46,-46),t.all_chess=[],t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){this.node.setPosition(e[0]),this.node.opacity=255,this.shadow.active=!0;var t=e[1];e[2](),this.callback=e[3],this.new_chess(t),this.run_angle()},t.prototype.onClose=function(){throw new Error("Method not implemented.")},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.new_chess=function(e){this.node.angle=0;for(var t=0;t<e.length;t++)for(var a=0;a<e[t].length;a++)if(0!=e[t][a]){var n=null;switch(e[t][a]){case-1:n=this.black_chess;break;case 1:n=this.white_chess}var o=cc.instantiate(n);o.parent=this.chess_parent;var i=this.start_pos.x+this.block*t,s=this.start_pos.y+this.block*a;o.setPosition(i,s),this.all_chess.push(o)}},t.prototype.run_angle=function(){var e=this;cc.tween(this.node).call(function(){cc.tween(e.shadow).to(.5,{scale:2}).start(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.jxmc_up)}).to(.5,{scale:1.3}).delay(.15).call(function(){for(var t=0;t<e.all_chess.length;t++)cc.tween(e.all_chess[t]).by(.5,{angle:90}).start();s.conMager.getInstance().playAudioEff(s.KEY.audioName.jxmc_angle)}).by(.5,{angle:-90}).delay(.15).call(function(){cc.tween(e.shadow).to(.5,{scale:1}).start(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.jxmc_down)}).to(.5,{scale:1}).call(function(){e.shadow.active=!1,e.callback()}).call(function(){for(var t=0;t<e.all_chess.length;t++)e.all_chess[t].destroy();e.all_chess=[],s.conMager.getInstance().putPoolNode(s.KEY.poolName.jxmc_jixie,e.node)}).start()},t.prototype.start=function(){},i([h({type:cc.Node,tooltip:"\u68cb\u5b50\u7236\u8282\u70b9"})],t.prototype,"chess_parent",void 0),i([h({type:cc.Node,tooltip:"\u9634\u5f71"})],t.prototype,"shadow",void 0),i([h({type:cc.Prefab,tooltip:"\u9ed1\u5b50"})],t.prototype,"black_chess",void 0),i([h({type:cc.Prefab,tooltip:"\u767d\u5b50"})],t.prototype,"white_chess",void 0),i([c],t)}(s.winRootNode);a.default=u,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf"}],ka_heti:[function(e,t,a){"use strict";cc._RF.push(t,"7ad91Xt+PRK2q3YjAV27Ss7","ka_heti");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){this.node.zIndex=cc.macro.MAX_ZINDEX,this.node.setPosition(e[1]),this.guangzhao(e[0])},t.prototype.onClose=function(){throw new Error("Method not implemented.")},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.start=function(){},t.prototype.guangzhao=function(e){var t=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.ronghe_ka);var a=this.node.getComponent(sp.Skeleton),n=a.setAnimation(0,"a-1",!1);a.setTrackCompleteListener(n,function(){e(),s.conMager.getInstance().putPoolNode(s.KEY.poolName.ka_heti,t.node)})},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf"}],kedi_num:[function(e,t,a){"use strict";cc._RF.push(t,"fa86f+FdglF1LQBueFujsFr","kedi_num");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callback=null,t.isjude=!1,t.num=0,t.new_num=0,t.sum=0,t._vector=-1,t.labelText=null,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;this.isjude=!1,this.sum=0,this.node.zIndex=99,this.new_num=0,this.kedi_action(e[0].is_user,e[0].zhenFaName),s.conMager.getInstance()._msgAtion.on("del_kedinum",function(){t.onClose(1)},this),s.conMager.getInstance()._msgAtion.on("updateNum",function(e){t.new_num=t.num-e;var a=Math.ceil(e/30);t._vector=-a,console.log("\u8f93\u51fa\u4e00\u4e0bnum2:",e,t.num),t.new_num<=1&&(t.new_num=1),t.isjude=!0},this)},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.kedi_action=function(e,t){var a=new cc.Node,n=s.GameDataStorage.gameStateData.ds_zhenfalevel;console.log("\u662f\u8c01\u7684\u514b\u654c\u732e\u796d:",e,t),e?(a=this.node.getChildByName("user"),"guiyuan"==t&&(a=this.node.getChildByName("ds")),n=s.GameDataStorage.gameStateData.userZhenFaLevel):(a=this.node.getChildByName("ds"),"guiyuan"==t&&(a=this.node.getChildByName("user")));var o=a.getChildByName("num1").getComponent(cc.Label);this.labelText=o,"kedi"==t?this.num=5+n:(this.num=5-n,this.num<=1&&(this.num=1)),o.string=""+this.num;var i=-(40*(a.childrenCount-1)+o.node.width/2)/2;a.active=!0;for(var r=function(e){var t=a.children[e];t.active=!1,c.scheduleOnce(function(){t.scale=4,t.x=i,t.y=-65,t.active=!0,t.runAction(cc.scaleTo(.2,1)),i+=40,a.children[e+1]&&"num1"==a.children[e+1].name&&(i+=o.node.width/2),"num1"==t.name&&(i+=o.node.width/2,t.y=-55)},.1*e)},c=this,h=0;h<a.childrenCount;h++)r(h)},t.prototype.update=function(){this.isjude&&(this.sum+=1,this.sum%2==0&&(this.num+=this._vector,this.num<=this.new_num&&(this.num=this.new_num,this.isjude=!1),this.labelText.string=""+this.num))},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf"}],kedi:[function(e,t,a){"use strict";cc._RF.push(t,"8d4b65KvEJBSoCaAbtSNO0N","kedi");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/ssscgf"),r=e("../class_manager"),c=e("../game_manager"),h=e("../zhenfa_joiner"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_number_max=1,t.use_number=0,t}return o(t,e),t.prototype.use_zhenfa=function(){return!0},t.prototype.use_zhenfa_finish=function(){return!0},t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.board=e},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(){return!0},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return this.use_number=0,!0},t.prototype.one_win=function(e){if(e.player!=this.my_player){var t=this.judge_active();return 0==t&&0==(t=this.judge_number())&&0==(t=this.judge_use(e))&&(console.log("\u5c55\u793a\u514b\u654c"),this.show_kedi()),!1}return!0},t.prototype.judge_use=function(e){for(var t=!0,a=c.game_manager.win_chess_number+this.data.level,n=0;n<e.player.zhenfa_array.length;n++)"guiyuan"==e.player.zhenfa_array[n].data.name&&(a-=e.player.zhenfa_array[n].data.level);return a>e.chess_array.length&&(t=!1),t},t.prototype.show_kedi=function(){var e=this;this.use_number++;var t=!1;this.my_player.cos==r.joiner_enum.player?(t=!0,s.conMager.getInstance().playAudioEff("nan/nankedi")):s.conMager.getInstance().playAudioEff("nv/nvkedi"),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.board.ui_parent,{fileName:"kedi",ani_name:"animation",cb:function(){c.game_manager.get_win_event(e.my_player,!1,e.data)},is_user:t})},i([l],t)}(h.default));a.default=d,cc._RF.pop()},{"../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../zhenfa_joiner":"zhenfa_joiner"}],kunlongkuang:[function(e,t,a){"use strict";cc._RF.push(t,"2da4e2SS3FIVIGP+9LVivvT","kunlongkuang");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.icon=null,t.wu=null,t.guang=null,t.guangNode=null,t.wu_map=[],t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this,a=e[0].level,n=e[0].pos_list;this.node.getChildByName("long").getComponent(sp.Skeleton).setAnimation(0,"1",!1),this.initMiWu(),e[0].bool&&this.node.setPosition(cc.v2(-322,-322)),this.node.zIndex=1,this.state=e[0].state;for(var o=[],i=0;i<15;i++)for(var r=0;r<15;r++)0==n[i][r]&&(o=[i,r],this.wu_map[i][r].destroy(),this.wu_map[i][r]=null);if(1==a){var c=cc.instantiate(this.guang);c.parent=this.node,c.x=46*o[0],c.y=46*o[1],this.guangNode=c,this.guangNode.opacity=150}this.scheduleOnce(function(){e[0].callBack()},1.2),s.conMager.getInstance()._msgAtion.on("del_kunlongkuang",function(e){if(console.log("\u4e3a\u5565\u4e0d\u6d88\u5931\uff1f",t.state,e),t.state==e){for(var a=0;a<15;a++)for(var n=0;n<15;n++)null!=t.wu_map[a][n]&&t.wu_map[a][n].destroy();t.guangNode&&t.guangNode.destroy(),t.onClose(1)}},this),s.conMager.getInstance()._msgAtion.on("action_kunlongkuang",function(e){t.state!=e&&cc.tween(t.node).to(.15,{opacity:155}).to(.15,{opacity:255}).start()},this),s.conMager.getInstance()._msgAtion.on("del_guang",function(){t.guangNode.active=!1},this)},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.initMiWu=function(){for(var e=this.node.getChildByName("wu_parent"),t=0;t<15;t++){this.wu_map[t]=[];for(var a=0;a<15;a++){this.wu_map[t][a]=null;var n=cc.instantiate(this.wu);n.parent=e,n.setPosition(46*t,46*a),n.opacity=0,n.width=90,n.height=90,cc.tween(n).to(.7,{opacity:240}).start(),this.wu_map[t][a]=n}}},t.prototype.start=function(){},i([h(cc.Node)],t.prototype,"icon",void 0),i([h(cc.Prefab)],t.prototype,"wu",void 0),i([h(cc.Prefab)],t.prototype,"guang",void 0),i([c],t)}(s.winRootNode);a.default=u,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf"}],kunlong:[function(e,t,a){"use strict";cc._RF.push(t,"155928Gd7FDeanWihH0szM5","kunlong");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/ssscgf"),r=e("../class_manager"),c=e("../game_manager"),h=e("../zhenfa_joiner"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_number_max=1,t.use_number=0,t.kunlong_pos_x=[],t.kunlong_pos_y=[],t.kunlong_pos=[],t}return o(t,e),t.prototype.use_zhenfa=function(){return!0},t.prototype.use_zhenfa_finish=function(){return!0},t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.board=e},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(e){if(e==this.my_player){var t=this.judge_active();return 0==t&&0==(t=this.judge_number())&&this.show_kunlong(),t}return this.end_kunlong(),!0},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return this.use_number=0,!0},t.prototype.one_win=function(){return!0},t.prototype.show_kunlong=function(){this.use_number++;var e=!1;this.my_player.cos==r.joiner_enum.player?(e=!0,s.conMager.getInstance().playAudioEff("nan/nankunlong")):s.conMager.getInstance().playAudioEff("nv/nvkunlong"),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.board.ui_parent,{fileName:"kunlong",ani_name:"animation",cb:this.kunlong_zhen.bind(this),is_user:e})},t.prototype.kunlong_zhen=function(){var e=this,t=15-this.data.level;t<=1&&(t=1);for(var a=[],n=0;n<15;n++){this.kunlong_pos[n]=[];for(var o=0;o<15;o++){this.kunlong_pos[n][o]=2;var i=[n,o];if(a.push(i),14==n&&14==o){console.error("\u56f0\u9f99\u7684\u8303\u56f4",t);var r=s.NumberUtil.randomNum(0,a.length-1),h=a[r];if(t<=1)this.kunlong_pos[h[0]][h[1]]=0,s.conMager.getInstance().getPoolNode(s.KEY.poolName.kunlongkuang,this.board.up_effect,{bool:!0,pos:h,level:t,state:this.my_player.state,pos_list:this.kunlong_pos,callBack:function(){c.game_manager.get_zhenfa_event(e.my_player,e.data)}});else{console.log("\u5565\u6837\u7684",a,",",r);var u=a[r],l=Math.floor(t/2),d=u[0],p=u[1];console.log("\u662f\u591a\u5c113:",d,p,l);var g=d-t;g<0&&(d+=Math.abs(g),g=0);var _=g+(t-1);_>14&&(d-=Math.abs(_-14),_=14);var m=p+t;m>14&&(p-=Math.abs(m-14),m=14);var f=m-(t-1);f<0&&(p+=Math.abs(f),f=0);for(var y=t*t,v=0,b=m,S=g,N=0;N<y;N++)S<=14&&S>=0&&(this.kunlong_pos[S][b]=0),S+=1,this.kunlong_pos_x.push(S),this.kunlong_pos_y.push(b),(v+=1)==t&&(v=0,b-=1,S=g);var w=[g,f];s.conMager.getInstance().getPoolNode(s.KEY.poolName.kunlongkuang,this.board.up_effect,{bool:!0,pos:w,level:t,state:this.my_player.state,pos_list:this.kunlong_pos,callBack:function(){c.game_manager.get_zhenfa_event(e.my_player,e.data)}})}}}}for(n=0;n<this.kunlong_pos.length;n++)for(o=0;o<this.kunlong_pos[n].length;o++)0!=this.kunlong_pos[n][o]&&(this.chess_array[n][o].kunlong_player=this.my_player)},t.prototype.end_kunlong=function(){s.conMager.getInstance()._msgAtion.emit("del_kunlongkuang",-this.my_player.state);for(var e=0;e<this.kunlong_pos.length;e++)for(var t=0;t<this.kunlong_pos[e].length;t++)0!=this.kunlong_pos[e][t]&&(this.chess_array[e][t].kunlong_player=null);this.kunlong_pos=[]},i([l],t)}(h.default));a.default=d,cc._RF.pop()},{"../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../zhenfa_joiner":"zhenfa_joiner"}],level_view:[function(e,t,a){"use strict";cc._RF.push(t,"c7ffeRNUDxDJ7CQ9Z/g5w2X","level_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/getDataFromServer"),c=e("../../utils/platform"),h=e("../../utils/as_util"),u=e("../../utils/commonFunction"),l=e("../../SSSGF/dataController/DATA"),d=e("../../pvp/script/global"),p=cc._decorator,g=p.ccclass,_=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callBack=null,t.gameType=0,t.jindutiao=null,t.judge=!1,t.isOne=!0,t.Node=null,t.dzNode=null,t.is_sheng=!1,t.vector=.01,t.experience_vector=0,t.experience_count=0,t.jd_win_score=0,t.jd_lose_score=0,t.dz_result_score=0,t.dz_start_score=0,t.jiFenNum=void 0,t.addLabel=void 0,t.satrtLabelAction=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){if(s.conMager.getInstance().playAudioEff("xingxing"),this.Node=this.node.getChildByName("Node"),this.dzNode=this.node.getChildByName("dzNode"),this.gameType==l.game_type.jingdian||this.gameType==l.game_type.lianjiduiyi?this.initUi():this.initData(),c.platform.now_platform!=c.platform_type.is_tt){h.as_util.show_banner();var e=this.node.getChildByName("btn_return");e.active=!1,this.scheduleOnce(function(){e.active=!0},c.platform.data.time_fanhui)}},t.prototype.onClose=function(e){this.node.getChildByName("Node"),r.getDataFromServer.setUserData(s.GameDataStorage.getUser().userData,function(){});var t=s.GameDataStorage.gameStateData.gameType;if(-1!=t){if(5==t)s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_game_view);else if(t==l.game_type.lianjiduiyi)s.conMager.getInstance().hideWinNode(s.KEY.UIName.pvp_game_view);else{var a=s.KEY.UIName.jd_game_view;t==l.game_type.dazhao?a=s.KEY.UIName.dazhao_game_view:t==l.game_type.sanren&&(a=s.KEY.UIName.sanren_view),s.conMager.getInstance().hideWinNode(a)}var n=s.GameDataStorage.gameStateData.reward_gold;if(s.conMager.getInstance().hideWinNode(s.KEY.UIName.game_board),console.log("\u51ed\u4ec0\u4e48",e),2==e){var o=s.GameDataStorage.getUser().userData.money;console.log("\u5c3c\u739b",o,",",s.GameDataStorage.gameStateData.admission_gold),o>=s.GameDataStorage.gameStateData.admission_gold?this.scaleSmallHide(this.node,cc.v3(0,0),function(){if(s.GameDataStorage.gameStateData.game_mode&&s.conMager.getInstance().showWinNode(s.KEY.UIName.game_board,cc.find("Canvas")),5==t)s.conMager.getInstance().showWinNode(s.KEY.UIName.luandou_game_view,null,{reward_gold:n,gameType:t});else if(t==l.game_type.lianzhao)console.log("\u5b9e\u529b\u6309\u7167\u561b"),s.conMager.getInstance().hideWinNode(s.KEY.UIName.level_view),s.conMager.getInstance().getPoolNode(s.KEY.poolName.item1,null,{callBack:function(){s.conMager.getInstance().showWinNode(s.KEY.UIName.lianzhao_view,cc.find("Canvas"),{reward_gold:n,gameType:t,RightRate:d.default.RightRate})}});else{l.game_type.lianjiduiyi==t&&(t=l.game_type.jingdian);var e=s.KEY.UIName.jd_game_view;t==l.game_type.dazhao?e=s.KEY.UIName.dazhao_game_view:t==l.game_type.sanren&&(e=s.KEY.UIName.sanren_view),s.conMager.getInstance().getPoolNode(s.KEY.poolName.item1,null,{callBack:function(){s.conMager.getInstance().showWinNode(e,cc.find("Canvas"),{reward_gold:n,gameType:t,RightRate:d.default.RightRate})}})}s.conMager.getInstance().hideWinNode(s.KEY.UIName.level_view)}):s.conMager.getInstance().getPoolNode(s.KEY.poolName.gold_buzu_panel,null,null)}else 1==e&&(s.conMager.getInstance().hideWinNode(s.KEY.UIName.level_view),5==t?s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,null,{gameType:t}):t==l.game_type.lianzhao?s.conMager.getInstance().showWinNode(s.KEY.UIName.slectGmae,null,null):s.conMager.getInstance().showWinNode(s.KEY.UIName.slectGmae,null,{gameType:t}));c.platform.now_platform!=c.platform_type.is_tt&&(h.as_util.show_nativeType(),h.as_util.hide_banner())}else s.conMager.getInstance().hideWinNode(s.KEY.UIName.level_view)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){this.gameType=s.GameDataStorage.gameStateData.gameType},t.prototype.updateJDData=function(){var e=s.GameDataStorage.getUser().userData;this.jd_data=s.UpdataRankData.getRankByScoreJD(e.jd_score),this.jd_score=s.UpdataRankData.get_jd_level_score(e.jd_score)},t.prototype.initData=function(){var e=this,t=s.GameDataStorage.getUser().userData;if(this.gameType==l.game_type.jingdian||this.gameType==l.game_type.lianjiduiyi)this.updateJDData(),this.Node.active=!0,0==s.GameDataStorage.gameStateData.who_sucess?(s.GameDataStorage.getUser().userData.jd_lianSheng++,this.jd_win_score=s.UpdataRankData.win_jd_game(t.jd_score,s.GameDataStorage.gameStateData.ds_score,t.jd_lianSheng),this.initJingDiaAnim(1)):1==s.GameDataStorage.gameStateData.who_sucess?(s.GameDataStorage.getUser().userData.jd_lianSheng=0,this.jd_lose_score=s.UpdataRankData.fail_jd_game(t.jd_score,s.GameDataStorage.gameStateData.ds_score),this.initJingDiaAnim(0)):this.initJingDiaAnim(2);else if(this.gameType==l.game_type.dazhao||this.gameType==l.game_type.lianzhao||this.gameType==l.game_type.sanren){var a="dz_score";this.gameType==l.game_type.lianzhao&&(a="lz_score"),this.gameType==l.game_type.sanren&&(a="sr_score"),this.dzNode.active=!0,this.dzNode.scale=0,this.dzNode.runAction(cc.sequence(cc.scaleTo(.35,1.4),cc.scaleTo(.15,1),cc.callFunc(function(){e.jiFenNum.node.opacity=255,e.startDZLabelAction()})));var n=this.dzNode.getChildByName("spineNode").getComponent(sp.Skeleton);this.jiFenNum=this.dzNode.getChildByName("jiFenNum").getComponent(cc.Label),this.addLabel=this.dzNode.getChildByName("addLabel").getComponent(cc.Label),this.jiFenNum.string=t[""+a].toString(),this.jiFenNum.node.opacity=0,this.addLabel.node.opacity=0,this.dz_start_score=t[""+a],n.setToSetupPose(),n.clearTracks(),console.log("----------------------\u7ed3\u679c:",s.GameDataStorage.gameStateData.who_sucess),0==s.GameDataStorage.gameStateData.who_sucess?(n.addAnimation(1,"b-hong",!0,0),this.dz_result_score=s.UpdataRankData.win_dz_game(t[""+a],s.GameDataStorage.gameStateData.ds_score),this.addLabel.string="+"+this.dz_result_score):1==s.GameDataStorage.gameStateData.who_sucess?(this.dz_result_score=-s.UpdataRankData.fail_dz_game(t[""+a],s.GameDataStorage.gameStateData.ds_score),this.addLabel.string=""+this.dz_result_score,n.addAnimation(1,"b-hui",!0,0)):(n.addAnimation(1,"b-lv",!0,0),this.dz_result_score=0,this.addLabel.string="+0"),t[""+a]+=this.dz_result_score,t[""+a]<0&&(t[""+a]=0),s.GameDataStorage.preserveGameData()}},t.prototype.initJingDianView=function(){var e=this.Node.getChildByName("kuang"),t=e.getChildByName("zi"),a=e.getChildByName("level"),n=this.Node.getChildByName("chenghao"),o="level_icon/duanwei/";u.commonFunction.updateSprite(o+"duan_"+this.jd_data.duan_wei,e),u.commonFunction.updateSprite(o+"duanzi_"+this.jd_data.duan_wei,t),u.commonFunction.updateSprite(o+"num_"+this.jd_data.duan_wei+"/"+["c","e","s","si","wu","liu","qi","ba","jiu"][this.jd_data.duan_wei]+this.jd_data.deng_ji,a),u.commonFunction.updateSprite(o+"chenghao/zi"+(this.jd_data.duan_wei+1),n)},t.prototype.initJingDiaAnim=function(e){var t=this,a=this.Node.getChildByName("jinyan_num").getComponent(cc.RichText);if(this.initJingDianView(),1==e){var n=s.UpdataRankData.getRankByScoreJD(s.GameDataStorage.getUser().userData.jd_score+this.jd_win_score);this.jd_score=s.UpdataRankData.get_jd_level_score(s.GameDataStorage.getUser().userData.jd_score+this.jd_win_score),s.GameDataStorage.getUser().userData.jd_score+=this.jd_win_score,n.duan_wei>this.jd_data.duan_wei?this.jinDuTiaoAction(1,function(){t.shengduan()}):n.deng_ji<this.jd_data.deng_ji?this.jinDuTiaoAction(1,function(){t.shengJi()}):this.jinDuTiaoAction(s.GameDataStorage.getUser().userData.jd_score/this.jd_score.levelNeedScore,function(){t.action()})}else if(0==e){if(n=s.UpdataRankData.getRankByScoreJD(s.GameDataStorage.getUser().userData.jd_score-this.jd_lose_score),this.jd_score=s.UpdataRankData.get_jd_level_score(s.GameDataStorage.getUser().userData.jd_score-this.jd_lose_score),s.GameDataStorage.getUser().userData.jd_score-=this.jd_lose_score,s.GameDataStorage.getUser().userData.jd_score<0&&(s.GameDataStorage.getUser().userData.jd_score=0),0==s.GameDataStorage.getUser().userData.jd_score)return this.action(),this.updateJDData(),a.string="<color=#FBD10A>"+s.GameDataStorage.getUser().userData.jd_score+"/</c><color=#FFFFFF>"+this.jd_score.levelNeedScore+"</color>",void s.GameDataStorage.preserveGameData();n.duan_wei<this.jd_data.duan_wei?this.jinDuTiaoAction(0,function(){t.duanWeiBianHua(),t.jindutiao.fillRange=1,t.dengJiBianHua()}):n.deng_ji>this.jd_data.deng_ji?this.jinDuTiaoAction(0,function(){t.jindutiao.fillRange=1,t.dengJiBianHua()}):this.jinDuTiaoAction(s.GameDataStorage.getUser().userData.jd_score/this.jd_score.levelNeedScore,function(){t.action()})}else this.action();this.updateJDData(),s.GameDataStorage.getUser().userData.jd_score=Math.floor(s.GameDataStorage.getUser().userData.jd_score),a.string="<color=#FBD10A>"+s.GameDataStorage.getUser().userData.jd_score+"/</c><color=#FFFFFF>"+this.jd_score.levelNeedScore+"</color>",s.GameDataStorage.preserveGameData()},t.prototype.jinDuTiaoAction=function(e,t){cc.tween(this.jindutiao).to(.3,{fillRange:e},{easing:"sineIn"}).call(function(){t&&t()}).start()},t.prototype.shengduan=function(){var e=this.Node.getChildByName("kuang").getChildByName("shengji").getComponent(sp.Skeleton);e.node.active=!0;var t="animation";this.jd_data.duan_wei>0&&this.jd_data.duan_wei<8&&(t+=this.jd_data.duan_wei+1),e.setToSetupPose(),e.clearTracks(),e.addAnimation(1,t,!1,0),e.setTrackCompleteListener(e.getCurrent(1),function(){e.clearTrack(1),e.node.active=!1}),this.shengJi(),this.duanWeiBianHua()},t.prototype.shengJi=function(){this.jindutiao.fillRange=.75,this.dengJiBianHua()},t.prototype.duanWeiBianHua=function(){var e=this.Node.getChildByName("chenghao");cc.tween(e).to(.4,{scale:2.5},{easing:"sineOut"}).to(.2,{scale:1},{easing:"sineIn"}).start();var t=this.Node.getChildByName("kuang").getChildByName("zi");cc.tween(t).to(.4,{scale:2.5},{easing:"sineOut"}).to(.2,{scale:1},{easing:"sineIn"}).start()},t.prototype.dengJiBianHua=function(){var e=this,t=this.Node.getChildByName("kuang").getChildByName("level");cc.tween(t).to(.4,{scale:2.5},{easing:"sineOut"}).call(function(){e.initJingDianView()}).to(.2,{scale:1},{easing:"sineIn"}).call(function(){e.jinDuTiaoAction(s.GameDataStorage.getUser().userData.jd_score/e.jd_score.levelNeedScore,function(){e.action()})}).start()},t.prototype.initUi=function(){var e=this;this.gameType=s.GameDataStorage.gameStateData.gameType,(this.gameType==l.game_type.jingdian||this.gameType==l.game_type.lianjiduiyi)&&(this.updateJDData(),this.jindutiao=this.Node.getChildByName("jindutiao").getComponent(cc.Sprite),this.Node.getChildByName("jinyan_num").getComponent(cc.RichText).string="<color=#FBD10A>"+s.GameDataStorage.getUser().userData.jd_score+"/</c><color=#FFFFFF>"+this.jd_score.levelNeedScore+"</color>",this.jindutiao.fillRange=s.GameDataStorage.getUser().userData.jd_score/this.jd_score.levelNeedScore,this.initJingDianView());var t=this.Node.getChildByName("kuang");s.GameDataStorage.preserveGameData(),t.scale=0,s.conMager.getInstance().playAudioEff("tiao"),t.runAction(cc.sequence(cc.scaleTo(.35,1.4),cc.scaleTo(.15,1),cc.callFunc(function(){e.initData()})))},t.prototype.restart_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),console.log("\u786e\u5b9e\u5355\u51fb\u4e86"),window.tt&&s.GameDataStorage.gameStateData.gameType==l.game_type.lianzhao&&s._pl_fun.getInstance().add_reportAnalytics("event_LianZhaoMoshiZaiLaiYiCiClickNumber"),this.onClose(2)},t.prototype.return_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1),c.platform.now_platform!=c.platform_type.is_vivo&&c.platform.now_platform!=c.platform_type.is_topon||h.as_util.back_ui()},t.prototype.action=function(){this.Node.getChildByName("jinyan").runAction(cc.fadeIn(.2)),this.Node.getChildByName("jinyan_num").runAction(cc.fadeIn(.2)),this.moveShow(this.node.getChildByName("btn_restart"),cc.v3(0,-400),null)},t.prototype.startDZLabelAction=function(){var e=this;cc.tween(this.addLabel.node).to(.3,{opacity:180,scale:3},{easing:"sineOut"}).to(.1,{opacity:255,scale:1},{easing:"sineIn"}).delay(.3).call(function(){e.satrtLabelAction=!0}).start()},t.prototype.updateLabel=function(e){this.dz_result_score+=e,this.dz_start_score-=e,this.dz_start_score<=0&&(this.dz_start_score=0,this.satrtLabelAction=!1,this.action()),this.jiFenNum.string=""+this.dz_start_score},t.prototype.update=function(){this.satrtLabelAction&&(this.dz_result_score>0?(this.dz_result_score-2<0&&this.updateLabel(-1),this.updateLabel(-2)):this.dz_result_score<0?(this.dz_result_score+2>0&&this.updateLabel(1),this.updateLabel(2)):(this.action(),this.satrtLabelAction=!1))},i([g],t)}(s.winRootNode));a.default=_,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../pvp/script/global":"global","../../utils/as_util":"as_util","../../utils/commonFunction":"commonFunction","../../utils/getDataFromServer":"getDataFromServer","../../utils/platform":"platform"}],lianzhao_view:[function(e,t,a){"use strict";cc._RF.push(t,"cb3da0YOGJLDb6COpNRaD7U","lianzhao_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=e("../../classCon/configSurface"),h=e("../wuziqi/Piece"),u=e("../../utils/platform"),l=e("../../SSSGF/dataController/DATA"),d=e("../../utils/commonFunction"),p=e("../wuziqi/dazhao/dazhao_GameBoard"),g=e("../common/chessClass"),_=cc._decorator,m=_.ccclass,f=_.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item1=null,t.item2=null,t.item3=null,t.gameType=1,t.dsName_string="",t.dsName_label_item2=null,t.dsLevel_label_item2=null,t.dsHeadIcon_item2=null,t.userLevel_label_item2=null,t.userName_label_item2=null,t.userHeadIcon_item2=null,t.user_headPanel=null,t.ds_headPanel=null,t.ds_headIcon=null,t.user_headIcon=null,t.reward_gold=2,t.multiple=0,t.chess_parent=null,t.shubiao_node=null,t.max_gameTime=30,t.ds_headIconIndex=0,t.board=null,t.whiteChess=null,t.blackChess=null,t.quan=null,t.hongDian=null,t.zhenfa_ui=null,t.my_time=null,t.ds_time=null,t.zhenfa_xuanze=null,t.xianshou_sprite=null,t.xianshou_image=null,t.houshou_image=null,t.my_wenhao=null,t.ds_wenhao=null,t.lun_node=null,t.lun_label=null,t.pai_parent=null,t.lun_pan=null,t.lianzhao_mask=null,t.wanning=1,t.bagua=1,t.sifang=1,t.kedi=1,t.wulei=1,t.fenlie=1,t.xueyu=1,t.block=46,t.userGameTime=0,t.count_down=null,t.userChess=h.BLACKCHESS,t.is_game_over=!1,t.count_time_itm3=10,t.jiabei_num_item3=0,t.whiePool=new cc.NodePool,t.blackPool=new cc.NodePool,t.RightRate=1,t.TimeDel=!1,t.zhenfa_name=[],t.xuanzhong=0,t.ds_select_zhenfa_bool=!1,t.my_select_zhenfa_bool=!1,t.level=0,t.user_level=0,t.ds_level=0,t.xianshou=!1,t.diyicixiaqi=!0,t.on_fanpai=!1,t.lun=0,t.map=new Map([["wanning",t.wanning],["wulei",t.wulei],["kedi",t.kedi],["bagua",t.bagua],["fenlie",t.fenlie],["sifang",t.sifang],["xueyu",t.xueyu]]),t.suoxiao_window=null,t.chess_num=0,t.interval=!0,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t.luozizhong=null,t.quan_judge=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){console.log("\u8fdb\u6765\u4e86"),r._pl_fun.getInstance().startCreateVideo(),this.reward_gold=e[0].reward_gold,r.GameDataStorage.gameStateData.reward_gold=this.reward_gold,this.gameType=e[0].gameType,r.GameDataStorage.gameStateData.gameType=this.gameType;var t=e[0].RightRate;this.update_ai_RightRate(t),2==this.gameType&&(this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1),this.initGame(),this.node.runAction(cc.fadeIn(.5)),u.platform.now_platform!=u.platform_type.is_tt&&(this.node.getChildByName("luping").active=!1),this.hongDian.zIndex=99},t.prototype.onClose=function(){this.unscheduleAllCallbacks(),this.board.removeListennner(),r.conMager.getInstance().hideWinNode(r.KEY.UIName.jd_game_view),r.conMager.getInstance().showWinNode(r.KEY.UIName.slectGmae,null,{gameType:this.gameType})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){var e=this;r.conMager.getInstance()._msgAtion.on("ai_renshu",this.ai_renshu,this),r.conMager.getInstance()._msgAtion.on("ai_diaoxian",this.ai_diaoxian,this),r.conMager.getInstance()._msgAtion.on("ai_shangxian",this.ai_shangxian,this),r.conMager.getInstance()._msgAtion.on("renshu",this.return_btn,this),r.conMager.getInstance()._msgAtion.on("pingju",this.pingju,this),r.conMager.getInstance()._msgAtion.on("shubiao",this.shubiao,this),r.conMager.getInstance()._msgAtion.on("qiuhe",this.qiuhe,this),r.conMager.getInstance()._msgAtion.on("huiqi",this.huiqi,this),r.conMager.getInstance()._msgAtion.on("closeSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1},this),r.conMager.getInstance()._msgAtion.on("openSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0},this),r.conMager.getInstance()._msgAtion.on("stopTimeDel",function(){e.TimeDel=!0,e.quan_judge=!1},this),r.conMager.getInstance()._msgAtion.on("startTimeDel",function(){e.TimeDel=!1,e.quan_judge=!0},this)},t.prototype.update_ai_RightRate=function(e){1==e?this.RightRate=.4:2==e?this.RightRate=.5:3==e?this.RightRate=.7:4==e?this.RightRate=.8:5==e&&(this.RightRate=.9)},t.prototype.change_zhenfa=function(e){var t=this;this.node.getChildByName("mask").getComponent(cc.Sprite).enabled=!0,cc.find("Canvas/money_node").active=!0,this.zhenfa_ui.active=!0,console.log("\u5c55\u793a\u5566\uff0c\u4e0d\u80fd\u70b9\uff01"),this.level++,this.lun++,this.lun>1&&(this.diyicixiaqi=!1),console.log("\u56de\u5408\u6570",this.lun),this.stopTime(),this.ds_select_zhenfa_bool=!1,this.my_select_zhenfa_bool=!1,this.my_time.node.parent.active=!0,this.ds_time.node.parent.active=!0,this.my_wenhao.getChildByName("know").active=!1,this.ds_wenhao.getChildByName("know").active=!1;for(var a=this.zhenfa_xuanze.children,n=0;n<a.length;n++)a[n].getChildByName("select").active=!1,a[n].getChildByName("name").active=!1,a[n].getChildByName("icon").active=!1,a[n].getChildByName("level").active=!1,a[n].getComponent(cc.Button).interactable=!1;a[0].getChildByName("select").active=!0,this.xuanzhong=0,this.unschedule(this.suoxiao_window),this.zhenfa_ui.getChildByName("node").scale=1,this.xianshou_sprite.spriteFrame=1==e?this.xianshou_image:this.houshou_image,this.xianshou=e,this.lun_node.active=!0,this.pai_parent.active=!1,this.lun_label.string=this.lun.toString(),this.lun_label.node.parent.active=!1,r.conMager.getInstance().playAudioEff(r.KEY.audioName.dijilun),this.lun_pan.scale=1,cc.tween(this.lun_pan).to(.2,{scaleX:0},{easing:"quadOut"}).call(function(){t.lun_label.node.parent.active=!0}).to(.2,{scaleX:1},{easing:"quadIn"}).delay(.5).call(function(){t.lun_node.active=!1,t.pai_parent.active=!0,t.get_zhenfa(),t.ds_zhenfa(e),t.jishi(30),r.conMager.getInstance().playAudioEff(r.KEY.audioName.chuxianpai)}).start()},t.prototype.get_zhenfa=function(){var e=this;this.on_fanpai=!1,this.zhenfa_name=[];for(var t=[],a=0;a<r.GameDataStorage.gameStateData.zhenFaName.length;a++)1!=this.delect_zhenfa(r.GameDataStorage.gameStateData.zhenFaName[a])&&t.push(a);var n=[];for(a=0;a<3;a++){var o=Math.floor(Math.random()*t.length);n.push(t[o]),t.splice(o,1)}var i=function(t){s.zhenfa_name.push(r.GameDataStorage.gameStateData.zhenFaName[n[t]]);var a=s.zhenfa_xuanze.children,o=a[t].getChildByName("icon").getComponent(cc.Sprite),i="image/zhenfa_icon/"+s.zhenfa_name[t];a[t].scaleX=1,s.scheduleOnce(function(){cc.tween(a[t]).to(.2,{scaleX:0},{easing:"quadOut"}).call(function(){r.conMager.getInstance().playAudioEff(r.KEY.audioName.fanpai),cc.resources.load(i,cc.SpriteFrame,function(e,t){e?console.error("\u8fde\u62db\u83b7\u53d6\u9635\u6cd5\u56fe\u6807\u5931\u8d25"):o.spriteFrame=t});var s=r.GameDataStorage.getUser().userData.zhenFaMap[e.zhenfa_name[t]].attr,c=e.get_level(s,e.zhenfa_name[t]);a[t].getChildByName("level").getChildByName("label").getComponent(cc.Label).string="lv."+c,a[t].getChildByName("name").getComponent(cc.Label).string=r.GameDataStorage.gameStateData.ch_zhenFaName[n[t]],a[t].getChildByName("name").active=!0,a[t].getChildByName("icon").active=!0,a[t].getChildByName("level").active=!0,console.log(9+t)}).to(.2,{scaleX:1},{easing:"quadIn"}).call(function(){t==n.length-1&&(e.on_fanpai=!0),a[t].getComponent(cc.Button).interactable=!0}).start()},.2*t)},s=this;for(a=0;a<n.length;a++)i(a)},t.prototype.ds_zhenfa=function(e){for(var t=this,a=!e,n=[],o=[],i=r.GameDataStorage.getUser().userData.zhenFaMap,s=0;s<r.GameDataStorage.gameStateData.zhenFaName.length;s++)if(1!=this.delect_zhenfa(r.GameDataStorage.gameStateData.zhenFaName[s])){var c=i[r.GameDataStorage.gameStateData.zhenFaName[s]];1==c.attr?n.push(r.GameDataStorage.gameStateData.zhenFaName[s]):2==c.attr&&o.push(r.GameDataStorage.gameStateData.zhenFaName[s])}var h="",u=Math.random();1==a?(console.log("\u5bf9\u65b9\u5148\u624b"),h=u<.8?n[Math.floor(Math.random()*n.length)]:o[Math.floor(Math.random()*o.length)]):(console.log("\u5bf9\u65b9\u540e\u624b"),h=u<.2?n[Math.floor(Math.random()*n.length)]:o[Math.floor(Math.random()*o.length)]);var l=4*Math.random()+2;this.scheduleOnce(function(){console.log("\u5bf9\u624b\u9009\u62e9\u5b8c\u6280\u80fd\u4e86"),t.ds_select_zhenfa_bool=!0,r.GameDataStorage.gameStateData.dsZhenFaName=h;var e=r.GameDataStorage.getUser().userData.zhenFaMap[h].attr,a=t.get_level(e,h);t.ds_level=a,r.GameDataStorage.gameStateData.ds_zhenfalevel=t.ds_level,t.ds_time.node.parent.active=!1,1==t.my_select_zhenfa_bool?t.scheduleOnce(function(){t.start_game_ma()},.7):t.start_game_ma()},l)},t.prototype.delect_zhenfa=function(e){return"meihua"==e||"juehu"==e||"guiyuan"==e||"chaoniu"==e||"qixing"==e},t.prototype.get_level=function(e,t){console.log("\u7b2c!!!!!!!!!!!!!!!!! "+this.lun+"  \u8f6e\uff01\uff01\uff01\uff01\uff01\uff01\uff01");var a=1;if(1==e)switch(a=1,t){case"kunlong":a=2}else switch(a=3,t){case"fenlie":case"kedi":a=1;break;case"juehu":a=3}switch(a*=this.lun,t){case"guiyuan":a=Math.floor(this.lun/5)+1}return a<1&&(a=1),Math.floor(a)},t.prototype.jishi=function(e){var t=this;if(1!=this.my_select_zhenfa_bool){var a=e.toString();a.length<2&&(a="0"+a),this.my_time.string="00:"+a,this.ds_time.string="00:"+a,e<=0?this.on_sure_zhenfa():this.scheduleOnce(function(){e--,t.jishi(e)},1)}},t.prototype.start_game_ma=function(e){var t=this;if(this.ds_select_zhenfa_bool&&this.my_select_zhenfa_bool){var a=function(){t.zhenfa_ui.active=!1,t.startTime(t.board.state),r.conMager.getInstance()._msgAtion.emit("del_kunlongkuang",t.board.state),r.conMager.getInstance()._msgAtion.emit("del_kunlongkuang",-t.board.state),t.board.front_com.initData(),t.xianshou?(console.log("\u73a9\u5bb6\u5148\u843d\u5b50"),t.board.myTurn=!0,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,t.node,"\u8f6e\u5230\u4f60\u843d\u5b50")):(console.log("ai\u5148\u843d\u5b50"),r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,t.node,"\u8f6e\u5230\u5bf9\u65b9\u843d\u5b50"),t.board.myTurn=!1,t.diyicixiaqi?(t.board.AIXianShou(),t.diyicixiaqi=!1):t.board.aiLuozi())};1==e?this.scheduleOnce(this.suoxiao_window=function(){a()},.7):a()}else 1==e&&r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u7b49\u5f85\u5bf9\u65b9\u9009\u62e9")},t.prototype.on_chongsui=function(){r.GameDataStorage.getUser().userData.money<100?r.conMager.getInstance().getPoolNode(r.KEY.poolName.gold_buzu_panel,cc.find("Canvas")):(r.conMager.getInstance()._msgAtion.emit("updateMoney",-100),this.get_zhenfa()),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn)},t.prototype.on_zhenfa=function(e,t){if(0!=this.on_fanpai){r.conMager.getInstance().playAudioEff(r.KEY.audioName.xuanpai),console.log("\u9009\u62e9\u9635\u6cd5");for(var a=Number(t),n=this.zhenfa_xuanze.children,o=0;o<n.length;o++)n[o].getChildByName("select").active=!1;n[a].getChildByName("select").active=!0,this.xuanzhong=a}},t.prototype.on_sure_zhenfa=function(){var e=this;r.GameDataStorage.gameStateData.userZhenFaName=this.zhenfa_name[this.xuanzhong],this.my_select_zhenfa_bool=!0,this.my_time.node.parent.active=!1;var t=r.GameDataStorage.getUser().userData.zhenFaMap[this.zhenfa_name[this.xuanzhong]].attr,a=this.get_level(t,this.zhenfa_name[this.xuanzhong]);r.GameDataStorage.gameStateData.userZhenFaLevel=a,this.user_level=a,this.start_game_ma(!0);var n=this.zhenfa_ui.getChildByName("node");cc.tween(n).to(.5,{scale:0},{easing:"backOut"}).call(function(){e.node.getChildByName("mask").getComponent(cc.Sprite).enabled=!1}).start(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),cc.find("Canvas/money_node").active=!1},t.prototype.chufa_jineng=function(e){e?this.my_wenhao.getChildByName("know").active=!0:this.ds_wenhao.getChildByName("know").active=!0},t.prototype.RadomZhenFa=function(e){for(var t=c.zhenFaWeight[e],a=0,n=0;n<r.GameDataStorage.gameStateData.zhenFaName.length;n++)a+=t[r.GameDataStorage.gameStateData.zhenFaName[n]];var o=Math.random()*a,i=0,s="wanning";for(n=0;n<r.GameDataStorage.gameStateData.zhenFaName.length;n++)if(o<(i+=t[r.GameDataStorage.gameStateData.zhenFaName[n]])){s=r.GameDataStorage.gameStateData.zhenFaName[n];break}return s},t.prototype.initDsZhenFa=function(){var e=r.GameDataStorage.gameStateData.userZhenFaName,t=this.RadomZhenFa(e);r.GameDataStorage.gameStateData.dsZhenFaName=t;var a=r.GameDataStorage.getUser().userData.zhenFaMap[e].level+5*[-1,1][s.NumberUtil.randomNum(0,1)];a<=3&&(a=3),console.error("\u521d\u59cb\u5316\u7b49\u7ea7\u4e86\uff1f\uff1f\uff1f\uff1f"),r.GameDataStorage.gameStateData.ds_zhenfalevel=a},t.prototype.initGame=function(){cc.find("Canvas/money_node").active=!1,r.GameDataStorage.gameStateData.chess_num=0,r.GameDataStorage.gameStateData.rewardmultiple=0,2==this.gameType&&this.initDsZhenFa(),this.initUi(),this.initData(),this.kaiChangDongHua(),this.node.getChildByName("heizi").active=!0,this.node.getChildByName("baizi").active=!0,this.node.getChildByName("baizi_label").active=!0,this.node.getChildByName("heizi_label").active=!0,this.board.init(this),this.node.getChildByName("mask").zIndex=99,this.initPool(this.whiePool,this.whiteChess),this.initPool(this.blackPool,this.blackChess)},t.prototype.initUi=function(){this.item1=this.node.getChildByName("item1"),this.item2=this.node.getChildByName("item2"),this.item3=this.node.getChildByName("item3"),this.dsLevel_label_item2=this.item2.getChildByName("left").getChildByName("dsLevel").getComponent(cc.Label),this.dsName_label_item2=this.item2.getChildByName("left").getChildByName("dsName").getComponent(cc.Label),this.userLevel_label_item2=this.item2.getChildByName("right").getChildByName("userLevel").getComponent(cc.Label),this.userName_label_item2=this.item2.getChildByName("right").getChildByName("userName").getComponent(cc.Label),this.user_headPanel=this.node.getChildByName("user_headPanel"),this.ds_headPanel=this.node.getChildByName("ds_headPanel"),this.ds_headIcon=this.node.getChildByName("ds_headIcon").getChildByName("ds_headIcon").getComponent(cc.Sprite),this.user_headIcon=this.node.getChildByName("user_headIcon").getChildByName("user_headIcon").getComponent(cc.Sprite),this.chess_parent=this.node.getChildByName("chess_parent"),this.shubiao_node=this.chess_parent.getChildByName("shubiao_node"),this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",this.count_down=this.node.getChildByName("count_down"),this.ds_headIcon.node.parent.active=!0,this.user_headIcon.node.parent.active=!0,this.node.getChildByName("heiqi").active=!0,this.node.getChildByName("baiqi").active=!0},t.prototype.initData=function(){var e=r.GameDataStorage.getUser().userData;this.userName_label_item2.string=e.gameName;var t=d.commonFunction.judgeGameLevelName(e.user_level);this.userLevel_label_item2.string=t;var a=c.XingMingData.xing,n=c.XingMingData.ming,o=d.commonFunction.randomGameName(a,n);this.dsName_label_item2.string=o,r.GameDataStorage.gameStateData.ds_name=o;var i=d.commonFunction.judgeAiLevel(e.user_level),h=d.commonFunction.judgeGameLevelName(i);this.dsLevel_label_item2.string=h;var u=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel"),l=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel");u.getChildByName("Name").getComponent(cc.Label).string=this.userName_label_item2.string,u.getChildByName("Level").getComponent(cc.Label).string=this.userLevel_label_item2.string,l.getChildByName("Name").getComponent(cc.Label).string=this.dsName_label_item2.string,l.getChildByName("Level").getComponent(cc.Label).string=this.dsLevel_label_item2.string,"null"!=r.GameDataStorage.getUser().userData.headIconUrl&&d.commonFunction.updateHttpSprite(r.GameDataStorage.getUser().userData.headIconUrl,this.user_headIcon.node);var p=s.NumberUtil.randomNum(1,60);this.ds_headIconIndex=p,r.GameDataStorage.gameStateData.ds_headIconIndex=this.ds_headIconIndex,console.log("\u5bf9\u624b\u7684\u5934\u50cf:",p);var g="head_icon/"+p;d.commonFunction.updateSprite(g,this.ds_headIcon.node);var _=this.node.getChildByName("game_info_parent");r.conMager.getInstance().getPoolNode(r.KEY.poolName.game_info,_,null)},t.prototype.initPool=function(e,t){for(var a=0;a<225;a++){var n=cc.instantiate(t);e.put(n)}},t.prototype.moveInChess=function(e,t,a,n){var o,i=this,s=r.GameDataStorage.gameStateData.chess_num;if(2==this.gameType||this.gameType==l.game_type.lianzhao)if(s>30){this.chess_num-=1;var c=2;s>100&&(c=10),s>150&&(c=15),this.chess_num%c==0&&r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi)}else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);this.stopTime(),this.startTime(-a),this.ai_duihua(1);var u=null,d=null;if(a==h.BLACKCHESS?(u=this.blackPool,d=this.blackChess):(u=this.whiePool,d=this.whiteChess),u.size()>0)o=u.get();else{var p=cc.instantiate(d);u.put(p),o=u.get()}var _=Math.floor(e/this.block),m=Math.floor(t/this.block),f=15*m+_;this.board.chess_map[f]=o,o.getChildByName("chess").getComponent("chess").pos=[_,m],o.x=e,o.y=t;var y=a;this.chess_parent.addChild(o),o.zIndex=1,n?a==this.userChess&&"fenlie"==r.GameDataStorage.gameStateData.userZhenFaName||a==-1*this.userChess&&"fenlie"==r.GameDataStorage.gameStateData.dsZhenFaName||(a==this.userChess&&"xueyuyingsha"==r.GameDataStorage.gameStateData.userZhenFaName?(console.log("\u6211\u65b9\u662f\u96ea\u57df\u9df9\u5ec8\u93ae"),o.scale=0):a==-1*this.userChess&&"xueyuyingsha"==r.GameDataStorage.gameStateData.dsZhenFaName?o.scale=0:this.chessAction(o,n)):this.chessAction(o,n);var v=new g.chessClass;v.id=this.board.sum,v.pos=[_,m],v.position=cc.v2(e,t),v.state=y,v.chessNode=o,this.board.juehu_chess_map[_][m]=v,this.board.juehu_sum+=1,2!=this.gameType&&this.gameType!=l.game_type.lianzhao&&this.scheduleOnce(function(){i.hongDian.active=!0,i.hongDian.setPosition(e,t+1)},.1)},t.prototype.chessAction=function(e,t){var a=this;e.scale=1.5,e.getChildByName("chess").zIndex=98,e.y+=80,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)),cc.callFunc(function(){if(t){var n=e.getChildByName("jn1");n.active=!0,a.scheduleOnce(function(){n.active=!1},1)}})))},t.prototype.ai_duihua=function(e,t){var a=this,n=this.node.getChildByName("ds_biaoqing"),o=this.node.getChildByName("ds_duihua"),i=0;if(1==e){if(!this.interval)return;if(this.interval=!1,this.scheduleOnce(function(){a.interval=!0},8),this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,10)<2&&(s.NumberUtil.randomNum(0,1)>0?(i=1,r.conMager.getInstance().playAudioEff("nv/nvqifeng")):(i=5,r.conMager.getInstance().playAudioEff("nv/nvhaoqi")))}else if(3==e)i=6,r.conMager.getInstance().playAudioEff("nv/nvhengaoxing");else{if(this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,100)<t&&(i=4,r.conMager.getInstance().playAudioEff("nv/nvkeyi"))}i>0&&(o.active=!0,n.active=!0,n.children[i].active=!0,o.children[i].active=!0,this.count_down.y>0&&(this.count_down.opacity=0),this.scheduleOnce(function(){a.count_down.opacity=255,n.children[i].active=!1,o.children[i].active=!1,n.active=!1,o.active=!1},2.2))},t.prototype.gameOver=function(){if(console.log("\u6e38\u620f\u501f\u5bbf:",this.is_game_over),!this.is_game_over&&(this.is_game_over=!0,this.stopTime(),3!=this.gameType&&(cc.find("Canvas/money_node").active=!0),this.userGameTime>30?this.userChess==this.board.state?(console.log("\u5bf9\u624b\u80dc\u5229"),this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,{whose_round:1}),r.GameDataStorage.gameStateData.who_sucess=1):(console.log("\u73a9\u5bb6\u80dc\u5229"),this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,{whose_round:0}),r.GameDataStorage.gameStateData.who_sucess=0):1==this.board.win||-1==this.board.win?this.userChess==this.board.win?(this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,{whose_round:0}),r.GameDataStorage.gameStateData.who_sucess=0):(this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,{whose_round:1}),r.GameDataStorage.gameStateData.who_sucess=1):(this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,{whose_round:2}),r.GameDataStorage.gameStateData.who_sucess=2),this.board.removeListennner(),2==this.gameType&&0==r.GameDataStorage.gameStateData.who_sucess)){var e=r.GameDataStorage.gameStateData.userZhenFaName;r._pl_fun.getInstance().add_reportAnalytics("event_"+e+"_VictoryNumbers")}},t.prototype.kaiChangDongHua=function(){var e=this;this.ds_headIcon.node.getComponent(cc.Button).interactable=!1,this.user_headIcon.node.getComponent(cc.Button).interactable=!1,r.conMager.getInstance().playAudioEff(r.KEY.audioName.kaiju),r.conMager.getInstance().getPoolNode(r.KEY.poolName.item2,this.node,{callBack:function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.item3,e.node,{callBack:function(){e.caixianshou()}})}})},t.prototype.caixianshou=function(){var e=this.node.getChildByName("heizi"),t=this.node.getChildByName("baizi"),a=this.node.getChildByName("baizi_label"),n=this.node.getChildByName("heizi_label"),o=!0;s.NumberUtil.randomNum(0,1)>0?(o=!1,this.userChess=h.WHITECHESS,this.gameType!=l.game_type.lianzhao&&r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!"),e.setPosition(-270,368),t.setPosition(182,-380),n.setPosition(-225,372),a.setPosition(225,-376)):(o=!0,this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.userChess=h.BLACKCHESS,this.gameType!=l.game_type.lianzhao&&r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"),t.setPosition(-270,368),e.setPosition(182,-380),a.setPosition(-225,372),n.setPosition(225,-376)),this.ai_duihua(3),e.active=!0,t.active=!0,a.active=!0,n.active=!0,this.board.addListenner(),this.change_zhenfa(o)},t.prototype.jiabeiAction=function(e,t){var a=this;this.reward_gold*=e,this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",r.GameDataStorage.gameStateData.reward=this.reward_gold,r.GameDataStorage.gameStateData.rewardmultiple*=e;var n="",o=-380;if(1==t)o=380,n=["nvbujiabei","nvjiabei","nvjiabei","nvchaojijiabei"][e-1];else{this.stopTime_item3(),this.multiple=1,n=["nanbujiabei","nanjiabei","nanbujiabei","nanchaojijiabei"][e-1];var i=this.item3.getChildByName("Node"),s=cc.callFunc(function(){a.item3.active=!1,a.user_headIcon.node.getComponent(cc.Button).interactable=!0,a.caixianshou()});cc.tween(i).sequence(cc.tween().to(.5,{position:cc.v3(0,1500)},{easing:"backIn"}),cc.delayTime(1),s).start()}r.conMager.getInstance().playAudioEff(n),r.conMager.getInstance().getPoolNode(r.KEY.poolName.jiabei,this.node,{pos:cc.v2(0,o),index:e})},t.prototype.jiabei_btn=function(e,t){if(r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),!(this.multiple>0)){var a=parseInt(t);this.jiabeiAction(a,2)}},t.prototype.dsHeadIcon_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!0},t.prototype.userHeadIcon_btn=function(){console.log("\u70b9\u51fb\u4e86\u554a"),this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!0},t.prototype.biaoQing_btn=function(e,t){var a=this;this.hide_userPenl_btn();var n=parseInt(t),o=this.node.getChildByName("user_biaoqing");o.active=!0,o.children[n].active=!0;var i=this.node.getChildByName("user_duihua");this.count_down.y<0&&(this.count_down.opacity=0),i.active=!0,i.children[n].active=!0,r.conMager.getInstance().playAudioEff("nan/"+this.musicNames[n-1]),this.scheduleOnce(function(){o.active=!1,o.children[n].active=!1,a.count_down.opacity=255,i.active=!1,i.children[n].active=!1},2.2)},t.prototype.hide_userPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!1},t.prototype.hide_dsPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!1},t.prototype.return_btn=function(){var e=this;console.log("\u70b9\u4e86\u8fd4\u56de"),this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),3!=this.gameType?r.conMager.getInstance().getPoolNode(r.KEY.poolName.stop_panel,this.node,{callBack:function(t){2==t&&e.renshu()}}):this.onClose(1)},t.prototype.luozizhong_action=function(e){e.active=!0,e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.getComponent(cc.Label).string=""}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50\u4e2d"}),cc.delayTime(.6))))},t.prototype.startTime=function(e){this.userGameTime=0,this.count_down.active=!0;var t=this.node.getChildByName("luozizhong");t.stopAllActions(),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+(30-this.userGameTime),this.userChess==e?(this.count_down.y=-440,t.setPosition(252,-376),this.quan.setPosition(0,-547)):(this.count_down.y=450,t.setPosition(-197,372),this.quan.setPosition(0,554)),t.color=-1==e?cc.color(51,51,51):cc.color(204,204,204),this.quan.getComponent(cc.Sprite).fillRange=1,this.luozizhong_action(t),this.count_down.getChildByName("time").color=cc.color(255,255,255),this.quan.active=!0,this.quan_judge=!0,this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){if(this.TimeDel||(this.userGameTime+=1),!this.is_game_over)if(this.userGameTime>this.max_gameTime)this.gameOver();else{var e=this.max_gameTime-this.userGameTime,t=e+"";e<10&&(t="0"+e),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+t,e<15&&(this.count_down.getChildByName("time").color=cc.color(255,0,0),this.TimeDel||r.conMager.getInstance().playAudioEff(r.KEY.audioName.shijian)),this.TimeDel||(12==this.userGameTime?this.ai_duihua(2,5):21==this.userGameTime?this.ai_duihua(2,20):26==this.userGameTime&&this.ai_duihua(2,80))}},t.prototype.stopTime=function(){console.log("\u505c\u6b62\u8ba1\u65f6"),this.unschedule(this.updateTime),this.count_down.active=!1,this.quan.active=!1,this.quan_judge=!1,this.node.getChildByName("luozizhong").stopAllActions(),this.node.getChildByName("luozizhong").active=!1},t.prototype.startTime_item3=function(){this.count_time_itm3=10,this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label).string=this.count_time_itm3+"s",this.schedule(this.updateTime_item3,1)},t.prototype.updateTime_item3=function(){this.count_time_itm3-=1;var e=this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label);e.string=this.count_time_itm3+"s",this.count_time_itm3<=5&&(e.node.color=cc.color(255,0,0)),this.count_time_itm3<=0&&(e.node.active=!1,r.conMager.getInstance().playAudioEff("nanbujiabei"),this.jiabeiAction(1,2),this.stopTime_item3())},t.prototype.stopTime_item3=function(){this.unschedule(this.updateTime_item3)},t.prototype.renshu=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=1,r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null))},t.prototype.ai_renshu=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=0,r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null))},t.prototype.ai_diaoxian=function(){this.is_game_over||(d.commonFunction.updateSprite("head_icon/diaoxian",this.ds_headIcon.node),this.ds_headIcon.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeIn(.4)))),console.log("\u89e6\u53d1\u6389\u7ebf"))},t.prototype.ai_shangxian=function(){this.is_game_over||(d.commonFunction.updateSprite("head_icon/"+this.ds_headIconIndex,this.ds_headIcon.node),this.ds_headIcon.node.opacity=255,this.ds_headIcon.node.stopAllActions(),console.log("\u89e6\u53d1\u4e0a\u7ebf"))},t.prototype.pingju=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=2,r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null))},t.prototype.qiuhe=function(){},t.prototype.shubiao=function(e){this.shubiao_node.active=e},t.prototype.huiqi=function(){},t.prototype.update=function(e){this.quan_judge&&(1==Math.floor(e)&&console.log("1\u79d2\u8fc7\u53bb\u4e86"),this.quan.getComponent(cc.Sprite).fillRange-=1/(60*this.max_gameTime))},i([f(p.dazhao_GameBoard)],t.prototype,"board",void 0),i([f(cc.Prefab)],t.prototype,"whiteChess",void 0),i([f(cc.Prefab)],t.prototype,"blackChess",void 0),i([f(cc.Node)],t.prototype,"quan",void 0),i([f(cc.Node)],t.prototype,"hongDian",void 0),i([f({type:cc.Node,tooltip:"\u5927\u62db\u9009\u62e9\u754c\u9762"})],t.prototype,"zhenfa_ui",void 0),i([f({type:cc.Label,tooltip:"\u6211\u7684\u65f6\u95f4"})],t.prototype,"my_time",void 0),i([f({type:cc.Label,tooltip:"\u5bf9\u65b9\u7684\u65f6\u95f4"})],t.prototype,"ds_time",void 0),i([f({type:cc.Node,tooltip:"\u9635\u6cd5\u7a97"})],t.prototype,"zhenfa_xuanze",void 0),i([f({type:cc.Sprite,tooltip:"\u5148\u540e\u624b"})],t.prototype,"xianshou_sprite",void 0),i([f({type:cc.SpriteFrame,tooltip:"\u5148\u624b\u56fe"})],t.prototype,"xianshou_image",void 0),i([f({type:cc.SpriteFrame,tooltip:"\u540e\u624b\u56fe"})],t.prototype,"houshou_image",void 0),i([f({type:cc.Node,tooltip:"\u6211\u7684\u95ee\u53f7"})],t.prototype,"my_wenhao",void 0),i([f({type:cc.Node,tooltip:"\u5bf9\u624b\u7684\u95ee\u53f7"})],t.prototype,"ds_wenhao",void 0),i([f({type:cc.Node,tooltip:"\u7b2c\u51e0\u8f6e\u7684\u8282\u70b9"})],t.prototype,"lun_node",void 0),i([f({type:cc.Label,tooltip:"\u6bcf\u8f6e\u7684\u5b57"})],t.prototype,"lun_label",void 0),i([f({type:cc.Node,tooltip:"\u724c\u8282\u70b9"})],t.prototype,"pai_parent",void 0),i([f({type:cc.Node,tooltip:"\u76d8"})],t.prototype,"lun_pan",void 0),i([f({type:cc.Sprite,tooltip:"\u8fde\u62db\u8fd9\u62db"})],t.prototype,"lianzhao_mask",void 0),i([f({type:cc.Float,tooltip:"\u4e07\u5b81\u9635\u7b49\u7ea7"})],t.prototype,"wanning",void 0),i([f({type:cc.Float,tooltip:"\u516b\u5366\u9635\u7b49\u7ea7"})],t.prototype,"bagua",void 0),i([f({type:cc.Float,tooltip:"\u56db\u65b9\u9635\u7b49\u7ea7"})],t.prototype,"sifang",void 0),i([f({type:cc.Float,tooltip:"\u514b\u654c\u9635\u7b49\u7ea7"})],t.prototype,"kedi",void 0),i([f({type:cc.Float,tooltip:"\u4e94\u96f7\u9635\u7b49\u7ea7"})],t.prototype,"wulei",void 0),i([f({type:cc.Float,tooltip:"\u5206\u88c2\u9635\u7b49\u7ea7"})],t.prototype,"fenlie",void 0),i([f({type:cc.Float,tooltip:"\u8840\u57df\u9635\u7b49\u7ea7"})],t.prototype,"xueyu",void 0),i([m],t)}(r.winRootNode);a.default=y,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../classCon/configSurface":"configSurface","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform","../common/chessClass":"chessClass","../wuziqi/Piece":"Piece","../wuziqi/dazhao/dazhao_GameBoard":"dazhao_GameBoard","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],lianzhao:[function(e,t,a){"use strict";cc._RF.push(t,"eb0eb7b4wNPrIaYtq1vEdpF","lianzhao");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/dataController/DATA"),r=e("../../../../SSSGF/ssscgf"),c=e("../class_manager"),h=e("../game_manager"),u=e("../model_joiner"),l=cc._decorator,d=l.ccclass,p=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cos=c.joiner_enum.model,t.board=null,t.huihe=0,t.game_joiner=[],t.can_use_zhenfa=h.game_manager.zhenfa_map,t.player_zhenfa=[],t.use_zhenfa=[],t.zhenfa_id=0,t.player_array=[],t}return o(t,e),t.prototype.model_small_round_win=function(){return console.error("\u6211\u8fde\u67d0\u4eba\u627f\u8ba4\u4f60\u83b7\u80dc\u4e86"),!0},t.prototype.init_game_mode=function(){r.GameDataStorage.gameStateData.gameType=s.game_type.lianzhao},t.prototype.init=function(e,t,a){this.delect_use_zhenfa(),this.game_joiner=e,this.chess_array=t,this.player_array=a;for(var n=0;n<a.length;n++)this.use_zhenfa.push([])},t.prototype.init_ui=function(e){this.board=e},t.prototype.start_game=function(){for(var e=0;e<this.player_array.length;e++)this.player_zhenfa.push([]);return!0},t.prototype.start_big_game=function(){return this.start_zhenfa_select(),!1},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(){return!0},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return this.end_big(),!0},t.prototype.one_win=function(){return!0},t.prototype.delect_use_zhenfa=function(){for(var e=[],t=0;t<e.length;t++)this.can_use_zhenfa.delete(e[t])},t.prototype.end_big=function(){this.new_sort()},t.prototype.new_sort=function(){for(var e=h.game_manager.joiner_number,t=0;t<e-1;t++){h.game_manager.init_sort(this.game_joiner[t+1],t+2);var a=this.player_zhenfa[t+1];this.player_zhenfa[t+1]=this.player_zhenfa[t],this.player_zhenfa[t]=a;var n=this.use_zhenfa[t+1];this.use_zhenfa[t+1]=this.use_zhenfa[t],this.use_zhenfa[t]=n}},t.prototype.start_zhenfa_select=function(){this.huihe++,this.show_xuanze_ui()},t.prototype.show_xuanze_ui=function(){var e=this,t=!1;this.game_joiner[1].cos==c.joiner_enum.player&&(t=!0),r.conMager.getInstance().getPoolNode(r.KEY.poolName.jineng_xuanze,this.board.ui_parent,this.player_zhenfa,this.can_use_zhenfa,this.use_zhenfa,this.game_joiner,t,this.huihe,function(t){for(var a=0;a<e.player_array.length;a++)if(e.player_array[a].cos==c.joiner_enum.ai){for(var n=[],o=[],i=0;i<e.player_zhenfa[a].length;i++)o.push(e.player_zhenfa[a][i]);for(i=0;i<h.game_manager.can_use_zhenfa_number&&!(o.length<1);i++){var s=Math.floor(Math.random()*o.length),r=new(cc.js.getClassByName(o[s].name))(e.zhenfa_id,o[s].ch_name),u=new c.zhenfa_data(e.zhenfa_id,o[s].name,o[s].ch_name,o[s].attr,o[s].level);r.init(e.player_array,e.chess_array,e.player_array),r.init_zhenfa(u,e.player_array[a]),r.init_ui(e.board),n.push(r),o.splice(s,1),e.zhenfa_id++}e.join_use_zhenfa(e.player_array[a],n)}else if(e.player_array[a].cos==c.joiner_enum.player){var l=[];for(i=0;i<t.length;i++)t[i]&&(r=new(cc.js.getClassByName(t[i].name))(e.zhenfa_id,t[i].ch_name),u=new c.zhenfa_data(e.zhenfa_id,t[i].name,t[i].ch_name,t[i].attr,t[i].level),r.init(e.player_array,e.chess_array,e.player_array),r.init_zhenfa(u,e.player_array[a]),r.init_ui(e.board),e.zhenfa_id++,l.push(r));e.join_use_zhenfa(e.player_array[a],l),e.use_zhenfa[a]=t}h.game_manager.get_game_event(e)})},t.prototype.join_use_zhenfa=function(e,t){for(var a=0;a<e.zhenfa_array.length;a++)e.zhenfa_array[a].active=!1;var n=function(a){var n=e.zhenfa_array.find(function(e){return e.data.name==t[a].data.name});if(n){n.data.level=t[a].data.level,n.active=!0;for(var o=0;o<e.zhenfa_array.length&&e.zhenfa_array[o]!=n;o++);e.zhenfa_array.splice(o,1),e.zhenfa_array.unshift(n)}else e.zhenfa_array.unshift(t[a])};for(a=0;a<t.length;a++)n(a)},i([d],t)}(u.default));a.default=p,cc._RF.pop()},{"../../../../SSSGF/dataController/DATA":"DATA","../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../model_joiner":"model_joiner"}],lianzhu:[function(e,t,a){"use strict";cc._RF.push(t,"0d82cbmKhxCKqVCjJBDRyiq","lianzhu");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.num=null,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;this.num.string=""+e[0].num,this.node.x=0,this.node.y=0;var a=this.node.getChildByName("Node");2==this.num.string.length&&(a.x=30),3==this.num.string.length&&(a.x=50),a.y=1e3,a.scale=50,a.runAction(cc.sequence(cc.spawn(cc.moveTo(.1,a.x,0),cc.scaleTo(.1,.8)),cc.scaleTo(.1,1.2),cc.callFunc(function(){s.conMager.getInstance().playAudioEff("wulei/lei")}),cc.delayTime(1.5),cc.callFunc(function(){e[0].callBack&&e[0].callBack(),t.onClose(1)})))},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},i([h(cc.Label)],t.prototype,"num",void 0),i([c],t)}(s.winRootNode);a.default=u,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf"}],liehen:[function(e,t,a){"use strict";cc._RF.push(t,"0215cv246pOUarI+cCpzL70","liehen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("../../../utils/commonFunction"),c=cc._decorator,h=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callback=null,t.pos=[],t.isjude=!0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){this.node.zIndex=99;var t=e[0].pos.x-2,a=e[0].pos.y-4;this.node.x=t,this.node.y=a;var n=s.GameDataStorage.getUser().userData.skinBoard;r.commonFunction.updateSprite("chaoniu/liehen"+n,this.node)},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},i([h],t)}(s.winRootNode));a.default=u,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../../../utils/commonFunction":"commonFunction"}],luanDou_view:[function(e,t,a){"use strict";cc._RF.push(t,"e739a4xGjhAq5wiJTz2ZfZ6","luanDou_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../KEY"),r=e("../../scenes/mainScene"),c=e("../../SSSGF/baesConScripts/winRootNode"),h=e("../../SSSGF/dataController/DATA"),u=e("../../SSSGF/ssscgf"),l=e("../../utils/as_util"),d=e("../../utils/platform"),p=e("../wuziqi/game_manager/class_manager"),g=cc._decorator,_=g.ccclass,m=g.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.now_luandou_name="gssk",t.lianzhao_btn_tween=new cc.Tween,t.slectGmae=null,t.mask1=null,t.luandoulibao_panel=null,t.arrow_right=null,t.arrow_left=null,t.btn_libao=null,t.mask=null,t.pv=null,t.double_node=null,t.left_btn=null,t.right_btn=null,t.start_btn_bg=null,t.libao_btn_node=null,t.page_number=1,t.page_view=null,t.luandou_event=["event_LuanDouMiWuButtonClickNumbers","event_LuanDouHeiBaiButtonClickNumbers","event_LuanDouJiXieMiChengButtonClickNumbers","event_LuanDouTieSuoLianHuanButtonClickNumbers","event_LuanDouLiuLiButtonClickNumbers","event_LuanDouShiKuButtonClickNumbers"],t.page_array=[s.KEY.UIName.luandou_game_view,s.KEY.UIName.luandou_hbdd_view,s.KEY.UIName.luandou_jxmc_view,s.KEY.UIName.luandou_tslh_view,s.KEY.UIName.luandou_blxj_view,p.game_mode.luandou_gssk],t.page_type=[h.game_type.luandou_miwu,h.game_type.luandou_hbdd,h.game_type.luandou_jxmc,h.game_type.luandou_tslh,h.game_type.luandou_blxj,h.game_type.luandou_gssk],t.play_type=[!0,!0,!0,!0,!0,!0],t.isBtn=!0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){var e=this,t=u.GameDataStorage.getUser().userData;if(t.luandou_name!=this.now_luandou_name&&(t.luandou_name=this.now_luandou_name,t.luandou_jiangli=!1,t.luandou_jiangli_new=!0,u.GameDataStorage.preserveGameData()),1==t.luandou_jiangli&&1==t.luandou_jiangli_new&&(this.lianzhao_btn_tween=cc.tween(this.libao_btn_node).repeatForever(cc.tween(this.libao_btn_node).by(1,{scale:.1}).by(1,{scale:-.1})).start()),cc.find("Canvas/money_node").active=!0,this.slectGmae.active=!1,this.mask.active=!0,this.node.opacity=0,this.node.runAction(cc.sequence(cc.fadeIn(.5),cc.callFunc(function(){e.mask.active=!1;var t=cc.find("Canvas/mainView");t.stopAllActions(),t.opacity=255,t.active=!1}))),this.arrow_left.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.5,-10,0),cc.moveBy(.5,10,0)))),this.arrow_right.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.5,10,0),cc.moveBy(.5,-10,0)))),d.platform.now_platform!=d.platform_type.is_tt){var a=this.node.getChildByName("return");a.active=!1,this.scheduleOnce(function(){a.active=!0},d.platform.data.time_fanhui)}},t.prototype.onClose=function(e){var t=this;1==e&&"mainScene"==u.GameDataStorage.gameStateData.sceneName&&cc.find("Canvas").getComponent(r.default).showHideUi(!0),this.mask.active=!0,this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t.mask.active=!1,u.conMager.getInstance().hideWinNode(t.node.name)})))},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){if(d.platform.now_platform!=d.platform_type.is_tt)for(var e=0;e<this.play_type.length;e++)this.play_type[e]=!0},t.prototype.start=function(){this.pv.node.on("scroll-ended",this.moshi_xuanze,this),-1==u.GameDataStorage.gameStateData.luandou_index?this.page_number=this.page_array.length-1:this.page_number=u.GameDataStorage.gameStateData.luandou_index,console.log("\u5728\u54ea\u5462",this.page_number),this.pv.scrollToPage(this.page_number,.5),cc.tween(this.left_btn).repeatForever(cc.tween(this.left_btn).by(1,{scale:.3}).by(1,{scale:-.3})).start(),cc.tween(this.right_btn).repeatForever(cc.tween(this.right_btn).by(1,{scale:.3}).by(1,{scale:-.3})).start(),d.platform.now_platform!=d.platform_type.is_tt&&l.as_util.hide_banner()},t.prototype.show_page=function(){this.page_view=this.page_array[this.page_number],this.left_btn.active=!1,this.right_btn.active=!1,this.page_number>0&&(this.left_btn.active=!0),this.page_number<this.page_array.length-1&&(this.right_btn.active=!0),1==this.play_type[this.page_number]?(this.start_btn_bg.getChildByName("wenzi_cth").active=!0,this.start_btn_bg.getChildByName("lock").active=!1):(this.start_btn_bg.getChildByName("wenzi_cth").active=!1,this.start_btn_bg.getChildByName("lock").active=!0)},t.prototype.moshi_xuanze=function(){var e=this.pv.getCurrentPageIndex();this.page_number=e,this.show_page()},t.prototype.on_left=function(){this.page_number--,this.pv.scrollToPage(this.page_number,.5)},t.prototype.on_right=function(){this.page_number++,this.pv.scrollToPage(this.page_number,.5)},t.prototype.updataLiBaoBtn=function(){if(!u.GameDataStorage.getUser().userData.luandou_jiangli_new){var e=this.btn_libao.getChildByName("Background");this.btn_libao.color=cc.color(81,81,81),e.color=cc.color(81,81,81),this.btn_libao.getComponent(cc.Button).interactable=!1}},t.prototype.luanDouStartBtn=function(){var e=this;if(0!=this.play_type[this.page_number]){u.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var t=u.GameDataStorage.getUser().userData.money;if(u.GameDataStorage.gameStateData.admission_gold=100,t>=u.GameDataStorage.gameStateData.admission_gold){u._pl_fun.getInstance().add_reportAnalytics(this.luandou_event[this.page_number]);var a=this.page_type[this.page_number],n=this.page_view;u.GameDataStorage.gameStateData.luandou_index=this.page_number,u.conMager.getInstance().getPoolNode(s.KEY.poolName.item1,null,{callBack:function(){switch(n){case p.game_mode.luandou_gssk:u.GameDataStorage.gameStateData.game_mode=p.game_mode.luandou_gssk,u.conMager.getInstance().showWinNode(s.KEY.UIName.game_board,e.node);break;default:u.conMager.getInstance().showWinNode(n,cc.find("Canvas"),{reward_gold:100,gameType:a,RightRate:.9})}}}),this.onClose(2)}else u.conMager.getInstance().getPoolNode(s.KEY.poolName.gold_buzu_panel,this.node,null)}else u.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node,"\u656c\u8bf7\u671f\u5f85")},t.prototype.return_btn=function(){this.disableClick(),u.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1),u.GameDataStorage.gameStateData.luandou_index=-1,d.platform.now_platform!=d.platform_type.is_vivo&&d.platform.now_platform!=d.platform_type.is_topon||l.as_util.back_ui(),d.platform.now_platform!=d.platform_type.is_tt&&l.as_util.show_banner()},t.prototype.laundou_return_btn=function(){var e=this;this.disableClick(),u.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.slectGmae.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e.slectGmae.active=!1,e.mask1.active=!0})))},t.prototype.luandou_slect_btn=function(e,t){var a=this;u.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.isBtn&&(this.isBtn=!1,this.scheduleOnce(function(){a.isBtn=!0},1),this.openGame(t,5))},t.prototype.libao_btn=function(){if(u.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.lianzhao_btn_tween.stop(),u.GameDataStorage.getUser().userData.luandou_jiangli_new){this.luandoulibao_panel.active=!0;var e=this.luandoulibao_panel.getChildByName("Node");this.scaleBigShow(e,cc.v3(0,0),function(){})}else u.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u4e0b\u5468\u518d\u6765\u9886\u53d6\u5427!")},t.prototype.close_libao_panel_btn=function(){var e=this;u.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var t=this.luandoulibao_panel.getChildByName("Node");this.scaleSmallHide(t,cc.v3(0,0),function(){e.luandoulibao_panel.active=!1})},t.prototype.dakai_btn=function(){u.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),u.GameDataStorage.getUser().userData.luandou_jiangli?(this.double_node.active=!0,this.luandoulibao_panel.active=!1):u.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u8d62\u4e00\u5c40\u518d\u6765\u54e6!")},t.prototype.get_gouyu_btn=function(e,t){var a=this;if(u.GameDataStorage.getUser().userData.luandou_jiangli)if(u.GameDataStorage.getUser().userData.luandou_jiangli_new){var n=function(){u.GameDataStorage.getUser().userData.luandou_jiangli=!1,u.GameDataStorage.getUser().userData.luandou_jiangli_new=!1,u.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u5956\u52b1"+e+"\u52fe\u7389!"),u.conMager.getInstance()._msgAtion.emit("updateMedalCount",e,cc.v3(0,0)),u.GameDataStorage.preserveGameData(),a.scheduleOnce(function(){var e=a.double_node.getChildByName("Node");a.scaleSmallHide(e,cc.v3(0,0),function(){a.double_node.active=!1})},1),a.double_node.active=!1};1==t?u._pl_fun.getInstance().showAdVideo(function(){u._pl_fun.getInstance().add_reportAnalytics("event_LuanDouMoShiShuangBeiTimers"),n()}):n()}else u.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u4e0b\u5468\u518d\u6765\u9886\u53d6\u5427!");else u.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u8d62\u4e00\u5c40\u518d\u6765\u54e6!")},t.prototype.double_lingqu=function(){this.get_gouyu_btn(1e4,!0)},t.prototype.putong_lingqu=function(){this.get_gouyu_btn(5e3,!1)},t.prototype.openGame=function(e,t){u.GameDataStorage.gameStateData.gameType=t;var a=parseInt(e),n=this.judgeGold(a),o=u.GameDataStorage.getUser().userData.money;u.GameDataStorage.gameStateData.admission_gold=n.num1,o>=n.num1?(u.conMager.getInstance().showWinNode(s.KEY.UIName.luandou_game_view,cc.find("Canvas"),{reward_gold:n.num2,gameType:t,RightRate:a}),this.onClose(2)):u.conMager.getInstance().getPoolNode(s.KEY.poolName.gold_buzu_panel,this.node,null)},t.prototype.judgeGold=function(e){var t=0,a=0;return 1==e?(t=10,a=2):2==e?(t=20,a=4):3==e?(t=80,a=6):4==e?(t=300,a=10):5==e&&(t=800,a=30),{num1:t,num2:a}},i([m(cc.Node)],t.prototype,"slectGmae",void 0),i([m(cc.Node)],t.prototype,"mask1",void 0),i([m(cc.Node)],t.prototype,"luandoulibao_panel",void 0),i([m(cc.Node)],t.prototype,"arrow_right",void 0),i([m(cc.Node)],t.prototype,"arrow_left",void 0),i([m(cc.Node)],t.prototype,"btn_libao",void 0),i([m(cc.Node)],t.prototype,"mask",void 0),i([m({type:cc.PageView,tooltip:"\u9009\u62e9\u9875\u9762"})],t.prototype,"pv",void 0),i([m({type:cc.Node,tooltip:"\u53cc\u500d\u9886\u53d6\u5f39\u7a97"})],t.prototype,"double_node",void 0),i([m({type:cc.Node,tooltip:"\u5de6\u6309\u94ae"})],t.prototype,"left_btn",void 0),i([m({type:cc.Node,tooltip:"\u53f3\u6309\u94ae"})],t.prototype,"right_btn",void 0),i([m({type:cc.Node,tooltip:"\u5f00\u59cb\u6309\u94ae"})],t.prototype,"start_btn_bg",void 0),i([m({type:cc.Node,tooltip:"\u5f00\u59cb\u6309\u94ae"})],t.prototype,"libao_btn_node",void 0),i([_],t)}(c.default);a.default=f,cc._RF.pop()},{"../../KEY":"KEY","../../SSSGF/baesConScripts/winRootNode":"winRootNode","../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../scenes/mainScene":"mainScene","../../utils/as_util":"as_util","../../utils/platform":"platform","../wuziqi/game_manager/class_manager":"class_manager"}],luandou_blxj_view:[function(e,t,a){"use strict";cc._RF.push(t,"43ed6cr/SxOlayLbhV33ym6","luandou_blxj_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=e("../../classCon/configSurface"),h=e("../wuziqi/Piece"),u=e("../../utils/platform"),l=e("../../utils/commonFunction"),d=e("../wuziqi/luandou_blxj/GameBoard_blxj"),p=e("../wuziqi/luandou_blxj/Grid"),g=e("../wuziqi/luandou_blxj/AStar"),_=cc._decorator,m=_.ccclass,f=_.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item1=null,t.item2=null,t.item3=null,t.gameType=1,t.dsName_string="",t.dsName_label_item2=null,t.dsLevel_label_item2=null,t.dsHeadIcon_item2=null,t.userLevel_label_item2=null,t.userName_label_item2=null,t.userHeadIcon_item2=null,t.user_headPanel=null,t.ds_headPanel=null,t.ds_headIcon=null,t.user_headIcon=null,t.reward_gold=2,t.multiple=0,t.chess_parent=null,t.shubiao_node=null,t.max_gameTime=30,t.board=null,t.whiteChess=null,t.blackChess=null,t.quan=null,t.hongDian=null,t.boli_parent=null,t.mask_guan=null,t.block=46,t.boli=null,t.boli_map=[],t.userGameTime=0,t.count_down=null,t.userChess=h.BLACKCHESS,t.is_game_over=!1,t.count_time_itm3=10,t.jiabei_num_item3=0,t.whiePool=new cc.NodePool,t.blackPool=new cc.NodePool,t.RightRate=1,t.TimeDel=!1,t.ds_headIconIndex=0,t.chess_num=0,t.gaird=null,t.astr=null,t.recovery_boli=new Map,t.interval=!0,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t.luozizhong=null,t.quan_judge=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){r._pl_fun.getInstance().startCreateVideo(),this.reward_gold=e[0].reward_gold,r.GameDataStorage.gameStateData.reward_gold=this.reward_gold,this.gameType=e[0].gameType,r.GameDataStorage.gameStateData.gameType=this.gameType,r.GameDataStorage.gameStateData.reward=this.reward_gold,console.log("\u6a21\u5f0f:",this.gameType),this.RightRate=.9,this.hongDian.zIndex=99,this.initGame(),this.node.runAction(cc.fadeIn(.5)),u.platform.now_platform!=u.platform_type.is_tt&&(this.node.getChildByName("luping").active=!1)},t.prototype.onClose=function(){this.unscheduleAllCallbacks(),this.board.removeListennner(),r.conMager.getInstance().hideWinNode(this.node.name),r.conMager.getInstance().showWinNode(r.KEY.UIName.luanDou_view,null,{gameType:this.gameType})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){var e=this;r.conMager.getInstance()._msgAtion.on("ai_renshu",this.ai_renshu,this),r.conMager.getInstance()._msgAtion.on("ai_diaoxian",this.ai_diaoxian,this),r.conMager.getInstance()._msgAtion.on("ai_shangxian",this.ai_shangxian,this),r.conMager.getInstance()._msgAtion.on("renshu",this.return_btn,this),r.conMager.getInstance()._msgAtion.on("pingju",this.pingju,this),r.conMager.getInstance()._msgAtion.on("shubiao",this.shubiao,this),r.conMager.getInstance()._msgAtion.on("qiuhe",this.qiuhe,this),r.conMager.getInstance()._msgAtion.on("huiqi",this.huiqi,this),r.conMager.getInstance()._msgAtion.on("closeSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1},this),r.conMager.getInstance()._msgAtion.on("openSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0},this),r.conMager.getInstance()._msgAtion.on("stopTimeDel",function(){e.TimeDel=!0,e.quan_judge=!1},this),r.conMager.getInstance()._msgAtion.on("startTimeDel",function(){e.TimeDel=!1,e.quan_judge=!0},this)},t.prototype.RadomZhenFa=function(e){var t=[],a=c.zhenFaWeight[e];if(a){for(var n in a){var o={v:n,p:a[n]};t.push(o)}for(var i=[],r=0;r<t.length;r++)i=i.concat(new Array(t[r].p).fill(t[r].v));return i[s.NumberUtil.randomNum(0,i.length-1)]}},t.prototype.initDsZhenFa=function(){var e=r.GameDataStorage.gameStateData.userZhenFaName,t=this.RadomZhenFa(e);r.GameDataStorage.gameStateData.dsZhenFaName=t;var a=r.GameDataStorage.getUser().userData.zhenFaMap[e].level+5*[-1,1][s.NumberUtil.randomNum(0,1)];a<=3&&(a=3),r.GameDataStorage.gameStateData.ds_zhenfalevel=a},t.prototype.initGame=function(){cc.find("Canvas/money_node").active=!1,r.GameDataStorage.gameStateData.chess_num=0,r.GameDataStorage.gameStateData.rewardmultiple=0,2==this.gameType&&this.initDsZhenFa(),this.initUi(),this.initData(),3!=this.gameType?this.kaiChangDongHua():(this.node.getChildByName("heizi").active=!0,this.node.getChildByName("baizi").active=!0,this.node.getChildByName("baizi_label").active=!0,this.node.getChildByName("heizi_label").active=!0),this.board.init(this),this.node.getChildByName("mask").zIndex=99,this.initPool(this.whiePool,this.whiteChess),this.initPool(this.blackPool,this.blackChess),this.initBoLi()},t.prototype.initUi=function(){this.item1=this.node.getChildByName("item1"),this.item2=this.node.getChildByName("item2"),this.item3=this.node.getChildByName("item3"),this.dsLevel_label_item2=this.item2.getChildByName("left").getChildByName("dsLevel").getComponent(cc.Label),this.dsName_label_item2=this.item2.getChildByName("left").getChildByName("dsName").getComponent(cc.Label),this.userLevel_label_item2=this.item2.getChildByName("right").getChildByName("userLevel").getComponent(cc.Label),this.userName_label_item2=this.item2.getChildByName("right").getChildByName("userName").getComponent(cc.Label),this.user_headPanel=this.node.getChildByName("user_headPanel"),this.ds_headPanel=this.node.getChildByName("ds_headPanel"),this.ds_headIcon=this.node.getChildByName("ds_headIcon").getChildByName("ds_headIcon").getComponent(cc.Sprite),this.user_headIcon=this.node.getChildByName("user_headIcon").getChildByName("user_headIcon").getComponent(cc.Sprite),this.chess_parent=this.node.getChildByName("chess_parent"),this.shubiao_node=this.chess_parent.getChildByName("shubiao_node"),this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",this.count_down=this.node.getChildByName("count_down"),3!=this.gameType?(this.ds_headIcon.node.parent.active=!0,this.user_headIcon.node.parent.active=!0):(this.node.getChildByName("heiqi").active=!0,this.node.getChildByName("baiqi").active=!0,this.shubiao_node.active=!0),this.yun_action()},t.prototype.initData=function(){var e=r.GameDataStorage.getUser().userData;this.userName_label_item2.string=e.gameName;var t=l.commonFunction.judgeGameLevelName(e.user_level);this.userLevel_label_item2.string=t;var a=c.XingMingData.xing,n=c.XingMingData.ming,o=l.commonFunction.randomGameName(a,n);this.dsName_label_item2.string=o,r.GameDataStorage.gameStateData.ds_name=o;var i=l.commonFunction.judgeAiLevel(e.user_level),h=l.commonFunction.judgeGameLevelName(i);this.dsLevel_label_item2.string=h;var u=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel"),d=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel");u.getChildByName("Name").getComponent(cc.Label).string=this.userName_label_item2.string,u.getChildByName("Level").getComponent(cc.Label).string=this.userLevel_label_item2.string,d.getChildByName("Name").getComponent(cc.Label).string=this.dsName_label_item2.string,d.getChildByName("Level").getComponent(cc.Label).string=this.dsLevel_label_item2.string,"null"!=r.GameDataStorage.getUser().userData.headIconUrl&&l.commonFunction.updateHttpSprite(r.GameDataStorage.getUser().userData.headIconUrl,this.user_headIcon.node);var p=s.NumberUtil.randomNum(1,60);s.NumberUtil.randomNum(1,10)<4&&(p=1),this.ds_headIconIndex=p,r.GameDataStorage.gameStateData.ds_headIconIndex=this.ds_headIconIndex,console.log("\u5bf9\u624b\u7684\u5934\u50cf:",p);var g="head_icon/"+p;l.commonFunction.updateSprite(g,this.ds_headIcon.node);var _=this.node.getChildByName("game_info_parent");r.conMager.getInstance().getPoolNode(r.KEY.poolName.game_info,_,null),this.initAStar()},t.prototype.initPool=function(e,t){for(var a=0;a<225;a++){var n=cc.instantiate(t);e.put(n)}},t.prototype.initBoLi=function(){for(var e=0;e<14;e++){this.boli_map[e]=[];for(var t=0;t<14;t++){this.boli_map[e][t]=null;var a=cc.instantiate(this.boli);a.parent=this.boli_parent,a.setPosition(e*this.block+23,t*this.block+23),this.boli_map[e][t]=a}}},t.prototype.yun_action=function(){var e=this;this.node.getChildByName("yun_parent").children.forEach(function(t){t.stopAllActions(),e.play_action(t)})},t.prototype.play_action=function(e){var t=this,a=s.NumberUtil.randomNum(-5,5);cc.tween(e).to(30+a,{x:cc.winSize.width+e.width}).call(function(){e.x=-(cc.winSize.width+e.width),t.play_action(e)}).start()},t.prototype.moveInChess=function(e,t,a,n,o){var i,s=this,c=r.GameDataStorage.gameStateData.chess_num;if(2==this.gameType)if(c>30){this.chess_num-=1;var u=2;c>100&&(u=10),c>150&&(u=15),this.chess_num%u==0&&r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi)}else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);this.stopTime(),this.startTime(-a),this.ai_duihua(1);var l=null,d=null;if(a==h.BLACKCHESS?(l=this.blackPool,d=this.blackChess):(l=this.whiePool,d=this.whiteChess),l.size()>0)i=l.get();else{var p=cc.instantiate(d);l.put(p),i=l.get()}var g=Math.floor(e/this.block),_=Math.floor(t/this.block),m=15*_+g;this.board.chess_map[m]=i,i.x=e,i.y=t,this.chess_parent.addChild(i),this.chessAction(i,o,function(){n&&(s.checkBoLiNode(g,_),s.scheduleOnce(function(){s.hongDian.active=!1},.2))}),this.scheduleOnce(function(){s.hongDian.active=!0,s.hongDian.setPosition(e,t+1)},.1)},t.prototype.initAStar=function(){this.gaird=new p.Grid(14,14),this.astr=new g.AStar},t.prototype.boliAction=function(e,t){var a=e.getChildByName("boli"),n=e.getChildByName("nd_bian");n.active=!0;var o=t[0],i=t[1];if(i<13){var s=this.boli_map[o][i+1];if(this.recovery_boli.has(s)||!s.getChildByName("boli").active)n.getChildByName("top").active=!1,s.getChildByName("nd_bian").getChildByName("bottom").active=!1;else{var c=n.getChildByName("top");this.updateSprite(c)}}if(i>0){var h=this.boli_map[o][i-1];if(this.recovery_boli.has(h)||!h.getChildByName("boli").active)n.getChildByName("bottom").active=!1,h.getChildByName("nd_bian").getChildByName("top").active=!1;else{var u=n.getChildByName("bottom");this.updateSprite(u)}}if(o<13){var l=this.boli_map[o+1][i];if(this.recovery_boli.has(l)||!l.getChildByName("boli").active)n.getChildByName("right").active=!1,l.getChildByName("nd_bian").getChildByName("left").active=!1;else{var d=n.getChildByName("right");this.updateSprite(d)}}if(o>0){var p=this.boli_map[o-1][i];if(this.recovery_boli.has(p)||!p.getChildByName("boli").active)n.getChildByName("left").active=!1,p.getChildByName("nd_bian").getChildByName("right").active=!1;else{var g=n.getChildByName("left");this.updateSprite(g)}}if(a.active){var _=this.mask_guan._graphics,m=e.convertToWorldSpaceAR(new cc.Vec2);m=this.mask_guan.node.convertToNodeSpaceAR(m),_.rect(m.x-23,m.y-23,this.block,this.block),_.fill(),a.active=!1,r.conMager.getInstance().getPoolNode(r.KEY.poolName.boli_anima,e,null)}},t.prototype.updateSprite=function(e){if(!e.active){var t=s.NumberUtil.randomNum(1,4);l.commonFunction.updateSprite("blxj/sl_"+t,e)}e.active=!0},t.prototype.checkBoLiNode=function(e,t){var a=this;this.recovery_boli.clear(),this.checkBoLiRange(e,t,function(e){e.forEach(function(e){var t=e[0],n=e[1];a.gaird.setWalkable(t,n,!1),a.recovery_boli.set(a.boli_map[t][n],[t,n])});for(var t=1;t<13;t++)for(var n=1;n<13;n++)a.boli_map[t][n].active&&a.search_path(t,n)});for(var n=function(n){for(var i=function(i){o.checkBoLiRange(n,i,function(o){for(var s=0,r=0;r<o.length;r++){var c=a.boli_map[o[r][0]][o[r][1]];if(!a.recovery_boli.has(c)&&c.getChildByName("boli").active||s++,4==s){var h=n+15*i;a.board.maze[n][i]=2;var u=a.board.chess_map[h];u&&u.scale>0&&(a.board.resetPos(e,t),cc.tween(u).to(1,{scale:0}).call(function(){}).start())}}})},s=1;s<14;s++)i(s)},o=this,i=1;i<14;i++)n(i);this.scheduleOnce(function(){a.recovery_boli.forEach(function(e,t){a.boliAction(t,e)})},.2)},t.prototype.search_path=function(e,t){this.gaird.setStartNode(e,t);for(var a=0;a<14;a++)if(this.gaird.setEndNode(a,0),this.astr.findPath(this.gaird))return;for(a=0;a<14;a++)if(this.gaird.setEndNode(0,a),this.astr.findPath(this.gaird))return;for(a=13;a>0;a--)if(this.gaird.setEndNode(a,0),this.astr.findPath(this.gaird))return;for(a=13;a>0;a--)if(this.gaird.setEndNode(0,a),this.astr.findPath(this.gaird))return;var n=this.boli_map[e][t];n.active&&this.recovery_boli.set(n,[e,t])},t.prototype.checkBoLiRange=function(e,t,a){for(var n=e-1-1,o=t-1,i=[],s=0;s<4;s++)n+=1,s%2==0&&0!=s&&(n=e-1,o+=1),n>=14||n<0||o>=14||o<0||i.push([n,o]);a&&a(i)},t.prototype.ai_duihua=function(e,t){var a=this;if(3!=this.gameType){var n=this.node.getChildByName("ds_biaoqing"),o=this.node.getChildByName("ds_duihua"),i=0;if(1==e){if(!this.interval)return;if(this.interval=!1,this.scheduleOnce(function(){a.interval=!0},8),this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,10)<2&&(s.NumberUtil.randomNum(0,1)>0?(i=1,r.conMager.getInstance().playAudioEff("nv/nvqifeng")):(i=5,r.conMager.getInstance().playAudioEff("nv/nvhaoqi")))}else if(3==e)i=6,r.conMager.getInstance().playAudioEff("nv/nvhengaoxing");else{if(this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,100)<t&&(i=4,r.conMager.getInstance().playAudioEff("nv/nvkeyi"))}i>0&&(o.active=!0,n.active=!0,n.children[i].active=!0,o.children[i].active=!0,this.count_down.y>0&&(this.count_down.opacity=0),this.scheduleOnce(function(){a.count_down.opacity=255,n.children[i].active=!1,o.children[i].active=!1,n.active=!1,o.active=!1},2.2))}},t.prototype.chessAction=function(e,t,a){var n=this;e.scale=1.5,e.getChildByName("chess").zIndex=98,e.y+=80,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)),cc.callFunc(function(){if(t){var o=e.getChildByName("jn1");o.active=!0,n.scheduleOnce(function(){o.active=!1},1)}a&&a()})))},t.prototype.gameOver=function(){console.log("\u6e38\u620f\u501f\u5bbf:",this.is_game_over),this.is_game_over||(this.is_game_over=!0,this.stopTime(),3!=this.gameType&&(cc.find("Canvas/money_node").active=!0),this.userGameTime>30?this.userChess==this.board.state?(console.log("\u5bf9\u624b\u80dc\u5229"),r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null),r.GameDataStorage.gameStateData.who_sucess=1):(console.log("\u73a9\u5bb6\u80dc\u5229"),r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null),r.GameDataStorage.gameStateData.who_sucess=0):1==this.board.win||-1==this.board.win?this.userChess==this.board.win?(r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null),r.GameDataStorage.gameStateData.who_sucess=0):(r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null),r.GameDataStorage.gameStateData.who_sucess=1):(r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null),r.GameDataStorage.gameStateData.who_sucess=2),this.board.removeListennner())},t.prototype.kaiChangDongHua=function(){var e=this;this.ds_headIcon.node.getComponent(cc.Button).interactable=!1,this.user_headIcon.node.getComponent(cc.Button).interactable=!1,r.conMager.getInstance().playAudioEff(r.KEY.audioName.kaiju),r.conMager.getInstance().getPoolNode(r.KEY.poolName.item2,this.node,{callBack:function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.item3,e.node,{callBack:function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.setup,e.node,null),e.caixianshou()}})}})},t.prototype.caixianshou=function(){if(3!=this.gameType){var e=this.node.getChildByName("heizi"),t=this.node.getChildByName("baizi"),a=this.node.getChildByName("baizi_label"),n=this.node.getChildByName("heizi_label");s.NumberUtil.randomNum(0,1)>0?(this.userChess=h.WHITECHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!"),this.board.AIXianShou(),e.setPosition(-270,368),t.setPosition(182,-380),n.setPosition(-225,372),a.setPosition(225,-376)):(this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.userChess=h.BLACKCHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"),t.setPosition(-270,368),e.setPosition(182,-380),a.setPosition(-225,372),n.setPosition(225,-376)),this.ai_duihua(3),e.active=!0,t.active=!0,a.active=!0,n.active=!0}this.startTime(this.board.state)},t.prototype.jiabeiAction=function(e,t){var a=this;this.reward_gold*=e,this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",r.GameDataStorage.gameStateData.reward=this.reward_gold,r.GameDataStorage.gameStateData.rewardmultiple*=e;var n="",o=-380;if(1==t)o=380,n=["nvbujiabei","nvjiabei","nvjiabei","nvchaojijiabei"][e-1];else{this.stopTime_item3(),this.multiple=1,n=["nanbujiabei","nanjiabei","nanbujiabei","nanchaojijiabei"][e-1];var i=this.item3.getChildByName("Node"),s=cc.callFunc(function(){a.item3.active=!1,a.user_headIcon.node.getComponent(cc.Button).interactable=!0,a.caixianshou()});cc.tween(i).sequence(cc.tween().to(.5,{position:cc.v3(0,1500)},{easing:"backIn"}),cc.delayTime(1),s).start()}r.conMager.getInstance().playAudioEff(n),r.conMager.getInstance().getPoolNode(r.KEY.poolName.jiabei,this.node,{pos:cc.v2(0,o),index:e})},t.prototype.jiabei_btn=function(e,t){if(r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),!(this.multiple>0)){var a=parseInt(t);this.jiabeiAction(a,2)}},t.prototype.dsHeadIcon_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!0},t.prototype.userHeadIcon_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!0,console.log("\u51fa\u767c\u514d\u7f5a")},t.prototype.biaoQing_btn=function(e,t){var a=this;this.hide_userPenl_btn();var n=parseInt(t),o=this.node.getChildByName("user_biaoqing");o.active=!0,o.children[n].active=!0;var i=this.node.getChildByName("user_duihua");this.count_down.y<0&&(this.count_down.opacity=0),i.active=!0,i.children[n].active=!0,r.conMager.getInstance().playAudioEff("nan/"+this.musicNames[n-1]),this.scheduleOnce(function(){o.active=!1,o.children[n].active=!1,a.count_down.opacity=255,i.active=!1,i.children[n].active=!1},2.2)},t.prototype.hide_userPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!1},t.prototype.hide_dsPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!1},t.prototype.return_btn=function(){var e=this;this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),3!=this.gameType?r.conMager.getInstance().getPoolNode(r.KEY.poolName.stop_panel,this.node,{callBack:function(t){2==t&&e.renshu()}}):this.onClose(1)},t.prototype.luozizhong_action=function(e){e.active=!0,e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.getComponent(cc.Label).string=""}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50\u4e2d"}),cc.delayTime(.6))))},t.prototype.startTime=function(e){this.userGameTime=0,this.count_down.active=!0;var t=this.node.getChildByName("luozizhong");t.stopAllActions(),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+(30-this.userGameTime),this.userChess==e?(this.count_down.y=-440,t.setPosition(252,-376),this.quan.setPosition(0,-547)):(this.count_down.y=450,t.setPosition(-197,372),this.quan.setPosition(0,554)),t.color=-1==e?cc.color(51,51,51):cc.color(204,204,204),this.quan.getComponent(cc.Sprite).fillRange=1,this.luozizhong_action(t),this.count_down.getChildByName("time").color=cc.color(255,255,255),this.quan.active=!0,this.quan_judge=!0,this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){if(this.TimeDel||(this.userGameTime+=1),this.userGameTime>this.max_gameTime)this.gameOver();else{var e=this.max_gameTime-this.userGameTime,t=e+"";e<10&&(t="0"+e),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+t,e<15&&(this.count_down.getChildByName("time").color=cc.color(255,0,0),this.TimeDel||r.conMager.getInstance().playAudioEff(r.KEY.audioName.shijian)),12==this.userGameTime?this.ai_duihua(2,5):21==this.userGameTime?this.ai_duihua(2,20):26==this.userGameTime&&this.ai_duihua(2,80)}},t.prototype.stopTime=function(){this.unschedule(this.updateTime),this.count_down.active=!1,this.node.getChildByName("luozizhong").stopAllActions(),this.node.getChildByName("luozizhong").active=!1},t.prototype.startTime_item3=function(){this.count_time_itm3=10,this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label).string=this.count_time_itm3+"s",this.schedule(this.updateTime_item3,1)},t.prototype.updateTime_item3=function(){this.count_time_itm3-=1;var e=this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label);e.string=this.count_time_itm3+"s",this.count_time_itm3<=5&&(e.node.color=cc.color(255,0,0)),this.count_time_itm3<=0&&(e.node.active=!1,r.conMager.getInstance().playAudioEff("nanbujiabei"),this.jiabeiAction(1,2),this.stopTime_item3())},t.prototype.stopTime_item3=function(){this.unschedule(this.updateTime_item3)},t.prototype.renshu=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=1,r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null))},t.prototype.ai_renshu=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=0,r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null))},t.prototype.ai_diaoxian=function(){this.is_game_over||(l.commonFunction.updateSprite("head_icon/diaoxian",this.ds_headIcon.node),this.ds_headIcon.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeIn(.4)))),console.log("\u89e6\u53d1\u6389\u7ebf"))},t.prototype.ai_shangxian=function(){this.is_game_over||(l.commonFunction.updateSprite("head_icon/"+this.ds_headIconIndex,this.ds_headIcon.node),this.ds_headIcon.node.opacity=255,this.ds_headIcon.node.stopAllActions(),console.log("\u89e6\u53d1\u4e0a\u7ebf"))},t.prototype.pingju=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=2,r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null))},t.prototype.qiuhe=function(){},t.prototype.shubiao=function(e){this.shubiao_node.active=e},t.prototype.huiqi=function(){},t.prototype.update=function(e){this.quan_judge&&(1==Math.floor(e)&&console.log("1\u79d2\u8fc7\u53bb\u4e86"),this.quan.getComponent(cc.Sprite).fillRange-=1/(60*this.max_gameTime))},i([f(d.Gameboard_blxj)],t.prototype,"board",void 0),i([f(cc.Prefab)],t.prototype,"whiteChess",void 0),i([f(cc.Prefab)],t.prototype,"blackChess",void 0),i([f(cc.Node)],t.prototype,"quan",void 0),i([f(cc.Node)],t.prototype,"hongDian",void 0),i([f(cc.Node)],t.prototype,"boli_parent",void 0),i([f(cc.Mask)],t.prototype,"mask_guan",void 0),i([f(cc.Prefab)],t.prototype,"boli",void 0),i([m],t)}(r.winRootNode);a.default=y,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../classCon/configSurface":"configSurface","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform","../wuziqi/Piece":"Piece","../wuziqi/luandou_blxj/AStar":"AStar","../wuziqi/luandou_blxj/GameBoard_blxj":"GameBoard_blxj","../wuziqi/luandou_blxj/Grid":"Grid","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],luandou_game_view:[function(e,t,a){"use strict";cc._RF.push(t,"d51680t9gNDQZGYL1kBDUti","luandou_game_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=e("../../classCon/configSurface"),h=e("../wuziqi/GameBoard"),u=e("../wuziqi/Piece"),l=e("../../utils/platform"),d=e("../../utils/commonFunction"),p=cc._decorator,g=p.ccclass,_=p.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item1=null,t.item2=null,t.item3=null,t.gameType=1,t.dsName_string="",t.dsName_label_item2=null,t.dsLevel_label_item2=null,t.dsHeadIcon_item2=null,t.userLevel_label_item2=null,t.userName_label_item2=null,t.userHeadIcon_item2=null,t.user_headPanel=null,t.ds_headPanel=null,t.ds_headIcon=null,t.user_headIcon=null,t.reward_gold=2,t.multiple=0,t.chess_parent=null,t.shubiao_node=null,t.max_gameTime=30,t.board=null,t.whiteChess=null,t.blackChess=null,t.quan=null,t.hongDian=null,t.wu_parent=null,t.block=46,t.wu=null,t.wu_map=[],t.userGameTime=0,t.count_down=null,t.userChess=u.BLACKCHESS,t.is_game_over=!1,t.count_time_itm3=10,t.jiabei_num_item3=0,t.whiePool=new cc.NodePool,t.blackPool=new cc.NodePool,t.RightRate=1,t.TimeDel=!1,t.ds_headIconIndex=0,t.chess_num=0,t.interval=!0,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t.luozizhong=null,t.quan_judge=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){r._pl_fun.getInstance().startCreateVideo(),this.reward_gold=e[0].reward_gold,r.GameDataStorage.gameStateData.reward_gold=this.reward_gold,this.gameType=e[0].gameType,r.GameDataStorage.gameStateData.gameType=this.gameType,r.GameDataStorage.gameStateData.reward=this.reward_gold,console.log("\u6a21\u5f0f:",this.gameType),e[0].RightRate,this.RightRate=.9,this.hongDian.zIndex=99,this.initGame(),this.node.runAction(cc.fadeIn(.5)),l.platform.now_platform!=l.platform_type.is_tt&&(this.node.getChildByName("luping").active=!1)},t.prototype.onClose=function(){this.unscheduleAllCallbacks(),this.board.removeListennner(),r.conMager.getInstance().hideWinNode(this.node.name),r.conMager.getInstance().showWinNode(r.KEY.UIName.luanDou_view,null,{gameType:this.gameType})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){var e=this;r.conMager.getInstance()._msgAtion.on("ai_renshu",this.ai_renshu,this),r.conMager.getInstance()._msgAtion.on("ai_diaoxian",this.ai_diaoxian,this),r.conMager.getInstance()._msgAtion.on("ai_shangxian",this.ai_shangxian,this),r.conMager.getInstance()._msgAtion.on("renshu",this.return_btn,this),r.conMager.getInstance()._msgAtion.on("pingju",this.pingju,this),r.conMager.getInstance()._msgAtion.on("shubiao",this.shubiao,this),r.conMager.getInstance()._msgAtion.on("qiuhe",this.qiuhe,this),r.conMager.getInstance()._msgAtion.on("huiqi",this.huiqi,this),r.conMager.getInstance()._msgAtion.on("closeSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1},this),r.conMager.getInstance()._msgAtion.on("openSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0},this),r.conMager.getInstance()._msgAtion.on("stopTimeDel",function(){e.TimeDel=!0,e.quan_judge=!1},this),r.conMager.getInstance()._msgAtion.on("startTimeDel",function(){e.TimeDel=!1,e.quan_judge=!0},this)},t.prototype.RadomZhenFa=function(e){var t=[],a=c.zhenFaWeight[e];if(a){for(var n in a){var o={v:n,p:a[n]};t.push(o)}for(var i=[],r=0;r<t.length;r++)i=i.concat(new Array(t[r].p).fill(t[r].v));return i[s.NumberUtil.randomNum(0,i.length-1)]}},t.prototype.initDsZhenFa=function(){var e=r.GameDataStorage.gameStateData.userZhenFaName,t=this.RadomZhenFa(e);r.GameDataStorage.gameStateData.dsZhenFaName=t;var a=r.GameDataStorage.getUser().userData.zhenFaMap[e].level+5*[-1,1][s.NumberUtil.randomNum(0,1)];a<=3&&(a=3),r.GameDataStorage.gameStateData.ds_zhenfalevel=a},t.prototype.initGame=function(){cc.find("Canvas/money_node").active=!1,r.GameDataStorage.gameStateData.chess_num=0,r.GameDataStorage.gameStateData.rewardmultiple=0,2==this.gameType&&this.initDsZhenFa(),this.initUi(),this.initData(),3!=this.gameType?this.kaiChangDongHua():(this.node.getChildByName("heizi").active=!0,this.node.getChildByName("baizi").active=!0,this.node.getChildByName("baizi_label").active=!0,this.node.getChildByName("heizi_label").active=!0),this.board.init(this),this.node.getChildByName("mask").zIndex=99,this.initPool(this.whiePool,this.whiteChess),this.initPool(this.blackPool,this.blackChess),this.initMiWu()},t.prototype.initUi=function(){this.item1=this.node.getChildByName("item1"),this.item2=this.node.getChildByName("item2"),this.item3=this.node.getChildByName("item3"),this.dsLevel_label_item2=this.item2.getChildByName("left").getChildByName("dsLevel").getComponent(cc.Label),this.dsName_label_item2=this.item2.getChildByName("left").getChildByName("dsName").getComponent(cc.Label),this.userLevel_label_item2=this.item2.getChildByName("right").getChildByName("userLevel").getComponent(cc.Label),this.userName_label_item2=this.item2.getChildByName("right").getChildByName("userName").getComponent(cc.Label),this.user_headPanel=this.node.getChildByName("user_headPanel"),this.ds_headPanel=this.node.getChildByName("ds_headPanel"),this.ds_headIcon=this.node.getChildByName("ds_headIcon").getChildByName("ds_headIcon").getComponent(cc.Sprite),this.user_headIcon=this.node.getChildByName("user_headIcon").getChildByName("user_headIcon").getComponent(cc.Sprite),this.chess_parent=this.node.getChildByName("chess_parent"),this.shubiao_node=this.chess_parent.getChildByName("shubiao_node"),this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",this.count_down=this.node.getChildByName("count_down"),3!=this.gameType?(this.ds_headIcon.node.parent.active=!0,this.user_headIcon.node.parent.active=!0):(this.node.getChildByName("heiqi").active=!0,this.node.getChildByName("baiqi").active=!0,this.shubiao_node.active=!0)},t.prototype.initData=function(){var e=r.GameDataStorage.getUser().userData;this.userName_label_item2.string=e.gameName;var t=d.commonFunction.judgeGameLevelName(e.user_level);this.userLevel_label_item2.string=t;var a=c.XingMingData.xing,n=c.XingMingData.ming,o=d.commonFunction.randomGameName(a,n);this.dsName_label_item2.string=o,r.GameDataStorage.gameStateData.ds_name=o;var i=d.commonFunction.judgeAiLevel(e.user_level),h=d.commonFunction.judgeGameLevelName(i);this.dsLevel_label_item2.string=h;var u=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel"),l=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel");u.getChildByName("Name").getComponent(cc.Label).string=this.userName_label_item2.string,u.getChildByName("Level").getComponent(cc.Label).string=this.userLevel_label_item2.string,l.getChildByName("Name").getComponent(cc.Label).string=this.dsName_label_item2.string,l.getChildByName("Level").getComponent(cc.Label).string=this.dsLevel_label_item2.string,"null"!=r.GameDataStorage.getUser().userData.headIconUrl&&d.commonFunction.updateHttpSprite(r.GameDataStorage.getUser().userData.headIconUrl,this.user_headIcon.node);var p=s.NumberUtil.randomNum(1,60);this.ds_headIconIndex=p,r.GameDataStorage.gameStateData.ds_headIconIndex=this.ds_headIconIndex,console.log("\u5bf9\u624b\u7684\u5934\u50cf:",p);var g="head_icon/"+p;d.commonFunction.updateSprite(g,this.ds_headIcon.node);var _=this.node.getChildByName("game_info_parent");r.conMager.getInstance().getPoolNode(r.KEY.poolName.game_info,_,null)},t.prototype.initPool=function(e,t){for(var a=0;a<225;a++){var n=cc.instantiate(t);e.put(n)}},t.prototype.initMiWu=function(){for(var e=this.wu_parent,t=0;t<15;t++){this.wu_map[t]=[];for(var a=0;a<15;a++){this.wu_map[t][a]=null;var n=cc.instantiate(this.wu);n.parent=e,n.setPosition(46*t,46*a),this.wu_map[t][a]=n}}},t.prototype.moveInChess=function(e,t,a,n){var o,i=this,s=r.GameDataStorage.gameStateData.chess_num;if(2==this.gameType)if(s>30){this.chess_num-=1;var c=2;s>100&&(c=10),s>150&&(c=15),this.chess_num%c==0&&r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi)}else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);this.stopTime(),this.startTime(-a),this.ai_duihua(1);var h=null,l=null;if(a==u.BLACKCHESS?(h=this.blackPool,l=this.blackChess):(h=this.whiePool,l=this.whiteChess),h.size()>0)o=h.get();else{var d=cc.instantiate(l);h.put(d),o=h.get()}var p=Math.floor(e/this.block),g=Math.floor(t/this.block),_=15*g+p;this.board.chess_map[_]=o,a==this.userChess&&this.scheduleOnce(function(){var e=i.wu_map[p][g];i.wuAction(e),i.checkWin(p,g)},.1),o.x=e,o.y=t,this.chess_parent.addChild(o),this.chessAction(o,n),5==this.board.sum&&(this.wu_parent.runAction(cc.sequence(cc.fadeOut(.35),cc.delayTime(1.5),cc.fadeIn(.35))),-1==this.userChess&&r.conMager.getInstance()._msgAtion.emit("all_checkWin")),this.scheduleOnce(function(){i.hongDian.active=!0,i.hongDian.setPosition(e,t+1),console.log("1111",e,t)},.1)},t.prototype.wuAction=function(e){e.active&&e.runAction(cc.sequence(cc.fadeOut(.35),cc.callFunc(function(){e.active=!1})))},t.prototype.checkWin=function(e,t){for(var a=e-1-1,n=t+1,o=0;o<9;o++)if(a+=1,o%3==0&&0!=o&&(a=e-1,n-=1),!(a>14||a<0||n>14||n<0)){var i=this.wu_map[a][n];i&&this.wuAction(i)}},t.prototype.chessAction=function(e,t){var a=this;e.scale=1.5,e.getChildByName("chess").zIndex=98,e.y+=80,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)),cc.callFunc(function(){if(t){var n=e.getChildByName("jn1");n.active=!0,a.scheduleOnce(function(){n.active=!1},1)}})))},t.prototype.ai_duihua=function(e,t){var a=this;if(3!=this.gameType){var n=this.node.getChildByName("ds_biaoqing"),o=this.node.getChildByName("ds_duihua"),i=0;if(1==e){if(!this.interval)return;if(this.interval=!1,this.scheduleOnce(function(){a.interval=!0},8),this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,10)<2&&(s.NumberUtil.randomNum(0,1)>0?(i=1,r.conMager.getInstance().playAudioEff("nv/nvqifeng")):(i=5,r.conMager.getInstance().playAudioEff("nv/nvhaoqi")))}else if(3==e)i=6,r.conMager.getInstance().playAudioEff("nv/nvhengaoxing");else{if(this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,100)<t&&(i=4,r.conMager.getInstance().playAudioEff("nv/nvkeyi"))}i>0&&(o.active=!0,n.active=!0,n.children[i].active=!0,o.children[i].active=!0,this.count_down.y>0&&(this.count_down.opacity=0),this.scheduleOnce(function(){a.count_down.opacity=255,n.children[i].active=!1,o.children[i].active=!1,n.active=!1,o.active=!1},2.2))}},t.prototype.gameOver=function(){console.log("\u6e38\u620f\u501f\u5bbf:",this.is_game_over),this.is_game_over||(this.is_game_over=!0,this.stopTime(),3!=this.gameType&&(cc.find("Canvas/money_node").active=!0),this.userGameTime>30?this.userChess!=this.board.win?(console.log("\u5bf9\u624b\u80dc\u5229"),r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null),r.GameDataStorage.gameStateData.who_sucess=1):(console.log("\u73a9\u5bb6\u80dc\u5229"),r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null),r.GameDataStorage.gameStateData.who_sucess=0):1==this.board.win||-1==this.board.win?this.userChess==this.board.win?(r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null),r.GameDataStorage.gameStateData.who_sucess=0):(r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null),r.GameDataStorage.gameStateData.who_sucess=1):(r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null),r.GameDataStorage.gameStateData.who_sucess=2),this.board.removeListennner())},t.prototype.kaiChangDongHua=function(){var e=this;this.ds_headIcon.node.getComponent(cc.Button).interactable=!1,this.user_headIcon.node.getComponent(cc.Button).interactable=!1,r.conMager.getInstance().playAudioEff(r.KEY.audioName.kaiju),r.conMager.getInstance().getPoolNode(r.KEY.poolName.item2,this.node,{callBack:function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.item3,e.node,{callBack:function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.setup,e.node,null),e.caixianshou()}})}})},t.prototype.caixianshou=function(){if(3!=this.gameType){var e=this.node.getChildByName("heizi"),t=this.node.getChildByName("baizi"),a=this.node.getChildByName("baizi_label"),n=this.node.getChildByName("heizi_label");s.NumberUtil.randomNum(0,1)>0?(this.userChess=u.WHITECHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!"),this.board.AIXianShou(),e.setPosition(-270,368),t.setPosition(182,-380),n.setPosition(-225,372),a.setPosition(225,-376)):(this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.userChess=u.BLACKCHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"),t.setPosition(-270,368),e.setPosition(182,-380),a.setPosition(-225,372),n.setPosition(225,-376)),this.ai_duihua(3),e.active=!0,t.active=!0,a.active=!0,n.active=!0}this.startTime(this.board.state)},t.prototype.jiabeiAction=function(e,t){var a=this;this.reward_gold*=e,this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",r.GameDataStorage.gameStateData.reward=this.reward_gold,r.GameDataStorage.gameStateData.rewardmultiple*=e;var n="",o=-380;if(1==t)o=380,n=["nvbujiabei","nvjiabei","nvjiabei","nvchaojijiabei"][e-1];else{this.stopTime_item3(),this.multiple=1,n=["nanbujiabei","nanjiabei","nanbujiabei","nanchaojijiabei"][e-1];var i=this.item3.getChildByName("Node"),s=cc.callFunc(function(){a.item3.active=!1,a.user_headIcon.node.getComponent(cc.Button).interactable=!0,a.caixianshou()});cc.tween(i).sequence(cc.tween().to(.5,{position:cc.v3(0,1500)},{easing:"backIn"}),cc.delayTime(1),s).start()}r.conMager.getInstance().playAudioEff(n),r.conMager.getInstance().getPoolNode(r.KEY.poolName.jiabei,this.node,{pos:cc.v2(0,o),index:e})},t.prototype.jiabei_btn=function(e,t){if(r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),!(this.multiple>0)){var a=parseInt(t);this.jiabeiAction(a,2)}},t.prototype.dsHeadIcon_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!0},t.prototype.userHeadIcon_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!0,console.log("\u51fa\u767c\u514d\u7f5a")},t.prototype.biaoQing_btn=function(e,t){var a=this;this.hide_userPenl_btn();var n=parseInt(t),o=this.node.getChildByName("user_biaoqing");o.active=!0,o.children[n].active=!0;var i=this.node.getChildByName("user_duihua");this.count_down.y<0&&(this.count_down.opacity=0),i.active=!0,i.children[n].active=!0,r.conMager.getInstance().playAudioEff("nan/"+this.musicNames[n-1]),this.scheduleOnce(function(){o.active=!1,o.children[n].active=!1,a.count_down.opacity=255,i.active=!1,i.children[n].active=!1},2.2)},t.prototype.hide_userPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!1},t.prototype.hide_dsPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!1},t.prototype.return_btn=function(){var e=this;this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),3!=this.gameType?r.conMager.getInstance().getPoolNode(r.KEY.poolName.stop_panel,this.node,{callBack:function(t){2==t&&e.renshu()}}):this.onClose(1)},t.prototype.luozizhong_action=function(e){e.active=!0,e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.getComponent(cc.Label).string=""}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50\u4e2d"}),cc.delayTime(.6))))},t.prototype.startTime=function(e){this.userGameTime=0,this.count_down.active=!0;var t=this.node.getChildByName("luozizhong");t.stopAllActions(),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+(30-this.userGameTime),this.userChess==e?(this.count_down.y=-440,t.setPosition(252,-376),this.quan.setPosition(0,-547)):(this.count_down.y=450,t.setPosition(-197,372),this.quan.setPosition(0,554)),t.color=-1==e?cc.color(51,51,51):cc.color(204,204,204),this.quan.getComponent(cc.Sprite).fillRange=1,this.luozizhong_action(t),this.count_down.getChildByName("time").color=cc.color(255,255,255),this.quan.active=!0,this.quan_judge=!0,this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){if(this.TimeDel||(this.userGameTime+=1),this.userGameTime>this.max_gameTime)this.gameOver();else{var e=this.max_gameTime-this.userGameTime,t=e+"";e<10&&(t="0"+e),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+t,e<15&&(this.count_down.getChildByName("time").color=cc.color(255,0,0),this.TimeDel||r.conMager.getInstance().playAudioEff(r.KEY.audioName.shijian)),12==this.userGameTime?this.ai_duihua(2,5):21==this.userGameTime?this.ai_duihua(2,20):26==this.userGameTime&&this.ai_duihua(2,80)}},t.prototype.stopTime=function(){this.unschedule(this.updateTime),this.count_down.active=!1,this.node.getChildByName("luozizhong").stopAllActions(),this.node.getChildByName("luozizhong").active=!1},t.prototype.startTime_item3=function(){this.count_time_itm3=10,this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label).string=this.count_time_itm3+"s",this.schedule(this.updateTime_item3,1)},t.prototype.updateTime_item3=function(){this.count_time_itm3-=1;var e=this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label);e.string=this.count_time_itm3+"s",this.count_time_itm3<=5&&(e.node.color=cc.color(255,0,0)),this.count_time_itm3<=0&&(e.node.active=!1,r.conMager.getInstance().playAudioEff("nanbujiabei"),this.jiabeiAction(1,2),this.stopTime_item3())},t.prototype.stopTime_item3=function(){this.unschedule(this.updateTime_item3)},t.prototype.renshu=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=1,r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null))},t.prototype.ai_renshu=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=0,r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null))},t.prototype.ai_diaoxian=function(){this.is_game_over||(d.commonFunction.updateSprite("head_icon/diaoxian",this.ds_headIcon.node),this.ds_headIcon.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeIn(.4)))),console.log("\u89e6\u53d1\u6389\u7ebf"))},t.prototype.ai_shangxian=function(){this.is_game_over||(d.commonFunction.updateSprite("head_icon/"+this.ds_headIconIndex,this.ds_headIcon.node),this.ds_headIcon.node.opacity=255,this.ds_headIcon.node.stopAllActions(),console.log("\u89e6\u53d1\u4e0a\u7ebf"))},t.prototype.pingju=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=2,r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null))},t.prototype.qiuhe=function(){},t.prototype.shubiao=function(e){this.shubiao_node.active=e},t.prototype.huiqi=function(){},t.prototype.update=function(e){this.quan_judge&&(1==Math.floor(e)&&console.log("1\u79d2\u8fc7\u53bb\u4e86"),this.quan.getComponent(cc.Sprite).fillRange-=1/(60*this.max_gameTime))},i([_(h.GameBoard)],t.prototype,"board",void 0),i([_(cc.Prefab)],t.prototype,"whiteChess",void 0),i([_(cc.Prefab)],t.prototype,"blackChess",void 0),i([_(cc.Node)],t.prototype,"quan",void 0),i([_(cc.Node)],t.prototype,"hongDian",void 0),i([_(cc.Node)],t.prototype,"wu_parent",void 0),i([_(cc.Prefab)],t.prototype,"wu",void 0),i([g],t)}(r.winRootNode);a.default=m,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../classCon/configSurface":"configSurface","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform","../wuziqi/GameBoard":"GameBoard","../wuziqi/Piece":"Piece","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],luandou_gssk:[function(e,t,a){"use strict";cc._RF.push(t,"0b0b7FJ03pKAZSkQy4BjSWG","luandou_gssk");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/dataController/DATA"),r=e("../../../../SSSGF/ssscgf"),c=e("../../../../utils/commonFunction"),h=e("../class_manager"),u=e("../game_manager"),l=e("../model_joiner"),d=cc._decorator,p=d.ccclass,g=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t}return o(t,e),t.prototype.init_game_mode=function(){this.cos=h.joiner_enum.model,r.GameDataStorage.gameStateData.reward_gold=100},t.prototype.init=function(e,t){this.chess_array=t,r.GameDataStorage.gameStateData.gameType=s.game_type.luandou_gssk},t.prototype.init_ui=function(e){var t=this;this.board=e,this.board.moren_bg=!1,this.board.moren_window=!1,r.conMager.getInstance().getPoolNode(r.KEY.poolName.item2,this.board.ui_parent,{callBack:function(){t.board.head_icon_action(),r.conMager.getInstance().getPoolNode(r.KEY.poolName.item3,t.board.ui_parent,{callBack:function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.tip,t.node,{cb:function(){t.board.start_game()}})}}),r.conMager.getInstance().getPoolNode(r.KEY.poolName.setup,t.board.ui_parent,null)}}),c.commonFunction.updateSprite("board/\u5730\u56fe06",this.board.bg),c.commonFunction.updateSprite("board/qipan",this.board.qipan),c.commonFunction.updateSprite("board/subiao0",this.board.shubiao)},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.model_small_round_win=function(e){for(var t=0;t<e.chess_array.length;t++)if(e.chess_array[t].stone_type)return console.log("\u6211\u5426\u51b3\u4e86\u8fd9\u4e2a\u7ed3\u679c"),!1;return console.log("\u6211\u901a\u8fc7\u4e86\u8fd9\u4e2a\u7ed3\u679c"),!0},t.prototype.one_player_play_chess=function(){return!0},t.prototype.end_small_game=function(){var e=this;this.chess=this.board.get_last_chess();var t=this.chess.pos;this.data_arr=[];for(var a=0;a<15;a++)null!=this.chess_array[t.x][a].chess_data&&a!=t.y&&this.data_arr.push(new cc.Vec2(t.x,a)),null!=this.chess_array[a][t.y].chess_data&&a!=t.x&&this.data_arr.push(new cc.Vec2(a,t.y));return this.chess_anima(this.chess.node,this.chess.pos,this.chess.state),this.data_arr.forEach(function(t){var a=t,n=e.chess_array[a.x][a.y];n.chess_data.stone_type=!n.chess_data.stone_type,cc.tween(n.chess_data.node).delay(.7).call(function(){if(n.chess_data.stone_type)r.conMager.getInstance().getPoolNode(r.KEY.poolName.stone_chess,n.chess_data.node,{color:n.chess_data.state});else{var e=n.chess_data.node.getChildByName(r.KEY.poolName.stone_chess);e&&r.conMager.getInstance().putPoolNode(e.name,e)}}).start()}),!1},t.prototype.end_big_game=function(){return!0},t.prototype.one_win=function(){return!0},t.prototype.chess_anima=function(e,t,a){var n=this;this.scheduleOnce(function(){console.log("\u53d1\u51fa\u56db\u6761\u5c04\u7ebf");var o=e.convertToWorldSpaceAR(cc.Vec2.ZERO),i=n.board.up_effect.convertToNodeSpaceAR(o),s=t.x;n.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(r.KEY.audioName.gssk_jiguang)},.3),r.conMager.getInstance().getPoolNode(r.KEY.poolName.gssk_line,n.board.up_effect,{pos:i,time:a,lens:s,angel:0,scaleX:-1}),s=14-t.x,r.conMager.getInstance().getPoolNode(r.KEY.poolName.gssk_line,n.board.up_effect,{pos:i,time:a,lens:s,angel:0,scaleX:1}),s=14-t.y,r.conMager.getInstance().getPoolNode(r.KEY.poolName.gssk_line,n.board.up_effect,{pos:i,time:a,lens:s,angel:90,scaleX:1}),s=t.y,r.conMager.getInstance().getPoolNode(r.KEY.poolName.gssk_line,n.board.up_effect,{pos:i,time:a,lens:s,angel:90,scaleX:-1}),n.scheduleOnce(function(){u.game_manager.get_game_event(n)},.8)},.15)},i([p],t)}(l.default));a.default=g,cc._RF.pop()},{"../../../../SSSGF/dataController/DATA":"DATA","../../../../SSSGF/ssscgf":"ssscgf","../../../../utils/commonFunction":"commonFunction","../class_manager":"class_manager","../game_manager":"game_manager","../model_joiner":"model_joiner"}],luandou_hbdd_view:[function(e,t,a){"use strict";cc._RF.push(t,"feb10jL6XpC3p1C4/2vFmiF","luandou_hbdd_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../classCon/configSurface"),r=e("../../SSSGF/dataController/DATA"),c=e("../../SSSGF/ssscgf"),h=e("../../utils/commonFunction"),u=e("../../utils/platform"),l=e("../wuziqi/luandou_hbdd/GameBoard_hbdd"),d=e("../wuziqi/Piece"),p=cc._decorator,g=p.ccclass,_=p.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item1=null,t.item2=null,t.item3=null,t.gameType=1,t.dsName_string="",t.dsName_label_item2=null,t.dsLevel_label_item2=null,t.dsHeadIcon_item2=null,t.userLevel_label_item2=null,t.userName_label_item2=null,t.userHeadIcon_item2=null,t.user_headPanel=null,t.ds_headPanel=null,t.ds_headIcon=null,t.user_headIcon=null,t.reward_gold=2,t.multiple=0,t.chess_parent=null,t.shubiao_node=null,t.max_gameTime=30,t.board=null,t.whiteChess=null,t.blackChess=null,t.quan=null,t.hongDian=null,t.block=46,t.wu_map=[],t.userGameTime=0,t.count_down=null,t.userChess=d.BLACKCHESS,t.is_game_over=!1,t.count_time_itm3=10,t.jiabei_num_item3=0,t.whiePool=new cc.NodePool,t.blackPool=new cc.NodePool,t.RightRate=1,t.TimeDel=!1,t.ds_headIconIndex=0,t.chess_num=0,t.interval=!0,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t.luozizhong=null,t.quan_judge=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){c._pl_fun.getInstance().startCreateVideo(),this.reward_gold=e[0].reward_gold,c.GameDataStorage.gameStateData.reward_gold=this.reward_gold,this.gameType=e[0].gameType,this.gameType=r.game_type.luandou_hbdd,c.GameDataStorage.gameStateData.gameType=this.gameType,c.GameDataStorage.gameStateData.reward=this.reward_gold,e[0].RightRate,this.RightRate=.9,this.hongDian.zIndex=99,this.initGame(),this.node.runAction(cc.fadeIn(.5)),u.platform.now_platform!=u.platform_type.is_tt&&(this.node.getChildByName("luping").active=!1)},t.prototype.onClose=function(){this.unscheduleAllCallbacks(),this.board.removeListennner(),c.conMager.getInstance().hideWinNode(this.node.name),c.conMager.getInstance().showWinNode(c.KEY.UIName.luanDou_view,null,{gameType:this.gameType})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){var e=this;c.conMager.getInstance()._msgAtion.on("ai_renshu",this.ai_renshu,this),c.conMager.getInstance()._msgAtion.on("ai_diaoxian",this.ai_diaoxian,this),c.conMager.getInstance()._msgAtion.on("ai_shangxian",this.ai_shangxian,this),c.conMager.getInstance()._msgAtion.on("renshu",this.return_btn,this),c.conMager.getInstance()._msgAtion.on("pingju",this.pingju,this),c.conMager.getInstance()._msgAtion.on("shubiao",this.shubiao,this),c.conMager.getInstance()._msgAtion.on("qiuhe",this.qiuhe,this),c.conMager.getInstance()._msgAtion.on("huiqi",this.huiqi,this),c.conMager.getInstance()._msgAtion.on("closeSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1},this),c.conMager.getInstance()._msgAtion.on("openSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0},this),c.conMager.getInstance()._msgAtion.on("stopTimeDel",function(){e.TimeDel=!0,e.quan_judge=!1},this),c.conMager.getInstance()._msgAtion.on("startTimeDel",function(){e.TimeDel=!1,e.quan_judge=!0},this)},t.prototype.RadomZhenFa=function(e){var t=[],a=s.zhenFaWeight[e];if(a){for(var n in a){var o={v:n,p:a[n]};t.push(o)}for(var i=[],r=0;r<t.length;r++)i=i.concat(new Array(t[r].p).fill(t[r].v));return i[c.NumberUtil.randomNum(0,i.length-1)]}},t.prototype.initDsZhenFa=function(){var e=c.GameDataStorage.gameStateData.userZhenFaName,t=this.RadomZhenFa(e);c.GameDataStorage.gameStateData.dsZhenFaName=t;var a=c.GameDataStorage.getUser().userData.zhenFaMap[e].level+5*[-1,1][c.NumberUtil.randomNum(0,1)];a<=3&&(a=3),c.GameDataStorage.gameStateData.ds_zhenfalevel=a},t.prototype.initGame=function(){cc.find("Canvas/money_node").active=!1,c.GameDataStorage.gameStateData.chess_num=0,c.GameDataStorage.gameStateData.rewardmultiple=0,2==this.gameType&&this.initDsZhenFa(),this.initUi(),this.initData(),3!=this.gameType?this.kaiChangDongHua():(this.node.getChildByName("heizi").active=!0,this.node.getChildByName("baizi").active=!0,this.node.getChildByName("baizi_label").active=!0,this.node.getChildByName("heizi_label").active=!0),this.board.init(this),this.node.getChildByName("mask").zIndex=99,this.initPool(this.whiePool,this.whiteChess),this.initPool(this.blackPool,this.blackChess)},t.prototype.initUi=function(){this.item1=this.node.getChildByName("item1"),this.item2=this.node.getChildByName("item2"),this.item3=this.node.getChildByName("item3"),this.dsLevel_label_item2=this.item2.getChildByName("left").getChildByName("dsLevel").getComponent(cc.Label),this.dsName_label_item2=this.item2.getChildByName("left").getChildByName("dsName").getComponent(cc.Label),this.userLevel_label_item2=this.item2.getChildByName("right").getChildByName("userLevel").getComponent(cc.Label),this.userName_label_item2=this.item2.getChildByName("right").getChildByName("userName").getComponent(cc.Label),this.user_headPanel=this.node.getChildByName("user_headPanel"),this.ds_headPanel=this.node.getChildByName("ds_headPanel"),this.ds_headIcon=this.node.getChildByName("ds_headIcon").getChildByName("ds_headIcon").getComponent(cc.Sprite),this.user_headIcon=this.node.getChildByName("user_headIcon").getChildByName("user_headIcon").getComponent(cc.Sprite),this.chess_parent=this.node.getChildByName("chess_parent"),this.shubiao_node=this.chess_parent.getChildByName("shubiao_node"),this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",this.count_down=this.node.getChildByName("count_down"),3!=this.gameType?(this.ds_headIcon.node.parent.active=!0,this.user_headIcon.node.parent.active=!0):(this.node.getChildByName("heiqi").active=!0,this.node.getChildByName("baiqi").active=!0,this.shubiao_node.active=!0)},t.prototype.initData=function(){var e=c.GameDataStorage.getUser().userData;this.userName_label_item2.string=e.gameName;var t=h.commonFunction.judgeGameLevelName(e.user_level);this.userLevel_label_item2.string=t;var a=s.XingMingData.xing,n=s.XingMingData.ming,o=h.commonFunction.randomGameName(a,n);this.dsName_label_item2.string=o,c.GameDataStorage.gameStateData.ds_name=o;var i=h.commonFunction.judgeAiLevel(e.user_level),r=h.commonFunction.judgeGameLevelName(i);this.dsLevel_label_item2.string=r;var u=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel"),l=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel");u.getChildByName("Name").getComponent(cc.Label).string=this.userName_label_item2.string,u.getChildByName("Level").getComponent(cc.Label).string=this.userLevel_label_item2.string,l.getChildByName("Name").getComponent(cc.Label).string=this.dsName_label_item2.string,l.getChildByName("Level").getComponent(cc.Label).string=this.dsLevel_label_item2.string,"null"!=c.GameDataStorage.getUser().userData.headIconUrl&&h.commonFunction.updateHttpSprite(c.GameDataStorage.getUser().userData.headIconUrl,this.user_headIcon.node);var d=c.NumberUtil.randomNum(1,60);this.ds_headIconIndex=d,c.GameDataStorage.gameStateData.ds_headIconIndex=this.ds_headIconIndex,console.log("\u5bf9\u624b\u7684\u5934\u50cf:",d);var p="head_icon/"+d;h.commonFunction.updateSprite(p,this.ds_headIcon.node);var g=this.node.getChildByName("game_info_parent");c.conMager.getInstance().getPoolNode(c.KEY.poolName.game_info,g,null)},t.prototype.initPool=function(e,t){for(var a=0;a<225;a++){var n=cc.instantiate(t);e.put(n)}},t.prototype.moveInChess=function(e,t,a,n){var o,i=this,s=c.GameDataStorage.gameStateData.chess_num;if(2==this.gameType)if(s>30){this.chess_num-=1;var r=2;s>100&&(r=10),s>150&&(r=15),this.chess_num%r==0&&c.conMager.getInstance().playAudioEff(c.KEY.audioName.luozi)}else c.conMager.getInstance().playAudioEff(c.KEY.audioName.luozi);else c.conMager.getInstance().playAudioEff(c.KEY.audioName.luozi);this.stopTime(),this.startTime(-a),this.ai_duihua(1);var h=null,u=null;if(a==d.BLACKCHESS?(h=this.blackPool,u=this.blackChess):(h=this.whiePool,u=this.whiteChess),h.size()>0)o=h.get();else{var l=cc.instantiate(u);h.put(l),o=h.get()}var p=Math.floor(e/this.block),g=15*Math.floor(t/this.block)+p;this.board.chess_map[g]=o,o.x=e,o.y=t,this.chess_parent.addChild(o),this.chessAction(o,n),this.scheduleOnce(function(){i.hongDian.active=!0,i.hongDian.setPosition(e,t+1),console.log("1111",e,t)},.1)},t.prototype.checkWin=function(){for(var e=0;e<9;e++);},t.prototype.chessAction=function(e,t){var a=this;e.scale=1.5,e.getChildByName("chess").zIndex=98,e.y+=80,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)),cc.callFunc(function(){if(t){var n=e.getChildByName("jn1");n.active=!0,a.scheduleOnce(function(){n.active=!1},1)}})))},t.prototype.ai_duihua=function(e,t){var a=this;if(3!=this.gameType){var n=this.node.getChildByName("ds_biaoqing"),o=this.node.getChildByName("ds_duihua"),i=0;if(1==e){if(!this.interval)return;if(this.interval=!1,this.scheduleOnce(function(){a.interval=!0},8),this.board.state!=this.userChess)return;c.NumberUtil.randomNum(0,10)<2&&(c.NumberUtil.randomNum(0,1)>0?(i=1,c.conMager.getInstance().playAudioEff("nv/nvqifeng")):(i=5,c.conMager.getInstance().playAudioEff("nv/nvhaoqi")))}else if(3==e)i=6,c.conMager.getInstance().playAudioEff("nv/nvhengaoxing");else{if(this.board.state!=this.userChess)return;c.NumberUtil.randomNum(0,100)<t&&(i=4,c.conMager.getInstance().playAudioEff("nv/nvkeyi"))}i>0&&(o.active=!0,n.active=!0,n.children[i].active=!0,o.children[i].active=!0,this.count_down.y>0&&(this.count_down.opacity=0),this.scheduleOnce(function(){a.count_down.opacity=255,n.children[i].active=!1,o.children[i].active=!1,n.active=!1,o.active=!1},2.2))}},t.prototype.gameOver=function(){console.log("\u6e38\u620f\u501f\u5bbf:",this.is_game_over),this.is_game_over||(this.is_game_over=!0,this.stopTime(),3!=this.gameType&&(cc.find("Canvas/money_node").active=!0),this.userGameTime>30?this.userChess!=this.board.win?(console.log("\u5bf9\u624b\u80dc\u5229"),c.conMager.getInstance().showWinNode(c.KEY.UIName.fail_view,this.node.parent,null),c.GameDataStorage.gameStateData.who_sucess=1):(console.log("\u73a9\u5bb6\u80dc\u5229"),c.conMager.getInstance().showWinNode(c.KEY.UIName.success_view,this.node.parent,null),c.GameDataStorage.gameStateData.who_sucess=0):1==this.board.win||-1==this.board.win?this.userChess==this.board.win?(c.conMager.getInstance().showWinNode(c.KEY.UIName.success_view,this.node.parent,null),c.GameDataStorage.gameStateData.who_sucess=0):(c.conMager.getInstance().showWinNode(c.KEY.UIName.fail_view,this.node.parent,null),c.GameDataStorage.gameStateData.who_sucess=1):(c.conMager.getInstance().showWinNode(c.KEY.UIName.flat_view,this.node.parent,null),c.GameDataStorage.gameStateData.who_sucess=2),this.board.removeListennner())},t.prototype.kaiChangDongHua=function(){var e=this;this.ds_headIcon.node.getComponent(cc.Button).interactable=!1,this.user_headIcon.node.getComponent(cc.Button).interactable=!1,c.conMager.getInstance().playAudioEff(c.KEY.audioName.kaiju),c.conMager.getInstance().getPoolNode(c.KEY.poolName.item2,this.node,{callBack:function(){c.conMager.getInstance().getPoolNode(c.KEY.poolName.item3,e.node,{callBack:function(){c.conMager.getInstance().getPoolNode(c.KEY.poolName.setup,e.node,null),e.caixianshou()}})}})},t.prototype.caixianshou=function(){if(3!=this.gameType){var e=this.node.getChildByName("heizi"),t=this.node.getChildByName("baizi"),a=this.node.getChildByName("baizi_label"),n=this.node.getChildByName("heizi_label");c.NumberUtil.randomNum(0,1)>0?(this.userChess=d.WHITECHESS,c.conMager.getInstance().getPoolNode(c.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!"),this.board.AIXianShou(),e.setPosition(-270,368),t.setPosition(182,-380),n.setPosition(-225,372),a.setPosition(225,-376)):(this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.userChess=d.BLACKCHESS,c.conMager.getInstance().getPoolNode(c.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"),t.setPosition(-270,368),e.setPosition(182,-380),a.setPosition(-225,372),n.setPosition(225,-376)),this.ai_duihua(3),e.active=!0,t.active=!0,a.active=!0,n.active=!0}this.startTime(this.board.state)},t.prototype.jiabeiAction=function(e,t){var a=this;this.reward_gold*=e,this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",c.GameDataStorage.gameStateData.reward=this.reward_gold,c.GameDataStorage.gameStateData.rewardmultiple*=e;var n="",o=-380;if(1==t)o=380,n=["nvbujiabei","nvjiabei","nvjiabei","nvchaojijiabei"][e-1];else{this.stopTime_item3(),this.multiple=1,n=["nanbujiabei","nanjiabei","nanbujiabei","nanchaojijiabei"][e-1];var i=this.item3.getChildByName("Node"),s=cc.callFunc(function(){a.item3.active=!1,a.user_headIcon.node.getComponent(cc.Button).interactable=!0,a.caixianshou()});cc.tween(i).sequence(cc.tween().to(.5,{position:cc.v3(0,1500)},{easing:"backIn"}),cc.delayTime(1),s).start()}c.conMager.getInstance().playAudioEff(n),c.conMager.getInstance().getPoolNode(c.KEY.poolName.jiabei,this.node,{pos:cc.v2(0,o),index:e})},t.prototype.jiabei_btn=function(e,t){if(c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),!(this.multiple>0)){var a=parseInt(t);this.jiabeiAction(a,2)}},t.prototype.dsHeadIcon_btn=function(){this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!0},t.prototype.userHeadIcon_btn=function(){this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!0,console.log("\u51fa\u767c\u514d\u7f5a")},t.prototype.biaoQing_btn=function(e,t){var a=this;this.hide_userPenl_btn();var n=parseInt(t),o=this.node.getChildByName("user_biaoqing");o.active=!0,o.children[n].active=!0;var i=this.node.getChildByName("user_duihua");this.count_down.y<0&&(this.count_down.opacity=0),i.active=!0,i.children[n].active=!0,c.conMager.getInstance().playAudioEff("nan/"+this.musicNames[n-1]),this.scheduleOnce(function(){o.active=!1,o.children[n].active=!1,a.count_down.opacity=255,i.active=!1,i.children[n].active=!1},2.2)},t.prototype.hide_userPenl_btn=function(){this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!1},t.prototype.hide_dsPenl_btn=function(){this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!1},t.prototype.return_btn=function(){var e=this;this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),3!=this.gameType?c.conMager.getInstance().getPoolNode(c.KEY.poolName.stop_panel,this.node,{callBack:function(t){2==t&&e.renshu()}}):this.onClose(1)},t.prototype.luozizhong_action=function(e){e.active=!0,e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.getComponent(cc.Label).string=""}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50\u4e2d"}),cc.delayTime(.6))))},t.prototype.startTime=function(e){this.userGameTime=0,this.count_down.active=!0;var t=this.node.getChildByName("luozizhong");t.stopAllActions(),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+(30-this.userGameTime),this.userChess==e?(this.count_down.y=-440,t.setPosition(252,-376),this.quan.setPosition(0,-547)):(this.count_down.y=450,t.setPosition(-197,372),this.quan.setPosition(0,554)),t.color=-1==e?cc.color(51,51,51):cc.color(204,204,204),this.quan.getComponent(cc.Sprite).fillRange=1,this.luozizhong_action(t),this.count_down.getChildByName("time").color=cc.color(255,255,255),this.quan.active=!0,this.quan_judge=!0,this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){if(this.TimeDel||(this.userGameTime+=1),this.userGameTime>this.max_gameTime)this.gameOver();else{var e=this.max_gameTime-this.userGameTime,t=e+"";e<10&&(t="0"+e),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+t,e<15&&(this.count_down.getChildByName("time").color=cc.color(255,0,0),this.TimeDel||c.conMager.getInstance().playAudioEff(c.KEY.audioName.shijian)),12==this.userGameTime?this.ai_duihua(2,5):21==this.userGameTime?this.ai_duihua(2,20):26==this.userGameTime&&this.ai_duihua(2,80)}},t.prototype.stopTime=function(){this.unschedule(this.updateTime),this.count_down.active=!1,this.node.getChildByName("luozizhong").stopAllActions(),this.node.getChildByName("luozizhong").active=!1},t.prototype.startTime_item3=function(){this.count_time_itm3=10,this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label).string=this.count_time_itm3+"s",this.schedule(this.updateTime_item3,1)},t.prototype.updateTime_item3=function(){this.count_time_itm3-=1;var e=this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label);e.string=this.count_time_itm3+"s",this.count_time_itm3<=5&&(e.node.color=cc.color(255,0,0)),this.count_time_itm3<=0&&(e.node.active=!1,c.conMager.getInstance().playAudioEff("nanbujiabei"),this.jiabeiAction(1,2),this.stopTime_item3())},t.prototype.stopTime_item3=function(){this.unschedule(this.updateTime_item3)},t.prototype.renshu=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,c.GameDataStorage.gameStateData.who_sucess=1,c.conMager.getInstance().showWinNode(c.KEY.UIName.fail_view,this.node.parent,null))},t.prototype.ai_renshu=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,c.GameDataStorage.gameStateData.who_sucess=0,c.conMager.getInstance().showWinNode(c.KEY.UIName.success_view,this.node.parent,null))},t.prototype.ai_diaoxian=function(){this.is_game_over||(h.commonFunction.updateSprite("head_icon/diaoxian",this.ds_headIcon.node),this.ds_headIcon.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeIn(.4)))),console.log("\u89e6\u53d1\u6389\u7ebf"))},t.prototype.ai_shangxian=function(){this.is_game_over||(h.commonFunction.updateSprite("head_icon/"+this.ds_headIconIndex,this.ds_headIcon.node),this.ds_headIcon.node.opacity=255,this.ds_headIcon.node.stopAllActions(),console.log("\u89e6\u53d1\u4e0a\u7ebf"))},t.prototype.pingju=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,c.GameDataStorage.gameStateData.who_sucess=2,c.conMager.getInstance().showWinNode(c.KEY.UIName.flat_view,this.node.parent,null))},t.prototype.qiuhe=function(){},t.prototype.shubiao=function(e){this.shubiao_node.active=e},t.prototype.huiqi=function(){},t.prototype.update=function(e){this.quan_judge&&(1==Math.floor(e)&&console.log("1\u79d2\u8fc7\u53bb\u4e86"),this.quan.getComponent(cc.Sprite).fillRange-=1/(60*this.max_gameTime))},i([_(l.GameBoard_hbdd)],t.prototype,"board",void 0),i([_(cc.Prefab)],t.prototype,"whiteChess",void 0),i([_(cc.Prefab)],t.prototype,"blackChess",void 0),i([_(cc.Node)],t.prototype,"quan",void 0),i([_(cc.Node)],t.prototype,"hongDian",void 0),i([g],t)}(c.winRootNode);a.default=m,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../classCon/configSurface":"configSurface","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform","../wuziqi/Piece":"Piece","../wuziqi/luandou_hbdd/GameBoard_hbdd":"GameBoard_hbdd"}],luandou_jxmc_view:[function(e,t,a){"use strict";cc._RF.push(t,"8d9dexlvBJKs7j6XX9W4K3o","luandou_jxmc_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=e("../../classCon/configSurface"),h=e("../wuziqi/Piece"),u=e("../../utils/platform"),l=e("../../utils/commonFunction"),d=e("../wuziqi/luandou_jxmc/GameBoard_jxmc"),p=cc._decorator,g=p.ccclass,_=p.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameType=1,t.dsName_string="",t.user_headPanel=null,t.ds_headPanel=null,t.ds_headIcon=null,t.user_headIcon=null,t.reward_gold=2,t.multiple=0,t.chess_parent=null,t.shubiao_node=null,t.max_gameTime=30,t.ds_headIconIndex=0,t.board=null,t.whiteChess=null,t.blackChess=null,t.quan=null,t.hongDian=null,t.block=46,t.userGameTime=0,t.count_down=null,t.userChess=h.BLACKCHESS,t.is_game_over=!1,t.whiePool=new cc.NodePool,t.blackPool=new cc.NodePool,t.RightRate=1,t.TimeDel=!1,t.chess_num=0,t.interval=!0,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t.luozizhong=null,t.quan_judge=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){console.log("\u91d1\u5178\u4e13\u5c5e"),r._pl_fun.getInstance().startCreateVideo(),this.reward_gold=e[0].reward_gold,r.GameDataStorage.gameStateData.reward_gold=this.reward_gold,this.gameType=e[0].gameType,r.GameDataStorage.gameStateData.gameType=this.gameType;var t=e[0].RightRate;this.update_ai_RightRate(t),this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1,this.initGame(),this.node.runAction(cc.fadeIn(.5)),u.platform.now_platform!=u.platform_type.is_tt&&(this.node.getChildByName("luping").active=!1),this.hongDian.zIndex=99,this.hongDian.scaleX=.9},t.prototype.onClose=function(){this.unscheduleAllCallbacks(),this.board.removeListennner(),r.conMager.getInstance().hideWinNode(r.KEY.UIName.jd_game_view),r.conMager.getInstance().showWinNode(r.KEY.UIName.slectGmae,null,{gameType:this.gameType})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){var e=this;r.conMager.getInstance()._msgAtion.on("ai_renshu",this.ai_renshu,this),r.conMager.getInstance()._msgAtion.on("ai_diaoxian",this.ai_diaoxian,this),r.conMager.getInstance()._msgAtion.on("ai_shangxian",this.ai_shangxian,this),r.conMager.getInstance()._msgAtion.on("renshu",this.return_btn,this),r.conMager.getInstance()._msgAtion.on("pingju",this.pingju,this),r.conMager.getInstance()._msgAtion.on("shubiao",this.shubiao,this),r.conMager.getInstance()._msgAtion.on("qiuhe",this.qiuhe,this),r.conMager.getInstance()._msgAtion.on("huiqi",this.huiqi,this),r.conMager.getInstance()._msgAtion.on("closeSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1},this),r.conMager.getInstance()._msgAtion.on("openSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0},this),r.conMager.getInstance()._msgAtion.on("stopTimeDel",function(){e.TimeDel=!0,e.quan_judge=!1},this),r.conMager.getInstance()._msgAtion.on("startTimeDel",function(){e.TimeDel=!1,e.quan_judge=!0},this),cc.tween(this.hongDian).repeatForever(cc.tween(this.hongDian).to(.5,{opacity:0}).to(.5,{opacity:255}).delay(1)).start()},t.prototype.update_ai_RightRate=function(e){1==e?this.RightRate=.4:2==e?this.RightRate=.5:3==e?this.RightRate=.7:4==e?this.RightRate=.8:5==e&&(this.RightRate=.9)},t.prototype.RadomZhenFa=function(e){for(var t=c.zhenFaWeight[e],a=0,n=0;n<r.GameDataStorage.gameStateData.zhenFaName.length;n++)a+=t[r.GameDataStorage.gameStateData.zhenFaName[n]];var o=Math.random()*a,i=0,s="wanning";for(n=0;n<r.GameDataStorage.gameStateData.zhenFaName.length;n++)if(o<(i+=t[r.GameDataStorage.gameStateData.zhenFaName[n]])){s=r.GameDataStorage.gameStateData.zhenFaName[n];break}return console.log("hhhhhhhhhhhhhhhh",s,i,a),s},t.prototype.initDsZhenFa=function(){var e=r.GameDataStorage.gameStateData.userZhenFaName,t=this.RadomZhenFa(e);r.GameDataStorage.gameStateData.dsZhenFaName=t;var a=r.GameDataStorage.getUser().userData.zhenFaMap[e].level+5*[-1,1][s.NumberUtil.randomNum(0,1)];a<=3&&(a=3),r.GameDataStorage.gameStateData.ds_zhenfalevel=a,"xueyuyingsha"==e&&"kedi"==t&&(r.GameDataStorage.gameStateData.ds_zhenfalevel=s.NumberUtil.randomNum(1,10)),console.log("\u5bf9\u624b\u7684\u7b49\u7ea7:",r.GameDataStorage.gameStateData.ds_zhenfalevel)},t.prototype.initGame=function(){cc.find("Canvas/money_node").active=!1,r.GameDataStorage.gameStateData.chess_num=0,r.GameDataStorage.gameStateData.rewardmultiple=0,this.initUi(),this.initData(),this.kaiChangDongHua(),this.node.getChildByName("heizi").active=!0,this.node.getChildByName("baizi").active=!0,this.node.getChildByName("baizi_label").active=!0,this.node.getChildByName("heizi_label").active=!0,r.conMager.getInstance().getPoolNode(r.KEY.poolName.setup,this.node,null),this.board.init(this),this.node.getChildByName("mask").zIndex=99,this.initPool(this.whiePool,this.whiteChess),this.initPool(this.blackPool,this.blackChess)},t.prototype.initUi=function(){this.user_headPanel=this.node.getChildByName("user_headPanel"),this.ds_headPanel=this.node.getChildByName("ds_headPanel"),this.ds_headIcon=this.node.getChildByName("ds_headIcon").getChildByName("ds_headIcon").getComponent(cc.Sprite),this.user_headIcon=this.node.getChildByName("user_headIcon").getChildByName("user_headIcon").getComponent(cc.Sprite),this.chess_parent=this.node.getChildByName("chess_parent"),this.shubiao_node=this.chess_parent.getChildByName("shubiao_node"),this.count_down=this.node.getChildByName("count_down"),this.ds_headIcon.node.parent.active=!0,this.user_headIcon.node.parent.active=!0},t.prototype.initData=function(){r.GameDataStorage.getUser().userData,"null"!=r.GameDataStorage.getUser().userData.headIconUrl&&l.commonFunction.updateHttpSprite(r.GameDataStorage.getUser().userData.headIconUrl,this.user_headIcon.node);var e=s.NumberUtil.randomNum(1,60);this.ds_headIconIndex=e,r.GameDataStorage.gameStateData.ds_headIconIndex=this.ds_headIconIndex,console.log("\u5bf9\u624b\u7684\u5934\u50cf:",e);var t="head_icon/"+e;l.commonFunction.updateSprite(t,this.ds_headIcon.node);var a=this.node.getChildByName("game_info_parent");r.conMager.getInstance().getPoolNode(r.KEY.poolName.game_info,a,null)},t.prototype.initPool=function(e,t){for(var a=0;a<225;a++){var n=cc.instantiate(t);e.put(n)}},t.prototype.moveInChess=function(e,t,a,n){var o,i=r.GameDataStorage.gameStateData.chess_num;if(2==this.gameType)if(i>30){this.chess_num-=1;var s=2;i>100&&(s=10),i>150&&(s=15),this.chess_num%s==0&&r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi)}else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);this.stopTime(),this.startTime(-a),this.ai_duihua(1);var c=null,u=null;if(a==h.BLACKCHESS?(c=this.blackPool,u=this.blackChess):(c=this.whiePool,u=this.whiteChess),c.size()>0)o=c.get();else{var d=cc.instantiate(u);c.put(d),o=c.get()}var p=Math.floor(e/this.block),g=15*Math.floor(t/this.block)+p;this.board.chess_map[g]=o,o.x=e,o.y=t,this.chess_parent.addChild(o),o.zIndex=1;var _=r.GameDataStorage.gameStateData.userZhenFaName,m=r.GameDataStorage.gameStateData.dsZhenFaName;n?a==this.userChess&&"fenlie"==_||a==-1*this.userChess&&"fenlie"==m||(a==this.userChess&&"xueyuyingsha"==_?o.scale=0:a==-1*this.userChess&&"xueyuyingsha"==m?o.scale=0:a==this.userChess&&"meihua"==_?l.commonFunction.updateSprite("chess/hua_"+a,o.getChildByName("chess"),function(){}):a==-1*this.userChess&&"meihua"==m?l.commonFunction.updateSprite("chess/hua_"+a,o.getChildByName("chess"),function(){}):this.chessAction(o,n)):this.chessAction(o,n)},t.prototype.show_hongdian=function(e,t,a){this.hongDian.active=!0;var n=e*this.board.block,o=t*this.board.block;a&&(n=this.board.newx,o=this.board.newY),this.hongDian.setPosition(n,o)},t.prototype.hide_hongdian=function(){this.hongDian.active=!1},t.prototype.chessAction=function(e,t){var a=this;e.scale=1.5,e.getChildByName("chess").zIndex=98,e.y+=80,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)),cc.callFunc(function(){if(t){var n=e.getChildByName("jn1");n.active=!0,a.scheduleOnce(function(){n.active=!1},1)}})))},t.prototype.ai_duihua=function(e,t){var a=this;if(!(this.gameType>2)){var n=this.node.getChildByName("ds_biaoqing"),o=this.node.getChildByName("ds_duihua"),i=0;if(1==e){if(!this.interval)return;if(this.interval=!1,this.scheduleOnce(function(){a.interval=!0},8),this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,10)<2&&(s.NumberUtil.randomNum(0,1)>0?(i=1,r.conMager.getInstance().playAudioEff("nv/nvqifeng")):(i=5,r.conMager.getInstance().playAudioEff("nv/nvhaoqi")))}else{if(3==e)return;if(this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,100)<t&&(i=4,r.conMager.getInstance().playAudioEff("nv/nvkeyi"))}i>0&&(o.active=!0,n.active=!0,n.children[i].active=!0,o.children[i].active=!0,this.count_down.y>0&&(this.count_down.opacity=0),this.scheduleOnce(function(){a.count_down.opacity=255,n.children[i].active=!1,o.children[i].active=!1,n.active=!1,o.active=!1},2.2))}},t.prototype.gameOver=function(){console.log("\u6e38\u620f\u501f\u5bbf:",this.is_game_over,this.board.sum),console.log("\u522b\u73a9\u4e86",this.board.win),this.is_game_over||(this.is_game_over=!0,this.stopTime(),cc.find("Canvas/money_node").active=!0,this.userGameTime>30?this.userChess==this.board.state?(console.log("\u5bf9\u624b\u80dc\u5229"),r.GameDataStorage.gameStateData.who_sucess=1,r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null)):(console.log("\u73a9\u5bb6\u80dc\u5229"),r.GameDataStorage.gameStateData.who_sucess=0,r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null)):(console.log("\u6211\u53fc\u3002\u4f60TM",this.board.win),1==this.board.win||-1==this.board.win?this.userChess==this.board.win?(r.GameDataStorage.gameStateData.who_sucess=0,r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null)):(r.GameDataStorage.gameStateData.who_sucess=1,r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null)):(console.log("\u522b\u592a\u8fc7\u5206\u4e86\u5594"),r.GameDataStorage.gameStateData.who_sucess=2,r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null))),this.board.removeListennner())},t.prototype.kaiChangDongHua=function(){var e=this;this.ds_headIcon.node.getComponent(cc.Button).interactable=!1,this.user_headIcon.node.getComponent(cc.Button).interactable=!1,r.conMager.getInstance().getPoolNode(r.KEY.poolName.setup,this.node,null),r.conMager.getInstance().playAudioEff(r.KEY.audioName.kaiju),r.conMager.getInstance().getPoolNode(r.KEY.poolName.item2,this.node,{callBack:function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.item3,e.node,{callBack:function(){e.caixianshou()}})}})},t.prototype.caixianshou=function(){var e=this.node.getChildByName("heizi"),t=this.node.getChildByName("baizi"),a=this.node.getChildByName("baizi_label"),n=this.node.getChildByName("heizi_label");s.NumberUtil.randomNum(0,1)>0?(this.userChess=h.WHITECHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!"),this.board.AIXianShou(),e.setPosition(-270,368),t.setPosition(182,-380),n.setPosition(-225,372),a.setPosition(225,-376)):(this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.userChess=h.BLACKCHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"),t.setPosition(-270,368),e.setPosition(182,-380),a.setPosition(-225,372),n.setPosition(225,-376)),this.ai_duihua(3),e.active=!0,t.active=!0,a.active=!0,n.active=!0,this.startTime(this.board.state)},t.prototype.dsHeadIcon_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!0},t.prototype.userHeadIcon_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!0},t.prototype.biaoQing_btn=function(e,t){var a=this;this.hide_userPenl_btn();var n=parseInt(t),o=this.node.getChildByName("user_biaoqing");o.active=!0,o.children[n].active=!0;var i=this.node.getChildByName("user_duihua");this.count_down.y<0&&(this.count_down.opacity=0),i.active=!0,i.children[n].active=!0,r.conMager.getInstance().playAudioEff("nan/"+this.musicNames[n-1]),this.scheduleOnce(function(){o.active=!1,o.children[n].active=!1,a.count_down.opacity=255,i.active=!1,i.children[n].active=!1},2.2)},t.prototype.hide_userPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!1},t.prototype.hide_dsPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!1},t.prototype.return_btn=function(){var e=this;this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),r.conMager.getInstance().getPoolNode(r.KEY.poolName.stop_panel,this.node,{callBack:function(t){2==t&&e.renshu()}})},t.prototype.luozizhong_action=function(e){e.active=!0,e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.getComponent(cc.Label).string=""}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50\u4e2d"}),cc.delayTime(.6))))},t.prototype.startTime=function(e){this.userGameTime=0,this.count_down.active=!0;var t=this.node.getChildByName("luozizhong");t.stopAllActions(),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+(30-this.userGameTime),this.userChess==e?(this.count_down.y=-390,t.setPosition(252,-376),this.quan.setPosition(0,-487)):(this.count_down.y=440,t.setPosition(-197,372),this.quan.setPosition(0,565)),t.color=-1==e?cc.color(51,51,51):cc.color(204,204,204),this.quan.getComponent(cc.Sprite).fillRange=1,this.luozizhong_action(t),this.count_down.getChildByName("time").color=cc.color(255,255,255),this.quan.active=!0,this.quan_judge=!0,this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){if(this.TimeDel||(this.userGameTime+=1),!this.is_game_over)if(this.userGameTime>this.max_gameTime)this.gameOver();else{var e=this.max_gameTime-this.userGameTime,t=e+"";e<10&&(t="0"+e),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+t,e<15&&(this.count_down.getChildByName("time").color=cc.color(255,0,0),this.TimeDel||r.conMager.getInstance().playAudioEff(r.KEY.audioName.shijian)),this.TimeDel||(12==this.userGameTime?this.ai_duihua(2,5):21==this.userGameTime?this.ai_duihua(2,20):26==this.userGameTime&&this.ai_duihua(2,80))}},t.prototype.stopTime=function(){this.unschedule(this.updateTime),this.count_down.active=!1,this.quan.active=!1,this.quan_judge=!1,this.node.getChildByName("luozizhong").stopAllActions(),this.node.getChildByName("luozizhong").active=!1},t.prototype.renshu=function(){this.is_game_over||(this.stopTime(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=1,r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null))},t.prototype.ai_renshu=function(){this.is_game_over||(this.stopTime(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=0,r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null))},t.prototype.ai_diaoxian=function(){this.is_game_over||(l.commonFunction.updateSprite("head_icon/diaoxian",this.ds_headIcon.node),this.ds_headIcon.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeIn(.4)))),console.log("\u89e6\u53d1\u6389\u7ebf"))},t.prototype.ai_shangxian=function(){this.is_game_over||(l.commonFunction.updateSprite("head_icon/"+this.ds_headIconIndex,this.ds_headIcon.node),this.ds_headIcon.node.opacity=255,this.ds_headIcon.node.stopAllActions(),console.log("\u89e6\u53d1\u4e0a\u7ebf"))},t.prototype.pingju=function(){this.is_game_over||(this.stopTime(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=2,r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null))},t.prototype.qiuhe=function(){},t.prototype.shubiao=function(e){this.shubiao_node.active=e},t.prototype.huiqi=function(){},t.prototype.update=function(e){this.quan_judge&&(1==Math.floor(e)&&console.log("1\u79d2\u8fc7\u53bb\u4e86"),this.quan.getComponent(cc.Sprite).fillRange-=1/(60*this.max_gameTime))},i([_(d.GameBoard_jxmc)],t.prototype,"board",void 0),i([_(cc.Prefab)],t.prototype,"whiteChess",void 0),i([_(cc.Prefab)],t.prototype,"blackChess",void 0),i([_(cc.Node)],t.prototype,"quan",void 0),i([_(cc.Node)],t.prototype,"hongDian",void 0),i([g],t)}(r.winRootNode);a.default=m,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../classCon/configSurface":"configSurface","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform","../wuziqi/Piece":"Piece","../wuziqi/luandou_jxmc/GameBoard_jxmc":"GameBoard_jxmc","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],luandou_tslh_view:[function(e,t,a){"use strict";cc._RF.push(t,"df8d1ORv8dEp7fym5ttWLWQ","luandou_tslh_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=e("../../classCon/configSurface"),h=e("../wuziqi/Piece"),u=e("../../utils/platform"),l=e("../../utils/commonFunction"),d=e("../wuziqi/luandou_tslh/GameBoard_tslh"),p=cc._decorator,g=p.ccclass,_=p.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameType=1,t.dsName_string="",t.user_headPanel=null,t.ds_headPanel=null,t.ds_headIcon=null,t.user_headIcon=null,t.reward_gold=2,t.multiple=0,t.chess_parent=null,t.shubiao_node=null,t.max_gameTime=30,t.ds_headIconIndex=0,t.board=null,t.whiteChess=null,t.blackChess=null,t.quan=null,t.hongDian=null,t.block=46,t.userGameTime=0,t.count_down=null,t.userChess=h.BLACKCHESS,t.is_game_over=!1,t.whiePool=new cc.NodePool,t.blackPool=new cc.NodePool,t.RightRate=1,t.TimeDel=!1,t.chess_num=0,t.interval=!0,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t.luozizhong=null,t.quan_judge=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){r._pl_fun.getInstance().startCreateVideo(),this.reward_gold=e[0].reward_gold,r.GameDataStorage.gameStateData.reward_gold=this.reward_gold,this.gameType=e[0].gameType,r.GameDataStorage.gameStateData.gameType=this.gameType;var t=e[0].RightRate;this.update_ai_RightRate(t),this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1,this.initGame(),this.node.runAction(cc.fadeIn(.5)),u.platform.now_platform!=u.platform_type.is_tt&&(this.node.getChildByName("luping").active=!1),this.hongDian.zIndex=99,this.hongDian.scaleX=.9},t.prototype.onClose=function(){this.unscheduleAllCallbacks(),this.board.removeListennner(),r.conMager.getInstance().hideWinNode(r.KEY.UIName.jd_game_view),r.conMager.getInstance().showWinNode(r.KEY.UIName.slectGmae,null,{gameType:this.gameType})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){var e=this;r.conMager.getInstance()._msgAtion.on("ai_renshu",this.ai_renshu,this),r.conMager.getInstance()._msgAtion.on("ai_diaoxian",this.ai_diaoxian,this),r.conMager.getInstance()._msgAtion.on("ai_shangxian",this.ai_shangxian,this),r.conMager.getInstance()._msgAtion.on("renshu",this.return_btn,this),r.conMager.getInstance()._msgAtion.on("pingju",this.pingju,this),r.conMager.getInstance()._msgAtion.on("shubiao",this.shubiao,this),r.conMager.getInstance()._msgAtion.on("qiuhe",this.qiuhe,this),r.conMager.getInstance()._msgAtion.on("huiqi",this.huiqi,this),r.conMager.getInstance()._msgAtion.on("closeSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1},this),r.conMager.getInstance()._msgAtion.on("openSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0},this),r.conMager.getInstance()._msgAtion.on("stopTimeDel",function(){e.TimeDel=!0,e.quan_judge=!1},this),r.conMager.getInstance()._msgAtion.on("startTimeDel",function(){e.TimeDel=!1,e.quan_judge=!0},this),cc.tween(this.hongDian).repeatForever(cc.tween(this.hongDian).to(.5,{opacity:0}).to(.5,{opacity:255}).delay(1)).start()},t.prototype.update_ai_RightRate=function(e){1==e?this.RightRate=.4:2==e?this.RightRate=.5:3==e?this.RightRate=.7:4==e?this.RightRate=.8:5==e&&(this.RightRate=.9)},t.prototype.RadomZhenFa=function(e){for(var t=c.zhenFaWeight[e],a=0,n=0;n<r.GameDataStorage.gameStateData.zhenFaName.length;n++)a+=t[r.GameDataStorage.gameStateData.zhenFaName[n]];var o=Math.random()*a,i=0,s="wanning";for(n=0;n<r.GameDataStorage.gameStateData.zhenFaName.length;n++)if(o<(i+=t[r.GameDataStorage.gameStateData.zhenFaName[n]])){s=r.GameDataStorage.gameStateData.zhenFaName[n];break}return console.log("hhhhhhhhhhhhhhhh",s,i,a),s},t.prototype.initGame=function(){cc.find("Canvas/money_node").active=!1,r.GameDataStorage.gameStateData.chess_num=0,r.GameDataStorage.gameStateData.rewardmultiple=0,this.initUi(),this.initData(),this.kaiChangDongHua(),this.node.getChildByName("heizi").active=!0,this.node.getChildByName("baizi").active=!0,this.node.getChildByName("baizi_label").active=!0,this.node.getChildByName("heizi_label").active=!0,r.conMager.getInstance().getPoolNode(r.KEY.poolName.setup,this.node,null),this.board.init(this),this.node.getChildByName("mask").zIndex=99,this.initPool(this.whiePool,this.whiteChess),this.initPool(this.blackPool,this.blackChess)},t.prototype.initUi=function(){this.user_headPanel=this.node.getChildByName("user_headPanel"),this.ds_headPanel=this.node.getChildByName("ds_headPanel"),this.ds_headIcon=this.node.getChildByName("ds_headIcon").getChildByName("ds_headIcon").getComponent(cc.Sprite),this.user_headIcon=this.node.getChildByName("user_headIcon").getChildByName("user_headIcon").getComponent(cc.Sprite),this.chess_parent=this.node.getChildByName("chess_parent"),this.shubiao_node=this.chess_parent.getChildByName("shubiao_node"),this.count_down=this.node.getChildByName("count_down"),this.ds_headIcon.node.parent.active=!0,this.user_headIcon.node.parent.active=!0},t.prototype.initData=function(){r.GameDataStorage.getUser().userData,"null"!=r.GameDataStorage.getUser().userData.headIconUrl&&l.commonFunction.updateHttpSprite(r.GameDataStorage.getUser().userData.headIconUrl,this.user_headIcon.node);var e=s.NumberUtil.randomNum(1,60);this.ds_headIconIndex=e,r.GameDataStorage.gameStateData.ds_headIconIndex=this.ds_headIconIndex,console.log("\u5bf9\u624b\u7684\u5934\u50cf:",e);var t="head_icon/"+e;l.commonFunction.updateSprite(t,this.ds_headIcon.node);var a=this.node.getChildByName("game_info_parent");r.conMager.getInstance().getPoolNode(r.KEY.poolName.game_info,a,null)},t.prototype.initPool=function(e,t){for(var a=0;a<225;a++){var n=cc.instantiate(t);e.put(n)}},t.prototype.moveInChess=function(e,t,a,n){var o,i=r.GameDataStorage.gameStateData.chess_num;if(2==this.gameType)if(i>30){this.chess_num-=1;var s=2;i>100&&(s=10),i>150&&(s=15),this.chess_num%s==0&&r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi)}else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);this.stopTime(),this.startTime(-a),this.ai_duihua(1);var c=null,u=null;if(a==h.BLACKCHESS?(c=this.blackPool,u=this.blackChess):(c=this.whiePool,u=this.whiteChess),c.size()>0)o=c.get();else{var d=cc.instantiate(u);c.put(d),o=c.get()}var p=Math.floor(e/this.block),g=15*Math.floor(t/this.block)+p;this.board.chess_map[g]=o,o.x=e,o.y=t,this.chess_parent.addChild(o),o.zIndex=1;var _=r.GameDataStorage.gameStateData.userZhenFaName,m=r.GameDataStorage.gameStateData.dsZhenFaName;n?a==this.userChess&&"fenlie"==_||a==-1*this.userChess&&"fenlie"==m||(a==this.userChess&&"xueyuyingsha"==_?o.scale=0:a==-1*this.userChess&&"xueyuyingsha"==m?o.scale=0:a==this.userChess&&"meihua"==_?l.commonFunction.updateSprite("chess/hua_"+a,o.getChildByName("chess"),function(){}):a==-1*this.userChess&&"meihua"==m?l.commonFunction.updateSprite("chess/hua_"+a,o.getChildByName("chess"),function(){}):this.chessAction(o,n)):this.chessAction(o,n)},t.prototype.show_hongdian=function(e,t,a){this.hongDian.active=!0;var n=e*this.board.block,o=t*this.board.block;a&&(n=this.board.newx,o=this.board.newY),this.hongDian.setPosition(n,o)},t.prototype.hide_hongdian=function(){this.hongDian.active=!1},t.prototype.chessAction=function(e,t){var a=this;e.scale=1.5,e.getChildByName("chess").zIndex=98,e.y+=80,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)),cc.callFunc(function(){if(t){var n=e.getChildByName("jn1");n.active=!0,a.scheduleOnce(function(){n.active=!1},1)}})))},t.prototype.ai_duihua=function(e,t){var a=this;if(!(this.gameType>2)){var n=this.node.getChildByName("ds_biaoqing"),o=this.node.getChildByName("ds_duihua"),i=0;if(1==e){if(!this.interval)return;if(this.interval=!1,this.scheduleOnce(function(){a.interval=!0},8),this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,10)<2&&(s.NumberUtil.randomNum(0,1)>0?(i=1,r.conMager.getInstance().playAudioEff("nv/nvqifeng")):(i=5,r.conMager.getInstance().playAudioEff("nv/nvhaoqi")))}else{if(3==e)return;if(this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,100)<t&&(i=4,r.conMager.getInstance().playAudioEff("nv/nvkeyi"))}i>0&&(o.active=!0,n.active=!0,n.children[i].active=!0,o.children[i].active=!0,this.count_down.y>0&&(this.count_down.opacity=0),this.scheduleOnce(function(){a.count_down.opacity=255,n.children[i].active=!1,o.children[i].active=!1,n.active=!1,o.active=!1},2.2))}},t.prototype.gameOver=function(){console.log("\u6e38\u620f\u501f\u5bbf:",this.is_game_over,this.board.sum),console.log("\u522b\u73a9\u4e86",this.board.win),this.is_game_over||(this.is_game_over=!0,this.stopTime(),cc.find("Canvas/money_node").active=!0,this.userGameTime>30?this.userChess==this.board.state?(console.log("\u5bf9\u624b\u80dc\u5229"),r.GameDataStorage.gameStateData.who_sucess=1,r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null)):(console.log("\u73a9\u5bb6\u80dc\u5229"),r.GameDataStorage.gameStateData.who_sucess=0,r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null)):(console.log("\u6211\u53fc\u3002\u4f60TM",this.board.win),1==this.board.win||-1==this.board.win?this.userChess==this.board.win?(r.GameDataStorage.gameStateData.who_sucess=0,r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null)):(r.GameDataStorage.gameStateData.who_sucess=1,r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null)):(console.log("\u522b\u592a\u8fc7\u5206\u4e86\u5594"),r.GameDataStorage.gameStateData.who_sucess=2,r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null))),this.board.removeListennner())},t.prototype.kaiChangDongHua=function(){var e=this;this.ds_headIcon.node.getComponent(cc.Button).interactable=!1,this.user_headIcon.node.getComponent(cc.Button).interactable=!1,r.conMager.getInstance().getPoolNode(r.KEY.poolName.setup,this.node,null),r.conMager.getInstance().playAudioEff(r.KEY.audioName.kaiju),r.conMager.getInstance().getPoolNode(r.KEY.poolName.item2,this.node,{callBack:function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.item3,e.node,{callBack:function(){e.caixianshou()}})}})},t.prototype.caixianshou=function(){var e=this.node.getChildByName("heizi"),t=this.node.getChildByName("baizi"),a=this.node.getChildByName("baizi_label"),n=this.node.getChildByName("heizi_label");s.NumberUtil.randomNum(0,1)>0?(this.userChess=h.WHITECHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!"),this.board.front_anima(function(){}),this.board.AIXianShou(),e.setPosition(-270,368),t.setPosition(182,-380),n.setPosition(-225,372),a.setPosition(225,-376)):(this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.userChess=h.BLACKCHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"),t.setPosition(-270,368),e.setPosition(182,-380),a.setPosition(-225,372),n.setPosition(225,-376),this.board.front_anima(function(){})),this.ai_duihua(3),e.active=!0,t.active=!0,a.active=!0,n.active=!0,this.startTime(this.board.state)},t.prototype.dsHeadIcon_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!0},t.prototype.userHeadIcon_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!0},t.prototype.biaoQing_btn=function(e,t){var a=this;this.hide_userPenl_btn();var n=parseInt(t),o=this.node.getChildByName("user_biaoqing");o.active=!0,o.children[n].active=!0;var i=this.node.getChildByName("user_duihua");this.count_down.y<0&&(this.count_down.opacity=0),i.active=!0,i.children[n].active=!0,r.conMager.getInstance().playAudioEff("nan/"+this.musicNames[n-1]),this.scheduleOnce(function(){o.active=!1,o.children[n].active=!1,a.count_down.opacity=255,i.active=!1,i.children[n].active=!1},2.2)},t.prototype.hide_userPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!1},t.prototype.hide_dsPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!1},t.prototype.return_btn=function(){var e=this;this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),r.conMager.getInstance().getPoolNode(r.KEY.poolName.stop_panel,this.node,{callBack:function(t){2==t&&e.renshu()}})},t.prototype.luozizhong_action=function(e){e.active=!0,e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.getComponent(cc.Label).string=""}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50\u4e2d"}),cc.delayTime(.6))))},t.prototype.startTime=function(e){this.userGameTime=0,this.count_down.active=!0;var t=this.node.getChildByName("luozizhong");t.stopAllActions(),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+(30-this.userGameTime),this.userChess==e?(this.count_down.y=-390,t.setPosition(252,-376),this.quan.setPosition(0,-487)):(this.count_down.y=440,t.setPosition(-197,372),this.quan.setPosition(0,565)),t.color=-1==e?cc.color(51,51,51):cc.color(204,204,204),this.quan.getComponent(cc.Sprite).fillRange=1,this.luozizhong_action(t),this.count_down.getChildByName("time").color=cc.color(255,255,255),this.quan.active=!0,this.quan_judge=!0,this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){if(this.TimeDel||(this.userGameTime+=1),!this.is_game_over)if(this.userGameTime>this.max_gameTime)this.gameOver();else{var e=this.max_gameTime-this.userGameTime,t=e+"";e<10&&(t="0"+e),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+t,e<15&&(this.count_down.getChildByName("time").color=cc.color(255,0,0),this.TimeDel||r.conMager.getInstance().playAudioEff(r.KEY.audioName.shijian)),this.TimeDel||(12==this.userGameTime?this.ai_duihua(2,5):21==this.userGameTime?this.ai_duihua(2,20):26==this.userGameTime&&this.ai_duihua(2,80))}},t.prototype.stopTime=function(){this.unschedule(this.updateTime),this.count_down.active=!1,this.quan.active=!1,this.quan_judge=!1,this.node.getChildByName("luozizhong").stopAllActions(),this.node.getChildByName("luozizhong").active=!1},t.prototype.renshu=function(){this.is_game_over||(this.stopTime(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=1,r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null))},t.prototype.ai_renshu=function(){this.is_game_over||(this.stopTime(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=0,r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null))},t.prototype.ai_diaoxian=function(){this.is_game_over||(l.commonFunction.updateSprite("head_icon/diaoxian",this.ds_headIcon.node),this.ds_headIcon.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeIn(.4)))),console.log("\u89e6\u53d1\u6389\u7ebf"))},t.prototype.ai_shangxian=function(){this.is_game_over||(l.commonFunction.updateSprite("head_icon/"+this.ds_headIconIndex,this.ds_headIcon.node),this.ds_headIcon.node.opacity=255,this.ds_headIcon.node.stopAllActions(),console.log("\u89e6\u53d1\u4e0a\u7ebf"))},t.prototype.pingju=function(){this.is_game_over||(this.stopTime(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=2,r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null))},t.prototype.qiuhe=function(){},t.prototype.shubiao=function(e){this.shubiao_node.active=e},t.prototype.huiqi=function(){},t.prototype.update=function(e){this.quan_judge&&(1==Math.floor(e)&&console.log("1\u79d2\u8fc7\u53bb\u4e86"),this.quan.getComponent(cc.Sprite).fillRange-=1/(60*this.max_gameTime))},i([_(d.GameBoard_tslh)],t.prototype,"board",void 0),i([_(cc.Prefab)],t.prototype,"whiteChess",void 0),i([_(cc.Prefab)],t.prototype,"blackChess",void 0),i([_(cc.Node)],t.prototype,"quan",void 0),i([_(cc.Node)],t.prototype,"hongDian",void 0),i([g],t)}(r.winRootNode);a.default=m,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../classCon/configSurface":"configSurface","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform","../wuziqi/Piece":"Piece","../wuziqi/luandou_tslh/GameBoard_tslh":"GameBoard_tslh","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],mainScene:[function(e,t,a){"use strict";cc._RF.push(t,"5669bsz2XNHtKa76GvBlpfH","mainScene");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../classCon/configSurface"),r=e("../game/wuziqi/game_manager/class_manager"),c=e("../pvp/script/global"),h=e("../SSSGF/baesConScripts/winRootNode"),u=e("../SSSGF/conMagers/conMager"),l=e("../SSSGF/ssscgf"),d=e("../utils/as_util"),p=e("../utils/commonFunction"),g=e("../utils/getDataFromServer"),_=e("../utils/platform"),m=cc._decorator,f=m.ccclass,y=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gongGaoPanel=null,t.mainView=null,t.money_node=null,t.startGame=!0,t.tiLiPanel=null,t.wuXianPanel=null,t.rightNode=null,t.leftNode=null,t}var a;return o(t,e),a=t,t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){throw _.platform.now_platform!=_.platform_type.is_tt&&d.as_util.show_banner(),new Error("Method not implemented.")},t.prototype.onClose=function(e){1==e&&"mainScene"==l.GameDataStorage.gameStateData.sceneName&&cc.find("Canvas").getComponent(a).showHideUi(!0),this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){u.default.getInstance().hideWinNode(l.KEY.UIName.slectGmae)})))},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){if("null"!=l.GameDataStorage.getUser().userData.headIconUrl){var e=l.GameDataStorage.getUser().userData.headIconUrl;e?"https"!=e.substring(0,5)&&(l.GameDataStorage.getUser().userData.headIconUrl="null"):l.GameDataStorage.getUser().userData.headIconUrl="null"}if(l.GameDataStorage.getUser().userData.level_experience<0&&(l.GameDataStorage.getUser().userData.level_experience=0,l.GameDataStorage.preserveGameData()),l._pl_fun.getInstance().loadViedeo(),this.initUserName(),u.default.getInstance()._msgAtion.on("refreshInfo",this.refreshInfo,this),u.default.getInstance()._msgAtion.on("refreshMeinv",this.refreshMeinv,this),_.platform.now_platform!=_.platform_type.is_tt){(a=this.mainView.getChildByName("btn_zhuomian"))&&(a.active=!1);var t=this.mainView.getChildByName("btn_shiling");t&&(t.active=!0),this.setGongGaoContent(),d.as_util.show_banner()}else if(window.tt){var a=this.mainView.getChildByName("btn_zhuomian");"Douyin"==window.tt.getSystemInfoSync().appName?a.active=!0:a.active=!1}this.getUserInfo(),this.openMainViewWidget()},t.prototype.setGongGaoContent=function(){var e=cc.find("Node/ScrollView",this.gongGaoPanel);e.height=450,e.y=40;var t=this.gongGaoPanel.getChildByName("Node");if(_.platform.now_platform!=_.platform_type.is_tt&&_.platform.now_platform!=_.platform_type.is_xiaomi){var a=new cc.Node;a.color=cc.Color.BLACK.fromHEX("#32130D"),a.y=-300,a.parent=t;var n=a.addComponent(cc.Label);"Ohayoo"==d.as_util.sendJavaGetChannel()?n.string="":_.platform.now_platform==_.platform_type.is_topon&&"zijiaSDK_TapTap_wuziqi"==_.platform.rank_channel?n.string="\u73a9\u5bb6Q\u7fa4\uff1a756780640":n.string="\u5ba2\u670dQQ\uff1a3356565961",n.fontSize=30}_.platform.now_platform==_.platform_type.is_vivo&&(d.as_util.createTextBtn(t,{str:"\u300a\u7528\u6237\u534f\u8bae\u300b",pos:cc.v2(-110,-350)},function(){console.log("\u7528\u6237\u534f\u8bae"),d.as_util.open("https://game-1258575882.cos.ap-guangzhou.myqcloud.com/apks/new_youwan/yonghuxieyi.html")}),d.as_util.createTextBtn(t,{str:"\u300a\u9690\u79c1\u534f\u8bae\u300b",pos:cc.v2(110,-350)},function(){console.log("\u9690\u79c1\u534f\u8bae"),d.as_util.open("https://game-1258575882.cos.ap-guangzhou.myqcloud.com/apks/new_youwan/yinsitiaokuan.html")}))},t.prototype.getHttpJson=function(){cc.assetManager.loadRemote("https://game-1258575882.cos.ap-guangzhou.myqcloud.com/wuZiQi/conf.json",function(e,t){for(var a in t.json){var n=t.json[a],o=l.NumberUtil.randomNum(0,10);2==l.GameDataStorage.getUser().userData.userGender&&o>=n&&(l.GameDataStorage.gameStateData.is_video=!1),console.log("\u8fd4\u56de\u56de\u4f86\u7684\u6578\u64da:",n,o>=n,o,l.GameDataStorage.gameStateData.is_video)}}.bind(this))},t.prototype.openMainViewWidget=function(){if(cc.sys.isNative){this.mainView.getComponent(cc.Widget).enabled=!0;var e=this.node.getChildByName("test");e&&(e.active=!1)}},t.prototype.getUserInfo=function(){if(window.tt){var e=this;tt.login({success:function(){console.log("\u767b\u5f55\u6210\u529f"),tt.getUserInfo({success:function(t){console.log("getUserInfo \u8c03\u7528\u6210\u529f",t.userInfo),l.GameDataStorage.getUser().userData.headIconUrl=t.userInfo.avatarUrl,l.GameDataStorage.getUser().userData.gameName=t.userInfo.nickName,l.GameDataStorage.getUser().userData.userGender=t.userInfo.gender,l.GameDataStorage.preserveGameData(),e.getHttpJson()},fail:function(){}})}})}},t.prototype.updateTimeStamp=function(){var e=(new Date).getTime();e>=l.GameDataStorage.getUser().userData.darenTime&&(l.GameDataStorage.getUser().userData.darenTime=0),e=Math.floor(e/864e5),l.GameDataStorage.getUser().userData.TimeStamp<e?(l.GameDataStorage.getUser().userData.isQianDao=!1,l.GameDataStorage.getUser().userData.isOneGold=!0):l.GameDataStorage.getUser().userData.isQianDao=!0,l.GameDataStorage.getUser().userData.qianDaoNum>=7&&(l.GameDataStorage.getUser().userData.qianDaoNum=0),l.GameDataStorage.preserveGameData()},t.prototype.initUserName=function(){if("null"==l.GameDataStorage.getUser().userData.gameName){var e=s.XingMingData.xing,t=s.XingMingData.ming,a=p.commonFunction.randomGameName(e,t);l.GameDataStorage.getUser().userData.gameName=a}l.GameDataStorage.preserveGameData()},t.prototype.start=function(){var e=this;l.GameDataStorage.gameStateData.sceneName="mainScene",this.isJudgeNewUser(),this.getPenelNode(),this.refreshMeinv(),this.checkFollowAwemeState(),u.default.getInstance().playBGM(l.KEY.audioName.bgm),l.GameDataStorage.getUser().userData.tiLi>=5&&l.GameDataStorage.addTili(5),l.GameDataStorage.gameStateData.startGmaeTime=(new Date).getTime();var t=this.node.getComponent(cc.Canvas);if(cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(t.fitWidth=!1,t.fitHeight=!0),this.scheduleOnce(function(){e.refreshInfo()},.1),window.tt)var a=tt.getLaunchOptionsSync();if(this.updateTimeStamp(),window.tt&&(tt.onHide(function(){l.GameDataStorage.preserveGameData(),g.getDataFromServer.setUserData(l.GameDataStorage.getUser().userData,function(){}),c.default.isMatching&&u.default.getInstance()._msgAtion.emit("isMatchingCancle")}),tt.onShow(function(){c.default.isMatching&&u.default.getInstance()._msgAtion.emit("isMatching")}),a=tt.getLaunchOptionsSync(),console.log("options",a)),""!=l.GameDataStorage.gameStateData.room_id)cc.director.loadScene("pvpScene",function(){console.log("loadScene")});else{var n=new Date((new Date).toLocaleDateString()).getTime();n=Math.floor(n/864e5),0==l.GameDataStorage.gameStateData.isGongGao&&(l.GameDataStorage.gameStateData.isGongGao=!0,this.showGongGao()),l.GameDataStorage.getUser().userData.TimeStamp}},t.prototype.getPenelNode=function(){},t.prototype.judgeWuXianTiLi=function(){(new Date).getTime()>l.GameDataStorage.getUser().userData.TimeStamp&&l.GameDataStorage.preserveGameData()},t.prototype.isJudgeNewUser=function(){0==l.GameDataStorage.getUser().userData.isNewUser&&(l.GameDataStorage.getUser().userData.isNewUser=1,l.GameDataStorage.preserveGameData(),console.log("\u65b0\u7528\u6237\u7ed9\u7237\u722c11111111"),cc.game.restart())},t.prototype.refreshMeinv=function(){console.log("\u5237\u65b0\u4e3b\u754c\u9762\u89d2\u8272\u6210\u529f"),0==l.GameDataStorage.getUser().userData.meinvId?(this.mainView.getChildByName("wzq").active=!0,this.node.getChildByName("renw").active=!0,this.mainView.getChildByName("wzq2").active=!1,this.node.getChildByName("renw2").active=!1):(this.mainView.getChildByName("wzq2").active=!0,this.node.getChildByName("renw2").active=!0,this.mainView.getChildByName("wzq").active=!1,this.node.getChildByName("renw").active=!1)},t.prototype.refreshInfo=function(){var e=this.mainView.getChildByName("btn_userInfo"),t=e.getChildByName("head_icon").getChildByName("head_icon"),a=e.getChildByName("user_name").getComponent(cc.Label),n=e.getChildByName("duanwei_num").getComponent(cc.Label);"null"!=l.GameDataStorage.getUser().userData.headIconUrl&&p.commonFunction.updateHttpSprite(l.GameDataStorage.getUser().userData.headIconUrl,t),l.GameDataStorage.getUser().userData.canju_id>120&&(l.GameDataStorage.getUser().userData.canju_id=120),a.string=""+l.GameDataStorage.getUser().userData.gameName,n.string=p.commonFunction.getDuanWei(l.GameDataStorage.getUser().userData.jd_score)},t.prototype.showGongGao=function(){console.log("hhhhhhhhhhhhhh"),this.gongGaoPanel.zIndex=1,this.gongGaoPanel.active=!0;var e=this.gongGaoPanel.getChildByName("Node");e.y=1500,this.moveShow(e,cc.v3(0,0),null)},t.prototype.hideGongGao=function(){var e=this;l._pl_fun.getInstance().add_reportAnalytics("event_CloseGongGaoNumbers"),u.default.getInstance().playAudioEff(l.KEY.audioName.btn);var t=this.gongGaoPanel.getChildByName("Node");this.moveHide(t,cc.v3(0,1500),function(){if(e.gongGaoPanel.active=!1,window.tt){var t=tt.getLaunchOptionsSync();if("021020"==t.scene||"061020"==t.scene||"011020"==t.scene){console.log("\u4ece\u684c\u9762\u8fdb\u5165\u6e38\u620f");var a=new Date,n=""+a.getFullYear()+a.getMonth()+a.getDate();l.GameDataStorage.getUser().userData.openDesktopTime!=n&&(l.GameDataStorage.getUser().userData.openDesktopTime=n,u.default.getInstance()._msgAtion.emit("updateMedalCount",2e3,cc.v3(0,0)),u.default.getInstance().getPoolNode("tipNode",cc.find("Canvas"),"\u606d\u559c\u83b7\u5f972000\u52fe\u7389"))}}})},t.prototype.showHideUi=function(e){this.mainView.active=e,e&&(this.money_node.active=!0,this.mainView.stopAllActions(),console.log("\u8fdb\u6765"),this.mainView.opacity=255,this.updateData(),_.platform.now_platform!=_.platform_type.is_233_lianyun&&_.platform.now_platform!=_.platform_type.is_233_mailiang||l._pl_fun.getInstance().showInterstitalAd(),l._pl_fun.getInstance().stopCreateVideo())},t.prototype.mainView_false_Action=function(){this.mainView.runAction(cc.fadeOut(1))},t.prototype.updateData=function(){l.GameDataStorage.gameStateData.steps=0},t.prototype.gameStartBtn=function(){u.default.getInstance().playAudioEff(l.KEY.audioName.btn),this.mainView_false_Action(),u.default.getInstance().showWinNode(l.KEY.UIName.slectGmae,this.node),l._pl_fun.getInstance().add_reportAnalytics("event_StartGameButtonClickNumbers")},t.prototype.luanDouStartBtn=function(){u.default.getInstance().playAudioEff(l.KEY.audioName.btn),this.mainView_false_Action(),u.default.getInstance().showWinNode(l.KEY.UIName.luanDou_view,this.node),l._pl_fun.getInstance().add_reportAnalytics("event_LuanDouMoShiButtonClickNumbers")},t.prototype.gonggao_btn=function(){this.disableClick(),u.default.getInstance().playAudioEff(l.KEY.audioName.btn),this.showGongGao()},t.prototype.qiandao_btn=function(){this.disableClick(),u.default.getInstance().playAudioEff(l.KEY.audioName.btn),u.default.getInstance().getPoolNode(l.KEY.poolName.qiandao_panel,null,null),l._pl_fun.getInstance().add_reportAnalytics("event_QianDaoButtonClickNumbers")},t.prototype.version=function(){return tt.env.VERSION||"preview"},t.prototype.shezhi_btn=function(){this.disableClick(),u.default.getInstance().playAudioEff(l.KEY.audioName.btn),u.default.getInstance().getPoolNode(l.KEY.poolName.settings_panel,null,null)},t.prototype.userInfo_btn=function(){this.disableClick(),u.default.getInstance().playAudioEff(l.KEY.audioName.btn),u.default.getInstance().getPoolNode(l.KEY.poolName.userInfo_panel,null,null)},t.prototype.guanZhu_btn=function(){this.disableClick(),u.default.getInstance().playAudioEff(l.KEY.audioName.btn),l.GameDataStorage.gameStateData.isDouBtn=!0,l._pl_fun.getInstance().openAwemeUserProfile(this.guanzhuFun.bind(this))},t.prototype.shiLing_btn=function(){this.disableClick(),u.default.getInstance().playAudioEff(l.KEY.audioName.btn),_.platform.now_platform!=_.platform_type.is_tt&&"Ohayoo"==d.as_util.sendJavaGetChannel()&&u.default.getInstance().getPoolNode(l.KEY.poolName.shiLing_view,null,null)},t.prototype.moneyBtn=function(){var e=this.node.getChildByName(l.KEY.poolName.mianfei_gold_panel);e&&e.active||(this.disableClick(),u.default.getInstance().playAudioEff(l.KEY.audioName.btn),u.default.getInstance().getPoolNode(l.KEY.poolName.mianfei_gold_panel,this.node,null))},t.prototype.skinStoreBtn=function(){this.disableClick(),u.default.getInstance().playAudioEff(l.KEY.audioName.btn),this.mainView_false_Action(),u.default.getInstance().showWinNode(l.KEY.UIName.skin_store_view,this.node,null)},t.prototype.shopBtn=function(){this.disableClick(),u.default.getInstance().playAudioEff(l.KEY.audioName.btn),this.mainView_false_Action(),u.default.getInstance().showWinNode(l.KEY.UIName.shop_view,this.node,null)},t.prototype.tianjia_btn=function(){this.disableClick(),u.default.getInstance().playAudioEff(l.KEY.audioName.btn),u.default.getInstance().getPoolNode(l.KEY.poolName.add_desktop_panel,null,null)},t.prototype.rank_btn=function(){this.disableClick(),u.default.getInstance().playAudioEff(l.KEY.audioName.btn),_.platform.now_platform!=_.platform_type.is_tt?(g.getDataFromServer.setUserDataAndroid(l.GameDataStorage.getUser().userData,_.platform.rank_channel,function(e){e&&0==e.errno||u.default.getInstance().getPoolNode(l.KEY.poolName.tipNode,null,"\u63d0\u4ea4\u6392\u884c\u699c\u6570\u636e\u5931\u8d25,\u8bf7\u7a0d\u540e\u91cd\u8bd5!")}),u.default.getInstance().showWinNode(l.KEY.UIName.rank_view,this.node,null)):u.default.getInstance().showWinNode(l.KEY.UIName.rank_view,this.node,null)},t.prototype.guanzhuFun=function(e){1==e?(l.GameDataStorage.getUser().userData.isFollow||(l.GameDataStorage.getUser().userData.isFollow=!0,u.default.getInstance()._msgAtion.emit("updateMedalCount",2e3,cc.v3(0,0)),u.default.getInstance().getPoolNode("tipNode",cc.find("Canvas"),"\u611f\u8c22\u5173\u6ce8!")),this.mainView.getChildByName("btn_guanzhu").active=!1):2==e||u.default.getInstance().getPoolNode("tipNode",cc.find("Canvas"),"\u8bf7\u5728\u6296\u97f3\u5e73\u53f0\u5173\u6ce8")},t.prototype.checkFollowAwemeState=function(){this.mainView.getChildByName("btn_guanzhu").active=!1;var e=this;window.tt&&tt.checkFollowAwemeState({success:function(t){t.hasFollowed||l.GameDataStorage.getUser().userData.isFollow||(e.mainView.getChildByName("btn_guanzhu").active=!0)},fail:function(e){console.log(e)}})},t.prototype.onBtnMatch=function(){u.default.getInstance().playAudioEff(l.KEY.audioName.btn),cc.director.loadScene("pvpScene")},t.prototype.on_test=function(){l.GameDataStorage.gameStateData.game_mode=r.game_mode.dazhao,u.default.getInstance().getPoolNode(l.KEY.poolName.item1,this.node,{callBack:function(){u.default.getInstance().showWinNode(l.KEY.UIName.game_board,cc.find("Canvas"))}})},i([y(cc.Node)],t.prototype,"gongGaoPanel",void 0),i([y(cc.Node)],t.prototype,"mainView",void 0),i([y(cc.Node)],t.prototype,"money_node",void 0),a=i([f],t)}(h.default);a.default=v,cc._RF.pop()},{"../SSSGF/baesConScripts/winRootNode":"winRootNode","../SSSGF/conMagers/conMager":"conMager","../SSSGF/ssscgf":"ssscgf","../classCon/configSurface":"configSurface","../game/wuziqi/game_manager/class_manager":"class_manager","../pvp/script/global":"global","../utils/as_util":"as_util","../utils/commonFunction":"commonFunction","../utils/getDataFromServer":"getDataFromServer","../utils/platform":"platform"}],match_action:[function(e,t,a){"use strict";cc._RF.push(t,"aff85xOXZZCRK4NoBNrL5RU","match_action");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){},t.prototype.onEnable=function(){var e=this;this.node.getChildByName("ppz").getComponent(sp.Skeleton).setAnimation(0,"ppz",!0),this.scheduleOnce(function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.pipeichenggong),e.node.getChildByName("ppz").getComponent(sp.Skeleton).setAnimation(0,"ppcg",!1)},3)},i([c],t)}(cc.Component));a.default=h,cc._RF.pop()},{"../../../../SSSGF/ssscgf":"ssscgf"}],match_controller:[function(e,t,a){"use strict";cc._RF.push(t,"6b5b3LiSiBIYK9R0bK38ujO","match_controller");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/dataController/DATA"),r=e("../../../SSSGF/ssscgf"),c=e("../global"),h=e("./../util"),u=cc._decorator,l=u.ccclass,d=(u.property,["match-c2yotxxy","match-rjmrq8os","match-66mfnfxs","match-e9m8lbvi","match-euoyqyhe"]),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isInRoom=!1,t.cb=void 0,t}return o(t,e),t.prototype.onLoad=function(){r.conMager.getInstance()._msgAtion.on("isMatching",this.checkRoomState,this),r.conMager.getInstance()._msgAtion.on("isMatchingCancle",this.isMatchingCancle,this)},t.prototype.onEnable=function(){var e=this;c.default.sdkInitFinsh&&MGOBE.Room.getMyRoom(function(t){return 0===t.code?(e._isInRoom=!0,console.log("\u73a9\u5bb6\u5df2\u5728\u623f\u95f4\u5185\uff1a",t.data)):(e._isInRoom=!1,20011===t.code?console.log("\u73a9\u5bb6\u4e0d\u5728\u623f\u95f4\u5185"):console.log("\u8c03\u7528\u5931\u8d25:",t.code))})},t.prototype.onBtnJoin=function(){h.showLog("\u52a0\u5165\u623f\u95f4!")},t.prototype.onBtnBack=function(){h.showLog("\u8fd4\u56de\u4e3b\u573a\u666f!"),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),cc.director.loadScene("mainScene")},t.prototype.loadRoomScene=function(){h.showLog("\u8df3\u8f6c\u6e38\u620f\u623f\u95f4!"),r.conMager.getInstance()._msgAtion.emit("matchFinish"),r.conMager.getInstance().showWinNode(r.KEY.UIName.pvp_game_view,cc.find("Canvas"),void 0),this.node.active=!1},t.prototype.JdMatchPlayers=function(e){var t=this;this.cb=e;var a=d[c.default.selectIndex];if(h.appendLog("\u6b63\u5728\u968f\u673a\u5339\u914d\uff0c\u5339\u914dCode\uff1a"+a+"\u3002\u8bf7\u7a0d\u7b49\uff0c10 \u79d2\u540e\u5339\u914dai\u3002"),console.log("-----------------this._isInRoom:",this._isInRoom),this._isInRoom)this.isMatchingCancle();else{var n=r.GameDataStorage.getUser().userData,o={username:n.gameName,headIconUrl:n.headIconUrl,openId:n.openId,user_level:n.user_level,money:n.money,jiaBei:1,lastPlayX:100,lastPlayY:100,playState:0,jd_score:n.jd_score,dz_score:n.dz_score,lz_score:n.lz_score,sr_score:n.sr_score,isMatchGame:!0,gameType:r.GameDataStorage.gameStateData.gameType},i={matchCode:a,playerInfo:{name:n.gameName,customPlayerStatus:0,customProfile:JSON.stringify(o),matchAttributes:[]}};c.default.isMatching=!0,c.default.room.initRoom(),c.default.room.matchPlayers(i,function(a){c.default.isMatching=!1,a.code===MGOBE.ErrCode.EC_OK?(h.appendLog("\u968f\u673a\u5339\u914d\u6210\u529f\uff0c\u623f\u95f4ID\uff1a"+a.data.roomInfo.id),t.loadRoomScene()):a.code===MGOBE.ErrCode.EC_ROOM_PLAYER_ALREADY_IN_ROOM?c.default.room.leaveRoom({},function(e){e.code===MGOBE.ErrCode.EC_OK?h.appendLog("\u9000\u51fa\u623f\u95f4\u6210\u529f"):h.appendLog("\u9000\u51fa\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+e.code)}):(h.appendLog("\u968f\u673a\u5339\u914d\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+a.code),t.onBtnCancleMatch(),r.GameDataStorage.gameStateData.gameType=s.game_type.jingdian,e())})}},t.prototype.isMatchingCancle=function(){c.default.sdkInitFinsh&&(this.onBtnCancleMatch(),r.GameDataStorage.gameStateData.gameType=s.game_type.jingdian,this.cb())},t.prototype.onBtnCancleMatch=function(){var e={matchType:MGOBE.types.MatchType.PLAYER_COMPLEX};c.default.room.cancelPlayerMatch(e,function(e){e.code===MGOBE.ErrCode.EC_OK?console.log("\u53d6\u6d88\u5339\u914d\u6210\u529f"):console.log("\u53d6\u6d88\u5339\u914d\u5931\u8d25",e.data)})},t.prototype.checkRoomState=function(){c.default.sdkInitFinsh&&(console.log("---------\u67e5\u8be2\u81ea\u5df1\u7684\u623f\u95f4\u72b6\u6001"),c.default.isMatching=!1,MGOBE.Room.getMyRoom(function(e){return 0===e.code?(c.default.room.initRoom(e.data.roomInfo),console.log("\u73a9\u5bb6\u5df2\u5728\u623f\u95f4\u5185\uff1a",e.data)):20011===e.code?console.log("\u73a9\u5bb6\u4e0d\u5728\u623f\u95f4\u5185"):console.log("\u8c03\u7528\u5931\u8d25:",e.code)}))},i([l],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../global":"global","./../util":"util"}],match_view:[function(e,t,a){"use strict";cc._RF.push(t,"31adb28tvVFfJiXjxSI9iiu","match_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("../config"),c=e("../global"),h=e("../scene/PvpScene"),u=e("./../util"),l=e("./vUi/join_create_room"),d=cc._decorator,p=d.ccclass,g=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_back=void 0,t.btn_match=void 0,t.btn_create=void 0,t.btn_join=void 0,t.lockSubmit=!1,t.joinCreateRoom=void 0,t.timer=void 0,t}return o(t,e),t.prototype.onLoad=function(){console.log("----------------change Zindex"),this.initListener()},t.prototype.onEnable=function(){this.initSDK(),cc.find("Canvas/money_node").active=!0},t.prototype.initSDK=function(){if(u.isInited())return c.default.duanWang&&MGOBE.Room.getMyRoom(function(e){return 0===e.code?(c.default.room.initRoom(e.data.roomInfo),console.log("\u73a9\u5bb6\u5df2\u5728\u623f\u95f4\u5185\uff1a",e.data)):20011===e.code?console.log("\u73a9\u5bb6\u4e0d\u5728\u623f\u95f4\u5185"):console.log("\u8c03\u7528\u5931\u8d25:",e.code)}),c.default.duanWang=!1,u.showLog("SDK \u5df2\u7ecf\u521d\u59cb\u5316\uff0c\u65e0\u9700\u91cd\u590d\u64cd\u4f5c");u.showLog("\u6b63\u5728\u521d\u59cb\u5316 sdk"),h.pvp_scene.showLoadLog("\u6b63\u5728\u521d\u59cb\u5316\u7f51\u7edc\u73af\u5883!"),this.initMgSDK()},t.prototype.initMgSDK=function(){var e=this;u.initSDK(r.default.gameId,r.default.secretKey,r.default.url,"",function(t){t.code===MGOBE.ErrCode.EC_OK?(u.showLog("sdk \u521d\u59cb\u5316\u6210\u529f"),h.pvp_scene.hideLoadLog(),""!=s.GameDataStorage.gameStateData.room_id&&(e.joinRoom(s.GameDataStorage.gameStateData.room_id),s.GameDataStorage.gameStateData.room_id="")):(u.showLog("sdk \u521d\u59cb\u5316\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"),h.pvp_scene.showLoadLog("\u7f51\u7edc\u73af\u5883\u521d\u59cb\u5316\u5931\u8d25!"),s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,e.node,"\u7f51\u7edc\u670d\u52a1\u5668\u521d\u59cb\u5316\u5931\u8d25\uff01"),setTimeout(function(){cc.director.loadScene("mainScene")},2e3))})},t.prototype.initListener=function(){var e=this;this.btn_back.on("touchstart",function(){return e.onBtnBack()}),this.btn_match.on("touchstart",function(){return e.onBtnMatch()}),this.btn_create.on("touchstart",function(){return e.onBtnCreate()}),this.btn_join.on("touchstart",function(){return e.onBtnJoin()})},t.prototype.onDisable=function(){s.conMager.getInstance()._msgAtion.off("btnCancleMatch",this.onBtnCancleMatch,this)},t.prototype.onBtnMatch=function(){u.showLog("\u5f00\u59cb\u5339\u914d!\uff1a"),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),s.GameDataStorage.getUser().userData.money<=0?h.pvp_scene.moneyBtn():this.lockSubmit||(this.matchPlayers(),s.conMager.getInstance()._msgAtion.on("btnCancleMatch",this.onBtnCancleMatch,this))},t.prototype.onBtnCreate=function(){u.showLog("\u521b\u5efa\u623f\u95f4!"),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.lockSubmit||this.createRoom()},t.prototype.onBtnJoin=function(){u.showLog("\u52a0\u5165\u623f\u95f4!"),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.lockSubmit||(this.joinCreateRoom.active=!0,this.joinCreateRoom.getComponent(l.default).initView(2,this.joinRoom.bind(this)))},t.prototype.onBtnBack=function(){u.showLog("\u8fd4\u56de\u4e3b\u573a\u666f!"),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),cc.director.loadScene("mainScene")},t.prototype.loadRoomScene=function(){u.showLog("\u8df3\u8f6c\u6e38\u620f\u623f\u95f4!"),h.pvp_scene.initGameView(),this.node.active=!1},t.prototype.createRoom=function(){var e=this;this.lockSubmit=!0,u.appendLog("\u6b63\u5728\u521b\u5efa\u623f\u95f4");var t=s.GameDataStorage.getUser().userData;h.pvp_scene.showLoadLog("\u6b63\u5728\u521b\u5efa\u623f\u95f4");var a={username:t.gameName,headIconUrl:t.headIconUrl,openId:t.openId,user_level:t.user_level,money:t.money,jiaBei:1,lastPlayX:100,lastPlayY:100,playState:0,isMatchGame:!1},n={roomName:"cocos_demo",roomType:"create",maxPlayers:2,isPrivate:!0,customProperties:"",playerInfo:{name:t.gameName,customPlayerStatus:0,customProfile:JSON.stringify(a)}};c.default.room.initRoom(),c.default.room.createRoom(n,function(t){e.lockSubmit=!1,t.code===MGOBE.ErrCode.EC_OK?(u.appendLog("\u521b\u5efa\u623f\u95f4\u6210\u529f\uff0c\u623f\u95f4ID\uff1a"+t.data.roomInfo.id),e.loadRoomScene()):t.code===MGOBE.ErrCode.EC_ROOM_PLAYER_ALREADY_IN_ROOM?(s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,e.node,"\u5339\u914d\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5!"),c.default.room.leaveRoom({},function(e){e.code===MGOBE.ErrCode.EC_OK?u.appendLog("\u9000\u51fa\u623f\u95f4\u6210\u529f"):u.appendLog("\u9000\u51fa\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+e.code)})):(u.appendLog("\u521b\u5efa\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+t.code),s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,e.node,"\u521b\u5efa\u623f\u95f4\u5931\u8d25")),h.pvp_scene.hideLoadLog()})},t.prototype.joinRoom=function(e){var t=this;if(!e)return s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u623f\u95f4id");h.pvp_scene.showLoadLog("\u6b63\u5728\u52a0\u5165\u623f\u95f4"),this.lockSubmit=!0,u.appendLog("\u6b63\u5728\u52a0\u5165\u623f\u95f4\uff0c\u623f\u95f4ID\uff1a"+e);var a=s.GameDataStorage.getUser().userData,n={username:a.gameName,headIconUrl:a.headIconUrl,openId:a.openId,user_level:a.user_level,money:a.money,jiaBei:1,lastPlayX:100,lastPlayY:100,playState:0,isMatchGame:!1},o={playerInfo:{name:a.gameName,customPlayerStatus:0,customProfile:JSON.stringify(n)}};c.default.room.initRoom({id:e}),c.default.room.joinRoom(o,function(e){t.lockSubmit=!1,e.code===MGOBE.ErrCode.EC_OK?(u.appendLog("\u52a0\u5165\u623f\u95f4\u6210\u529f\uff0c\u623f\u95f4ID\uff1a"+e.data.roomInfo.id),t.loadRoomScene(),t.joinCreateRoom.active=!1):(e.code===MGOBE.ErrCode.EC_ROOM_TEAM_MEMBER_LIMIT_EXCEED?s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,t.node,"\u5f53\u524d\u623f\u95f4\u73a9\u5bb6\u6570\u91cf\u5df2\u6ee1"):e.code===MGOBE.ErrCode.EC_ROOM_PLAYER_ALREADY_IN_ROOM?(s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,t.node,"\u5339\u914d\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5!"),c.default.room.leaveRoom({},function(e){e.code===MGOBE.ErrCode.EC_OK?u.appendLog("\u9000\u51fa\u623f\u95f4\u6210\u529f"):u.appendLog("\u9000\u51fa\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+e.code)})):s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,t.node,"\u52a0\u5165\u623f\u95f4\u5931\u8d25"),u.appendLog("\u52a0\u5165\u623f\u95f4\u5931\u8d25\uff0c"+(e.code===MGOBE.ErrCode.EC_ROOM_TEAM_MEMBER_LIMIT_EXCEED?"\u5f53\u524d\u623f\u95f4\u73a9\u5bb6\u6570\u91cf\u5df2\u6ee1\uff0c":"")+"\u9519\u8bef\u7801\uff1a"+e.code)),h.pvp_scene.hideLoadLog()})},t.prototype.matchPlayers=function(e){var t=this;if(void 0===e&&(e=r.default.matchCode),!r.default)return u.appendLog("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5339\u914d Code");h.pvp_scene.showLoadLog("\u6b63\u5728\u5bfb\u627e\u5bf9\u624b\u2026\u2026"),this.lockSubmit=!0,this.timer=setInterval(function(){return u.appendLog("\u6b63\u5728\u968f\u673a\u5339\u914d\uff0c\u8bf7\u7a0d\u7b49\u3002")},1e3),u.appendLog("\u6b63\u5728\u968f\u673a\u5339\u914d\uff0c\u5339\u914dCode\uff1a"+e+"\u3002\u8bf7\u7a0d\u7b49\uff0c\u9ed8\u8ba4\u8d85\u65f6\u65f6\u95f4\u4e3a 10 \u79d2\u3002");var a=s.GameDataStorage.getUser().userData,n={username:a.gameName,headIconUrl:a.headIconUrl,openId:a.openId,user_level:a.user_level,money:a.money,jiaBei:1,lastPlayX:100,lastPlayY:100,playState:0,isMatchGame:!0},o={matchCode:e,playerInfo:{name:a.gameName,customPlayerStatus:0,customProfile:JSON.stringify(n),matchAttributes:[]}};c.default.room.initRoom(),c.default.room.matchPlayers(o,function(e){t.lockSubmit=!1,clearInterval(t.timer),e.code===MGOBE.ErrCode.EC_OK?(u.appendLog("\u968f\u673a\u5339\u914d\u6210\u529f\uff0c\u623f\u95f4ID\uff1a"+e.data.roomInfo.id),h.pvp_scene.hideLoadLog(),t.loadRoomScene()):e.code===MGOBE.ErrCode.EC_ROOM_PLAYER_ALREADY_IN_ROOM?(s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,t.node,"\u5339\u914d\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5!"),c.default.room.leaveRoom({},function(e){e.code===MGOBE.ErrCode.EC_OK?u.appendLog("\u9000\u51fa\u623f\u95f4\u6210\u529f"):u.appendLog("\u9000\u51fa\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+e.code)})):(u.appendLog("\u968f\u673a\u5339\u914d\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+e.code),s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,t.node,"\u5339\u914d\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5!"),t.onBtnCancleMatch())})},t.prototype.onBtnCancleMatch=function(){var e={matchType:MGOBE.types.MatchType.PLAYER_COMPLEX};this.lockSubmit=!1,clearInterval(this.timer),c.default.room.cancelPlayerMatch(e,function(e){e.code===MGOBE.ErrCode.EC_OK?console.log("\u53d6\u6d88\u5339\u914d\u6210\u529f"):console.log("\u53d6\u6d88\u5339\u914d\u5931\u8d25",e.data),h.pvp_scene.hideLoadLog()})},t.prototype.checkRoomState=function(){MGOBE.Player.commonNetworkState},i([g(cc.Node)],t.prototype,"btn_back",void 0),i([g(cc.Node)],t.prototype,"btn_match",void 0),i([g(cc.Node)],t.prototype,"btn_create",void 0),i([g(cc.Node)],t.prototype,"btn_join",void 0),i([g(cc.Node)],t.prototype,"joinCreateRoom",void 0),i([p],t)}(cc.Component);a.default=_,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../config":"config","../global":"global","../scene/PvpScene":"PvpScene","./../util":"util","./vUi/join_create_room":"join_create_room"}],medalNode:[function(e,t,a){"use strict";cc._RF.push(t,"1b3c2xyl0pFVIq5VMNy8KKx","medalNode");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(e){this.node.setPosition(e[0]),this.moveAction(e[1])},t.prototype.onClose=function(){},t.prototype.onClear=function(){},t.prototype.start=function(){},t.prototype.moveAction=function(e){cc.tween(this.node).to(.5,{x:this.node.x+s.NumberUtil.randomNum(50,150)*s.NumberUtil.randomZFOne(),y:this.node.y+s.NumberUtil.randomNum(50,150)*s.NumberUtil.randomZFOne()},{easing:"sineOut"}).to(s.NumberUtil.randomNum(5,10)/10,{x:e.x,y:e.y},{easing:"sineIn"}).call(this.endAction.bind(this)).start()},t.prototype.endAction=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn1),s.conMager.getInstance().putPoolNode(this.node.name,this.node)},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"./../../SSSGF/ssscgf":"ssscgf"}],medalRootNode:[function(e,t,a){"use strict";cc._RF.push(t,"e228aSAnJhLmYDfNul+K+dn","medalRootNode");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.endPos=null,t}return o(t,e),t.prototype.onLoad=function(){var e=this;this.node.zIndex=99,this.endPos=cc.find("Canvas/money_node").getPosition(),console.log("\u91d1\u5e01\u7684\u91cd\u70b9:",this.endPos),s.conMager.getInstance()._msgAtion.on("updateMedalCount",function(t,a,n){e.startAction(t,a,n)},this)},t.prototype.start=function(){},t.prototype.startAction=function(e,t,a){this.node.zIndex=99;var n=cc.find("Canvas/money_node").getPosition();a&&(n=a),66666==(e=Math.floor(e))||s.conMager.getInstance()._msgAtion.emit("updateMoney",e),e>13&&(e=13);for(var o=0;o<e;o++)s.conMager.getInstance().getPoolNode(s.KEY.poolName.medalNode,this.node,t,n)},i([c],t)}(cc.Component));a.default=h,cc._RF.pop()},{"./../../SSSGF/ssscgf":"ssscgf"}],meihua_:[function(e,t,a){"use strict";cc._RF.push(t,"4ce3eAM42FJ4IBjh1qLBS/K","meihua_");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.meihuabao=null,t.callBack=null,t.pos=null,t.state=0,t._flag=!1,t.is_judge=!0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this,a=e[0].pos;this.pos=a,this.state=e[0].state;var n=Math.floor(46*a[0]),o=Math.floor(46*a[1]);this.node.setPosition(n,o),this.is_judge=!0,this.callBack=e[0].callBack,this.node.zIndex=2,this.spine.node.scale=0,this.spine.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.REALTIME),this.spine.setAnimation(0,"huabao",!1),this.spine.node.runAction(cc.scaleTo(.3,.25)),s.conMager.getInstance()._msgAtion.on("meihua_zhakai",this.meihua_zhakai.bind(this),this),s.conMager.getInstance()._msgAtion.on("del_meihua",function(e){e[0]==t.pos[0]&&e[1]==t.pos[1]&&(t.is_judge=!1,t.onClose(1))},this)},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.meihua_zhakai=function(e){var t=this;this.is_judge&&e==this.state&&(this._flag||(this._flag=!0,this.spine.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.REALTIME),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn1),this.spine.setAnimation(0,"kaihua",!1),this.meihuabao.active=!0,this.scheduleOnce(function(){t.callBack&&t.callBack(t.pos,t.state)},.3)))},i([h(sp.Skeleton)],t.prototype,"spine",void 0),i([h(cc.Node)],t.prototype,"meihuabao",void 0),i([c],t)}(s.winRootNode);a.default=u,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf"}],meihua:[function(e,t,a){"use strict";cc._RF.push(t,"ed680rpgJdAI49BBQnV2Ck5","meihua");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/ssscgf"),r=e("../class_manager"),c=e("../game_manager"),h=e("../zhenfa_joiner"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_number_max=1,t.use_number=0,t.meihua_zhongzhi=!1,t.meihua_chess=[],t}return o(t,e),t.prototype.use_zhenfa=function(){return!0},t.prototype.use_zhenfa_finish=function(){return!0},t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.board=e},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){var e=c.game_manager.get_chess_player();return console.log("\u6211\u662f\u6885\u82b1\uff0c\u600e\u4e48\u6ca1\u7206\u70b8\u554a"),1!=this.meihua_zhongzhi||e!=this.my_player||(this.meihua_zhongzhi=!1,this.show_baozha(),!1)},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(e){var t=this.judge_active();return e!=this.my_player||0!=t||0!=(t=this.judge_number())||(this.show_meihua(),t)},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return this.use_number=0,!0},t.prototype.one_win=function(){return!0},t.prototype.show_meihua=function(){var e=this;this.use_number++,this.meihua_zhongzhi=!0;var t=!1;this.scheduleOnce(function(){e.my_player.cos==r.joiner_enum.player?(t=!0,s.conMager.getInstance().playAudioEff("nan/nanmeihua")):s.conMager.getInstance().playAudioEff("nv/nvmeihua")},.5),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.board.ui_parent,{fileName:"meihua",ani_name:"ji",cb:this.meihua_pos.bind(this),is_user:t})},t.prototype.meihua_pos=function(){for(var e=this,t=[],a=0;a<15;a++)for(var n=0;n<15;n++)this.chess_array[a][n].chess_data||null!=this.chess_array[a][n].kunlong_player&&this.chess_array[a][n].kunlong_player!=this.my_player||t.push(cc.v2(a,n));var o=5+2*(this.data.level-1);t=s.NumberUtil.outOfOrder(t),o>t.length&&(o=t.length);for(var i=function(a){var n=1/o;o>=100&&(n=2/o),r.scheduleOnce(function(){var n=Math.floor(Math.random()*t.length),i=cc.tween(e.node).to(0,{opacity:255});e.meihua_chess.push(e.chess_array[t[n].x][t[n].y]),s.conMager.getInstance().playAudioEff(s.KEY.audioName.luozi),c.game_manager.zhenfa_play_chess(t[n],e.my_player,i,function(a){e.chess_array[t[n].x][t[n].y].chess_data.meihua=!0;var o=a.getChildByName("chess_effect");s.conMager.getInstance().getPoolNode(s.KEY.poolName.hua,o),s.conMager.getInstance().getPoolNode(s.KEY.poolName.meihua,o,{pos:[0,0],state:e.my_player.state})}),a==o-1&&c.game_manager.get_zhenfa_event(e.my_player,e.data),t.splice(n,1)},a*n)},r=this,h=0;h<o;h++)i(h)},t.prototype.show_baozha=function(){var e=this,t=!1;this.scheduleOnce(function(){e.my_player.cos==r.joiner_enum.player?(t=!0,s.conMager.getInstance().playAudioEff("nan/nanmeihuapo")):s.conMager.getInstance().playAudioEff("nv/nvmeihuapo")},.5),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.board.ui_parent,{fileName:"meihua",ani_name:"po",cb:this.meihua_boom.bind(this),is_user:t})},t.prototype.meihua_boom=function(){var e=this;s.conMager.getInstance()._msgAtion.emit("meihua_zhakai",this.my_player.state);for(var t=[[1,0],[0,-1],[-1,0],[0,1]],a=0;a<this.meihua_chess.length;a++)if(this.meihua_chess[a].chess_data&&this.meihua_chess[a].chess_data.state==this.my_player.state)for(var n=function(n){var i=o.meihua_chess[a].board_pos.x-t[n][0],r=o.meihua_chess[a].board_pos.y-t[n][1];if(o.chess_array[i]&&o.chess_array[i][r]&&!o.chess_array[i][r].chess_data){var h=cc.tween(o.node).to(0,{opacity:255});s.conMager.getInstance().playAudioEff(s.KEY.audioName.luozi),c.game_manager.zhenfa_play_chess(cc.v2(i,r),o.my_player,h,function(t){e.chess_array[i][r].chess_data.meihua=!0;var a=t.getChildByName("chess_effect");s.conMager.getInstance().getPoolNode(s.KEY.poolName.hua,a)})}},o=this,i=0;i<t.length;i++)n(i);this.scheduleOnce(function(){console.log("\u53d1\u9001\u6d88\u606f",e.my_player.joiner_name),c.game_manager.get_zhenfa_event(e.my_player,e.data,!0),e.meihua_chess=[]},1)},i([l],t)}(h.default));a.default=d,cc._RF.pop()},{"../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../zhenfa_joiner":"zhenfa_joiner"}],mianfei_gold_panel:[function(e,t,a){"use strict";cc._RF.push(t,"748fewD5vpHNqvzyuwVQrO3","mianfei_gold_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/platform"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp_icon_233=null,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){this.disableClick(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.showpanel),this.node.active=!0;var e=this.node.getChildByName("Node");this.scaleBigShow(e,cc.v3(0,0),null),r.platform.now_platform!=r.platform_type.is_tt&&(e.getChildByName("btn_close").active=!1,e.getChildByName("btn_close2").active=!1,e.getChildByName("btn_jixu").x=0,e.getChildByName("btn_jixu").getChildByName("shiping").getComponent(cc.Sprite).spriteFrame=this.sp_icon_233,this.scheduleOnce(function(){e.getChildByName("btn_close2").active=!0},r.platform.data.time_fanhui))},t.prototype.onClose=function(){var e=this,t=this.node.getChildByName("Node");this.scaleSmallHide(t,cc.v3(0,0),function(){e.node.destroy()})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.queren_btn=function(){this.disableClick(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),s._pl_fun.getInstance().showAdVideo(function(){s.conMager.getInstance()._msgAtion.emit("updateMedalCount",300,cc.v3(0,0)),s._pl_fun.getInstance().add_reportAnalytics("event_LingQuJinBiVedioNumbers")})},t.prototype.quxiao_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1)},i([u({type:cc.SpriteFrame,tooltip:"\u5b89\u5353\u89c6\u9891\u56fe\u6807"})],t.prototype,"sp_icon_233",void 0),i([h],t)}(s.winRootNode);a.default=l,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../utils/platform":"platform"}],model_joiner:[function(e,t,a){"use strict";cc._RF.push(t,"19e01xiW/RHC4cE/JHQtvM8","model_joiner");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./game_joiner"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),i([c],t)}(s.default));a.default=h,cc._RF.pop()},{"./game_joiner":"game_joiner"}],money_node:[function(e,t,a){"use strict";cc._RF.push(t,"6d67eM/wnpESKmkwi8DcCoN","money_node");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numLabel=null,t.count=0,t.isAction=!1,t._vector=1,t.countNum=0,t}return o(t,e),t.prototype.onLoad=function(){s.conMager.getInstance()._msgAtion.on("updateMoney",this.updateMoney,this),this.numLabel=this.node.getChildByName("num").getComponent(cc.Label),this.numLabel.string=Math.floor(s.GameDataStorage.getUser().userData.money)+"",Math.floor(s.GameDataStorage.getUser().userData.money)<=0&&(this.numLabel.string="0"),this.node.zIndex=2},t.prototype.updateMoney=function(e){var t=this;this.count=0,this.count=s.GameDataStorage.getUser().userData.money,this.countNum=this.count,this.count+=e,this._vector=e/20,this.scheduleOnce(function(){t.isAction=!0},1),s.GameDataStorage.getUser().userData.money+=e,s.GameDataStorage.getUser().userData.money<=0&&(s.GameDataStorage.getUser().userData.money=0),s.GameDataStorage.preserveGameData()},t.prototype.update=function(){this.isAction&&(this.countNum+=this._vector,this.numLabel.string=Math.floor(this.countNum)+"",Math.floor(this.countNum)<=0&&(this.numLabel.string="0"),this._vector<0?this.countNum<=this.count&&(this.isAction=!1):this.countNum>=this.count&&(this.isAction=!1))},i([c],t)}(cc.Component));a.default=h,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf"}],new_ai:[function(e,t,a){"use strict";cc._RF.push(t,"b635ejdnh9Lf6TVN7G0rGbb","new_ai");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.ai_player=void 0;var s=e("../../../SSSGF/ssscgf"),r=e("../../../utils/commonFunction"),c=e("./class_manager"),h=e("./game_manager"),u=e("./player_joiner");a.ai_player=function(e,t){this.player=e,this.win_fen=t};var l=cc._decorator,d=l.ccclass,p=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fen=new Map,t.cos=c.joiner_enum.ai,t.myWin=[],t.computerWin=[],t.juesha_judge=!1,t.sum=0,t.player_array=[],t.mazeScore=[],t.record=[],t.count=0,t.wins=[],t.player_win_array=[],t.RightRate=1,t.stateNumber=1,t.is_diaoxian=!1,t.is_new=!1,t.huiqi=!1,t}return o(t,e),t.prototype.init=function(e,t,a){this.player_array=a,this.chess_array=t,this.score=s.UpdataRankData.getRankByScoreJD(r.commonFunction.judgeAiScore(s.GameDataStorage.getUser().userData.jd_score)),this.init_score()},t.prototype.close_play_chess=function(){h.game_manager.get_chess_player()==this&&this.unschedule(this.ai_luozi_fun)},t.prototype.open_play_chess=function(){h.game_manager.get_chess_player()==this&&this.ai_luozi()},t.prototype.get_qiuhe=function(){var e=this,t=3*Math.random()+2;this.scheduleOnce(function(){var t=!0;Math.random()<.5&&(t=!1),h.game_manager.get_draw_event(e,t)},t)},t.prototype.init_head_icon=function(e){this.head_icon=e;var t=Math.floor(60*Math.random()+1);Math.random()<.5&&(t=1),s.GameDataStorage.gameStateData.ds_headIconIndex=t,this.head_icon.init_head_icon(this,t)},t.prototype.init_game_mode=function(){},t.prototype.init_ui=function(){},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){this.ai_luozi()},t.prototype.error_chess_pos=function(){for(var e=null,t=0;t<this.chess_array.length;t++){for(var a=0;a<this.chess_array[t].length;a++)if(!this.chess_array[t][a].chess_data&&(null==this.chess_array[t][a].kunlong_player||this.chess_array[t][a].kunlong_player==this)&&(0==this.chess_array[t][a].chaoniu_player||1==this.chess_array[t][a].chaoniu_player&&(this.zhenfa_array[0]&&"chaoniu"==this.zhenfa_array[0].data.name||this.zhenfa_array[1]&&"chaoniu"==this.zhenfa_array[1].data.name))){e=cc.v2(t,a),console.error("\u50bb\u903cai\u843d\u5728\u4e86\u54ea",t,",",a,",",this.chess_array[t][a]);break}if(e)break}h.game_manager.get_game_event(this,e)},t.prototype.one_player_play_chess=function(){var e=this.get_new_chess_pos();return e&&h.game_manager.get_player_by_state(e.state),!0},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return!0},t.prototype.one_win=function(e){return e.player!=this&&(this.juesha_judge=!0),!0},t.prototype.get_new_chess_pos=function(){for(var e=null,t=0;t<this.chess_array.length;t++)for(var a=0;a<this.chess_array[t].length;a++)if(this.chess_array[t]&&this.chess_array[t][a]&&this.chess_array[t][a].chess_data){if(!e){e=this.chess_array[t][a].chess_data;continue}this.chess_array[t][a].chess_data.id>e.id&&(e=this.chess_array[t][a].chess_data)}return e},t.prototype.ai_luozi=function(){var e=this;console.log("\u8f6e\u5230ai\u843d\u5b50\u4e86"),this.ai_luozi_fun=function(){var t,a=e.get_new_chess_pos();if(a)t=a.pos,e.AIPosition(t.x,t.y,function(t){h.game_manager.get_game_event(e,t)});else{t=cc.v2(7,7);for(var n=0;n<e.count;n++)e.wins[7][7][n]&&(e.computerWin[n]++,e.myWin[n]=6);h.game_manager.get_game_event(e,t)}},this.scheduleOnce(this.ai_luozi_fun.bind(this),1)},t.prototype.onLoad=function(){},t.prototype.user_qiuhe_ai=function(e){var t=this.jushi_judge();console.log("\u6c42\u548c\u7684\u5206\u6570:",t),this.juesha_judge?e(!1):this.sum>=180?e(!0):t.a>t.b?e(!0):(t.a,t.b,e(!1))},t.prototype.jushi_judge=function(){for(var e=[],t=[],a=0;a<this.player_array.length;a++){for(var n=[],o=0;o<15;o++){for(var i=[],s=0;s<15;s++)i.push(0);n.push(i)}e.push(n),t.push(0)}var r=0,h=0;for(o=0;o<15;o++)for(s=0;s<15;s++)if(this.chess_array[o]&&this.chess_array[o][s]&&this.chess_array[o][s].chess_data&&this.chess_array[o][s].chess_data.state!=c.chess_belong.null)for(var u=0;u<this.count;u++)if(this.wins[o][s][u]){1==this.player_win_array[0][u]?(e[0][o][s]+=200,t[0]+=20):2==this.player_win_array[0][u]?(e[0][o][s]+=2e3,t[0]+=2e3):3==this.player_win_array[0][u]&&(e[0][o][s]+=1e4,t[0]+=1e4),1==this.player_win_array[2][u]?(e[2][o][s]+=200,t[2]+=200):2==this.player_win_array[2][u]?(e[2][o][s]+=2e3,t[2]+=2e3):3==this.player_win_array[2][u]?(e[2][o][s]+=1e4,t[2]+=1e4):4==this.player_win_array[2][u]&&(e[2][o][s]+=2e4,t[2]+=1e4),1==this.player_win_array[1][u]?(e[1][o][s]+=200,t[1]+=200):2==this.player_win_array[1][u]?(e[1][o][s]+=2e3,t[1]+=2e3):3==this.player_win_array[1][u]?(e[1][o][s]+=2e4,t[1]+=1e4):4==this.player_win_array[1][u]&&(e[1][o][s]+=2e4,t[1]+=1e4);for(var l=0;l<this.player_array.length;l++)this.player_array[l]==this&&(e[l][o][s]+=20,t[l][o][s]+=20,h=l),this.player_array[l].cos==c.joiner_enum.player&&(e[l][o][s]+=1,t[l][o][s]+=1,r=l)}return{a:t[r],b:t[h]}},t.prototype.init_score=function(){for(var e=0;e<this.chess_array.length;e++){this.mazeScore[e]=[];for(var t=0;t<this.chess_array[0].length;t++)this.mazeScore[e][t]=0}for(var a=0;a<15;a++){this.wins[a]=[];for(var n=0;n<15;n++)this.wins[a][n]=[]}for(a=0;a<15;a++)for(n=0;n<11;n++){for(var o=0;o<4;o++)this.wins[a][n+o][this.count]=!0;this.count++}for(a=0;a<15;a++)for(n=0;n<11;n++){for(o=0;o<4;o++)this.wins[n+o][a][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=0;n<11;n++){for(o=0;o<4;o++)this.wins[a+o][n+o][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=14;n>3;n--){for(o=0;o<4;o++)this.wins[a+o][n-o][this.count]=!0;this.count++}for(var i=0;i<this.count;i++)this.myWin[i]=0,this.computerWin[i]=0;console.log("\u521d\u59cb\u5316\u7684\u600e\u4e48\u6837\u4e86:",this.fen)},t.prototype.AIPosition=function(e,t,a,n){var o=this;this.stateCheck(function(){console.log("11111111:",e,t),o.newX=e,o.newY=t,o.huiqi=!1,n&&(o.huiqi=n);for(var i=0;i<o.count;i++)o.wins[e][t][i]&&(o.computerWin[i]=6,o.myWin[i]++);var s=o.computerAI();e=s.x,t=s.y,a&&a(cc.v2(e,t))})},t.prototype.stateCheck=function(e){var t=this,a=(s.NumberUtil.randomNum(1,3),s.NumberUtil.randomNum(0,100));if(this.stateNumber<=0)return e();15==a?(s.conMager.getInstance()._msgAtion.emit("ai_diaoxian"),this.scheduleOnce(function(){s.conMager.getInstance()._msgAtion.emit("ai_shangxian"),t.stateNumber-=1,e&&e()},s.NumberUtil.randomNum(2,10))):e&&e()},t.prototype.addPos=function(e,t,a){console.log("uuuuuuuuuuuuuuuu");for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a!=this?(this.myWin[n]++,this.computerWin[n]=6):(this.computerWin[n]++,this.myWin[n]=6))},t.prototype.delPos=function(e,t){console.log("hhhhhhhhhhhhh");for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.myWin[a]=0,this.computerWin[a]=0)},t.prototype.computerAI=function(){this.RightRate=.9;for(var e=[],t=[],a=0,n=0,o=0,i=0;i<15;i++){e[i]=[],t[i]=[];for(var r=0;r<15;r++)e[i][r]=0,t[i][r]=0}var c=[];for(i=0;i<15;i++)for(r=0;r<15;r++)if(!this.chess_array[i][r].chess_data){c.push([i,r]);for(var h=0;h<this.count;h++)this.wins[i][r][h]&&(1==this.myWin[h]?e[i][r]+=200:2==this.myWin[h]?e[i][r]+=400:3==this.myWin[h]?e[i][r]+=2e3:4==this.myWin[h]&&(e[i][r]+=1e4),1==this.computerWin[h]?t[i][r]+=220:2==this.computerWin[h]?t[i][r]+=420:3==this.computerWin[h]?t[i][r]+=2100:4==this.computerWin[h]&&(t[i][r]+=2e4));e[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=e[i][r],n=i,o=r):e[i][r]==a&&t[i][r]>t[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r),t[i][r]>a&&Math.floor(Math.random()+this.RightRate)?(a=t[i][r],n=i,o=r):t[i][r]==a&&e[i][r]>e[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=r)}if(this.huiqi){var u=s.NumberUtil.randomNum(0,c.length-1);n=c[u][0],o=c[u][1]}for(console.log("uggggg,",n,o),console.log("\u770b\u770b\u5f97\u5206",a,e,t),h=0;h<this.count;h++)this.wins[n][o][h]&&(this.computerWin[h]++,this.myWin[h]=6);return cc.v2(n,o)},i([d],t)}(u.default));a.default=p,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../../../utils/commonFunction":"commonFunction","./class_manager":"class_manager","./game_manager":"game_manager","./player_joiner":"player_joiner"}],new_chess:[function(e,t,a){"use strict";cc._RF.push(t,"3246d2KH4JFMoHZFXKBbGZb","new_chess");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guang=null,t.icon=null,t.id_label=null,t.chess_effect=null,t.data=null,t.judge=!0,t}return o(t,e),t.prototype.onOpen=function(e){this.guang.active=!1,this.data=e[0],e[1](this.node,this.show_data.bind(this))},t.prototype.show_data=function(){var e=this;this.node.active=!0,this.node.opacity=255,this.node.scale=1,this.judge=!0,this.node.getChildByName("chess").getComponent(cc.BoxCollider).tag=this.data.chess_data.state,this.id_label.string=this.data.chess_data.id.toString(),this.icon.spriteFrame=null;var t="image/chess/new_chess/chess_"+this.data.chess_data.state;cc.resources.load(t,cc.SpriteFrame,function(t,a){t?console.error("\u68cb\u5b50\u56fe\u7247\u83b7\u53d6\u5931\u8d25",t):e.icon.spriteFrame=a})},t.prototype.win_action=function(){s.conMager.getInstance().playAudioEff("btn1"),this.guang.active=!0,this.node.runAction(cc.scaleTo(.15,1.1))},t.prototype.onClose=function(){throw new Error("Method not implemented.")},t.prototype.start=function(){},t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onClear=function(){throw new Error("Method not implemented.")},i([h({type:cc.Node,tooltip:"\u5149"})],t.prototype,"guang",void 0),i([h({type:cc.Sprite,tooltip:"\u68cb\u5b50\u56fe"})],t.prototype,"icon",void 0),i([h({type:cc.Label,tooltip:"\u68cb\u5b50id"})],t.prototype,"id_label",void 0),i([h({type:cc.Node,tooltip:"\u4e0d\u6536\u68cb\u5b50\u63a7\u5236\u7684\u68cb\u5b50\u7279\u6548\u7236\u8282\u70b9"})],t.prototype,"chess_effect",void 0),i([c],t)}(s.winRootNode);a.default=u,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf"}],"new_duye ":[function(e,t,a){"use strict";cc._RF.push(t,"f6282p6Ev5CAYnX30fYoRZt","new_duye ");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("../game_manager/new_chess"),c=cc._decorator,h=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callback=null,t.pos=[],t.isjude=!0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;this.node.opacity=255,this.node.zIndex=4;var a=e[0].pos;this.pos=a,this.callback=e[0].callback;var n=46*a[0],o=46*a[1];this.node.setPosition(n,o);var i=e[0].position,s=e[0].angle;this.node.angle=s;var r=e[0].tag;if(console.log("\u4f20\u8fdb\u6765tag\u662f\u591a\u5c11:",r),-1==r&&(r=0),e[0].bool){var c=cc.v2(Math.floor(46*a[0])+22,Math.floor(46*a[1])+22);c=cc.v2(c.x-322-22,c.y-322-22),this.node.setPosition(c.x,c.y)}this.node.getComponent(cc.BoxCollider).tag=r,this.isjude=!0,cc.tween(this.node).by(7,{position:cc.v3(i.x,i.y)},{easing:"expoOut"}).call(function(){t.onClose(1)}).start()},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.onCollisionEnter=function(e){if(this.isjude){var t=e.node.getComponent(cc.BoxCollider).tag,a=this.node.getComponent(cc.BoxCollider).tag;if("chess"==e.node.name){var n=e.node.getComponent(r.default).board_data.chess_data.pos,o=e.node.getComponent(r.default).judge;if(console.log("\u5bf9\u65b9\u7684\u4f4d\u7f6e",t,a,o),t!=a&&o){e.node.getComponent(r.default).judge=!1;var i=e.node.parent,c=this.pos[0],h=this.pos[1],u=n[0],l=n[1],d=cc.v2(u-c,l-h),p=s.NumberUtil.randomNum(2,5);e.node.parent.zIndex=8,e.node.getChildByName("liewen_dusha").active=!0;var g=46*d.x*p,_=46*d.y*p,m=cc.v2(46*u,46*l),f=cc.v2(g,_),y=m.sub(f).mag()/46/18;cc.tween(i).by(y,{x:g,y:_},{easing:"circOut"}).to(.2,{opacity:0}).call(function(){i.destroy()}).start(),this.callback&&this.callback(this.pos,a,i,n)}}}},t.prototype.update=function(){},i([h],t)}(s.winRootNode));a.default=u,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../game_manager/new_chess":"new_chess"}],new_fenlie_qizi:[function(e,t,a){"use strict";cc._RF.push(t,"f1bd2B6snxB5IZvHOznYrz0","new_fenlie_qizi");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guang=null,t.longgu=null,t.speed=500,t.block=46,t.jiuzheng=322,t.start_pos=null,t.pos=null,t}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(e){var t=this;if(this.longgu=this.node.getComponent(sp.Skeleton),this.start_pos=cc.v2(e[0].x*this.block-this.jiuzheng,e[0].y*this.block-this.jiuzheng),this.node.setPosition(this.start_pos),this.node.zIndex=cc.macro.MAX_ZINDEX,this.node.scale=1,1==e[6]){var a=this.longgu.setAnimation(1,"burst1",!1);this.longgu.setTrackCompleteListener(a,function(){e[5](),t.longgu.clearTracks();var a=t.longgu.setAnimation(2,"burst2",!1);t.longgu.setTrackCompleteListener(a,function(){t.longgu.clearTracks(),t.node.scale=1.5;var a=t.longgu.setAnimation(3,"burst3",!1);t.guang_action(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.polie),t.longgu.setTrackCompleteListener(a,function(){t.longgu.clearTracks(),t.node.scale=1,t.move(e)})})})}else 0==e[6]?(e[5](),this.move(e)):2==e[6]&&(a=this.longgu.setAnimation(1,"burst1",!1),this.longgu.setTrackCompleteListener(a,function(){e[5](),t.longgu.clearTracks();var a=t.longgu.setAnimation(2,"burst2",!1);t.longgu.setTrackCompleteListener(a,function(){t.longgu.clearTracks(),t.node.scale=1.5;var e=t.longgu.setAnimation(3,"burst3",!1);t.guang_action(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.polie),t.longgu.setTrackCompleteListener(e,function(){t.longgu.clearTracks(),t.node.scale=1,s.conMager.getInstance().putPoolNode(s.KEY.poolName.new_fenlie_qizi,t.node)})})}))},t.prototype.move=function(e){var t=this,a=e[1]*this.block-this.jiuzheng,n=e[2]*this.block-this.jiuzheng;this.pos=cc.v2(a,n);var o=this.node.getPosition().sub(this.pos).mag()/this.speed;this.pos.x>this.start_pos.x&&this.pos.y>this.start_pos.y?this.node.angle=-45:this.pos.x>this.start_pos.x&&this.pos.y==this.start_pos.y?this.node.angle=-90:this.pos.x>this.start_pos.x&&this.pos.y<this.start_pos.y?this.node.angle=-135:this.pos.x==this.start_pos.x&&this.pos.y<this.start_pos.y?this.node.angle=-180:this.pos.x<this.start_pos.x&&this.pos.y<this.start_pos.y?this.node.angle=135:this.pos.x<this.start_pos.x&&this.pos.y==this.start_pos.y?this.node.angle=90:this.pos.x<this.start_pos.x&&this.pos.y>this.start_pos.y?this.node.angle=45:this.pos.x==this.start_pos.x&&this.pos.y>this.start_pos.y?this.node.angle=0:(console.error("\u5206\u88c2\u89d2\u5ea6\u4e0d\u5b58\u5728"),this.node.angle=0),this.node.scale=2,this.longgu.setAnimation(4,"burst4",!0),cc.tween(this.node).to(o,{position:cc.v3(a,n)}).call(function(){t.move_end(e)}).start()},t.prototype.move_end=function(e){var t=this;if(this.node.angle=0,this.node.scale=1,1==e[6]){var a=this.longgu.setAnimation(5,"burst2",!1);this.longgu.setTrackCompleteListener(a,function(){t.longgu.clearTracks(),e[4]();var a=t.longgu.setAnimation(3,"burst3",!1);t.guang_action(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.polie),t.longgu.setTrackCompleteListener(a,function(){t.longgu.clearTracks(),s.conMager.getInstance().putPoolNode(s.KEY.poolName.new_fenlie_qizi,t.node)})})}var n=this.longgu.setAnimation(6,"burst1",!1);this.longgu.setTrackCompleteListener(n,function(){t.longgu.clearTracks(),t.scheduleOnce(function(){e[3]()},.1),t.node.scale=1.5;var a=t.longgu.setAnimation(3,"burst3",!1);t.guang_action(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.polie),t.longgu.setTrackCompleteListener(a,function(){t.longgu.clearTracks(),e[4](),s.conMager.getInstance().putPoolNode(s.KEY.poolName.new_fenlie_qizi,t.node)})})},t.prototype.onClose=function(){throw new Error("Method not implemented.")},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.start=function(){},t.prototype.guang_action=function(){this.guang.opacity=255,this.guang.scale=.7,cc.tween(this.guang).to(.3,{opacity:0,scale:1.2}).start()},i([h({type:cc.Node,tooltip:"\u5149"})],t.prototype,"guang",void 0),i([c],t)}(s.winRootNode);a.default=u,cc._RF.pop()},{"../../../../../SSSGF/ssscgf":"ssscgf"}],"one-side-platform":[function(e,t){"use strict";cc._RF.push(t,"749basSw9pHmqyydITLTgfx","one-side-platform"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.pointVelPlatform=cc.v2(),this.pointVelOther=cc.v2(),this.relativeVel=cc.v2(),this.relativePoint=cc.v2()},public:function(e,t,a){a.node.y<this.node.y&&"lead"==a.node.group&&(e.disabled=!0)},onBeginContact:function(e,t,a){var n=this.node.y+this.node.height/2;this.node.y<0&&(n=this.node.y-this.node.height/2),a.node.y+7<n&&"lead"==a.node.group&&(e.disabled=!0)},onEndContact:function(){},onPreSolve:function(e,t,a){var n=this.node.y+this.node.height/2;this.node.y<0&&(n=this.node.y-this.node.height/2),a.node.y+7<n&&"lead"==a.node.group&&(e.disabled=!0)}}),cc._RF.pop()},{}],platform:[function(e,t,a){"use strict";var n;cc._RF.push(t,"f2919hl/gBJiqtC4QDWq1Xv","platform"),Object.defineProperty(a,"__esModule",{value:!0}),a.platform=a.platform_data=a.platform_type=void 0,function(e){e[e.is_tt=0]="is_tt",e[e.is_233_lianyun=1]="is_233_lianyun",e[e.is_233_mailiang=2]="is_233_mailiang",e[e.is_vivo=3]="is_vivo",e[e.is_taptap=4]="is_taptap",e[e.is_topon=5]="is_topon",e[e.is_xiaomi=6]="is_xiaomi"}(n=a.platform_type||(a.platform_type={}));var o=function(){this.time_fanhui=0,this.fanhui_AD=0,this.quanpingshiping_to_jilishiping=5,this.first_time_quanpingshiping_AD=0,this.interval_time_quanpingshiping_AD=0,this.chaping_AD=0};a.platform_data=o;var i=function(){function e(){this.now_platform=n.is_tt,this.rank_channel="",this.data=new o}return Object.defineProperty(e,"Instance",{get:function(){return this._instace||(this._instace=new e),this._instace},enumerable:!1,configurable:!0}),e}();a.platform=i.Instance,cc._RF.pop()},{}],platfrom_fun:[function(e,t,a){"use strict";cc._RF.push(t,"a7834540lRCTppYnutyV0l5","platfrom_fun"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./adEvent/videoEvent"),o=e("./adEvent/bannerEvent"),i=e("./adEvent/interstitialEvent"),s=e("./shareEvent"),r=e("./createVideo"),c=e("../ssscgf"),h=e("./adEvent/videoEvent_ks"),u=e("./createVideo_ks"),l=e("../../utils/platform"),d=e("../../utils/as_util"),p=function(){function e(){this.appName=null,this.classSchedulCom=null}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.init=function(){var e="h6gj352j1a8b3ag4b8",t=["b8lc344ibhe7201i0d"],a="1e3804k8rnb1e8rdxb";window.tt?(this.systemIfon=tt.getSystemInfoSync(),this.screenIfon=tt.getLaunchOptionsSync(),this.ad_videoEvent=new n.default,this.createVideoEvent=new r.default):window.kwaigame?(kwaigame.readyGo(),e="2300001797_01",t=["6lllgecg5ia5esmrdc"],a="1i783h8dddh51f257h",this.ad_videoEvent=new h.default,this.createVideoEvent=new u.default):(this.ad_videoEvent=new n.default,this.createVideoEvent=new r.default),this.ad_videoEvent.init(e),this.ad_bannerEvent=new o.default,this.ad_bannerEvent.init(t),this.ad_interstitial=new i.default,this.ad_interstitial.init(a),this.shareEvent=new s.default,this.shareEvent.init(),this.createVideoEvent.init()},e.prototype.loadViedeo=function(){this.ad_videoEvent.loadViedeo()},e.prototype.add_reportAnalytics=function(e,t,a){if(window.tt){var n={};if(!tt.reportAnalytics)return;a||(a=e),t?n[t]=a:t=e,tt.reportAnalytics(e,n)}},e.prototype.getTime=function(e){return new Promise(function(t){e?t(e):cc.assetManager.loadRemote("https://quan.suning.com/getSysTime.do",function(a,n){console.log(a,n),a?(console.log("---------\u83b7\u53d6\u670d\u52a1\u5668\u65f6\u95f4\u5931\u8d25\uff01"),e=(new Date).getTime()):n&&(console.log("---------\u83b7\u53d6\u670d\u52a1\u5668\u65f6\u95f4\u6210\u529f\uff01",new Date(JSON.parse(n._$nativeAsset).sysTime2).getTime()),e=new Date(JSON.parse(n._$nativeAsset).sysTime2).getTime()),t(e)})})},e.prototype.showAdVideo=function(e,t,a){void 0===t&&(t=void 0),void 0===a&&(a=!1),l.platform.now_platform==l.platform_type.is_tt?(this.ad_videoEvent.autoAgainPlayTimes=0,this.ad_videoEvent.autoPlayFlag=a,this.ad_videoEvent.successCb=e,this.ad_videoEvent.failCb=t,this.ad_videoEvent.startVideoAd(e,t)):d.as_util.show_jili_video(e)},e.prototype.showBanner=function(e){void 0===e&&(e=2),this.ad_bannerEvent.isShowBanner=!0,cc.sys.platform===cc.sys.BYTEDANCE_GAME&&this.ad_bannerEvent.showBannerAd(e)},e.prototype.updateBanner=function(){cc.sys.platform===cc.sys.BYTEDANCE_GAME&&this.ad_bannerEvent.showBannerAd(4)},e.prototype.hideBanner=function(){this.ad_bannerEvent.isShowBanner=!1,cc.sys.platform===cc.sys.BYTEDANCE_GAME&&this.ad_bannerEvent.showBannerAd()},e.prototype.showInterstitalAd=function(){this.ad_interstitial.showAd()},e.prototype.startCreateVideo=function(){console.log("\u5f00\u59cb\u5f55\u5236"),this.createVideoEvent.startCreate()},e.prototype.stopCreateVideo=function(){console.log("\u7ed3\u675f\u5f55\u5236"),this.createVideoEvent.stopCreate()},e.prototype.onShare=function(){this.shareEvent.onShare()},e.prototype.onShareVideo=function(e){this.createVideoEvent.onShareVideo(e)},e.prototype.openAwemeUserProfile=function(e){cc.sys.platform==cc.sys.BYTEDANCE_GAME?tt.openAwemeUserProfile({success:function(t){t.hasFollowed&&e&&e(1)},fail:function(e){console.log(e)}}):e&&e(1)},e}();a.default=p,window._pl_fun=p,window.showTip=function(e){c.conMager.getInstance().getPoolNode(c.KEY.poolName.tipNode,void 0,e)},window.showMask=function(){cc.game.emit("showMask")},window.hideMask=function(){cc.game.emit("hideMask")},window.setAdState=function(){console.log("\u8bbe\u7f6e\u5e7f\u544a\u72b6\u6001"),cc.sys.isNative&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","setAdState","()V")},window.loadAdConfig=function(e){console.log("\u6267\u884c\u8bf7\u6c42 path:"+e),cc.assetManager.loadRemote(e,cc.JsonAsset,function(e,t){if(e)return"\u52a0\u8f7d\u8fdc\u7a0b\u5e7f\u544a\u914d\u7f6e\u5931\u8d25 err:"+e;console.log("\u8bf7\u6c42\u6210\u529f res:"+t.json);var a=JSON.stringify(t.json);console.log("\u8bfb\u53d6\u5230\u7684json:"+a);var n=t.json;null!=n.time_fanhui&&(console.log("\u8bbe\u7f6e\u5173\u95ed\u6309\u94ae\u5ef6\u8fdf\u65f6\u95f4 ",n.time_fanhui),l.platform.data.time_fanhui=n.time_fanhui),l.platform.now_platform!=l.platform_type.is_vivo&&l.platform.now_platform!=l.platform_type.is_topon||cc.assetManager.loadRemote("https://pv.sohu.com/cityjson?ie=utf-8",function(e,t){if(e)return"\u5730\u5740\u501f\u53e3\u8bf7\u6c42\u5931\u8d25 err:"+e;var a=JSON.stringify(t);console.log("\u5730\u533astr:",a);var o,i=!0;l.platform.now_platform==l.platform_type.is_vivo?o=n.pingbi_city_yuansheng_banner:l.platform.now_platform==l.platform_type.is_topon&&(o=n.pingbi_city);for(var s=0;s<o.length;s++)-1!=a.indexOf(o[s])&&(i=!1);l.platform.now_platform==l.platform_type.is_vivo?0==n.kaiguan_yuansheng_banner?cc.sys.isNative&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","hideBanner","()V"):i?cc.sys.isNative&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","initBanner","()V"):cc.sys.isNative&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","hideBanner","()V"):l.platform.now_platform==l.platform_type.is_topon&&(i||cc.sys.isNative&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","pingbi","()V"))}),cc.sys.isNative&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","initAdConfig","(Ljava/lang/String;)V",a)})},window.setChannel=function(e){cc.game.emit("setChannelName",e)},window.exitGame=function(){cc.game.end()},window.runGame=function(){cc.game.emit("runGame")},cc._RF.pop()},{"../../utils/as_util":"as_util","../../utils/platform":"platform","../ssscgf":"ssscgf","./adEvent/bannerEvent":"bannerEvent","./adEvent/interstitialEvent":"interstitialEvent","./adEvent/videoEvent":"videoEvent","./adEvent/videoEvent_ks":"videoEvent_ks","./createVideo":"createVideo","./createVideo_ks":"createVideo_ks","./shareEvent":"shareEvent"}],player_joiner:[function(e,t,a){"use strict";cc._RF.push(t,"3a0846IzgRGO7RYd0Csade/","player_joiner");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./game_joiner"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zhenfa_array=[],t}return o(t,e),i([c],t)}(s.default));a.default=h,cc._RF.pop()},{"./game_joiner":"game_joiner"}],player:[function(e,t,a){"use strict";cc._RF.push(t,"718feezlyJGWaTyAPlduLX8","player");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../../utils/commonFunction"),r=e("../../../SSSGF/ssscgf"),c=e("./class_manager"),h=e("./game_manager"),u=e("./player_joiner"),l=cc._decorator,d=l.ccclass,p=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cos=c.joiner_enum.player,t.board=null,t}return o(t,e),t.prototype.close_play_chess=function(){h.game_manager.get_chess_player()==this&&this.board.out_chess_player(this)},t.prototype.open_play_chess=function(){h.game_manager.get_chess_player()==this&&this.board.get_chess_player(this)},t.prototype.get_qiuhe=function(){},t.prototype.init_head_icon=function(e){if(this.head_icon=e,"null"!=r.GameDataStorage.getUser().userData.headIconUrl){var t=e.node.getChildByName("headIcon").getChildByName("icon");s.commonFunction.updateHttpSprite(r.GameDataStorage.getUser().userData.headIconUrl,t)}this.head_icon.init_head_icon(this)},t.prototype.one_win=function(){return!0},t.prototype.end_big_game=function(){return!0},t.prototype.end_small_game=function(){return!0},t.prototype.one_player_play_chess=function(){return!0},t.prototype.error_chess_pos=function(){},t.prototype.can_play_chess=function(){this.board.get_chess_player(this)},t.prototype.start_small_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_game=function(){return!0},t.prototype.init_game_mode=function(){},t.prototype.init=function(){this.score=r.UpdataRankData.getRankByScoreJD(r.GameDataStorage.getUser().userData.jd_score)},t.prototype.init_ui=function(e){this.board=e},i([d],t)}(u.default));a.default=p,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","./../../../utils/commonFunction":"commonFunction","./class_manager":"class_manager","./game_manager":"game_manager","./player_joiner":"player_joiner"}],poolNodeMager:[function(e,t,a){"use strict";cc._RF.push(t,"8ef4caPrWhB6qiCLlQKBXoV","poolNodeMager");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0});var i=e("../../KEY"),s=function(e){function t(){var t=e.call(this)||this;return t.nodes={},t}return o(t,e),t.prototype.init=function(){var e=this;cc.assetManager.loadBundle("prefabPool",void 0,function(t,a){e.bundle=a})},t.prototype.load=function(e,t){var a=this,n=this,o=void 0;this.bundle.load(i.KEY.POOLCF[e].prefab,function(s,r){if(s)console.log("resources/prefab/prefabsPoolNodes-------err",s);else if(r){n.nodes[e]=r;var c=o=cc.instantiate(r);i.KEY.POOLCF[e].usePool&&(n.nodes[e+"Pool"]=new cc.NodePool,n.nodes[e+"Pool"].put(o),c=a.nodes[e+"Pool"].get()),t(c)}})},t.prototype.getPoolNode=function(e,t){null!=this.nodes[e]?t(i.KEY.POOLCF[e].usePool&&this.nodes[e+"Pool"].size()>0?this.nodes[e+"Pool"].get():cc.instantiate(this.nodes[e])):this.load(e,t)},t.prototype.putPoolNode=function(e,t){i.KEY.POOLCF[e].usePool&&i.KEY.POOLCF[e].maxCount>this.nodes[e+"Pool"].size()?this.nodes[e+"Pool"].put(t):t.destroy()},t}(cc.Component);a.default=s,cc._RF.pop()},{"../../KEY":"KEY"}],pvp_AS_panel:[function(e,t,a){"use strict";cc._RF.push(t,"d78d3GYwIRC1axqtMxCHDkJ","pvp_AS_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("../roomNetListener"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.user_huiqi=null,t.user_qiuhe=null,t.ds_huiqi=null,t.ds_qiuhe=null,t.daojishi=null,t.sprFrame=[],t.type="",t.callBack=null,t.time=5,t.sq_p_id="",t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){},t.prototype.onClose=function(e){var t=this;this.node.getChildByName("Node"),this.stopTime(),this.node.runAction(cc.sequence(cc.spawn(cc.sequence(cc.scaleTo(.1,1.1),cc.scaleTo(.2,0)),cc.fadeOut(.2)),cc.callFunc(function(){t.callBack(e),t.node.destroy()})))},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.init=function(e,t,a){this.sq_p_id=a,this.callBack=t,this.node.zIndex=999,this.type=e,this.node.active=!0;var n=this.node.getChildByName("Node");n.active=!0,this.scaleBigShow(n,cc.v3(0,0,0),null),this.time=5,s.conMager.getInstance().playAudioEff(s.KEY.audioName.showpanel),this.daojishi.string="\u5012\u8ba1\u65f6:"+this.time,"ds_huiqi"==this.type||"ds_qiuhe"==this.type?(this.daojishi.node.y=320,this.startTime(),n.getChildByName("btn_jixu").getComponent(cc.Sprite).spriteFrame=this.sprFrame[1]):(this.daojishi.node.y=0,n.getChildByName("btn_jixu").getComponent(cc.Sprite).spriteFrame=this.sprFrame[0]),this.user_huiqi.active=!1,this.user_qiuhe.active=!1,this.ds_huiqi.active=!1,this.ds_qiuhe.active=!1,this[this.type].active=!0},t.prototype.scaleBigShow=function(e,t,a){e.scale=.5,e.opacity=0,e.setScale(0),e.stopAllActions(),e.runAction(cc.sequence(cc.spawn(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.1,1)),cc.fadeIn(.2)),cc.callFunc(function(){a&&a()})))},t.prototype.tongyi_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.node.getChildByName("Node").opacity=0,"user_qiuhe"==this.type?(r.room_net_listener.sendToGameSvr(r.MsgId.HEQIQINGQIU,{player_id:MGOBE.Player.id}),s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node.parent,"\u8bf7\u6c42\u5df2\u53d1\u9001\u7ed9\u5bf9\u65b9!"),s.conMager.getInstance()._msgAtion.emit("quedingheqi"),this.onClose(0)):"ds_qiuhe"==this.type?(r.room_net_listener.sendToGameSvr(r.MsgId.HEQIJIEGUO,{player_id:this.sq_p_id,result:1}),this.onClose(1)):"user_huiqi"==this.type?(r.room_net_listener.sendToGameSvr(r.MsgId.HUIQIQINGQIU,{player_id:MGOBE.Player.id}),s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node.parent,"\u8bf7\u6c42\u5df2\u53d1\u9001\u7ed9\u5bf9\u65b9!"),s.conMager.getInstance()._msgAtion.emit("quedinghuiqi"),this.onClose(0)):"ds_huiqi"==this.type&&(r.room_net_listener.sendToGameSvr(r.MsgId.HUIQIJIEGUO,{player_id:this.sq_p_id,result:1}),this.onClose(1))},t.prototype.quxiao_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),"ds_qiuhe"==this.type?r.room_net_listener.sendToGameSvr(r.MsgId.HEQIJIEGUO,{player_id:this.sq_p_id,result:0}):"ds_huiqi"==this.type&&r.room_net_listener.sendToGameSvr(r.MsgId.HUIQIJIEGUO,{player_id:this.sq_p_id,result:0}),this.onClose(1)},t.prototype.startTime=function(){this.daojishi.node.active=!0,this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){this.time-=1,this.daojishi.string="\u5012\u8ba1\u65f6:"+this.time,this.time<=0&&("ds_qiuhe"==this.type?r.room_net_listener.sendToGameSvr(r.MsgId.HEQIJIEGUO,{player_id:this.sq_p_id,result:0}):"ds_huiqi"==this.type&&r.room_net_listener.sendToGameSvr(r.MsgId.HUIQIJIEGUO,{player_id:this.sq_p_id,result:0}),this.onClose(1))},t.prototype.stopTime=function(){this.unschedule(this.updateTime)},i([u(cc.Node)],t.prototype,"user_huiqi",void 0),i([u(cc.Node)],t.prototype,"user_qiuhe",void 0),i([u(cc.Node)],t.prototype,"ds_huiqi",void 0),i([u(cc.Node)],t.prototype,"ds_qiuhe",void 0),i([u(cc.Label)],t.prototype,"daojishi",void 0),i([u([cc.SpriteFrame])],t.prototype,"sprFrame",void 0),i([h],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../roomNetListener":"roomNetListener"}],pvp_game_view:[function(e,t,a){"use strict";cc._RF.push(t,"4eff4bM9t5O3qt+n72FshVS","pvp_game_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("../../../utils/platform"),c=e("../global"),h=e("../scene/PvpScene"),u=e("../PvpGameBoard"),l=e("../roomNetListener"),d=e("./pvp_result_view"),p=e("./pvp_AS_panel"),g=e("../../../utils/commonFunction"),_=e("../../../SSSGF/dataController/DATA"),m=e("../../../game/common/item2"),f=e("../../../game/wuziqi/Piece"),y=cc._decorator,v=y.ccclass,b=y.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item3=null,t.gameType=1,t.dsName_string="",t.user_headPanel=null,t.ds_headPanel=null,t.ds_headIcon=null,t.user_headIcon=null,t.reward_gold=20,t.multiple=0,t.chess_parent=null,t.shubiao_node=null,t.max_gameTime=30,t.board=null,t.whiteChess=null,t.blackChess=null,t.pvpResultViewPrefab=null,t.quan=null,t.block=46,t.chess=null,t.userGameTime=0,t.count_down=null,t.userChess=f.BLACKCHESS,t.is_game_over=!1,t.count_time_itm3=10,t.jiabei_num_item3=0,t.whiePool=new cc.NodePool,t.blackPool=new cc.NodePool,t.TimeDel=!1,t.jiaBeiRenShu=0,t.game_id=void 0,t.gou_yu_num=void 0,t.pvp_AS_panel_Prefab=void 0,t.pvp_AS_panel=void 0,t.hongDian=null,t.qipan=void 0,t._selfName="",t._dsName="",t.lastPlayState=1e3,t.chess_num=0,t._startKaiCahngDongHua=!1,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t.musicNvNames=["nvqifeng","nvgaoxing","nvshiwu","nvkeyikuaidianma","nvhaoqi","nvhengaoxing"],t.luozizhong=null,t.quan_judge=!1,t._result=-1,t}return o(t,e),t.prototype.onOpen=function(){this._selfName="",this._dsName=""},t.prototype.onClose=function(){this.unscheduleAllCallbacks(),this.board.getComponent(u.PvpGameBoard).getComponent(u.PvpGameBoard).removeListennner(),this.node.destroy(),h.pvp_scene.initMatchView()},t.prototype.onLoad=function(){var e=this;s.GameDataStorage.gameStateData.gameType=_.game_type.lianjiduiyi,this.hongDian.zIndex=99,s.conMager.getInstance()._msgAtion.on("renshu",this.return_btn,this),s.conMager.getInstance()._msgAtion.on("pingju",this.pingju,this),s.conMager.getInstance()._msgAtion.on("shubiao",this.shubiao,this),s.conMager.getInstance()._msgAtion.on("pvp_AS_panel",this.show_pvp_AS_panel,this),s.conMager.getInstance()._msgAtion.on("pvp_AS_panel_huiqi",this.pvp_AS_panel_huiqi,this),s.conMager.getInstance()._msgAtion.on("closeSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1},this),s.conMager.getInstance()._msgAtion.on("openSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0},this),s.conMager.getInstance()._msgAtion.on("stopTimeDel",function(){e.TimeDel=!0,e.quan_judge=!1},this),s.conMager.getInstance()._msgAtion.on("startTimeDel",function(){e.TimeDel=!1,e.quan_judge=!0},this),cc.find("Canvas/money_node").active=!1},t.prototype.qiPanAddListenner=function(){this.board.getComponent(u.PvpGameBoard).maze.length<10&&(this.qipan.on(cc.Node.EventType.TOUCH_END,this.qiPanListenner,this),this.board.getComponent(u.PvpGameBoard).init(this))},t.prototype.qiPanRemoveListennner=function(){this.qipan.off(cc.Node.EventType.TOUCH_END,this.qiPanListenner,this)},t.prototype.qiPanListenner=function(){s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node,"\u6b63\u5728\u7b49\u5f85\u73a9\u5bb6\u8fdb\u5165")},t.prototype.start=function(){this.reward_gold=c.default.gameMoeny,s.GameDataStorage.gameStateData.reward_gold=c.default.gameMoeny,this.gou_yu_num.string=this.reward_gold.toString(),this.initGame(),this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",this.node.runAction(cc.fadeIn(.5)),r.platform.now_platform!=r.platform_type.is_tt&&(this.node.getChildByName("luping").active=!1)},t.prototype.initGame=function(){s.GameDataStorage.gameStateData.chess_num=0,s.GameDataStorage.gameStateData.rewardmultiple=1,this.initUi(),this.node.getChildByName("mask").zIndex=99,this.initPool(this.whiePool,this.whiteChess),this.initPool(this.blackPool,this.blackChess)},t.prototype.setRoomView=function(){var e=c.default.room&&c.default.room.roomInfo||{playerList:[],owner:void 0};this.game_id.string=e.id},t.prototype.initUi=function(){this.item3=this.node.getChildByName("item3"),this.user_headPanel=this.node.getChildByName("user_headPanel"),this.ds_headPanel=this.node.getChildByName("ds_headPanel"),this.ds_headIcon=this.node.getChildByName("ds_headIcon").getChildByName("ds_headIcon").getComponent(cc.Sprite),this.user_headIcon=this.node.getChildByName("user_headIcon").getChildByName("user_headIcon").getComponent(cc.Sprite),this.chess_parent=this.node.getChildByName("chess_parent"),this.shubiao_node=this.chess_parent.getChildByName("shubiao_node"),this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",this.count_down=this.node.getChildByName("count_down"),this.ds_headIcon.node.parent.active=!0,this.user_headIcon.node.parent.active=!0},t.prototype.initData=function(e){if(this.node.getChildByName("item2")&&this.node.getChildByName("item2").getComponent(m.default).init_user_Data(e),""==this._selfName){console.log("------------\u81ea\u5df1\u7684\u4fe1\u606f\uff1a",e),e.customProfile.isMatchGame||(this.node.getChildByName("btn_share").active=!0),this._selfName=e.name,this.node.getChildByName("user_name").opacity=0,this.node.getChildByName("user_name").getComponent(cc.Label).string=e.name,this.user_headIcon.node.parent.runAction(cc.fadeIn(.2));var t=s.GameDataStorage.getUser().userData,a=g.commonFunction.getDuanWei(t.jd_score),n=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel");n.getChildByName("Name").getComponent(cc.Label).string=t.gameName,n.getChildByName("Level").getComponent(cc.Label).string=a,"null"!=s.GameDataStorage.getUser().userData.headIconUrl?-1!=s.GameDataStorage.getUser().userData.headIconUrl.indexOf("http")?g.commonFunction.updateHttpSprite(s.GameDataStorage.getUser().userData.headIconUrl,this.user_headIcon.node):g.commonFunction.updateSprite(s.GameDataStorage.getUser().userData.headIconUrl,this.user_headIcon.node):g.commonFunction.updateSprite("head_icon/1",this.user_headIcon.node);var o=this.node.getChildByName("game_info_parent");s.conMager.getInstance().getPoolNode(s.KEY.poolName.game_info,o,null)}},t.prototype.init_ds_info=function(e){if(this.node.getChildByName("btn_share").active=!1,this.node.getChildByName("item2")&&this.node.getChildByName("item2").getComponent(m.default).init_ds_info(e),""==this._dsName){console.log("------------\u521d\u59cb\u5316\u5bf9\u624b\u7684\u4fe1\u606f",e),this.ds_headIcon.node.parent.runAction(cc.fadeIn(.2)),this.node.getChildByName("ds_name").opacity=0,this.node.getChildByName("ds_name").getComponent(cc.Label).string=e.customProfile.username,this._dsName=e.name,s.GameDataStorage.gameStateData.ds_name=e.name,s.GameDataStorage.gameStateData.ds_score=e.customProfile.jd_score;var t=g.commonFunction.getDuanWei(e.customProfile.jd_score),a=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel");a.getChildByName("Name").getComponent(cc.Label).string=this._dsName,a.getChildByName("Level").getComponent(cc.Label).string=t,-1!=e.customProfile.headIconUrl.indexOf("http")?g.commonFunction.updateHttpSprite(e.customProfile.headIconUrl,this.ds_headIcon.node):"null"==e.customProfile.headIconUrl?g.commonFunction.updateSprite("head_icon/1",this.ds_headIcon.node):g.commonFunction.updateSprite(e.customProfile.headIconUrl,this.ds_headIcon.node)}},t.prototype.initPool=function(e,t){for(var a=0;a<225;a++){var n=cc.instantiate(t);e.put(n)}},t.prototype.moveInChess=function(e,t,a,n){var o=this;if(this.node.getChildByName("item2")?this.node.getChildByName("item2").destroy():this.item3.active&&(this.item3.active=!1),!(e>50)&&this.board.getComponent(u.PvpGameBoard).addChessToBoard(e,t,a,n)){var i;this.lastPlayState=a,this.stopTime(),this.startTime(-a);var r=null,c=null;if(a==f.BLACKCHESS?(r=this.blackPool,c=this.blackChess):(r=this.whiePool,c=this.whiteChess),r.size()>0)i=r.get();else{var h=cc.instantiate(c);r.put(h),i=r.get()}var l=15*t+e;this.board.getComponent(u.PvpGameBoard).chess_map[l]=i,i.x=this.board.getComponent(u.PvpGameBoard).getPosByInt(e*this.block),i.y=this.board.getComponent(u.PvpGameBoard).getPosByInt(t*this.block),this.chess_parent.addChild(i),this.chessAction(i),this.scheduleOnce(function(){o.hongDian.active=!0,o.hongDian.setPosition(i.x,i.y+1),console.log("1111",i.x,i.y)},.1),s.conMager.getInstance().playAudioEff(s.KEY.audioName.luozi)}},t.prototype.chessAction=function(e){e.scale=1.5,e.getChildByName("chess").zIndex=98,e.y+=80,e.runAction(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)))},t.prototype.gameOver=function(){console.log("\u6e38\u620f\u501f\u5bbf:",this.is_game_over),this.is_game_over||(this.board.getComponent(u.PvpGameBoard).win==this.userChess?l.room_net_listener.sendToGameSvr(l.MsgId.GAMEOVER,{win_p_id:MGOBE.Player.id}):0==this.board.getComponent(u.PvpGameBoard).win&&l.room_net_listener.sendToGameSvr(l.MsgId.GAMEOVER,{win_p_id:""}))},t.prototype.renShu=function(e){var t=this;e==MGOBE.Player.id?(s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node,"\u5bf9\u624b\u8ba4\u8f93\u4e86\uff01"),this.scheduleOnce(function(){t.gameResult(e,[])},1)):this.gameResult(e,[])},t.prototype.gameResult=function(e,t){this.is_game_over||(this.board.getComponent(u.PvpGameBoard).removeListennner(),this.is_game_over=!0,this.stopTime(),this.stopTime_item3(),this.board.getComponent(u.PvpGameBoard).jueSha(t,e,this.showResult.bind(this,e)),this.scheduleOnce(function(){l.room_net_listener.leaveRoom()},1))},t.prototype.showResult=function(e){var t=cc.instantiate(this.pvpResultViewPrefab);t.parent=this.node;var a=this._selfName,n=this._dsName;""==e?(console.log("-------------\u5e73\u5c40!"),t.getComponent(d.default).init(a,n,0)):e==MGOBE.Player.id?(console.log("-------------\u8d62\u4e86"),t.getComponent(d.default).init(a,n,1)):(console.log("-------------\u8f93\u4e86"),t.getComponent(d.default).init(n,a,-1))},t.prototype.kaiChangDongHua=function(){this._startKaiCahngDongHua||(this._startKaiCahngDongHua=!0,console.log("--------------\u5f00\u573a\u52a8\u753b"),this.board.getComponent(u.PvpGameBoard).gameScene=this,s._pl_fun.getInstance().startCreateVideo(),this.node.getChildByName("btn_share").active=!1,this.qiPanRemoveListennner(),this.ds_headIcon.node.getComponent(cc.Button).interactable=!1,this.user_headIcon.node.getComponent(cc.Button).interactable=!1,s.conMager.getInstance().playAudioEff(s.KEY.audioName.kaiju),s.conMager.getInstance().getPoolNode(s.KEY.poolName.item2,this.node,{callBack:function(){}}))},t.prototype.startJiaBeiAction=function(e){if(void 0===e&&(e=10),!this.item3.active){this.item3.active=!0,this.node.getChildByName("item2")&&this.node.getChildByName("item2").destroy(),cc.find("Canvas/money_node").active=!0;var t=this.item3.getChildByName("Node");t.y=1500,s.conMager.getInstance().playAudioEff(s.KEY.audioName.showpanel),cc.tween(t).to(.3,{position:cc.v3(0,0)},{easing:"backOut"}).start(),this.startTime_item3(e)}},t.prototype.startTime_item3=function(e){void 0===e&&(e=10),this.count_time_itm3=10,this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label).string=this.count_time_itm3+"s"},t.prototype.updateTime_item3=function(e){if(this.item3.active){this.node.getChildByName("btn_share").active=!1,this.count_time_itm3=e;var t=this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label);t.string=this.count_time_itm3+"s",this.count_time_itm3<=5&&(t.node.color=cc.color(255,0,0)),this.count_time_itm3<=0&&(t.node.active=!1,s.conMager.getInstance().playAudioEff("nanbujiabei"),this.stopTime_item3())}else this.node.getChildByName("item2")&&(this.node.getChildByName("item2").destroy(),this.startJiaBeiAction(e))},t.prototype.stopTime_item3=function(){this.unschedule(this.updateTime_item3)},t.prototype.caixianshou=function(){this.node.getChildByName("mask").active=!1,this.node.getChildByName("user_name").opacity=255,this.node.getChildByName("ds_name").opacity=255,this.qiPanAddListenner(),this.board.getComponent(u.PvpGameBoard).init(this),this.qiPanRemoveListennner();var e=this.node.getChildByName("heizi"),t=this.node.getChildByName("baizi"),a=this.node.getChildByName("baizi_label"),n=this.node.getChildByName("heizi_label");console.log("--------------------global.plyingId:",c.default.plyingId),c.default.plyingId==MGOBE.Player.id?(this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.userChess=f.BLACKCHESS,s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"),t.setPosition(-270,368),e.setPosition(182,-380),a.setPosition(-225,372),n.setPosition(225,-376),console.log("------------\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b"),this.board.getComponent(u.PvpGameBoard).state=-1,this.startTime(this.board.getComponent(u.PvpGameBoard).state)):(this.userChess=f.WHITECHESS,s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!"),e.setPosition(-270,368),t.setPosition(182,-380),n.setPosition(-225,372),a.setPosition(225,-376),console.log("------------\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b"),this.board.getComponent(u.PvpGameBoard).state=1,this.startTime(-this.board.getComponent(u.PvpGameBoard).state)),e.active=!0,t.active=!0,a.active=!0,n.active=!0,this.node.getChildByName("setup").scale=1,this.node.getChildByName("btn_share").active=!1},t.prototype.updateGouYu=function(){var e=this;this.reward_gold=s.GameDataStorage.gameStateData.rewardmultiple*c.default.gameMoeny,c.default.room.roomInfo.playerList.forEach(function(t){"string"==typeof t.customProfile&&(t.customProfile=JSON.parse(t.customProfile)),t.customProfile.money<e.reward_gold&&(e.reward_gold=t.customProfile.money)}),this.gou_yu_num.string=this.reward_gold.toString(),this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",s.GameDataStorage.gameStateData.reward=this.reward_gold,console.log("-----------------\u52fe\u7389:",s.GameDataStorage.gameStateData.reward)},t.prototype.jiabeiAction=function(e,t){var a=this;this.jiaBeiRenShu++,this.updateGouYu();var n="",o=-380;if(2==this.jiaBeiRenShu&&c.default.room.roomInfo.owner==MGOBE.Player.id&&l.room_net_listener.sendToGameSvr(l.MsgId.KAISHI,{}),t!=MGOBE.Player.id)o=380,n=["nvbujiabei","nvjiabei","nvjiabei","nvchaojijiabei"][e-1];else{this.node.getChildByName("mask").active=!0,this.stopTime_item3(),this.multiple=1,n=["nanbujiabei","nanjiabei","nanbujiabei","nanchaojijiabei"][e-1];var i=this.item3.getChildByName("Node"),r=cc.callFunc(function(){a.item3.active=!1,cc.find("Canvas/money_node").active=!1,a.user_headIcon.node.getComponent(cc.Button).interactable=!0});cc.tween(i).sequence(cc.tween().to(.5,{position:cc.v3(0,1500)},{easing:"backIn"}),cc.delayTime(1),r).start()}s.conMager.getInstance().playAudioEff(n),s.conMager.getInstance().getPoolNode(s.KEY.poolName.jiabei,this.node,{pos:cc.v2(0,o),index:e})},t.prototype.jiabei_btn=function(e,t){if(s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),!(this.multiple>0)){var a=parseInt(t);l.room_net_listener.sendToGameSvr(l.MsgId.JIABEI,{num:a,player_id:MGOBE.Player.id})}},t.prototype.dsHeadIcon_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!0},t.prototype.userHeadIcon_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!0},t.prototype.biaoQing_btn=function(e,t){var a=this;this.hide_userPenl_btn();var n=parseInt(t);this.node.getChildByName("user_headIcon1").active=!1,this.scheduleOnce(function(){a.node.getChildByName("user_headIcon1").active=!0},2.2),l.room_net_listener.sendToGameSvr(l.MsgId.EXPRESSION,{index:n,player_id:MGOBE.Player.id})},t.prototype.showBiaoQing=function(e,t){var a=this;if(e==MGOBE.Player.id){var n=this.node.getChildByName("user_biaoqing");n.active=!0,n.children[t].active=!0;var o=this.node.getChildByName("user_duihua");this.count_down.y<0&&(this.count_down.opacity=0),o.active=!0,o.children[t].active=!0,s.conMager.getInstance().playAudioEff("nan/"+this.musicNames[t-1]),this.scheduleOnce(function(){n.active=!1,n.children[t].active=!1,a.count_down.opacity=255,o.active=!1,o.children[t].active=!1},2.2)}else this.ai_duihua(t)},t.prototype.ai_duihua=function(e){var t=this,a=this.node.getChildByName("ds_biaoqing"),n=this.node.getChildByName("ds_duihua");s.conMager.getInstance().playAudioEff("nv/"+this.musicNvNames[e-1]),n.active=!0,a.active=!0,a.children[e].active=!0,n.children[e].active=!0,this.count_down.y>0&&(this.count_down.opacity=0),this.scheduleOnce(function(){t.count_down.opacity=255,a.children[e].active=!1,n.children[e].active=!1,a.active=!1,n.active=!1},2.2)},t.prototype.hide_userPenl_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!1},t.prototype.hide_dsPenl_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!1},t.prototype.return_btn=function(){var e=this;console.log("------------------global.room:",c.default.room),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),1!=c.default.room.roomInfo.playerList.length?this.node.getChildByName("user_headIcon").getChildByName("self_diaoxian").active?(l.room_net_listener.leaveRoom(),c.default.room.initRoom(),this.node.destroy(),c.default.duanWang=!0,h.pvp_scene.initMatchView()):s.conMager.getInstance().getPoolNode(s.KEY.poolName.stop_panel,this.node,{callBack:function(t){2==t&&e.renshu()}}):c.default.room.roomInfo.owner==MGOBE.Player.id&&(l.room_net_listener.dismissRoom(),this.node.destroy(),h.pvp_scene.initMatchView())},t.prototype.luozizhong_action=function(e){e.active=!0,e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.getComponent(cc.Label).string=""}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50\u4e2d"}),cc.delayTime(.6))))},t.prototype.startTime=function(e){console.log("--------------\u5f00\u542f\u5012\u8ba1\u65f6"),e=c.default.plyingId==MGOBE.Player.id?this.board.getComponent(u.PvpGameBoard).state:-this.board.getComponent(u.PvpGameBoard).state,this.userGameTime=0,this.count_down.active=!0;var t=this.node.getChildByName("luozizhong");t.stopAllActions(),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+(30-this.userGameTime),this.userChess==e?(this.count_down.y=-440,t.setPosition(252,-376),this.quan.setPosition(0,-547)):(this.count_down.y=450,t.setPosition(-197,372),this.quan.setPosition(0,554)),t.color=-1==e?cc.color(51,51,51):cc.color(204,204,204),this.quan.getComponent(cc.Sprite).fillRange=1,this.luozizhong_action(t),this.count_down.getChildByName("time").color=cc.color(255,255,255),this.quan.active=!0,this.quan_judge=!0},t.prototype.updateTime=function(e){if(!this.is_game_over&&this.userGameTime!=e){if(this.node.getChildByName("heizi").active||this.caixianshou(),this.TimeDel||(this.userGameTime=e),this.node.getChildByName("user_name").opacity=255,this.node.getChildByName("ds_name").opacity=255,cc.find("Canvas/money_node").active=!1,this.userGameTime>this.max_gameTime){var t=MGOBE.Player.id;return c.default.plyingId!=MGOBE.Player.id&&(t=c.default.plyingId),void l.room_net_listener.sendToGameSvr(l.MsgId.GAMEOVER,{win_p_id:t})}var a=this.max_gameTime-this.userGameTime,n=a+"";a<10&&(n="0"+a),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+n,a<15&&(this.count_down.getChildByName("time").color=cc.color(255,0,0),s.conMager.getInstance().playAudioEff(s.KEY.audioName.shijian))}},t.prototype.stopTime=function(){this.count_down.active=!1,this.node.getChildByName("luozizhong").stopAllActions(),this.node.getChildByName("luozizhong").active=!1},t.prototype.renshu=function(){var e=MGOBE.Player.id==c.default.room.roomInfo.playerList[0].id?c.default.room.roomInfo.playerList[1].id:c.default.room.roomInfo.playerList[0].id;l.room_net_listener.sendToGameSvr(l.MsgId.RENSHU,{win_p_id:e})},t.prototype.pingju=function(){this.stopTime(),this.stopTime_item3(),s.GameDataStorage.gameStateData.who_sucess=2,s.conMager.getInstance().showWinNode(s.KEY.UIName.flat_view,this.node.parent,null)},t.prototype.shubiao=function(e){this.shubiao_node.active=e},t.prototype.update=function(e){this.is_game_over||this.quan_judge&&(1==Math.floor(e)&&console.log("1\u79d2\u8fc7\u53bb\u4e86"),this.quan.getComponent(cc.Sprite).fillRange-=1/(60*this.max_gameTime))},t.prototype.pvp_AS_panel_huiqi=function(){this.pvp_AS_panel=cc.instantiate(this.pvp_AS_panel_Prefab),this.pvp_AS_panel.parent=this.node,this.pvp_AS_panel.getComponent(p.default).init("user_huiqi",function(){},MGOBE.Player.id)},t.prototype.huiQiShenQing=function(e){e!=MGOBE.Player.id&&(this.pvp_AS_panel=cc.instantiate(this.pvp_AS_panel_Prefab),this.pvp_AS_panel.parent=this.node,this.pvp_AS_panel.getComponent(p.default).init("ds_huiqi",function(e){l.room_net_listener.sendToGameSvr(l.MsgId.HUIQIJIEGUO,e)},e))},t.prototype.huiQiJieGuo=function(e){var t=this;if(0!=this.board.getComponent(u.PvpGameBoard).maze[e[0].tx][e[0].ty]&&(console.log("---------------\u5f00\u59cb\u6094\u68cb:",e),!(e[0].tx>50))){var a=this.board.getComponent(u.PvpGameBoard).state;this.stopTime(),1==e.length?(this.lastPlayState=a,this.startTime(-a)):(this.lastPlayState=-a,this.startTime(a)),e.forEach(function(e){t.board.getComponent(u.PvpGameBoard).removeChessByBoard(e.tx,e.ty)}),this.hongDian.active=!1}},t.prototype.show_pvp_AS_panel=function(){this.pvp_AS_panel=cc.instantiate(this.pvp_AS_panel_Prefab),this.pvp_AS_panel.parent=this.node,this.pvp_AS_panel.getComponent(p.default).init("user_qiuhe",function(){},MGOBE.Player.id)},t.prototype.heQiShenQing=function(e){e!=MGOBE.Player.id&&(this.pvp_AS_panel=cc.instantiate(this.pvp_AS_panel_Prefab),this.pvp_AS_panel.parent=this.node,this.pvp_AS_panel.getComponent(p.default).init("ds_qiuhe",function(e){l.room_net_listener.sendToGameSvr(l.MsgId.HEQIJIEGUO,e)},e))},t.prototype.heQiJieGuo=function(e,t){var a=this;this._result>=0||(this._result=t,this.scheduleOnce(function(){a._result=-1},.5),e==MGOBE.Player.id||(1==t?(l.room_net_listener.sendToGameSvr(l.MsgId.GAMEOVER,{win_p_id:""}),s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node.parent,"\u5bf9\u65b9\u540c\u610f\u4e86\u60a8\u7684\u548c\u68cb\u7533\u8bf7!")):s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node.parent,"\u5bf9\u65b9\u62d2\u7edd\u4e86\u60a8\u7684\u548c\u68cb\u7533\u8bf7!")))},t.prototype.diaoxian=function(e){this.is_game_over||(e.active=!0,e.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeIn(.4)))),console.log("\u89e6\u53d1\u6389\u7ebf"))},t.prototype.shangxian=function(e){this.is_game_over||(e.stopAllActions(),e.active=!1,console.log("\u89e6\u53d1\u4e0a\u7ebf"))},t.prototype.shareToFrind=function(){window.tt&&tt.shareAppMessage({title:"\u4f60\u6562\u548c\u6211PK\u4e00\u5c40\u5417",desc:"\u5728\u4e94\u5b50\u68cb\u8fd9\u4e2a\u9886\u57df\uff0c\u6211\u6562\u8bf4\uff1a\u5728\u5ea7\u7684\u90fd\u662fLAJI\uff01",imageUrl:"https://itmastergame.com/wan-ning-wu-zi-qi/share1.jpg",query:"roomid="+c.default.room.roomInfo.id,success:function(){console.log("\u5206\u4eab\u6210\u529f")},fail:function(){console.log("\u5206\u4eab\u5931\u8d25")}})},t.prototype.copyRoomId=function(){window.tt?tt.setClipboardData({data:c.default.room.roomInfo.id,success:function(){s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,h.pvp_scene.node,"\u590d\u5236\u6210\u529f")},fail:function(){console.log("setClipboardData\u8c03\u7528\u5931\u8d25")}}):this.webCopyString(c.default.room.roomInfo.id)&&s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,h.pvp_scene.node,"\u590d\u5236\u6210\u529f")},t.prototype.webCopyString=function(e){console.log("\u590d\u5236");var t=e,a=document.createElement("textarea");a.value=t,a.setAttribute("readonly",""),a.style.contain="strict",a.style.position="absolute",a.style.left="-9999px",a.style.fontSize="12pt";var n,o=getSelection();o.rangeCount>0&&(n=o.getRangeAt(0)),document.body.appendChild(a),a.select(),a.selectionStart=0,a.selectionEnd=t.length;var i=!1;try{i=document.execCommand("copy")}catch(s){}return document.body.removeChild(a),n&&(o.removeAllRanges(),o.addRange(n)),i},i([b(cc.Node)],t.prototype,"board",void 0),i([b(cc.Prefab)],t.prototype,"whiteChess",void 0),i([b(cc.Prefab)],t.prototype,"blackChess",void 0),i([b(cc.Prefab)],t.prototype,"pvpResultViewPrefab",void 0),i([b(cc.Node)],t.prototype,"quan",void 0),i([b(cc.Prefab)],t.prototype,"chess",void 0),i([b(cc.Label)],t.prototype,"game_id",void 0),i([b(cc.Label)],t.prototype,"gou_yu_num",void 0),i([b(cc.Prefab)],t.prototype,"pvp_AS_panel_Prefab",void 0),i([b(cc.Node)],t.prototype,"hongDian",void 0),i([b(cc.Node)],t.prototype,"qipan",void 0),i([v],t)}(cc.Component);a.default=S,cc._RF.pop()},{"../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../../../game/common/item2":"item2","../../../game/wuziqi/Piece":"Piece","../../../utils/commonFunction":"commonFunction","../../../utils/platform":"platform","../PvpGameBoard":"PvpGameBoard","../global":"global","../roomNetListener":"roomNetListener","../scene/PvpScene":"PvpScene","./pvp_AS_panel":"pvp_AS_panel","./pvp_result_view":"pvp_result_view"}],pvp_level_view:[function(e,t,a){"use strict";cc._RF.push(t,"242c9ggF05Ki4ehRz8q49d7","pvp_level_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("../../../utils/as_util"),c=e("../../../utils/commonFunction"),h=e("../../../utils/getDataFromServer"),u=e("../../../utils/platform"),l=cc._decorator,d=l.ccclass,p=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callBack=null,t.gameType=0,t.jindutiao=null,t.judge=!1,t.isOne=!0,t.Node=null,t.is_sheng=!1,t.vector=.01,t.experience_vector=0,t.experience_count=0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){s.conMager.getInstance().playAudioEff("xingxing"),this.node.getChildByName("Node"),this.initData(),u.platform.now_platform!=u.platform_type.is_tt&&r.as_util.back_ui()},t.prototype.onClose=function(e){this.node.getChildByName("Node"),h.getDataFromServer.setUserData(s.GameDataStorage.getUser().userData,function(){});var t=s.GameDataStorage.gameStateData.gameType;5==t?s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_game_view):s.conMager.getInstance().hideWinNode(s.KEY.UIName.jd_game_view),2==e?s.GameDataStorage.getUser().userData.money>=s.GameDataStorage.gameStateData.admission_gold?this.scaleSmallHide(this.node,cc.v3(0,0),function(){var e=s.GameDataStorage.gameStateData.reward_gold;5==t?s.conMager.getInstance().showWinNode(s.KEY.UIName.luandou_game_view,null,{reward_gold:e,gameType:t}):s.conMager.getInstance().showWinNode(s.KEY.UIName.jd_game_view,null,{reward_gold:e,gameType:t}),s.conMager.getInstance().hideWinNode(s.KEY.UIName.level_view)}):s.conMager.getInstance().getPoolNode(s.KEY.poolName.gold_buzu_panel,null,null):1==e&&(s.conMager.getInstance().hideWinNode(s.KEY.UIName.level_view),5==t?s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,null,{gameType:t}):s.conMager.getInstance().showWinNode(s.KEY.UIName.slectGmae,null,{gameType:t}))},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.initData=function(){var e,t=s.GameDataStorage.getUser().userData.user_level,a=10*t,n=1/(e=t<8?a*(t+2):10*a),o=s.GameDataStorage.getUser().userData.level_experience*n;this.experience_vector=a*n,this.initUi(e),0==s.GameDataStorage.gameStateData.who_sucess?(console.log("\u5347"),this.experience_count=o+this.experience_vector):1==s.GameDataStorage.gameStateData.who_sucess&&(console.log("\u964d"),this.experience_count=o-this.experience_vector),this.experience_count>1&&(this.experience_count=1)},t.prototype.initUi=function(e){var t=this,a=this.node.getChildByName("Node");this.Node=a;var n=a.getChildByName("jinyan_num").getComponent(cc.RichText);this.jindutiao=a.getChildByName("jindutiao").getComponent(cc.Sprite);var o=a.getChildByName("kuang"),i=o.getChildByName("zi"),r=o.getChildByName("level"),h=s.GameDataStorage.getUser().userData.user_level,u=s.GameDataStorage.getUser().userData.level_experience,l=Math.floor(h/9);h%9==0&&(l-=1),l>2&&(l=2);var d=["yeyu","qishi","dashi"][l],p=h-9*l,g="level_icon/";this.is_sheng||(c.commonFunction.updateSprite(g+d,o),c.commonFunction.updateSprite(g+d+"2",i),c.commonFunction.updateSprite(g+d+"/"+p,r));var _=10*h,m=u*(1/e);console.log("\u6a94\u671f\u90a3\u52c7\u6562\u548c\u554a:",m,l,d),this.jindutiao.fillRange=m,this.isOne&&(this.isOne=!1,0==s.GameDataStorage.gameStateData.who_sucess?(u+=_,a.getChildByName("sj").active=!0):1==s.GameDataStorage.gameStateData.who_sucess?(u-=_)<=0&&1==h&&(u=0):2==s.GameDataStorage.gameStateData.who_sucess&&(this.Node.getChildByName("jindutiao_bg").runAction(cc.fadeIn(.2)),this.Node.getChildByName("jindutiao").runAction(cc.fadeIn(.2)),this.action()),s.GameDataStorage.getUser().userData.level_experience=u,this.scheduleOnce(function(){t.judge=!0,0==s.GameDataStorage.gameStateData.who_sucess&&s.conMager.getInstance().playAudioEff(s.KEY.audioName.zhangjinyang)},1)),n.string="<color=#FBD10A>"+u+"/</c><color=#FFFFFF>"+e+"</color>",s.GameDataStorage.preserveGameData(),o.scale=0,s.conMager.getInstance().playAudioEff("tiao"),o.runAction(cc.sequence(cc.scaleTo(.35,1.4),cc.scaleTo(.15,1),cc.callFunc(function(){t.Node.getChildByName("jindutiao_bg").runAction(cc.fadeIn(.2)),t.Node.getChildByName("jindutiao").runAction(cc.fadeIn(.2)),t.is_sheng&&(t.is_sheng=!1,s.GameDataStorage.getUser().userData.user_level>9&&s.GameDataStorage.getUser().userData.user_level<19?o.getChildByName("shengduan").active=!0:o.getChildByName("hj").active=!0,t.scheduleOnce(function(){t.is_sheng||(c.commonFunction.updateSprite(g+d,o),c.commonFunction.updateSprite(g+d+"2",i),c.commonFunction.updateSprite(g+d+"/"+p,r))}))})))},t.prototype.restart_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(2)},t.prototype.return_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1)},t.prototype.action=function(){this.Node.getChildByName("jinyan").runAction(cc.fadeIn(.2)),this.Node.getChildByName("jinyan_num").runAction(cc.fadeIn(.2)),this.moveShow(this.Node.getChildByName("btn_restart"),cc.v3(0,-320),null)},t.prototype.shengduan=function(){this.jindutiao.fillRange=0,s.GameDataStorage.getUser().userData.user_level+=1,this.is_sheng=!0,s.GameDataStorage.getUser().userData.level_experience=0,s.GameDataStorage.preserveGameData(),this.initData()},t.prototype.dieduan=function(){if(1!=s.GameDataStorage.getUser().userData.user_level){s.GameDataStorage.getUser().userData.user_level-=1;var e=s.GameDataStorage.getUser().userData.user_level;this.isOne=!0;var t,a=10*e;t=e<8?a*(e+2):10*a,s.GameDataStorage.getUser().userData.level_experience=t,s.GameDataStorage.preserveGameData(),this.initData()}},t.prototype.update=function(){this.judge&&(0==s.GameDataStorage.gameStateData.who_sucess?(this.jindutiao.fillRange+=this.vector,this.jindutiao.fillRange>=this.experience_count&&(this.judge=!1,this.action(),this.jindutiao.fillRange=this.experience_count,this.jindutiao.fillRange>=1&&(console.log("\u5347\u6bb5"),this.shengduan()))):1==s.GameDataStorage.gameStateData.who_sucess&&(this.jindutiao.fillRange-=this.vector,this.jindutiao.fillRange<=this.experience_count&&(this.judge=!1,this.action(),this.jindutiao.fillRange=this.experience_count,this.experience_count<0&&(console.log("\u8dcc\u6bb5"),this.dieduan()))))},i([d],t)}(s.winRootNode));a.default=p,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../../../utils/as_util":"as_util","../../../utils/commonFunction":"commonFunction","../../../utils/getDataFromServer":"getDataFromServer","../../../utils/platform":"platform"}],pvp_result_view:[function(e,t,a){"use strict";cc._RF.push(t,"96782x9OQpKq4y21PA9G3J3","pvp_result_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("../../../utils/platform"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleAction=void 0,t.shipin_icon=null,t.shipin_icon_spriteframe=null,t._win=0,t.callBack=null,t.gameType=0,t.judgeVideo=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){throw new Error("Method not implemented.")},t.prototype.init=function(e,t,a){this.node.zIndex=9999,cc.find("Canvas/money_node").active=!0,s._pl_fun.getInstance().stopCreateVideo();var n=this.node.getChildByName("Node");this.scaleBigShow(n,cc.v3(0,0),null),this.titleAction.setToSetupPose(),this._win=a,1==a?(s.conMager.getInstance().playAudioEff(s.KEY.audioName.shengli),n.getChildByName("shengli").active=!0,n.getChildByName("shibaipingju").active=!1,this.titleAction.setAnimation(0,"hong",!0)):-1==a?(s.conMager.getInstance().playAudioEff("\u9519\u8bef"),n.getChildByName("shengli").active=!1,n.getChildByName("shibaipingju").active=!0,this.titleAction.setAnimation(0,"hui",!0),s.conMager.getInstance()._msgAtion.emit("updateMoney",-s.GameDataStorage.gameStateData.reward)):(s.GameDataStorage.gameStateData.reward=0,s.conMager.getInstance().playAudioEff("\u7ffb\u724c"),n.getChildByName("shengli").active=!1,n.getChildByName("shibaipingju").active=!0,this.titleAction.setAnimation(0,"lv",!0)),this.initData(n,e,t,s.GameDataStorage.gameStateData.reward);var o=n.getChildByName("jibeikuang");if(s.GameDataStorage.gameStateData.rewardmultiple>=2?(o.getChildByName("text").getComponent(cc.Label).string=s.GameDataStorage.gameStateData.rewardmultiple+"\u500d",o.active=!0):o.active=!1,r.platform.now_platform!=r.platform_type.is_tt){var i=n.getChildByName("shibaipingju").getChildByName("btn_share");i&&(i.active=!1),n.getChildByName("shibaipingju").getChildByName("btn_next").x=0,n.getChildByName("shengli").getChildByName("btn_putong").active=!1,n.getChildByName("shengli").getChildByName("btn_putong2").active=!0;var c=n.getChildByName("shengli").getChildByName("btn_doublelingqu");c.x=0,c.getChildByName("block").active=!0,this.shipin_icon.spriteFrame=this.shipin_icon_spriteframe}},t.prototype.scaleBigShow=function(e,t,a){e.scale=.5,e.opacity=0,e.setScale(0),e.stopAllActions(),e.runAction(cc.sequence(cc.spawn(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.1,1)),cc.fadeIn(.2)),cc.callFunc(function(){a&&a()})))},t.prototype.onClose=function(){var e=this,t=this.node.getChildByName("Node");this.scaleSmallHide(t,cc.v3(0,0),function(){1==e._win?(s.GameDataStorage.gameStateData.who_sucess=0,s.conMager.getInstance().showWinNode(s.KEY.UIName.share_view,cc.find("Canvas"),null)):-1==e._win?(s.GameDataStorage.gameStateData.who_sucess=1,s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,cc.find("Canvas"),null)):(s.GameDataStorage.gameStateData.who_sucess=2,s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,cc.find("Canvas"),null)),e.node.destroy()})},t.prototype.scaleSmallHide=function(e,t,a){e.stopAllActions(),e.runAction(cc.sequence(cc.spawn(cc.sequence(cc.scaleTo(.1,1.1),cc.scaleTo(.2,0)),cc.fadeOut(.2)),cc.callFunc(function(){a&&a()})))},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.initData=function(e,t,a,n){var o=e.getChildByName("y_name").getComponent(cc.Label),i=e.getChildByName("s_name").getComponent(cc.Label),s=e.getChildByName("y_money").getComponent(cc.Label),r=e.getChildByName("s_money").getComponent(cc.Label);o.string=t,i.string=a,s.string="+"+n,r.string="-"+n},t.prototype.share_btn=function(){var e=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),s._pl_fun.getInstance().onShareVideo(function(t){t&&(e.onClose(2),s._pl_fun.getInstance().add_reportAnalytics("event_FenXiangSuccessNumbers"))})},t.prototype.next_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.judgeVideo||(this.judgeVideo=!0,this.onClose(2))},t.prototype.doubellinqu_btn=function(){var e=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.judgeVideo||(this.judgeVideo=!0,r.platform.now_platform!=r.platform_type.is_tt?s._pl_fun.getInstance().showAdVideo(function(t){if(e.judgeVideo=!1,t){s._pl_fun.getInstance().add_reportAnalytics("event_FenXiangSuccessNumbers"),e.judgeVideo=!0,s.GameDataStorage.gameStateData.reward*=2;var a=s.GameDataStorage.gameStateData.reward;s.conMager.getInstance()._msgAtion.emit("updateMedalCount",a,cc.v3(0,0)),e.scheduleOnce(function(){e.onClose(2)},1)}}):s._pl_fun.getInstance().onShareVideo(function(t){if(e.judgeVideo=!1,t){s._pl_fun.getInstance().add_reportAnalytics("event_FenXiangSuccessNumbers"),e.judgeVideo=!0,s.GameDataStorage.gameStateData.reward*=2;var a=s.GameDataStorage.gameStateData.reward;s.conMager.getInstance()._msgAtion.emit("updateMedalCount",a,cc.v3(0,0)),e.scheduleOnce(function(){e.onClose(2)},1)}}))},t.prototype.win_next_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var e=s.GameDataStorage.gameStateData.reward;s.conMager.getInstance()._msgAtion.emit("updateMedalCount",e,cc.v3(0,0)),this.onClose(2)},i([u(sp.Skeleton)],t.prototype,"titleAction",void 0),i([u(cc.Sprite)],t.prototype,"shipin_icon",void 0),i([u(cc.SpriteFrame)],t.prototype,"shipin_icon_spriteframe",void 0),i([h],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../../../utils/platform":"platform"}],pvp_sdk_init:[function(e,t,a){"use strict";cc._RF.push(t,"52899XdkihIErOuDnnG6X2d","pvp_sdk_init");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("../config"),c=e("../global"),h=e("./../util"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initSDK=function(){if(h.isInited())return c.default.duanWang&&MGOBE.Room.getMyRoom(function(e){return 0===e.code?(c.default.room.initRoom(e.data.roomInfo),console.log("\u73a9\u5bb6\u5df2\u5728\u623f\u95f4\u5185\uff1a",e.data)):20011===e.code?console.log("\u73a9\u5bb6\u4e0d\u5728\u623f\u95f4\u5185"):console.log("\u8c03\u7528\u5931\u8d25:",e.code)}),c.default.duanWang=!1,h.showLog("SDK \u5df2\u7ecf\u521d\u59cb\u5316\uff0c\u65e0\u9700\u91cd\u590d\u64cd\u4f5c");h.showLog("\u6b63\u5728\u521d\u59cb\u5316 sdk"),h.initSDK(r.default.gameId,r.default.secretKey,r.default.url,"",function(e){e.code===MGOBE.ErrCode.EC_OK?(h.showLog("sdk \u521d\u59cb\u5316\u6210\u529f"),c.default.sdkInitFinsh=!0,""!=s.GameDataStorage.gameStateData.room_id&&(s.GameDataStorage.gameStateData.room_id="")):(c.default.sdkInitFinsh=!1,console.log("sdk \u521d\u59cb\u5316\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a",e.code))})},i([l],t)}(cc.Component));a.default=d,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../config":"config","../global":"global","./../util":"util"}],pvp_setup:[function(e,t,a){"use strict";cc._RF.push(t,"07eb7HywLNA1pNkQGFwFDkX","pvp_setup");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zhankai=null,t.huishou=null,t.time=60,t.heqi_judge=!0,t.huiqi_num=3,t.heqi_num=3,t.huiqi_judge=!0,t.open_judge=!0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){},t.prototype.onClose=function(){},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){s.conMager.getInstance()._msgAtion.on("openHuiqi",this.openHuiqi,this),s.conMager.getInstance()._msgAtion.on("closeHuiqi",this.closeHuiqi,this),s.conMager.getInstance()._msgAtion.on("closeAllSetBtn",this.closeAllSetBtn,this),s.conMager.getInstance()._msgAtion.on("closeSet",this.closeSet,this),s.conMager.getInstance()._msgAtion.on("openSet",this.openSet,this),s.conMager.getInstance()._msgAtion.on("quedingheqi",this.closeHeqi,this),s.conMager.getInstance()._msgAtion.on("quedinghuiqi",this.closeHuiqi,this),s.conMager.getInstance()._msgAtion.on("buNengHuiqi",this.buNengHuiqi,this)},t.prototype.closeSet=function(){this.zhankai.getComponent(cc.Button).interactable=!1},t.prototype.openSet=function(){this.zhankai.getComponent(cc.Button).interactable=!0},t.prototype.init_ui=function(){},t.prototype.start=function(){},t.prototype.closeAllSetBtn=function(){var e=this.huishou.getChildByName("huiqi"),t=this.huishou.getChildByName("qiuhe"),a=this.huishou.getChildByName("renshu"),n=this.huishou.getChildByName("shubiao");e.getComponent(cc.Button).interactable=!1,t.getComponent(cc.Button).interactable=!1,a.getComponent(cc.Button).interactable=!1,n.getComponent(cc.Button).interactable=!1},t.prototype.open_btn=function(){var e=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.open_judge?cc.tween(this.huishou).to(.35,{scale:1.1,opacity:255},{easing:"backOut"}).call(function(){e.node.getChildByName("mask").active=!0,e.open_judge=!1}).start():this.close_btn()},t.prototype.close_btn=function(){var e=this;console.log("\u54c8\u54c8\u54c8\u54c8\u54c8\u54c8\u54c8\u53d6\u6d88\u55ae\u6a5f111111111"),cc.tween(this.huishou).to(.35,{scale:0,opacity:0},{easing:"backIn"}).call(function(){e.node.getChildByName("mask").active=!1,e.open_judge=!0}).start()},t.prototype.huiqi_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.huiqi_num<=0||(s.conMager.getInstance()._msgAtion.emit("pvp_AS_panel_huiqi"),this.close_btn())},t.prototype.renshu_btn=function(){this.close_btn(),s.conMager.getInstance()._msgAtion.emit("renshu")},t.prototype.qiuhe_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.heqi_num<=0||(this.heqi_judge?(this.close_btn(),s.conMager.getInstance()._msgAtion.emit("pvp_AS_panel")):s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node,this.time+"\u79d2\u540e\u624d\u80fd\u518d\u6b21\u6c42\u548c"))},t.prototype.shubiao_btn=function(e){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var t=!0,a=e.target.getChildByName("gou");a.active&&(t=!1),a.active=t,s.conMager.getInstance()._msgAtion.emit("shubiao",t)},t.prototype.openHuiqi=function(){var e=this.huishou.getChildByName("huiqi");this.huiqi_num<=0||(e.getComponent(cc.Button).interactable=!0,e.color=cc.color(255,255,255),e.getChildByName("cha").active=!1)},t.prototype.closeHuiqi=function(){this.huiqi_num-=1,this.huishou.getChildByName("huiqi").getChildByName("num").getComponent(cc.Label).string=this.huiqi_num+"",this.buNengHuiqi()},t.prototype.buNengHuiqi=function(){var e=this.huishou.getChildByName("huiqi");e.getComponent(cc.Button).interactable=!1,e.getChildByName("cha").active=!0},t.prototype.openHeqi=function(){this.time=60,this.heqi_judge=!0;var e=this.huishou.getChildByName("qiuhe");e.color=cc.color(255,255,255),e.getChildByName("cha").active=!1},t.prototype.closeHeqi=function(){this.heqi_judge=!1,this.heqi_num-=1;var e=this.huishou.getChildByName("qiuhe");e.getChildByName("num").getComponent(cc.Label).string=this.heqi_num+"",e.getChildByName("cha").active=!0,this.heqi_num>0?this.startTime():e.getComponent(cc.Button).interactable=!1},t.prototype.startTime=function(){this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){this.time-=1,console.log("heqinun"),this.time<=0&&this.heqi_num>0&&this.openHeqi()},t.prototype.stopTime=function(){this.unschedule(this.updateTime)},i([h(cc.Node)],t.prototype,"zhankai",void 0),i([h(cc.Node)],t.prototype,"huishou",void 0),i([c],t)}(s.winRootNode);a.default=u,cc._RF.pop()},{"../../../../SSSGF/ssscgf":"ssscgf"}],pvp_util:[function(e,t,a){(function(n){"use strict";cc._RF.push(t,"33a5cTBfq1FyLeE4DB/iEKf","pvp_util"),Object.defineProperty(a,"__esModule",{value:!0}),a.pvp_util=void 0;var o=e("../../../pvp/script/config"),i=e("../../../pvp/script/logic/FrameSyncLogic"),s=e("../../../SSSGF/ssscgf"),r=function(){function e(){this.pvp_game=!1,this._isInRoom=!1,this.in_game_callback=null}return Object.defineProperty(e,"Instance",{get:function(){return this._instace||(this._instace=new e),this._instace},enumerable:!1,configurable:!0}),e.prototype.initSDK=function(e,t,a,i,s){var r=this;if(this.isInited())return s&&s({code:MGOBE.ErrCode.EC_OK});if(cc.sys.isNative&&!window.cacertNativeUrl)console.log("\u52a0\u8f7d\u8bc1\u4e66"),cc.resources.load("cacert",cc.Asset,function(c,h){if(c)console.log("\u8054\u7f51\u8bc1\u4e66\u52a0\u8f7d\u5931\u8d25 err:"+c);else{window.cacertNativeUrl=h.nativeUrl,i=window.cacertNativeUrl,console.log("\u52a0\u8f7d\u8bc1\u4e66\u6210\u529f1 \u8def\u5f84:"+window.cacertNativeUrl);var u={gameId:o.default.gameId,openId:o.default.openId,secretKey:o.default.secretKey},l={url:o.default.url,isAutoRequestFrame:!0,cacertNativeUrl:window.cacertNativeUrl};Object.assign(u,{gameId:e,secretKey:t}),Object.assign(l,{url:a,cacertNativeUrl:i}),MGOBE.DebuggerLog.enable=!1,cc.sys.isNative&&(MGOBE.DebuggerLog.enable=!1),MGOBE.Listener.init(u,l,function(e){e.code===MGOBE.ErrCode.EC_OK&&(n.room=new MGOBE.Room,n.gameId=u.gameId,MGOBE.Listener.add(n.room),r.setBroadcastCallbacks(n.room,null,{})),s&&s({code:e.code})})}});else{var c={gameId:o.default.gameId,openId:o.default.openId,secretKey:o.default.secretKey},h={url:o.default.url,isAutoRequestFrame:!0,cacertNativeUrl:window.cacertNativeUrl?window.cacertNativeUrl:""};cc.sys.isNative&&(i=window.cacertNativeUrl),Object.assign(c,{gameId:e,secretKey:t}),Object.assign(h,{url:a,cacertNativeUrl:i}),MGOBE.DebuggerLog.enable=!1,cc.sys.isNative&&(MGOBE.DebuggerLog.enable=!1),MGOBE.Listener.init(c,h,function(e){e.code===MGOBE.ErrCode.EC_OK&&(n.room=new MGOBE.Room,n.gameId=c.gameId,MGOBE.Listener.add(n.room),r.setBroadcastCallbacks(n.room,null,{})),s&&s({code:e.code})})}},e.prototype.isInited=function(){return!!MGOBE.Player&&!!MGOBE.Player.id},e.prototype.setBroadcastCallbacks=function(e,t,a){if(e){var n={onJoinRoom:function(){return function(){return null}},onLeaveRoom:function(){return function(){return null}},onChangeRoom:function(){return function(){return null}},onDismissRoom:function(){return function(){return null}},onStartFrameSync:function(){return function(){return null}},onStopFrameSync:function(){return function(){return null}},onRecvFrame:function(e){i.calcFrame(e.data.frame)},onChangeCustomPlayerStatus:function(){return function(){return null}},onRemovePlayer:function(){return function(){return null}},onRecvFromClient:function(){return function(){return null}},onRecvFromGameSvr:function(){return function(){return null}},onAutoRequestFrameError:function(){return function(){return null}}};Object.keys(n).forEach(function(o){var i=a[o]?a[o].bind(t):n[o];e[o]=i})}},e.prototype.judge_in_room=function(e){var t=this;this.in_game_callback=e,n.sdkInitFinsh||(this.in_game_callback=e),MGOBE.Room.getMyRoom(function(e){return 0===e.code?(t._isInRoom=!0,console.log("\u73a9\u5bb6\u5df2\u5728\u623f\u95f4\u5185\uff1a",e.data)):(t._isInRoom=!1,20011===e.code?console.log("\u73a9\u5bb6\u4e0d\u5728\u623f\u95f4\u5185"):console.log("\u8c03\u7528\u5931\u8d25:",e.code))})},e.prototype.in_game=function(e){var t=this;if(console.log("\u6b63\u5728\u968f\u673a\u5339\u914d\uff0c\u5339\u914dCode\uff1amatch-rjeybcqi\u3002\u8bf7\u7a0d\u7b49\uff0c10 \u79d2\u540e\u5339\u914dai\u3002"),this._isInRoom)this.isMatchingCancle();else{var a=s.GameDataStorage.getUser().userData,o={username:a.gameName,headIconUrl:a.headIconUrl,openId:a.openId,user_level:a.user_level,money:a.money,jiaBei:1,lastPlayX:100,lastPlayY:100,playState:0,jd_score:a.jd_score,dz_score:a.dz_score,lz_score:a.lz_score,sr_score:a.sr_score,isMatchGame:!0,gameType:s.GameDataStorage.gameStateData.gameType,mode:s.GameDataStorage.gameStateData.game_mode},i={matchCode:"match-rjeybcqi",playerInfo:{name:a.gameName,customPlayerStatus:0,customProfile:JSON.stringify(o),matchAttributes:[]}};n.isMatching=!0,n.room.initRoom(),n.room.matchPlayers(i,function(a){n.isMatching=!1,a.code===MGOBE.ErrCode.EC_OK?(console.log("\u968f\u673a\u5339\u914d\u6210\u529f\uff0c\u623f\u95f4ID\uff1a"+a.data.roomInfo.id),t.loadRoomScene()):a.code===MGOBE.ErrCode.EC_ROOM_PLAYER_ALREADY_IN_ROOM?n.room.leaveRoom({},function(e){e.code===MGOBE.ErrCode.EC_OK?console.log("\u9000\u51fa\u623f\u95f4\u6210\u529f"):console.log("\u9000\u51fa\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+e.code)}):(console.log("\u968f\u673a\u5339\u914d\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+a.code),t.onBtnCancleMatch(),e())})}},e.prototype.loadRoomScene=function(){console.log("\u8df3\u8f6c\u6e38\u620f\u623f\u95f4!"),this.in_game_callback()},e.prototype.isMatchingCancle=function(){n.sdkInitFinsh&&(this.onBtnCancleMatch(),this.in_game_callback&&this.in_game_callback())},e.prototype.onBtnCancleMatch=function(){var e={matchType:MGOBE.types.MatchType.PLAYER_COMPLEX};n.room.cancelPlayerMatch(e,function(e){e.code===MGOBE.ErrCode.EC_OK?console.log("\u53d6\u6d88\u5339\u914d\u6210\u529f"):console.log("\u53d6\u6d88\u5339\u914d\u5931\u8d25",e.data)})},e}();a.pvp_util=r.Instance,cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../SSSGF/ssscgf":"ssscgf","../../../pvp/script/config":"config","../../../pvp/script/logic/FrameSyncLogic":"FrameSyncLogic"}],qiandao_panel:[function(e,t,a){"use strict";cc._RF.push(t,"58984iirFtDDrmyC9vH3i1t","qiandao_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../uiConScripts/UIAction"),c=e("../../utils/getDataFromServer"),h=cc._decorator,u=h.ccclass,l=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.count=[300,900,1200,1500,2100,2400,3e3],t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){this.node.active=!0;var e=this.node.getChildByName("Node");this.scaleBigShow(e,cc.v3(0,0),null),s.conMager.getInstance().playAudioEff(s.KEY.audioName.showpanel),this.initUi()},t.prototype.onClose=function(){var e=this,t=this.node.getChildByName("Node");this.scaleSmallHide(t,cc.v3(0,0),function(){e.unscheduleAllCallbacks(),s.conMager.getInstance().putPoolNode(e.node.name,e.node)})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.initUi=function(){for(var e=this.node.getChildByName("Node"),t=1;t<8;t++){var a=e.getChildByName("qian_"+t),n=new cc.Component.EventHandler;n.target=this.node,n.component=this.node.name,n.handler="qiandao_btn",n.customEventData=t-1+"",a.getComponent(cc.Button).clickEvents.push(n),a.getComponent(cc.Button).interactable=!0,t-1<s.GameDataStorage.getUser().userData.qianDaoNum&&(a.getChildByName("gou").active=!0)}var o=new Date((new Date).toLocaleDateString()).getTime();if(o=Math.floor(o/864e5),s.GameDataStorage.getUser().userData.TimeStamp<o){var i=s.GameDataStorage.getUser().userData.qianDaoNum+1,c=e.getChildByName("qian_"+i);c.getChildByName("dangtian").active=!0;var h=c.getChildByName("guang");h.active=!0,h.getComponent(r.default).startCycleAction(4)}},t.prototype.qiandao_btn=function(e,t){var a=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var n=parseInt(t);if(e.target.getComponent(cc.Button).interactable=!1,this.scheduleOnce(function(){e.target.getComponent(cc.Button).interactable=!0},1),n==s.GameDataStorage.getUser().userData.qianDaoNum){var o=new Date((new Date).toLocaleDateString()).getTime();o=Math.floor(o/864e5),s.GameDataStorage.getUser().userData.TimeStamp<o?(s._pl_fun.getInstance().add_reportAnalytics("event_QianDaoLingQuNumbers"),s.GameDataStorage.getUser().userData.isQianDao=!0,s.GameDataStorage.preserveGameData(),e.target.getChildByName("gou").active=!0,e.target.getChildByName("dangtian").active=!1,s.GameDataStorage.getUser().userData.qianDaoNum+=1,s.GameDataStorage.getUser().userData.qianDaoNum>=7&&(s.GameDataStorage.getUser().userData.qianDaoNum=0),s.GameDataStorage.getUser().userData.TimeStamp=o,e.target.getChildByName("dangtian").active=!0,e.target.getChildByName("guang").active=!1,s.GameDataStorage.preserveGameData(),s.conMager.getInstance()._msgAtion.emit("updateMedalCount",this.count[n],cc.v3(0,0)),c.getDataFromServer.setUserData(s.GameDataStorage.getUser().userData,function(e){e?console.log("\u6570\u636e\u5b58\u50a8\u6210\u529f!"):console.log("\u6570\u636e\u5b58\u50a8\u5931\u8d25!")}),this.scheduleOnce(function(){a.onClose(1)},1.5)):s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,cc.find("Canvas"),"\u660e\u5929\u518d\u6765\u7b7e\u5230\u5427!")}else n<s.GameDataStorage.getUser().userData.qianDaoNum?s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,cc.find("Canvas"),"\u5df2\u7ecf\u7b7e\u5230\u8fc7\u54af!"):s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,cc.find("Canvas"),"\u660e\u5929\u518d\u6765\u7b7e\u5230\u5427!")},t.prototype.quxiao_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),s._pl_fun.getInstance().add_reportAnalytics("event_ClickButtonCloseQianDao"),this.onClose(1)},i([u],t)}(s.winRootNode));a.default=l,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../uiConScripts/UIAction":"UIAction","../../utils/getDataFromServer":"getDataFromServer"}],qixing_luozi:[function(e,t,a){"use strict";cc._RF.push(t,"88922ko0SFHU65BbHl4Gt5a","qixing_luozi");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/baesConScripts/winRootNode"),r=e("../../../SSSGF/conMagers/conMager"),c=cc._decorator,h=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){var e=this,t=this.node.getComponent(sp.Skeleton);t.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.REALTIME),t.setAnimation(0,"animation",!1),t.setCompleteListener(function(){e.onClose(1)})},t.prototype.onClose=function(){r.default.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.start=function(){},i([h],t)}(s.default));a.default=u,cc._RF.pop()},{"../../../SSSGF/baesConScripts/winRootNode":"winRootNode","../../../SSSGF/conMagers/conMager":"conMager"}],qixing_touch:[function(e,t,a){"use strict";cc._RF.push(t,"b385edx6A5InJSFismfZZ3f","qixing_touch");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(e){e[0](this.node)},t.prototype.onClose=function(){},t.prototype.onClear=function(){},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../../../../SSSGF/ssscgf":"ssscgf"}],qixing_zhezhao:[function(e,t,a){"use strict";cc._RF.push(t,"e069fj/FhFCoJagllSMx0T7","qixing_zhezhao");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/baesConScripts/winRootNode"),r=e("../../../SSSGF/conMagers/conMager"),c=e("../../../SSSGF/ssscgf"),h=e("../../../utils/commonFunction"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time_label=null,t.number=null,t.bg=null,t.lianji=null,t.time=0,t.srcCom=null,t.qixing_lianji=0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;this.node.opacity=0,this.node.runAction(cc.fadeIn(.3)),this.time=e[0].time,this.qixing_lianji=0,this.number.string="0";var a=c.GameDataStorage.getUser().userData.skinBoard+1;h.commonFunction.updateSprite("dazhao/qixing/qipan"+a,this.bg),r.default.getInstance()._msgAtion.on("update_qixinglianji",function(){t.lianji.stopAllActions(),t.qixing_lianji+=1,t.lianji.active=!0,t.number.string=t.qixing_lianji+"",t.lianji.opacity=255,t.lianji.runAction(cc.fadeOut(.3))},this),this.qixingStartTime()},t.prototype.onClose=function(){var e=this;this.node.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){e.qixing_lianji=0,r.default.getInstance()._msgAtion.off("update_qixinglianji"),r.default.getInstance().putPoolNode(e.node.name,e.node)})))},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.qixingStartTime=function(){this.schedule(this.qixingUpdateTime,.1)},t.prototype.qixingUpdateTime=function(){this.time-=.1,this.time<=0&&(this.time=0,this.qixingStopTime(),this.onClose(1));var e=Math.floor(10*this.time)/10;this.time_label.string=e+"s"},t.prototype.qixingStopTime=function(){this.unschedule(this.qixingUpdateTime)},t.prototype.start=function(){},i([d(cc.Label)],t.prototype,"time_label",void 0),i([d(cc.Label)],t.prototype,"number",void 0),i([d(cc.Node)],t.prototype,"bg",void 0),i([d(cc.Node)],t.prototype,"lianji",void 0),i([l],t)}(s.default);a.default=p,cc._RF.pop()},{"../../../SSSGF/baesConScripts/winRootNode":"winRootNode","../../../SSSGF/conMagers/conMager":"conMager","../../../SSSGF/ssscgf":"ssscgf","../../../utils/commonFunction":"commonFunction"}],qixing:[function(e,t,a){"use strict";cc._RF.push(t,"f404e8XDJVOY6ShP3fWSq6k","qixing");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/ssscgf"),r=e("../class_manager"),c=e("../game_manager"),h=e("../new_chess"),u=e("../zhenfa_joiner"),l=cc._decorator,d=l.ccclass,p=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_number_max=1,t.use_number=0,t.qixingTime=0,t.jishi=0,t.qixing_bool=!1,t.qixing_board=null,t.pad=22,t.block=46,t}return o(t,e),t.prototype.use_zhenfa=function(e){if(e!=this.my_player){var t=this.judge_active();if(0==t&&0==(t=this.judge_number()))return this.show_qixing(),!1}return!0},t.prototype.use_zhenfa_finish=function(){return!0},t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.board=e},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(){return!0},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return this.use_number=0,!0},t.prototype.one_win=function(){return!0},t.prototype.show_qixing=function(){var e=this;this.use_number++;var t=!1;this.my_player.cos==r.joiner_enum.player?(t=!0,s.conMager.getInstance().playAudioEff("nan/nanqixing")):s.conMager.getInstance().playAudioEff("nv/nvqixing"),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.board.ui_parent,{fileName:"qixing",ani_name:"animation",cb:function(){e.qixing_bool=!0,e.judge_player()},is_user:t})},t.prototype.judge_player=function(){var e=this;switch(this.qixingTime=.5+.1*this.data.level,s.conMager.getInstance().getPoolNode(s.KEY.poolName.qixing_zhezhao,this.board.down_effect2,{time:this.qixingTime}),console.log("\u4e03\u661f\u65f6\u95f4",this.qixingTime),this.scheduleOnce(function(){console.log("\u542c\u4e86\u5417"),e.stop_qixing()},this.qixingTime),this.my_player.cos){case r.joiner_enum.player:this.player_qixing();break;case r.joiner_enum.ai:this.ai_qixing()}},t.prototype.ai_qixing=function(){this.schedule(this.ai_play_chess.bind(this),.1)},t.prototype.ai_play_chess=function(){for(var e=[],t=0;t<this.chess_array.length;t++)for(var a=0;a<this.chess_array[t].length;a++)null!=this.chess_array[t][a].kunlong_player&&this.chess_array[t][a].kunlong_player!=this.my_player||!(0==this.chess_array[t][a].chaoniu_player||1==this.chess_array[t][a].chaoniu_player&&(this.my_player.zhenfa_array[0]&&"chaoniu"==this.my_player.zhenfa_array[0].data.name||this.my_player.zhenfa_array[1]&&"chaoniu"==this.my_player.zhenfa_array[1].data.name))||e.push(this.chess_array[t][a]);var n=e[Math.floor(Math.random()*e.length)];n.chess_data&&0==n.chess_data.dusha&&0==n.chess_data.meihua&&c.game_manager.zhenfa_delect_chess(cc.v2(n.board_pos.x,n.board_pos.y)),this.play_chess(n.board_pos.x,n.board_pos.y)},t.prototype.player_qixing=function(){var e=this;s.conMager.getInstance().getPoolNode(s.KEY.poolName.qixing_touch,this.board.up_effect,function(t){e.qixing_board=t,t.on(cc.Node.EventType.TOUCH_START,e.on,e)})},t.prototype.on=function(e){var t=e.target,a=e.getLocation(),n=t.convertToNodeSpaceAR(a),o=Math.floor(n.x)-this.pad,i=Math.floor(n.y)-this.pad,s=Math.abs(Math.round(o/this.block)),r=Math.abs(Math.round(i/this.block)),h=cc.v2(s,r);null!=this.chess_array[s][r].kunlong_player&&this.chess_array[s][r].kunlong_player!=this.my_player||!(0==this.chess_array[s][r].chaoniu_player||1==this.chess_array[s][r].chaoniu_player&&(this.my_player.zhenfa_array[0]&&"chaoniu"==this.my_player.zhenfa_array[0].data.name||this.my_player.zhenfa_array[1]&&"chaoniu"==this.my_player.zhenfa_array[1].data.name))?console.log("\u8fd9\u4e2a\u533a\u5757\u6ca1\u6cd5\u843d\u5b50"):(this.chess_array[s][r].chess_data&&0==this.chess_array[s][r].chess_data.dusha&&0==this.chess_array[s][r].chess_data.meihua&&c.game_manager.zhenfa_delect_chess(cc.v2(s,r)),this.play_chess(h.x,h.y))},t.prototype.stop_qixing=function(){switch(this.qixing_bool=!1,console.log("\u4e03\u661f\u7ed3\u675f\u4e86"),this.my_player.cos){case r.joiner_enum.player:console.log("\u73a9\u5bb6\u4e03\u661f\u6548\u679c\u7ed3\u675f"),this.qixing_board.off(cc.Node.EventType.TOUCH_START,this.on,this),s.conMager.getInstance().putPoolNode(s.KEY.poolName.qixing_touch,this.qixing_board),this.qixing_board=null;break;case r.joiner_enum.ai:console.log("ai\u4e03\u661f\u6548\u679c\u7ed3\u675f"),this.unscheduleAllCallbacks()}c.game_manager.get_zhenfa_event(this.my_player,this.data)},t.prototype.play_chess=function(e,t){var a=this;setTimeout(function(){c.game_manager.zhenfa_play_chess(cc.v2(e,t),a.my_player,null,function(e){s.conMager.getInstance().getPoolNode(s.KEY.poolName.qixing_luozi,e.getComponent(h.default).chess_effect)}),s.conMager.getInstance()._msgAtion.emit("update_qixinglianji")})},i([d],t)}(u.default));a.default=p,cc._RF.pop()},{"../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../new_chess":"new_chess","../zhenfa_joiner":"zhenfa_joiner"}],qizi:[function(e,t,a){"use strict";cc._RF.push(t,"b3150AUeXdOP7hPaC7f8i1c","qizi");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/baesConScripts/winRootNode"),r=e("../../SSSGF/ssscgf"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guang=null,t.longgu=null,t.speed=500,t.block=46,t.start_pos=null,t.pos=null,t}return o(t,e),t.prototype.inint=function(){this.longgu=this.node.getComponent(sp.Skeleton)},t.prototype.onOpen=function(e){var t=this;if(this.longgu=this.node.getComponent(sp.Skeleton),this.start_pos=cc.v2(e[0].x*this.block,e[0].y*this.block),this.node.setPosition(this.start_pos),this.node.zIndex=cc.macro.MAX_ZINDEX,this.node.scale=1,1==e[6]){var a=this.longgu.setAnimation(1,"burst1",!1);this.longgu.setTrackCompleteListener(a,function(){e[5](),t.longgu.clearTracks();var a=t.longgu.setAnimation(2,"burst2",!1);t.longgu.setTrackCompleteListener(a,function(){t.longgu.clearTracks(),t.node.scale=1.5;var a=t.longgu.setAnimation(3,"burst3",!1);t.guang_action(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.polie),t.longgu.setTrackCompleteListener(a,function(){t.longgu.clearTracks(),t.node.scale=1,t.move(e)})})})}else 0==e[6]?(e[5](),this.move(e)):2==e[6]&&(a=this.longgu.setAnimation(1,"burst1",!1),this.longgu.setTrackCompleteListener(a,function(){e[5](),t.longgu.clearTracks();var a=t.longgu.setAnimation(2,"burst2",!1);t.longgu.setTrackCompleteListener(a,function(){t.longgu.clearTracks(),t.node.scale=1.5;var e=t.longgu.setAnimation(3,"burst3",!1);t.guang_action(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.polie),t.longgu.setTrackCompleteListener(e,function(){t.longgu.clearTracks(),t.node.scale=1,r.conMager.getInstance().putPoolNode(r.KEY.poolName.qizi,t.node)})})}))},t.prototype.move=function(e){var t=this,a=e[1]*this.block,n=e[2]*this.block;this.pos=cc.v2(a,n);var o=this.node.getPosition().sub(this.pos).mag()/this.speed;this.pos.x>this.start_pos.x&&this.pos.y>this.start_pos.y?this.node.angle=-45:this.pos.x>this.start_pos.x&&this.pos.y==this.start_pos.y?this.node.angle=-90:this.pos.x>this.start_pos.x&&this.pos.y<this.start_pos.y?this.node.angle=-135:this.pos.x==this.start_pos.x&&this.pos.y<this.start_pos.y?this.node.angle=-180:this.pos.x<this.start_pos.x&&this.pos.y<this.start_pos.y?this.node.angle=135:this.pos.x<this.start_pos.x&&this.pos.y==this.start_pos.y?this.node.angle=90:this.pos.x<this.start_pos.x&&this.pos.y>this.start_pos.y?this.node.angle=45:this.pos.x==this.start_pos.x&&this.pos.y>this.start_pos.y?this.node.angle=0:(console.error("\u5206\u88c2\u89d2\u5ea6\u4e0d\u5b58\u5728"),this.node.angle=0),this.node.scale=2,this.longgu.setAnimation(4,"burst4",!0),cc.tween(this.node).to(o,{position:cc.v3(a,n)}).call(function(){t.move_end(e)}).start()},t.prototype.move_end=function(e){var t=this;if(this.node.angle=0,this.node.scale=1,1==e[6]){var a=this.longgu.setAnimation(5,"burst2",!1);this.longgu.setTrackCompleteListener(a,function(){t.longgu.clearTracks(),e[4]();var a=t.longgu.setAnimation(3,"burst3",!1);t.guang_action(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.polie),t.longgu.setTrackCompleteListener(a,function(){t.longgu.clearTracks(),r.conMager.getInstance().putPoolNode(r.KEY.poolName.qizi,t.node)})})}var n=this.longgu.setAnimation(6,"burst1",!1);this.longgu.setTrackCompleteListener(n,function(){t.longgu.clearTracks(),t.scheduleOnce(function(){e[3]()},.1),t.node.scale=1.5;var a=t.longgu.setAnimation(3,"burst3",!1);t.guang_action(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.polie),t.longgu.setTrackCompleteListener(a,function(){t.longgu.clearTracks(),e[4](),r.conMager.getInstance().putPoolNode(r.KEY.poolName.qizi,t.node)})})},t.prototype.onClose=function(){throw new Error("Method not implemented.")},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.start=function(){},t.prototype.guang_action=function(){this.guang.opacity=255,this.guang.scale=.7,cc.tween(this.guang).to(.3,{opacity:0,scale:1.2}).start()},i([u({type:cc.Node,tooltip:"\u5149"})],t.prototype,"guang",void 0),i([h],t)}(s.default);a.default=l,cc._RF.pop()},{"../../SSSGF/baesConScripts/winRootNode":"winRootNode","../../SSSGF/ssscgf":"ssscgf"}],rankItem:[function(e,t,a){"use strict";cc._RF.push(t,"e2620yxD0tHjaux27lhVsYl","rankItem");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/commonFunction"),c=e("../../utils/platform"),h=cc._decorator,u=h.ccclass,l=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.topSpr=null,t.topFrame=[],t.rankLabel=null,t.userName=null,t.score=null,t.headIcon=null,t}return o(t,e),t.prototype.start=function(){},t.prototype.initData=function(e,t,a,n,o){var i=this;e<0?(this.topSpr.active=!1,this.rankLabel.node.opacity=255):e<4?(this.topSpr.active=!0,this.topSpr.getComponent(cc.Sprite).spriteFrame=this.topFrame[e-1],this.rankLabel.node.opacity=0):(this.topSpr.active=!1,this.rankLabel.node.opacity=255),this.node.y=o,this.node.color=e%2==1?new cc.Color(220,213,188):new cc.Color(193,182,155),"null"!==a&&"\u6211"!==a&&"\u795e\u79d8\u73a9\u5bb6"!==a||e>0&&(a="\u795e\u79d8\u73a9\u5bb6"+e.toString()),this.scheduleOnce(function(){i.rankLabel.string=e<0?"\u672a\u4e0a\u699c":e.toString(),i.rankLabel.node.color=e<4?new cc.Color(255,255,255):new cc.Color(162,85,62),i.userName.string=a,i.score.string=n},.1),c.platform.now_platform!=c.platform_type.is_tt?(this.headIcon.node.active=!1,s.GameDataStorage.getUser().userData.gameName==a?(this.userName.node.color=new cc.Color(255,0,0),this.score.node.color=new cc.Color(255,0,0)):(this.userName.node.color=new cc.Color(0,0,0),this.score.node.color=new cc.Color(0,0,0))):(("null"==t||t.length<5)&&(t="head_icon/"+s.NumberUtil.randomNum(2,30)),-1!=t.indexOf("http")?r.commonFunction.updateHttpSprite(t,this.headIcon.node):r.commonFunction.updateSprite(t,this.headIcon.node))},t.prototype.getRank=function(){return Number(this.rankLabel.string)},i([l(cc.Node)],t.prototype,"topSpr",void 0),i([l([cc.SpriteFrame])],t.prototype,"topFrame",void 0),i([l(cc.Label)],t.prototype,"rankLabel",void 0),i([l(cc.Label)],t.prototype,"userName",void 0),i([l(cc.Label)],t.prototype,"score",void 0),i([l(cc.Sprite)],t.prototype,"headIcon",void 0),i([u],t)}(cc.Component);a.default=d,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform"}],rank_view:[function(e,t,a){"use strict";cc._RF.push(t,"d1ee4UWuZRPdaFKj2DsFRp4","rank_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.RankType=void 0;var s,r=e("../../SSSGF/ssscgf"),c=e("../../utils/platform"),h=e("../common/rankItem"),u=e("../../utils/getDataFromServer"),l=e("../../utils/as_util"),d=cc._decorator,p=d.ccclass,g=d.property;(function(e){e[e.LianZhao=0]="LianZhao",e[e.JingDain=1]="JingDain",e[e.DaZhao=2]="DaZhao",e[e.SanRen=3]="SanRen"})(s=a.RankType||(a.RankType={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnContentNode=void 0,t.rankItem=void 0,t.rankContent=void 0,t.selfItem=void 0,t.rankRoot=void 0,t.zhouDown=void 0,t.btnJingDianNode=void 0,t.btnLianZhaoNode=void 0,t.btnDaZhaoNode=void 0,t.btnSanRenNode=void 0,t.lianZhaoFream=[],t.jingDianFream=[],t.daZhaoFream=[],t.sanRenFream=[],t.ziSprite=void 0,t.ziFream=[],t.scrollView=void 0,t._showType=1,t._scrolltime=0,t._oldScrollY=380,t.updateTime=0,t.loadingSpr=void 0,t.callBack=null,t.gameType=0,t.rankData=void 0,t.judgeVideo=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){var e=this;cc.find("Canvas/money_node").active=!1,r.conMager.getInstance().playAudioEff("\u7ffb\u724c");var t=this.node.getChildByName("Node");this.scaleBigShow(t,cc.v3(0,0,0),function(){window.jd_rank_data&&e.startAction(),e.jingdian_rank()}),c.platform.now_platform!=c.platform_type.is_tt&&l.as_util.hide_banner()},t.prototype.onClose=function(){var e=this.node.getChildByName("Node");this.scaleSmallHide(e,cc.v3(0,0,0),function(){cc.find("Canvas/money_node").active=!0,r.conMager.getInstance().hideWinNode(r.KEY.UIName.rank_view)}),c.platform.now_platform!=c.platform_type.is_tt&&l.as_util.show_banner()},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.getRankData=function(e){var t=this,a=r.GameDataStorage.getUser().userData;cc.sys.isBrowser&&(a.openId="7777");var n="jd_score",o="jd_rank_data";if(e==s.JingDain){if(n="jd_score",o="jd_rank_data",null!=window.jd_rank_data)return this.rankData=window.jd_rank_data,void this.initData(e)}else if(e==s.DaZhao){if(n="dz_score",o="dz_rank_data",null!=window.dz_rank_data)return this.rankData=window.dz_rank_data,void this.initData(e)}else if(e==s.LianZhao){if(n="lz_score",o="lz_rank_data",null!=window.lz_rank_data)return this.rankData=window.lz_rank_data,void this.initData(e)}else if(e==s.SanRen&&(n="sr_score",o="sr_rank_data",null!=window.sr_rank_data))return this.rankData=window.sr_rank_data,void this.initData(e);this.loadingSpr.active=!0,c.platform.now_platform==c.platform_type.is_tt?u.getDataFromServer.request("get_rank/zijie_chess5/",{rank:n,openId:a.openId},function(a){window[""+o]=a,t.rankData=a,t.startAction(),t.initData(e),t.loadingSpr.active=!1,console.log("------------\u6392\u884c\u699c\u6570\u636e",window[""+o])},function(e){console.log("------------\u83b7\u53d6\u7ecf\u5178\u6392\u884c\u699c\u6570\u636e\u5931\u8d25",e),t.loadingSpr.getChildByName("log").getComponent(cc.Label).string="\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u5173\u95ed\u6392\u884c\u699c\u91cd\u8bd5"}):u.getDataFromServer.request("get_rank/appgame/",{rank:n,openId:a.openId,platform:c.platform.rank_channel},function(a){window[""+o]=a,t.rankData=a,t.startAction(),t.initData(e),t.loadingSpr.active=!1,console.log("------------\u6392\u884c\u699c\u6570\u636e",window[""+o])},function(e){console.log("------------\u83b7\u53d6\u7ecf\u5178\u6392\u884c\u699c\u6570\u636e\u5931\u8d25",e),t.loadingSpr.getChildByName("log").getComponent(cc.Label).string="\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u5173\u95ed\u6392\u884c\u699c\u91cd\u8bd5"})},t.prototype.initData=function(e){if(this._showType=e,this.initSelfItem(),this.rankContent.childrenCount<1){for(var t=-5,a=void 0,n=0;n<15;n++)t-=40,(a=cc.instantiate(this.rankItem)).parent=this.rankContent,this.initItemData(n,a,t),t-=45;this.rankContent.height=8510}else for(this.scrollView.stopAutoScroll(),this.rankContent.y=380,t=-5,a=void 0,n=0;n<this.rankContent.childrenCount;n++)t-=40,a=this.rankContent.children[n],this.initItemData(n,a,t),t-=45},t.prototype.scrollMove=function(){if(this._scrolltime++,this._scrolltime>=2){this._scrolltime=0;var e=0,t=void 0;if(this._oldScrollY<this.rankContent.y){for(var a=0;a<this.rankContent.childrenCount;a++)if((e=(t=this.rankContent.children[a]).y+this.rankContent.y)>595&&(e=t.y-1105)>-8510){var n=Math.ceil(Math.abs(e+45)/85);this.initItemData(n,t,e)}}else if(this.rankContent.y>380||this.rankContent.y<375)for(a=this.rankContent.childrenCount-1;a>=0;a--)(e=(t=this.rankContent.children[a]).y+this.rankContent.y)<-685&&(e=t.y+1105,t.y<=-1150)&&(n=Math.ceil(Math.abs(e+45)/85),this.initItemData(n,t,e));this._oldScrollY=this.rankContent.y}},t.prototype.initItemData=function(e,t,a){var n=this.rankData.data[e].headIconUrl,o=this.rankData.data[e].gameName,i=this.rankData.data[e].score;this._showType==s.JingDain&&(i=this.getDuanWei(i)),t.getComponent(h.default).initData(e+1,n,o,i,a)},t.prototype.initSelfItem=function(){var e=r.GameDataStorage.getUser().userData,t=e.headIconUrl;"null"==t&&(t="head_icon/1");var a=e.gameName,n="0",o=-1;this._showType==s.JingDain?n=e.jd_score.toString():this._showType==s.DaZhao?n=e.dz_score.toString():this._showType==s.LianZhao?n=e.lz_score.toString():this._showType==s.SanRen&&(n=e.sr_score.toString());for(var i=0;i<this.rankData.data.length;i++)if(n>=this.rankData.data[i].score){o=i+1;break}this._showType==s.JingDain&&(n=this.getDuanWei(e.jd_score)),this.selfItem.getComponent(h.default).initData(o,t,a,n,this.selfItem.y),this.selfItem.color=new cc.Color(255,255,255)},t.prototype.getDuanWei=function(e){var t="",a=r.UpdataRankData.getRankByScoreJD(e);return t=0==a.duan_wei?"\u521d\u6bb5 ":a.duan_wei+1+"\u6bb5 ",10==a.deng_ji?t+a.deng_ji+"\u7ea7":t+" "+a.deng_ji+"\u7ea7"},t.prototype.startAction=function(){this.rankRoot.stopAllActions(),this.zhouDown.y=480,this.rankRoot.height=30,cc.tween(this.rankRoot).to(.5,{height:971}).start(),cc.tween(this.zhouDown).to(.5,{y:-430}).start()},t.prototype.share_btn=function(){var e=this;r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),r._pl_fun.getInstance().showAdVideo(function(){r.GameDataStorage.gameStateData.reward*=2;var t=r.GameDataStorage.gameStateData.reward;r.conMager.getInstance()._msgAtion.emit("updateMedalCount",t,cc.v3(0,0)),r._pl_fun.getInstance().add_reportAnalytics("event_ShuangBeiLingQuVedioNumbers"),e.onClose(2)})},t.prototype.next_btn=function(){r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.judgeVideo||(this.judgeVideo=!0,this.onClose(2))},t.prototype.jingdian_rank=function(){this.ziSprite.spriteFrame=this.ziFream[0],r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.btnConentAction(this.btnJingDianNode.x),this.changeBtnFrame(s.JingDain),this.getRankData(s.JingDain)},t.prototype.lianzhao_rank=function(){this.ziSprite.spriteFrame=this.ziFream[1],r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.btnConentAction(-this.btnLianZhaoNode.x),this.changeBtnFrame(s.LianZhao),this.getRankData(s.LianZhao)},t.prototype.dazhao_rank=function(){this.ziSprite.spriteFrame=this.ziFream[1],r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.btnConentAction(-this.btnDaZhaoNode.x),this.changeBtnFrame(s.DaZhao),this.getRankData(s.DaZhao)},t.prototype.sanren_rank=function(){this.ziSprite.spriteFrame=this.ziFream[1],r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.btnConentAction(-this.btnDaZhaoNode.x),this.changeBtnFrame(s.SanRen),this.getRankData(s.SanRen)},t.prototype.changeBtnFrame=function(e){this.btnLianZhaoNode.getComponent(cc.Sprite).spriteFrame=this.lianZhaoFream[e==s.LianZhao?1:0],this.btnJingDianNode.getComponent(cc.Sprite).spriteFrame=this.jingDianFream[e==s.JingDain?1:0],this.btnDaZhaoNode.getComponent(cc.Sprite).spriteFrame=this.daZhaoFream[e==s.DaZhao?1:0],this.btnSanRenNode.getComponent(cc.Sprite).spriteFrame=this.sanRenFream[e==s.SanRen?1:0]},t.prototype.btnConentAction=function(){},t.prototype.update=function(){this.updateTime++,this.updateTime>30&&(this.updateTime=0,this._scrolltime++,this.scrollMove())},i([g(cc.Node)],t.prototype,"btnContentNode",void 0),i([g(cc.Prefab)],t.prototype,"rankItem",void 0),i([g(cc.Node)],t.prototype,"rankContent",void 0),i([g(cc.Node)],t.prototype,"selfItem",void 0),i([g(cc.Node)],t.prototype,"rankRoot",void 0),i([g(cc.Node)],t.prototype,"zhouDown",void 0),i([g(cc.Node)],t.prototype,"btnJingDianNode",void 0),i([g(cc.Node)],t.prototype,"btnLianZhaoNode",void 0),i([g(cc.Node)],t.prototype,"btnDaZhaoNode",void 0),i([g(cc.Node)],t.prototype,"btnSanRenNode",void 0),i([g([cc.SpriteFrame])],t.prototype,"lianZhaoFream",void 0),i([g([cc.SpriteFrame])],t.prototype,"jingDianFream",void 0),i([g([cc.SpriteFrame])],t.prototype,"daZhaoFream",void 0),i([g([cc.SpriteFrame])],t.prototype,"sanRenFream",void 0),i([g(cc.Sprite)],t.prototype,"ziSprite",void 0),i([g([cc.SpriteFrame])],t.prototype,"ziFream",void 0),i([g(cc.ScrollView)],t.prototype,"scrollView",void 0),i([g(cc.Node)],t.prototype,"loadingSpr",void 0),i([p],t)}(r.winRootNode);a.default=_,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../utils/as_util":"as_util","../../utils/getDataFromServer":"getDataFromServer","../../utils/platform":"platform","../common/rankItem":"rankItem"}],roomNetListener:[function(e,t,a){"use strict";cc._RF.push(t,"c4430m3bUtFhr37a8VSidcT","roomNetListener");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.PLAYERSTATETYPE=a.MsgId=a.SyncType=a.room_net_listener=void 0;var s,r,c=e("./util"),h=e("./global"),u=e("./views/pvp_game_view"),l=e("./logic/FrameSyncLogic"),d=e("../../SSSGF/ssscgf"),p=e("../../SSSGF/dataController/DATA"),g=cc._decorator,_=g.ccclass;g.property,function(e){e.StartGame="start",e.PlayingId="",e.frame="\u5e27\u540c\u6b65"}(a.SyncType||(a.SyncType={})),function(e){e[e.STARTGAMEACTION=1]="STARTGAMEACTION",e[e.JIABEIJISHI=2]="JIABEIJISHI",e[e.JIABEI=3]="JIABEI",e[e.KAISHI=4]="KAISHI",e[e.LUOZIJISHI=5]="LUOZIJISHI",e[e.GAMEOVER=6]="GAMEOVER",e[e.EXPRESSION=7]="EXPRESSION",e[e.RESULT=8]="RESULT",e[e.PLAYCHESS=9]="PLAYCHESS",e[e.HEQIQINGQIU=10]="HEQIQINGQIU",e[e.HEQIJIEGUO=11]="HEQIJIEGUO",e[e.RENSHU=12]="RENSHU",e[e.HUIQIQINGQIU=13]="HUIQIQINGQIU",e[e.HUIQIJIEGUO=14]="HUIQIJIEGUO"}(s=a.MsgId||(a.MsgId={})),function(e){e[e.start_game_action=1]="start_game_action",e[e.start_game_action_finish=2]="start_game_action_finish",e[e.jia_bei_finish=3]="jia_bei_finish",e[e.deng_dai_luo_zi=4]="deng_dai_luo_zi",e[e.zhun_bei_luo_zi=5]="zhun_bei_luo_zi"}(r=a.PLAYERSTATETYPE||(a.PLAYERSTATETYPE={}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.game_view=void 0,t._isSendingJiaBei=!1,t}return o(t,e),t.prototype.start=function(){a.room_net_listener=this,d.GameDataStorage.gameStateData.gameType==p.game_type.lianjiduiyi&&(this.game_view=this.node.getComponent(u.default)),this.initListener()},t.prototype.onDisable=function(){h.default.room&&(h.default.room.onUpdate=null),c.setBroadcastCallbacks(h.default.room,this,{}),l.clearFrames()},t.prototype.updateGouYu=function(){this.game_view.updateGouYu()},t.prototype.initListener=function(){var e=this;h.default.room&&(h.default.room.onUpdate=function(t){return e.onRoomUpdate(t)}),h.default.room&&(h.default.room.onChangePlayerNetworkState=function(t){return e.changePlayerNetworkState(t)}),h.default.room&&(h.default.room.onAutoRequestFrameError=function(t){return e.autoRequestFrameError(t)}),c.setBroadcastCallbacks(h.default.room,this,this),console.log("--------------MGOBE.Player.id:",MGOBE.Player.id,h.default.room);var t=h.default.room.roomInfo.playerList[0].customProfile;"string"==typeof t&&(t=JSON.parse(t)),(MGOBE.Player.id===h.default.room.roomInfo.owner||t.isMatchGame)&&h.default.room.roomInfo.playerList.forEach(function(t){"string"==typeof t.customProfile&&(t.customProfile=JSON.parse(t.customProfile)),MGOBE.Player.id===t.id?e.game_view.initData(t):e.game_view.init_ds_info(t)}),this.game_view.setRoomView(),this.changeCustomPlayerStatus(),MGOBE.Player.id===h.default.room.roomInfo.owner&&(console.log("---------------changeCustomProperties--\u4fee\u6539\u623f\u95f4\u72b6\u6001"),this.changeCustomProperties("start"))},t.prototype.autoRequestFrameError=function(e){console.log("---------------autoRequestFrameError--\u65ad\u7ebf\u91cd\u8fde:",e)},t.prototype.changeCustomPlayerStatus=function(){h.default.room.changeCustomPlayerStatus({customPlayerStatus:1},function(e){e.code===MGOBE.ErrCode.EC_OK?c.appendLog("\u4fee\u6539\u7528\u6237\u81ea\u5b9a\u4e49\u4fe1\u606f\u6210\u529f"):c.appendLog("\u4fee\u6539\u7528\u6237\u81ea\u5b9a\u4e49\u4fe1\u606f\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+e.code)})},t.prototype.changePlayerNetworkState=function(e){console.log("----------------changePlayerNetworkState, event:",e),e.data.networkState%2==0?MGOBE.Player.id===e.data.changePlayerId?this.game_view.diaoxian(this.node.getChildByName("user_headIcon").getChildByName("self_diaoxian")):this.game_view.diaoxian(this.node.getChildByName("ds_headIcon").getChildByName("ds_diaoxian")):MGOBE.Player.id===e.data.changePlayerId?this.game_view.shangxian(this.node.getChildByName("user_headIcon").getChildByName("self_diaoxian")):this.game_view.shangxian(this.node.getChildByName("ds_headIcon").getChildByName("ds_diaoxian"))},t.prototype.onRoomUpdate=function(){h.default.room&&h.default.room.roomInfo&&h.default.room.roomInfo.playerList&&h.default.room.roomInfo.playerList.find(function(e){return e.id===MGOBE.Player.id})?(console.log("------------3333----onRoomUpdate",h.default.room.networkState.COMMON,h.default.room.networkState.RELAY),h.default.room.networkState.COMMON&&h.default.room.networkState.RELAY?this.node.getChildByName("user_headIcon").getChildByName("self_diaoxian").active&&(this.updateGouYu(),this.onGetMyRoom(),this.game_view.shangxian(this.node.getChildByName("user_headIcon").getChildByName("self_diaoxian"))):(this.onGetMyRoom(),this.node.getChildByName("user_headIcon").getChildByName("self_diaoxian").active||this.game_view.diaoxian(this.node.getChildByName("user_headIcon").getChildByName("self_diaoxian"))),this.game_view.setRoomView()):console.log("-------------2222---onRoomUpdate")},t.prototype.changeCustomProperties=function(e){c.appendLog("\u6b63\u5728\u4fee\u6539\u623f\u95f4\u81ea\u5b9a\u4e49\u4fe1\u606f\u4e3a\uff1a"+e),h.default.room.changeRoom({customProperties:e},function(e){e.code===MGOBE.ErrCode.EC_OK?c.appendLog("\u4fee\u6539\u623f\u95f4\u81ea\u5b9a\u4e49\u4fe1\u606f\u6210\u529f"):c.appendLog("\u4fee\u6539\u623f\u95f4\u81ea\u5b9a\u4e49\u4fe1\u606f\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+e.code)})},t.prototype.sendToClient=function(e){c.appendLog("\u6b63\u5728\u53d1\u9001\u623f\u95f4\u6d88\u606f");var t={recvPlayerList:[],recvType:MGOBE.types.RecvType.ROOM_ALL,msg:e};h.default.room.sendToClient(t,function(e){e.code===MGOBE.ErrCode.EC_OK?c.appendLog("\u53d1\u9001\u623f\u95f4\u6d88\u606f\u6210\u529f"):c.appendLog("\u53d1\u9001\u623f\u95f4\u6d88\u606f\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+e.code)})},t.prototype.sendToGameSvr=function(e,t){var a=this;c.appendLog("\u6b63\u5728\u53d1\u9001\u623f\u95f4\u6d88\u606f");var n={data:{msg_id:e,msg:t}};if(console.log("------------\u53d1\u9001\u5b9e\u65f6\u670d\u52a1\u5668\u6d88\u606f:",t),e==s.PLAYCHESS){if(h.default.isSendingPlayChessMsg)return;h.default.isSendingPlayChessMsg=!0}if(e==s.JIABEI){if(this._isSendingJiaBei)return;this._isSendingJiaBei=!0}h.default.room.sendToGameSvr(n,function(t){e==s.PLAYCHESS&&(h.default.isSendingPlayChessMsg=!1),e==s.JIABEI&&(a._isSendingJiaBei=!1),t.code===MGOBE.ErrCode.EC_OK?c.appendLog("\u53d1\u9001\u5b9e\u65f6\u670d\u52a1\u5668\u6d88\u606f\u6210\u529f"):(c.appendLog("\u53d1\u9001\u5b9e\u65f6\u670d\u52a1\u5668\u6d88\u606f\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+t.code),d.ConNetErr.ClientErrLog(t.code))})},t.prototype.initSendState=function(){this._isSendingJiaBei=!1},t.prototype.leaveRoom=function(){this.initSendState(),c.appendLog("\u6b63\u5728\u9000\u51fa\u623f\u95f4"),h.default.room.leaveRoom({},function(e){e.code===MGOBE.ErrCode.EC_OK?c.appendLog("\u9000\u51fa\u623f\u95f4\u6210\u529f"):c.appendLog("\u9000\u51fa\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+e.code)})},t.prototype.dismissRoom=function(){this.initSendState(),c.appendLog("\u6b63\u5728\u89e3\u6563\u623f\u95f4"),h.default.room.dismissRoom({},function(e){e.code===MGOBE.ErrCode.EC_OK?c.appendLog("\u89e3\u6563\u623f\u95f4\u6210\u529f"):c.appendLog("\u89e3\u6563\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+e.code)})},t.prototype.onJoinRoom=function(){var e=this;c.appendLog("\u5e7f\u64ad\uff1a\u73a9\u5bb6\u8fdb\u623f"),console.log("------------------global.room.roomInfo",h.default.room.roomInfo);var t=h.default.room.roomInfo.playerList[0].customProfile;"string"==typeof t&&(t=JSON.parse(t)),t.isMatchGame||(h.default.selfId=MGOBE.Player.id,h.default.room.roomInfo.playerList.forEach(function(t){"string"==typeof t.customProfile&&(t.customProfile=JSON.parse(t.customProfile)),h.default.selfId===t.id?e.game_view.initData(t):e.game_view.init_ds_info(t)}))},t.prototype.onLeaveRoom=function(){c.appendLog("\u5e7f\u64ad\uff1a\u73a9\u5bb6\u9000\u623f")},t.prototype.onDismissRoom=function(){c.appendLog("\u5e7f\u64ad\uff1a\u623f\u95f4\u89e3\u6563")},t.prototype.onGetMyRoom=function(){MGOBE.Room.getMyRoom(function(e){return 0===e.code?(h.default.room.initRoom(e.data.roomInfo),console.log("\u73a9\u5bb6\u5df2\u5728\u623f\u95f4\u5185\uff1a")):20011===e.code?console.log("\u73a9\u5bb6\u4e0d\u5728\u623f\u95f4\u5185"):console.log("\u8c03\u7528\u5931\u8d25:",e.code)})},t.prototype.onRecvFromClient=function(e){console.log("----------------SDK \u623f\u95f4\u5185\u6d88\u606f\u5e7f\u64ad:",e.data.msg)},t.prototype.onRecvFromGameSvr=function(e){var t=this,a=e.data.data;switch(a.state_type){case s.STARTGAMEACTION:h.default.plyingId=a.playing_id,this.game_view.kaiChangDongHua(),a.players.forEach(function(e){MGOBE.Player.id===e.id?t.game_view.initData(e):t.game_view.init_ds_info(e)});break;case s.PLAYCHESS:h.default.plyingId=a.playing_id,this.game_view.moveInChess(a.msg.x,a.msg.y,a.msg.state,a.maze);break;case s.EXPRESSION:this.game_view.showBiaoQing(a.msg.player_id,a.msg.index);break;case s.JIABEI:h.default.plyingId=a.playing_id,d.GameDataStorage.gameStateData.rewardmultiple=a.jiaBeiCount,console.log("----------------SDK \u5b9e\u65f6\u670d\u52a1\u5668\u5e7f\u64ad  \u52a0\u500d:",d.GameDataStorage.gameStateData.rewardmultiple),this.game_view.jiabeiAction(a.msg.num,a.msg.player_id);break;case s.KAISHI:if(""!=h.default.plyingId)return;h.default.plyingId=a.playing_id,this.game_view.caixianshou();break;case s.GAMEOVER:this.game_view.gameResult(a.msg.win_p_id,a.msg.chess_index);break;case s.JIABEIJISHI:d.GameDataStorage.gameStateData.rewardmultiple=a.jiaBeiCount,a.players.find(function(e){return e.id===MGOBE.Player.id}).customProfile.playState!=r.jia_bei_finish&&(this.game_view.startJiaBeiAction(),this.game_view.updateTime_item3(a.timeNumber));break;case s.LUOZIJISHI:d.GameDataStorage.gameStateData.rewardmultiple=a.jiaBeiCount,h.default.plyingId=a.playing_id;var n=a.players.find(function(e){return e.id!=h.default.plyingId});if(!n)return;this.game_view.moveInChess(n.customProfile.lastPlayX,n.customProfile.lastPlayY,a.lastPlayState,a.maze),this.game_view.updateTime(a.timeNumber),a.players.forEach(function(e){MGOBE.Player.id===e.id?t.game_view.initData(n):t.game_view.init_ds_info(n)}),a.msg.huiQiArr.length>0&&this.game_view.huiQiJieGuo(a.msg.huiQiArr);break;case s.HEQIQINGQIU:this.game_view.heQiShenQing(a.msg.player_id);break;case s.HEQIJIEGUO:console.log("---------------\u548c\u5176\u7533\u8bf7\u7ed3\u679c:",a),this.game_view.heQiJieGuo(a.msg.win_p_id,a.msg.result);break;case s.HUIQIQINGQIU:this.game_view.huiQiShenQing(a.msg.player_id);break;case s.HUIQIJIEGUO:a.msg.win_p_id!=MGOBE.Player.id&&(console.log("---------------\u6094\u68cb\u7ed3\u679c:",a),null!=a.msg.result&&(0==a.msg.result?d.conMager.getInstance().getPoolNode(d.KEY.poolName.tipNode,this.node.parent,"\u5bf9\u65b9\u62d2\u7edd\u4e86\u60a8\u7684\u6094\u68cb!"):d.conMager.getInstance().getPoolNode(d.KEY.poolName.tipNode,this.node.parent,"\u5bf9\u65b9\u540c\u610f\u4e86\u60a8\u7684\u6094\u68cb!"))),h.default.plyingId=a.playing_id,a.msg.huiQiArr.length>0&&this.game_view.huiQiJieGuo(a.msg.huiQiArr);break;case s.RENSHU:this.game_view.renShu(a.msg.win_p_id)}},i([_],t)}(cc.Component);a.default=m,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","./global":"global","./logic/FrameSyncLogic":"FrameSyncLogic","./util":"util","./views/pvp_game_view":"pvp_game_view"}],sanren_view:[function(e,t,a){"use strict";cc._RF.push(t,"0d1f8LtRVxIKYFf54GvhKUB","sanren_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s,r=e("./../../SSSGF/Utils/NumberUtil"),c=e("../../SSSGF/ssscgf"),h=e("../../classCon/configSurface"),u=e("../wuziqi/Piece"),l=e("../../utils/platform"),d=e("../wuziqi/sanren/GameBoard_sanren"),p=e("../../utils/commonFunction"),g=e("../common/setup_sanren");(function(e){e[e.luozi=0]="luozi",e[e.shuoming=1]="shuoming"})(s||(s={}));var _=cc._decorator,m=_.ccclass,f=_.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item1=null,t.item2=null,t.item3=null,t.gameType=1,t.dsName_string="",t.dsName_label_item2=null,t.dsLevel_label_item2=null,t.dsHeadIcon_item2=null,t.dsName_label_item2_2=null,t.dsLevel_label_item2_2=null,t.dsHeadIcon_item2_2=null,t.userLevel_label_item2=null,t.userName_label_item2=null,t.userHeadIcon_item2=null,t.user_headPanel=null,t.ds_headPanel=null,t.ds_chess=null,t.ds_chess2=null,t.reward_gold=2,t.multiple=0,t.chess_parent=null,t.shubiao_node=null,t.max_gameTime=30,t.ds_headIconIndex=0,t.ds_headIconIndex2=0,t.board=null,t.whiteChess=null,t.blackChess=null,t.goldChess=null,t.quan=null,t.hongDian=null,t.head_parent=null,t.ds_headIcon=null,t.ds_headIcon2=null,t.user_headIcon=null,t.tip=null,t.block=46,t.userGameTime=0,t.count_down=null,t.userChess=u.BLACKCHESS,t.is_game_over=!1,t.count_time_itm3=10,t.jiabei_num_item3=0,t.whiePool=new cc.NodePool,t.blackPool=new cc.NodePool,t.goldPool=new cc.NodePool,t.RightRate=1,t.TimeDel=!1,t.chess_num=0,t.interval=!0,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t.luozizhong=null,t.head_parent_tween=new cc.Tween,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){c._pl_fun.getInstance().startCreateVideo(),this.reward_gold=e[0].reward_gold,c.GameDataStorage.gameStateData.reward_gold=this.reward_gold,this.gameType=e[0].gameType,c.GameDataStorage.gameStateData.gameType=this.gameType,this.node.getChildByName("setup").getComponent(g.default).init_ui();var t=e[0].RightRate;this.update_ai_RightRate(t),this.initGame(),this.node.runAction(cc.fadeIn(.5)),l.platform.now_platform!=l.platform_type.is_tt&&(this.node.getChildByName("luping").active=!1),this.hongDian.zIndex=99,this.board.myTurn=!1},t.prototype.onClose=function(){this.unscheduleAllCallbacks(),this.board.removeListennner(),c.conMager.getInstance().hideWinNode(c.KEY.UIName.jd_game_view),c.conMager.getInstance().showWinNode(c.KEY.UIName.slectGmae,null,{gameType:this.gameType})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){var e=this;c.conMager.getInstance()._msgAtion.on("ai_renshu",this.ai_renshu,this),c.conMager.getInstance()._msgAtion.on("ai_diaoxian",this.ai_diaoxian,this),c.conMager.getInstance()._msgAtion.on("ai_shangxian",this.ai_shangxian,this),c.conMager.getInstance()._msgAtion.on("renshu",this.return_btn,this),c.conMager.getInstance()._msgAtion.on("pingju",this.pingju,this),c.conMager.getInstance()._msgAtion.on("shubiao",this.shubiao,this),c.conMager.getInstance()._msgAtion.on("qiuhe",this.qiuhe,this),c.conMager.getInstance()._msgAtion.on("huiqi",this.huiqi,this),this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1,c.conMager.getInstance()._msgAtion.on("closeSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1},this),c.conMager.getInstance()._msgAtion.on("openSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0},this),c.conMager.getInstance()._msgAtion.on("stopTimeDel",function(){e.TimeDel=!0},this),c.conMager.getInstance()._msgAtion.on("startTimeDel",function(){e.TimeDel=!1},this)},t.prototype.update_ai_RightRate=function(e){1==e?this.RightRate=.4:2==e?this.RightRate=.5:3==e?this.RightRate=.7:4==e?this.RightRate=.8:5==e&&(this.RightRate=.9)},t.prototype.RadomZhenFa=function(e){for(var t=h.zhenFaWeight[e],a=0,n=0;n<c.GameDataStorage.gameStateData.zhenFaName.length;n++)a+=t[c.GameDataStorage.gameStateData.zhenFaName[n]];var o=Math.random()*a,i=0,s="wanning";for(n=0;n<c.GameDataStorage.gameStateData.zhenFaName.length;n++)if(o<(i+=t[c.GameDataStorage.gameStateData.zhenFaName[n]])){s=c.GameDataStorage.gameStateData.zhenFaName[n];break}return s},t.prototype.initDsZhenFa=function(){var e=c.GameDataStorage.gameStateData.userZhenFaName,t=this.RadomZhenFa(e);c.GameDataStorage.gameStateData.dsZhenFaName=t;var a=c.GameDataStorage.getUser().userData.zhenFaMap[e].level+5*[-1,1][r.NumberUtil.randomNum(0,1)];a<=3&&(a=3),c.GameDataStorage.gameStateData.ds_zhenfalevel=a,"xueyuyingsha"==e&&"kedi"==t&&(c.GameDataStorage.gameStateData.ds_zhenfalevel=r.NumberUtil.randomNum(1,10)),console.log("\u5bf9\u624b\u7684\u7b49\u7ea7:",c.GameDataStorage.gameStateData.ds_zhenfalevel)},t.prototype.initGame=function(){cc.find("Canvas/money_node").active=!1,c.GameDataStorage.gameStateData.chess_num=0,c.GameDataStorage.gameStateData.rewardmultiple=0,this.initUi(),this.initData(),this.kaiChangDongHua(),this.node.getChildByName("heizi").active=!1,this.node.getChildByName("baizi").active=!1,this.node.getChildByName("jinzi").active=!1,this.board.init(this),this.node.getChildByName("mask").zIndex=99,this.initPool(this.whiePool,this.whiteChess),this.initPool(this.blackPool,this.blackChess),this.initPool(this.goldPool,this.goldChess)},t.prototype.initUi=function(){this.item1=this.node.getChildByName("item1"),this.item2=this.node.getChildByName("item2"),this.item3=this.node.getChildByName("item3"),this.dsLevel_label_item2=this.item2.getChildByName("left").getChildByName("dsLevel").getComponent(cc.Label),this.dsName_label_item2=this.item2.getChildByName("left").getChildByName("dsName").getComponent(cc.Label),this.userLevel_label_item2=this.item2.getChildByName("right").getChildByName("userLevel").getComponent(cc.Label),this.userName_label_item2=this.item2.getChildByName("right").getChildByName("userName").getComponent(cc.Label),this.dsLevel_label_item2_2=this.item2.getChildByName("san").getChildByName("dsLevel").getComponent(cc.Label),this.dsName_label_item2_2=this.item2.getChildByName("san").getChildByName("dsName").getComponent(cc.Label),this.user_headPanel=this.node.getChildByName("user_headPanel"),this.ds_headPanel=this.node.getChildByName("ds_headPanel"),this.chess_parent=this.node.getChildByName("chess_parent"),this.shubiao_node=this.chess_parent.getChildByName("shubiao_node"),this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",this.count_down=this.node.getChildByName("count_down"),this.ds_headIcon.node.parent.parent.active=!0,this.ds_headIcon2.node.parent.parent.active=!0,this.user_headIcon.node.parent.parent.active=!0},t.prototype.initData=function(){var e=c.GameDataStorage.getUser().userData;this.userName_label_item2.string=e.gameName,this.dsName_label_item2_2;var t=p.commonFunction.judgeGameLevelName(e.user_level);1==this.gameType?t=p.commonFunction.getDuanWei(c.GameDataStorage.getUser().userData.jd_score):2==this.gameType&&("number"!=typeof c.GameDataStorage.getUser().userData.dz_score&&(c.GameDataStorage.getUser().userData.dz_score=0),t="\u79ef\u5206:"+c.GameDataStorage.getUser().userData.dz_score),this.userLevel_label_item2.string=t;var a=h.XingMingData.xing,n=h.XingMingData.ming,o=p.commonFunction.randomGameName(a,n);this.dsName_label_item2.string=o,c.GameDataStorage.gameStateData.ds_name=o;var i=p.commonFunction.randomGameName(a,n);this.dsName_label_item2_2.string=i,c.GameDataStorage.gameStateData.ds_name2=i;var s=p.commonFunction.judgeAiLevel(e.user_level),u=p.commonFunction.judgeGameLevelName(s),l=p.commonFunction.judgeGameLevelName(s);1==this.gameType?(c.GameDataStorage.gameStateData.ds_score=p.commonFunction.judgeAiScore(c.GameDataStorage.getUser().userData.jd_score),u=p.commonFunction.getDuanWei(c.GameDataStorage.gameStateData.ds_score),l=p.commonFunction.getDuanWei(c.GameDataStorage.gameStateData.ds_score)):2==this.gameType&&(c.GameDataStorage.gameStateData.ds_score=p.commonFunction.judgeAiScore(c.GameDataStorage.getUser().userData.dz_score),"number"!=typeof c.GameDataStorage.gameStateData.ds_score&&(c.GameDataStorage.getUser().userData.dz_score=0),u="\u79ef\u5206:"+c.GameDataStorage.gameStateData.ds_score,l=p.commonFunction.getDuanWei(c.GameDataStorage.gameStateData.ds_score)),this.dsLevel_label_item2.string=u,this.dsLevel_label_item2_2.string=l;var d=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel"),g=this.node.getChildByName("user_headPanel").getChildByName("user_headPanel");d.getChildByName("Name").getComponent(cc.Label).string=this.userName_label_item2.string,d.getChildByName("Level").getComponent(cc.Label).string=this.userLevel_label_item2.string,g.getChildByName("Name").getComponent(cc.Label).string=this.dsName_label_item2.string,g.getChildByName("Level").getComponent(cc.Label).string=this.dsLevel_label_item2.string,"null"!=c.GameDataStorage.getUser().userData.headIconUrl&&p.commonFunction.updateHttpSprite(c.GameDataStorage.getUser().userData.headIconUrl,this.user_headIcon.node);var _=r.NumberUtil.randomNum(1,60);this.ds_headIconIndex=_,console.log("\u5bf9\u624b\u7684\u5934\u50cf:",_);var m="head_icon/"+_;p.commonFunction.updateSprite(m,this.ds_headIcon.node);var f=r.NumberUtil.randomNum(1,60);this.ds_headIconIndex2=f,console.log("\u5bf9\u624b\u7684\u5934\u50cf:",f);var y="head_icon/"+f;p.commonFunction.updateSprite(y,this.ds_headIcon2.node)},t.prototype.initPool=function(e,t){for(var a=0;a<225;a++){var n=cc.instantiate(t);e.put(n)}},t.prototype.moveInChess=function(e,t,a,n){var o,i=this,s=c.GameDataStorage.gameStateData.chess_num;if(2==this.gameType)if(s>30){this.chess_num-=1;var r=2;s>100&&(r=10),s>150&&(r=15),this.chess_num%r==0&&c.conMager.getInstance().playAudioEff(c.KEY.audioName.luozi)}else c.conMager.getInstance().playAudioEff(c.KEY.audioName.luozi);else c.conMager.getInstance().playAudioEff(c.KEY.audioName.luozi);this.stopTime(),this.startTime(a),this.ai_duihua(1);var h=null,l=null;if(a==u.BLACKCHESS?(h=this.blackPool,l=this.blackChess):a==u.WHITECHESS?(h=this.whiePool,l=this.whiteChess):(h=this.goldPool,l=this.goldChess),h.size()>0)o=h.get();else{var d=cc.instantiate(l);h.put(d),o=h.get()}var g=Math.floor(e/this.block),_=15*Math.floor(t/this.block)+g;this.board.chess_map[_]=o,o.x=e,o.y=t,this.chess_parent.addChild(o),o.zIndex=1;var m=c.GameDataStorage.gameStateData.userZhenFaName,f=c.GameDataStorage.gameStateData.dsZhenFaName;n?a==this.userChess&&"fenlie"==m||a==-1*this.userChess&&"fenlie"==f||(a==this.userChess&&"xueyuyingsha"==m?o.scale=0:a==-1*this.userChess&&"xueyuyingsha"==f?o.scale=0:a==this.userChess&&"meihua"==m?p.commonFunction.updateSprite("chess/hua_"+a,o.getChildByName("chess"),function(){}):a==-1*this.userChess&&"meihua"==f?p.commonFunction.updateSprite("chess/hua_"+a,o.getChildByName("chess"),function(){}):this.chessAction(o,n)):this.chessAction(o,n),2!=this.gameType&&this.scheduleOnce(function(){i.hongDian.active=!0,i.hongDian.setPosition(e,t+1)},.1)},t.prototype.return_next_state=function(e){var t=0;return e==u.BLACKCHESS?t=u.WHITECHESS:e==u.WHITECHESS?t=u.GOLDCHESS:e==u.GOLDCHESS&&(t=u.BLACKCHESS),t},t.prototype.chessAction=function(e,t){var a=this;e.scale=1.5,e.getChildByName("chess").zIndex=98,e.y+=80,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)),cc.callFunc(function(){if(t){var n=e.getChildByName("jn1");n.active=!0,a.scheduleOnce(function(){n.active=!1},1)}})))},t.prototype.ai_duihua=function(e,t){var a=this;if(!(this.gameType>2)){var n=this.node.getChildByName("ds_biaoqing"),o=this.node.getChildByName("ds_duihua"),i=0;if(1==e){if(!this.interval)return;if(this.interval=!1,this.scheduleOnce(function(){a.interval=!0},8),this.board.state!=this.userChess)return;r.NumberUtil.randomNum(0,10)<2&&(r.NumberUtil.randomNum(0,1)>0?(i=1,c.conMager.getInstance().playAudioEff("nv/nvqifeng")):(i=5,c.conMager.getInstance().playAudioEff("nv/nvhaoqi")))}else if(3==e)i=6,c.conMager.getInstance().playAudioEff("nv/nvhengaoxing");else{if(this.board.state!=this.userChess)return;r.NumberUtil.randomNum(0,100)<t&&(i=4,c.conMager.getInstance().playAudioEff("nv/nvkeyi"))}i>0&&(o.active=!0,n.active=!0,n.children[i].active=!0,o.children[i].active=!0,this.count_down.y>0&&(this.count_down.opacity=0),this.scheduleOnce(function(){a.count_down.opacity=255,n.children[i].active=!1,o.children[i].active=!1,n.active=!1,o.active=!1},2.2))}},t.prototype.gameOver=function(){if(console.log("\u6e38\u620f\u501f\u5bbf:",this.is_game_over,this.board.sum),!this.is_game_over&&(this.is_game_over=!0,this.stopTime(),3!=this.gameType&&(cc.find("Canvas/money_node").active=!0),this.userGameTime>30?this.userChess==this.board.state?(console.log("\u5bf9\u624b\u80dc\u5229"),c.GameDataStorage.gameStateData.who_sucess=4,c.conMager.getInstance().showWinNode(c.KEY.UIName.fail_view,this.node.parent,null)):(console.log("\u73a9\u5bb6\u80dc\u5229"),c.conMager.getInstance().showWinNode(c.KEY.UIName.success_view,this.node.parent,null),c.GameDataStorage.gameStateData.who_sucess=0):this.board.win==u.BLACKCHESS||this.board.win==u.WHITECHESS||this.board.win==u.GOLDCHESS?this.userChess==this.board.win?(c.GameDataStorage.gameStateData.who_sucess=0,c.conMager.getInstance().showWinNode(c.KEY.UIName.success_view,this.node.parent,null)):(c.GameDataStorage.gameStateData.who_sucess=1,this.board.win==this.ds_chess2&&(c.GameDataStorage.gameStateData.who_sucess=3),c.conMager.getInstance().showWinNode(c.KEY.UIName.fail_view,this.node.parent,null)):(c.GameDataStorage.gameStateData.who_sucess=2,c.conMager.getInstance().showWinNode(c.KEY.UIName.flat_view,this.node.parent,null)),this.board.removeListennner(),2==this.gameType&&0==c.GameDataStorage.gameStateData.who_sucess)){var e=c.GameDataStorage.gameStateData.userZhenFaName;c._pl_fun.getInstance().add_reportAnalytics("event_"+e+"_VictoryNumbers")}},t.prototype.kaiChangDongHua=function(){var e=this;c.conMager.getInstance().playAudioEff(c.KEY.audioName.pipeizhong),this.ds_headIcon.node.getComponent(cc.Button).interactable=!1,this.ds_headIcon2.node.getComponent(cc.Button).interactable=!1,this.user_headIcon.node.getComponent(cc.Button).interactable=!1,this.head_parent.active=!0,r.NumberUtil.randomNum(1,3),c.conMager.getInstance().playAudioEff(c.KEY.audioName.pipeichenggong),this.item1.active=!1,this.item2.active=!0,c.conMager.getInstance().playAudioEff(c.KEY.audioName.kaiju);var t=this.item2.getChildByName("left"),a=this.item2.getChildByName("right"),n=this.item2.getChildByName("san"),o=this.item2.getChildByName("pk");o.scale=4,o.y=150,t.active=!0,a.active=!0,t.runAction(cc.sequence(cc.delayTime(.8),cc.callFunc(function(){e.ds_headIcon.node.parent.parent.runAction(cc.fadeOut(.5)),e.ds_headIcon2.node.parent.parent.runAction(cc.fadeOut(.5)),e.user_headIcon.node.parent.parent.runAction(cc.fadeOut(.5))}),cc.fadeIn(.2),cc.delayTime(.7),cc.fadeOut(.15),cc.callFunc(function(){e.head_parent.opacity=0,e.item2.active=!1,e.caixianshou()}))),a.runAction(cc.sequence(cc.delayTime(.8),cc.fadeIn(.2),cc.delayTime(.7),cc.fadeOut(.15))),n.runAction(cc.sequence(cc.delayTime(.8),cc.fadeIn(.2),cc.delayTime(.7),cc.fadeOut(.15)))},t.prototype.jiabei_donghua=function(){var e=this;this.item3.active=!0;var t=this.item3.getChildByName("Node");t.y=1500,c.conMager.getInstance().playAudioEff(c.KEY.audioName.showpanel),cc.tween(t).to(.3,{position:cc.v3(0,0)},{easing:"backOut"}).start(),this.startTime_item3();for(var a=r.NumberUtil.randomNum(1,2),n=function(t){o.scheduleOnce(function(){var a=r.NumberUtil.randomNum(0,2),n=1;1==a?n=2:2==a&&(n=4);var o=e.ds_chess;1==t&&(o=e.ds_chess2),e.jiabeiAction(n,1,o)},a)},o=this,i=0;i<2;i++)n(i)},t.prototype.caixianshou=function(){var e=this,t=Math.floor(3*Math.random());0==t?(this.userChess=u.WHITECHESS,this.ds_chess=u.GOLDCHESS,this.ds_chess2=u.BLACKCHESS):1==t?(this.userChess=u.GOLDCHESS,this.ds_chess=u.BLACKCHESS,this.ds_chess2=u.WHITECHESS):(this.userChess=u.BLACKCHESS,this.ds_chess=u.WHITECHESS,this.ds_chess2=u.GOLDCHESS);for(var a=this.head_parent.children,n=function(e){var t="image/sanren/touxiang_";switch(a[e].name){case"ds_headIcon":t+=o.ds_chess;break;case"user_headIcon":t+=o.userChess;break;case"ds_headIcon2":t+=o.ds_chess2}cc.resources.load(t,cc.SpriteFrame,function(t,n){t&&console.error("\u5934\u50cf\u5e95\u6846\u56fe\u6ca1\u4e86",t),a[e].getChildByName("bg").getComponent(cc.Sprite).spriteFrame=n})},o=this,i=0;i<a.length;i++)n(i);this.scheduleOnce(function(){e.move_head(u.BLACKCHESS)},.1),this.show_title(this.userChess,s.shuoming,function(){e.ds_headIcon.node.parent.parent.opacity=255,e.ds_headIcon2.node.parent.parent.opacity=255,e.user_headIcon.node.parent.parent.opacity=255,e.head_parent.opacity=255,e.jiabei_donghua()})},t.prototype.show_title=function(e,t,a){var n=this;t!=s.luozi?(this.tip.active=!0,this.tip.scale=0,cc.tween(this.tip).to(.7,{scale:1},{easing:"cubicOut"}).delay(1).to(.7,{scale:0},{easing:"cubicIn"}).call(function(){a&&a(),n.tip.active=!1}).start()):c.conMager.getInstance().getPoolNode(c.KEY.poolName.tipNode,this.node,"\u8f6e\u5230\u4f60\u843d\u5b50\u4e86")},t.prototype.jiabeiAction=function(e,t,a){var n=this;this.reward_gold*=e,this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",c.GameDataStorage.gameStateData.reward=this.reward_gold,c.GameDataStorage.gameStateData.rewardmultiple*=e;var o="",i=-380;if(1==t)o=["nvbujiabei","nvjiabei","nvjiabei","nvchaojijiabei"][e-1];else{this.stopTime_item3(),this.multiple=1,o=["nanbujiabei","nanjiabei","nanbujiabei","nanchaojijiabei"][e-1];var s=this.item3.getChildByName("Node"),r=cc.callFunc(function(){n.item3.active=!1,n.user_headIcon.node.getComponent(cc.Button).interactable=!0,n.startTime(n.board.state,!0),n.board.state==n.userChess?n.board.myTurn=!0:n.board.AIXianShou(),n.node.getChildByName("setup").scale=1,n.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0});cc.tween(s).sequence(cc.tween().to(.5,{position:cc.v3(0,1500)},{easing:"backIn"}),cc.delayTime(1),r).start()}switch(c.conMager.getInstance().playAudioEff(o),a){case this.userChess:i=-380;break;case this.ds_chess:i=-310;break;case this.ds_chess2:i=-240}c.conMager.getInstance().getPoolNode(c.KEY.poolName.jiabei_sanren,this.node,cc.v2(0,i),e,a)},t.prototype.jiabei_btn=function(e,t){if(c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),!(this.multiple>0)){var a=parseInt(t);this.jiabeiAction(a,2,this.userChess)}},t.prototype.dsHeadIcon_btn=function(){this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!0},t.prototype.userHeadIcon_btn=function(){this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!0},t.prototype.biaoQing_btn=function(e,t){this.hide_userPenl_btn();var a=parseInt(t),n=this.node.getChildByName("user_biaoqing");n.active=!0,n.children[a].active=!0;var o=this.node.getChildByName("user_duihua");o.active=!0,o.children[a].active=!0,c.conMager.getInstance().playAudioEff("nan/"+this.musicNames[a-1]),this.scheduleOnce(function(){n.active=!1,n.children[a].active=!1,o.active=!1,o.children[a].active=!1},2.2)},t.prototype.hide_userPenl_btn=function(){this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!1},t.prototype.hide_dsPenl_btn=function(){this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!1},t.prototype.return_btn=function(){var e=this;this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),3!=this.gameType?c.conMager.getInstance().getPoolNode(c.KEY.poolName.stop_panel,this.node,{callBack:function(t){2==t&&e.renshu()}}):this.onClose(1)},t.prototype.luozizhong_action=function(e,t){e.active=!0,e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.getComponent(cc.Label).string=t}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string=e.getComponent(cc.Label).string+"\u843d"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string=e.getComponent(cc.Label).string+"\u5b50"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string=e.getComponent(cc.Label).string+"\u4e2d"}),cc.delayTime(.6))))},t.prototype.startTime=function(e,t){var a=this;this.userGameTime=0,this.count_down.active=!0;var n=this.node.getChildByName("luozizhong");n.stopAllActions(),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+(30-this.userGameTime);var o=this.node.getChildByName("heizi"),i=this.node.getChildByName("baizi"),r=this.node.getChildByName("jinzi");o.active=!1,i.active=!1,r.active=!1,t||(e=this.return_next_state(e));var c=this.count_down.getChildByName("jiabeidi").getComponent(cc.Sprite),h="image/sanren/daojishi_zi_"+e;cc.resources.load(h,cc.SpriteFrame,function(e,t){e?console.error("\u5012\u8ba1\u65f6\u80cc\u666f\u56fe\u6ca1\u62ff\u5230",e):c.spriteFrame=t}),this.move_head(e);var l="";switch(e){case u.BLACKCHESS:l="\u9ed1\u5b50",o.active=!0,this.count_down.getChildByName("time").color=cc.color(190,255,132,255);break;case u.GOLDCHESS:l="\u91d1\u5b50",r.active=!0,this.count_down.getChildByName("time").color=cc.color(163,14,14,255);break;case u.WHITECHESS:l="\u767d\u5b50",i.active=!0,this.count_down.getChildByName("time").color=cc.color(14,133,163,255)}e==u.BLACKCHESS?n.color=cc.color(51,51,51):e==u.GOLDCHESS?n.color=cc.color(255,255,0):e==u.WHITECHESS?n.color=cc.color(204,204,204):console.error("\u843d\u5b50\u4e2d\u5b57\u4f53\u51fa\u9519"),this.luozizhong_action(n,l),this.schedule(this.updateTime,1),e==this.userChess&&this.scheduleOnce(function(){2==a.board.win&&a.show_title(e,s.luozi)},.01)},t.prototype.move_head=function(e){for(var t=[this.userChess,this.ds_chess,this.ds_chess2],a=[this.user_headIcon.node.parent.parent,this.ds_headIcon.node.parent.parent,this.ds_headIcon2.node.parent.parent],n=0;n<t.length;n++){var o=null,i=cc.color(125,125,125);switch(t[n]){case e:o=cc.v3(0,70),i=cc.color(255,255,255),a[n].zIndex=3;break;case this.return_next_state(e):o=cc.v3(-60,-35),a[n].zIndex=2;break;case this.return_next_state(this.return_next_state(e)):o=cc.v3(60,-35),a[n].zIndex=1}cc.tween(a[n]).parallel(cc.tween(a[n]).to(.5,{position:o}),cc.tween(a[n]).to(.5,{color:i})).start()}},t.prototype.updateTime=function(){if(this.TimeDel||(this.userGameTime+=1),!this.is_game_over)if(this.userGameTime>this.max_gameTime)this.gameOver();else{var e=this.max_gameTime-this.userGameTime,t=e+"";e<10&&(t="0"+e),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+t,e<15&&(this.count_down.getChildByName("time").color=cc.color(255,0,0),this.TimeDel||c.conMager.getInstance().playAudioEff(c.KEY.audioName.shijian)),this.TimeDel||(12==this.userGameTime?this.ai_duihua(2,5):21==this.userGameTime?this.ai_duihua(2,20):26==this.userGameTime&&this.ai_duihua(2,80))}},t.prototype.stopTime=function(){this.unschedule(this.updateTime),this.count_down.active=!1,this.node.getChildByName("luozizhong").stopAllActions(),this.node.getChildByName("luozizhong").active=!1},t.prototype.startTime_item3=function(){this.count_time_itm3=10,this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label).string=this.count_time_itm3+"s",this.schedule(this.updateTime_item3,1)},t.prototype.updateTime_item3=function(){this.count_time_itm3-=1;var e=this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label);e.string=this.count_time_itm3+"s",this.count_time_itm3<=5&&(e.node.color=cc.color(255,0,0)),this.count_time_itm3<=0&&(e.node.active=!1,c.conMager.getInstance().playAudioEff("nanbujiabei"),this.jiabeiAction(1,2,this.userChess),this.stopTime_item3())},t.prototype.stopTime_item3=function(){this.unschedule(this.updateTime_item3)},t.prototype.renshu=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,this.board.win=4,c.GameDataStorage.gameStateData.who_sucess=4,c.conMager.getInstance().showWinNode(c.KEY.UIName.fail_view,this.node.parent,null))},t.prototype.ai_renshu=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,c.GameDataStorage.gameStateData.who_sucess=0,c.conMager.getInstance().showWinNode(c.KEY.UIName.success_view,this.node.parent,null))},t.prototype.ai_diaoxian=function(){this.is_game_over||(p.commonFunction.updateSprite("head_icon/diaoxian",this.ds_headIcon.node),this.ds_headIcon.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeIn(.4)))),console.log("\u89e6\u53d1\u6389\u7ebf"))},t.prototype.ai_shangxian=function(){this.is_game_over||(p.commonFunction.updateSprite("head_icon/"+this.ds_headIconIndex,this.ds_headIcon.node),this.ds_headIcon.node.opacity=255,this.ds_headIcon.node.stopAllActions(),console.log("\u89e6\u53d1\u4e0a\u7ebf"))},t.prototype.pingju=function(){this.is_game_over||(this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,c.GameDataStorage.gameStateData.who_sucess=2,c.conMager.getInstance().showWinNode(c.KEY.UIName.flat_view,this.node.parent,null))},t.prototype.qiuhe=function(){},t.prototype.shubiao=function(e){this.shubiao_node.active=e},t.prototype.huiqi=function(){},t.prototype.update=function(){},i([f(d.GameBoard_sanren)],t.prototype,"board",void 0),i([f(cc.Prefab)],t.prototype,"whiteChess",void 0),i([f(cc.Prefab)],t.prototype,"blackChess",void 0),i([f({type:cc.Prefab,tooltip:"\u91d1\u8272\u68cb\u5b50"})],t.prototype,"goldChess",void 0),i([f(cc.Node)],t.prototype,"quan",void 0),i([f(cc.Node)],t.prototype,"hongDian",void 0),i([f({type:cc.Node,tooltip:"\u5934\u50cf\u8f6c\u76d8"})],t.prototype,"head_parent",void 0),i([f(cc.Sprite)],t.prototype,"ds_headIcon",void 0),i([f(cc.Sprite)],t.prototype,"ds_headIcon2",void 0),i([f(cc.Sprite)],t.prototype,"user_headIcon",void 0),i([f({type:cc.Node,tooltip:"\u63d0\u793a\u6846"})],t.prototype,"tip",void 0),i([m],t)}(c.winRootNode);a.default=y,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../classCon/configSurface":"configSurface","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform","../common/setup_sanren":"setup_sanren","../wuziqi/Piece":"Piece","../wuziqi/sanren/GameBoard_sanren":"GameBoard_sanren","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],scoring_view:[function(e,t,a){"use strict";cc._RF.push(t,"000fbMx9dpIv78RwonYtOT3","scoring_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(t){i(t)}}function r(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(s,r)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var a,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(e){return function(t){return c([e,t])}}function c(i){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(r){i=[6,r],n=0}finally{a=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0});var c=e("../../pvp/script/global"),h=e("../../SSSGF/dataController/DATA"),u=e("../../SSSGF/ssscgf"),l=e("../../utils/commonFunction"),d=cc._decorator,p=d.ccclass,g=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.count=null,t.ds_name=null,t.wj_name=null,t.ds_icon=null,t.wj_icon=null,t.content=null,t.item=null,t.scrollView=null,t.zi=null,t.close_btn=null,t.again_btn=null,t.data=new Map,t.svBBoxRect=null,t}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(e){var t=this.node.getChildByName("Node");this.scaleBigShow(t,cc.v3(0,0),null),e[0]&&(this.data=e[0].data,this.count.string=e[0].count>0?"+"+e[0].count:e[0].count,this.framingLoad(this.data.size),this.again_btn.y=-cc.winSize.height,this.close_btn.y=-cc.winSize.height,e[0].isOver?(this.again_btn.active=!0,this.close_btn.active=!0,cc.tween(this.close_btn).delay(.3).to(.3,{y:-506},{easing:"backOut"}).start(),cc.tween(this.again_btn).delay(.4).to(.3,{y:-506},{easing:"backOut"}).start(),this.zi.active=!1):(this.again_btn.active=!1,this.close_btn.active=!1,this.zi.active=!0,this.node.getChildByName("mask").on(cc.Node.EventType.TOUCH_END,this.onClose,this))),this.ds_name.string=u.GameDataStorage.gameStateData.ds_name,this.wj_name.string=u.GameDataStorage.getUser().userData.gameName;var a="head_icon/"+u.GameDataStorage.gameStateData.ds_headIconIndex;l.commonFunction.updateSprite(a,this.ds_icon),"null"!=u.GameDataStorage.getUser().userData.headIconUrl&&l.commonFunction.updateHttpSprite(u.GameDataStorage.getUser().userData.headIconUrl,this.wj_icon),this.scrollView.node.on("scrolling",this._onScrollingDrawCallOpt,this)},t.prototype.onClose=function(){var e=this.node.getChildByName("Node");this.scaleSmallHide(e,cc.v3(0,0),function(){u.conMager.getInstance().hideWinNode(u.KEY.UIName.scoring_view)})},t.prototype.onClear=function(){},t.prototype.addItem=function(e){var t=cc.instantiate(this.item);t.active=!0,t.getChildByName("lianzhuName").getComponent(cc.Label).string=this.data.get(e).name,t.getChildByName("ds_num").getComponent(cc.Label).string=this.data.get(e).ds_num+"",t.getChildByName("wj_num").getComponent(cc.Label).string=this.data.get(e).wj_num+"",this.content.addChild(t)},t.prototype.framingLoad=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,this.executePreFrame(this._getItemGenerator(e),.1)];case 1:return t.sent(),[2]}})})},t.prototype._getItemGenerator=function(e){var t;return r(this,function(a){switch(a.label){case 0:t=0,a.label=1;case 1:return t<e?[4,this.addItem(t)]:[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}})},t.prototype.executePreFrame=function(e,t){var a=this;return new Promise(function(){var n=e,o=function(){for(var e=(new Date).getTime(),i=n.next();;i=n.next()){if(null==i||i.done)return a.svBBoxRect=a.getRect(),void a._onScrollingDrawCallOpt();if((new Date).getTime()-e>t)return void a.scheduleOnce(function(){o()})}};o()})},t.prototype._onScrollingDrawCallOpt=function(){},t.prototype.getRect=function(){var e=this.scrollView.node.parent.convertToWorldSpaceAR(cc.v2(this.scrollView.node.x-this.scrollView.node.anchorX*this.scrollView.node.width,this.scrollView.node.y-this.scrollView.node.anchorY*this.scrollView.node.height));return cc.rect(e.x,e.y,this.scrollView.node.width,this.scrollView.node.height)},t.prototype.btn_close=function(){u.conMager.getInstance().playAudioEff(u.KEY.audioName.btn),u.conMager.getInstance().hideWinNode(u.KEY.UIName.xuezhandaodi_game_view),this.onClose(2),u.conMager.getInstance().showWinNode(u.KEY.UIName.select_saichang_node,cc.find("Canvas"),h.game_type.xuezhandaodi,u.KEY.UIName.xuezhandaodi_game_view)},t.prototype.btn_again=function(){var e=this;u._pl_fun.getInstance().add_reportAnalytics("event_XueZhanDaoDi_StartAgain_ClickNumbers"),u.conMager.getInstance().playAudioEff(u.KEY.audioName.btn),u.conMager.getInstance().hideWinNode(u.KEY.UIName.xuezhandaodi_game_view),u.GameDataStorage.getUser().userData.money>=u.GameDataStorage.gameStateData.admission_gold?u.conMager.getInstance().getPoolNode(u.KEY.poolName.item1,null,{callBack:function(){u.conMager.getInstance().showWinNode(u.KEY.UIName.xuezhandaodi_game_view,cc.find("Canvas"),{reward_gold:u.GameDataStorage.gameStateData.reward_gold,gameType:u.GameDataStorage.gameStateData.gameType,RightRate:c.default.RightRate}),e.onClose(2)}}):u.conMager.getInstance().getPoolNode(u.KEY.poolName.gold_buzu_panel,this.node,null)},i([g(cc.Label)],t.prototype,"count",void 0),i([g(cc.Label)],t.prototype,"ds_name",void 0),i([g(cc.Label)],t.prototype,"wj_name",void 0),i([g(cc.Node)],t.prototype,"ds_icon",void 0),i([g(cc.Node)],t.prototype,"wj_icon",void 0),i([g(cc.Node)],t.prototype,"content",void 0),i([g(cc.Node)],t.prototype,"item",void 0),i([g(cc.ScrollView)],t.prototype,"scrollView",void 0),i([g(cc.Node)],t.prototype,"zi",void 0),i([g(cc.Node)],t.prototype,"close_btn",void 0),i([g(cc.Node)],t.prototype,"again_btn",void 0),i([p],t)}(u.winRootNode);a.default=_,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../pvp/script/global":"global","../../utils/commonFunction":"commonFunction"}],select_saichang_node:[function(e,t,a){"use strict";cc._RF.push(t,"f590baH+C9Av4uzRERimrWS","select_saichang_node");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/platform"),c=e("../../utils/as_util"),h=e("../../SSSGF/dataController/DATA"),u=e("../../utils/commonFunction"),l=e("../../pvp/script/global"),d=cc._decorator,p=d.ccclass,g=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.game_type=null,t.window_name=null,t.mask1=null,t.title=null,t.content=null,t.isBtn=!0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;this.game_type=e[0],this.window_name=e[1],this.isBtn=!1,this.node.active=!0,this.node.opacity=0,this.mask1.active=!0,this.node.runAction(cc.sequence(cc.fadeIn(.6),cc.callFunc(function(){t.isBtn=!0,t.mask1.active=!1}))),this.node.getChildByName("guize").active=!1;var a=this.game_type;if(u.commonFunction.updateSprite("title_icon/title_"+a,this.title),this.game_type==h.game_type.dazhao)for(var n=0;n<this.content.childrenCount;n++)this.content.children[n].getChildByName("num").getComponent(cc.Label).string=""+2*(n+1);else if(this.game_type==h.game_type.xuezhandaodi){var o=["xinshou","putong","dingji"];for(n=0;n<this.content.childrenCount;n++){var i=this.content.children[n];n>=3?i.active=!1:(i.getChildByName("num").getComponent(cc.Label).string="",u.commonFunction.updateSprite("xuezhan/"+o[n],i.getChildByName("bg")))}s.GameDataStorage.gameStateData.open_xue_zhan||(this.guize_btn(),s.GameDataStorage.gameStateData.open_xue_zhan=!0),this.node.getChildByName("guize").active=!0}},t.prototype.onClose=function(e){var t=this.game_type;1==e&&(t!=h.game_type.jingdian&&t!=h.game_type.dazhao&&t!=h.game_type.sanren&&t!=h.game_type.xuezhandaodi||s.conMager.getInstance().showWinNode(s.KEY.UIName.slectGmae,null,{gameType:t})),this.node.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){s.conMager.getInstance().hideWinNode(s.KEY.UIName.select_saichang_node)})))},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){s.conMager.getInstance()._msgAtion.on("matchFinish",this.matchFinish,this)},t.prototype.matchFinish=function(){this.onClose(2)},t.prototype.isBtn_fun=function(){var e=this;this.isBtn=!1,this.scheduleOnce(function(){e.isBtn=!0},1)},t.prototype.jingdian_slect_btn=function(e,t){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.isBtn&&(this.isBtn_fun(),this.openGame(t),s.GameDataStorage.gameStateData.gameType==h.game_type.jingdian?s._pl_fun.getInstance().add_reportAnalytics("event_JingDianMoShiButtonClickNumbers"):s.GameDataStorage.gameStateData.gameType==h.game_type.dazhao?s._pl_fun.getInstance().add_reportAnalytics("event_DaZhaoMoShiButtonClickNumbers"):s.GameDataStorage.gameStateData.gameType==h.game_type.danji_duiyi?s._pl_fun.getInstance().add_reportAnalytics("event_HaoYouDuiYiMoShiButtonClickNumbers"):s.GameDataStorage.gameStateData.gameType==h.game_type.xuezhandaodi&&s._pl_fun.getInstance().add_reportAnalytics("event_XueZhanDaoDiButtonClickNumbers"))},t.prototype.judgeGold=function(e){var t=0,a=0;return this.game_type==h.game_type.danji_duiyi?(t=0,a=0):this.game_type==h.game_type.jingdian?1==e?(t=10,a=20):2==e?(t=20,a=30):3==e?(t=80,a=40):4==e?(t=300,a=50):5==e&&(t=800,a=60):this.game_type==h.game_type.dazhao?1==e?(t=10,a=2):2==e?(t=20,a=4):3==e?(t=80,a=6):4==e?(t=300,a=8):5==e&&(t=800,a=10):this.game_type==h.game_type.sanren?1==e?(t=10,a=20):2==e?(t=20,a=30):3==e?(t=80,a=40):4==e?(t=300,a=50):5==e&&(t=800,a=60):this.game_type==h.game_type.xuezhandaodi?1==e?(t=100,a=10):2==e?(t=500,a=100):3==e&&(t=100,a=1e3):1==e?(t=10,a=20):2==e?(t=20,a=30):3==e?(t=80,a=40):4==e?(t=300,a=50):5==e&&(t=800,a=60),{num1:t,num2:a}},t.prototype.return_btn=function(){this.disableClick(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1),r.platform.now_platform!=r.platform_type.is_tt&&c.as_util.back_ui()},t.prototype.guize_btn=function(){this.disableClick(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var e=this.node.getChildByName("guize_view");e.active=!0,this.scaleBigShow(e.getChildByName("Node"),cc.v3(0,0),null)},t.prototype.close_guize_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var e=this.node.getChildByName("guize_view");this.scaleSmallHide(e.getChildByName("Node"),cc.v3(0,0),function(){e.active=!1})},t.prototype.openGame=function(e){var t=this,a=(s.GameDataStorage.gameStateData.gameType,parseInt(e));l.default.selectType=this.game_type,l.default.selectIndex=a-1;var n=this.judgeGold(a);l.default.gameMoeny=n.num2,l.default.RightRate=a;var o=s.GameDataStorage.getUser().userData.money;if(s.GameDataStorage.gameStateData.admission_gold=n.num1,o>=n.num1){var i=this;console.log("\u8981\u8fdb\u5165\u7684\u5730\u65b9",i.window_name,i.game_type),this.node.opacity=0,s.conMager.getInstance().getPoolNode(s.KEY.poolName.item1,null,{callBack:function(){console.log("iiiiiiiiiiiii",i.window_name,i.game_type),s.conMager.getInstance().showWinNode(i.window_name,cc.find("Canvas"),{reward_gold:n.num2,gameType:i.game_type,RightRate:a}),t.onClose(2)}})}else s.conMager.getInstance().getPoolNode(s.KEY.poolName.gold_buzu_panel,this.node,null)},t.prototype.onBtnMatch=function(){var e=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.mask1.active=!0,this.mask1.opacity=200,this.node.getChildByName("pro").active=!0,this.node.getChildByName("pro").getComponent(cc.ProgressBar).progress=0,cc.director.preloadScene("pvpScene",function(t,a){console.log("--------------",t,a),e.node.getChildByName("pro").getComponent(cc.ProgressBar).progress=t/a},function(){e.node.getChildByName("pro").active=!1,cc.director.loadScene("pvpScene")})},i([g(cc.Node)],t.prototype,"mask1",void 0),i([g(cc.Node)],t.prototype,"title",void 0),i([g(cc.Node)],t.prototype,"content",void 0),i([p],t)}(s.winRootNode);a.default=_,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../pvp/script/global":"global","../../utils/as_util":"as_util","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform"}],settings_panel:[function(e,t,a){"use strict";cc._RF.push(t,"973b9lmVd9OqZioo8wDtIOl","settings_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/as_util"),c=e("../../utils/platform"),h=cc._decorator,u=h.ccclass,l=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.head_icon=null,t.bgm_btn=null,t.effect_btn=null,t.clickDidNum=0,t.timer=-1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){var e=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.showpanel),this.node.active=!0;var t=this.node.getChildByName("Node");this.scaleBigShow(t,cc.v3(0,0),null);var a=s.GameDataStorage.gameStateData.isEffect_Open,n=s.GameDataStorage.gameStateData.isBgm_Open;this.effect_btn.getChildByName("open").active=a,this.bgm_btn.getChildByName("open").active=n;var o=t.getChildByName("did_btn");o.active=!1,c.platform.now_platform!=c.platform_type.is_tt&&"Ohayoo"==r.as_util.sendJavaGetChannel()&&(o.active=!0),c.platform.now_platform!=c.platform_type.is_tt&&("Ohayoo"==r.as_util.sendJavaGetChannel()?(r.as_util.createTextBtn(t,{str:"\u300a\u7528\u6237\u534f\u8bae\u300b",pos:cc.v2(-110,-330)},function(){console.log("\u7528\u6237\u534f\u8bae"),r.as_util.open("https://lf3-cdn-tos.draftstatic.com/obj/ies-hotsoon-draft/88888888/wanning2.html")}),r.as_util.createTextBtn(t,{str:"\u300a\u9690\u79c1\u8bbe\u7f6e\u300b",pos:cc.v2(110,-330)},function(){console.log("\u9690\u79c1\u8bbe\u7f6e"),s.conMager.getInstance().getPoolNode(s.KEY.poolName.yinsi_setting,e.node)})):(r.as_util.createTextBtn(t,{str:"\u300a\u7528\u6237\u534f\u8bae\u300b",pos:cc.v2(-110,-330)},function(){console.log("\u7528\u6237\u534f\u8bae"),r.as_util.open("https://game-1258575882.cos.ap-guangzhou.myqcloud.com/apks/new_youwan/yonghuxieyi.html")}),r.as_util.createTextBtn(t,{str:"\u300a\u9690\u79c1\u534f\u8bae\u300b",pos:cc.v2(110,-330)},function(){console.log("\u9690\u79c1\u534f\u8bae"),r.as_util.open("https://game-1258575882.cos.ap-guangzhou.myqcloud.com/apks/new_youwan/yinsitiaokuan.html")})),r.as_util.hide_banner())},t.prototype.onClose=function(){var e=this,t=this.node.getChildByName("Node");this.scaleSmallHide(t,cc.v3(0,0),function(){s.conMager.getInstance().putPoolNode(e.node.name,e.node)}),c.platform.now_platform!=c.platform_type.is_tt&&r.as_util.show_banner()},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.quxiao_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1)},t.prototype.renwu_btn=function(){console.log("\u6e05\u7406\u7f13\u5b58"),cc.sys.localStorage.clear(),s.GameDataStorage.initData()},t.prototype.bgm_btn_fun=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var e=s.GameDataStorage.gameStateData.isBgm_Open;this.bgm_btn.getChildByName("open").active=!e,s.GameDataStorage.gameStateData.isBgm_Open=!e,e?s.conMager.getInstance().stopAllAudioEff():s.conMager.getInstance().playBGM(s.KEY.audioName.bgm)},t.prototype.effect_btn_fun=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var e=s.GameDataStorage.gameStateData.isEffect_Open;this.effect_btn.getChildByName("open").active=!e,s.GameDataStorage.gameStateData.isEffect_Open=!e},t.prototype.did_btn_fun=function(){var e=this;if(s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.clickDidNum++,this.clickDidNum>=5){this.clickDidNum=0;var t=r.as_util.sendJavaGetDeviceId();t&&s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,t)}-1!=this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.clean()},3e3)},t.prototype.clean=function(){this.clickDidNum=0,clearTimeout(this.timer),this.timer=-1},i([l(cc.Node)],t.prototype,"bgm_btn",void 0),i([l(cc.Node)],t.prototype,"effect_btn",void 0),i([u],t)}(s.winRootNode);a.default=d,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../utils/as_util":"as_util","../../utils/platform":"platform"}],setup_sanren:[function(e,t,a){"use strict";cc._RF.push(t,"efca0Oz0A9Hz6tnnBrdyAgD","setup_sanren");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../KEY"),r=e("../../SSSGF/ssscgf"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zhankai=null,t.huishou=null,t.time=60,t.heqi_judge=!0,t.huiqi_num=3,t.heqi_num=3,t.huiqi_judge=!0,t.open_judge=!0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){this.node.active=!0,this.node.scale=0,this.init_ui(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1.2),cc.scaleTo(.1,1)))},t.prototype.onClose=function(){},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){r.conMager.getInstance()._msgAtion.on("openHuiqi",this.openHuiqi,this),r.conMager.getInstance()._msgAtion.on("closeHuiqi",this.closeHuiqi,this),r.conMager.getInstance()._msgAtion.on("closeAllSetBtn",this.closeAllSetBtn,this),r.conMager.getInstance()._msgAtion.on("closeSet",this.closeSet,this),r.conMager.getInstance()._msgAtion.on("openSet",this.openSet,this)},t.prototype.closeSet=function(){this.zhankai.getComponent(cc.Button).interactable=!1},t.prototype.openSet=function(){this.zhankai.getComponent(cc.Button).interactable=!0},t.prototype.init_ui=function(){},t.prototype.start=function(){},t.prototype.closeAllSetBtn=function(){var e=this.huishou.getChildByName("huiqi"),t=this.huishou.getChildByName("qiuhe"),a=this.huishou.getChildByName("renshu"),n=this.huishou.getChildByName("shubiao");e.getComponent(cc.Button).interactable=!1,t.getComponent(cc.Button).interactable=!1,a.getComponent(cc.Button).interactable=!1,n.getComponent(cc.Button).interactable=!1},t.prototype.open_btn=function(){var e=this;r.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.open_judge?cc.tween(this.huishou).to(.35,{scale:1.1,opacity:255},{easing:"backOut"}).call(function(){e.node.getChildByName("mask").active=!0,e.open_judge=!1}).start():this.close_btn()},t.prototype.close_btn=function(){var e=this;cc.tween(this.huishou).to(.35,{scale:0,opacity:0},{easing:"backIn"}).call(function(){e.node.getChildByName("mask").active=!1,e.open_judge=!0}).start()},t.prototype.huiqi_btn=function(){var e=this;if(r.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),!(this.huiqi_num<=0)){var t=r.GameDataStorage.gameStateData.gameType;if(6==t)return this.huiqi_num=3,r.conMager.getInstance()._msgAtion.emit("startTimeDel"),void r.conMager.getInstance()._msgAtion.emit("user_huiqi_fun");r.GameDataStorage.getUser().userData.money<100&&3!=t?r.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u52fe\u7389\u4e0d\u8db3!"):3==t?r.conMager.getInstance()._msgAtion.emit("user_huiqi_fun"):(this.close_btn(),r.conMager.getInstance().getPoolNode(s.KEY.poolName.heqi_panel,this.node.parent,{type:"user_huiqi",callBack:function(t){1!=t&&(e.huiqi_num-=1,e.huishou.getChildByName("huiqi").getChildByName("num").getComponent(cc.Label).string=e.huiqi_num+"",e.huiqi_num<=0&&e.closeHuiqi())}}))}},t.prototype.renshu_btn=function(){this.close_btn(),r.conMager.getInstance()._msgAtion.emit("renshu")},t.prototype.qiuhe_btn=function(){var e=this;r.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.heqi_num<=0||(this.heqi_judge?(this.close_btn(),r.conMager.getInstance().showWinNode(s.KEY.UIName.heqi_sanren_panel,this.node.parent,{type:"user_qiuhe",callBack:function(){e.closeHeqi(),e.heqi_judge=!1}})):r.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node,this.time+"\u79d2\u540e\u624d\u80fd\u518d\u6b21\u6c42\u548c"))},t.prototype.shubiao_btn=function(e){r.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var t=!0,a=e.target.getChildByName("gou");a.active&&(t=!1),a.active=t,r.conMager.getInstance()._msgAtion.emit("shubiao",t)},t.prototype.canju_conglai_btn=function(){r.conMager.getInstance()._msgAtion.emit("conglai")},t.prototype.openHuiqi=function(){var e=this.huishou.getChildByName("huiqi");this.huiqi_num<=0||(e.getComponent(cc.Button).interactable=!0,e.color=cc.color(255,255,255),e.getChildByName("cha").active=!1)},t.prototype.closeHuiqi=function(){var e=this.huishou.getChildByName("huiqi");e.getComponent(cc.Button).interactable=!1,e.getChildByName("cha").active=!0},t.prototype.openHeqi=function(){this.time=60,this.heqi_judge=!0;var e=this.huishou.getChildByName("qiuhe");e.color=cc.color(255,255,255),e.getChildByName("cha").active=!1},t.prototype.closeHeqi=function(){this.heqi_num-=1;var e=this.huishou.getChildByName("qiuhe");e.getChildByName("num").getComponent(cc.Label).string=this.heqi_num+"",e.getChildByName("cha").active=!0,this.heqi_num>0?this.startTime():e.getComponent(cc.Button).interactable=!1},t.prototype.startTime=function(){console.error("\u5f00\u59cb\u5012\u8ba1\u65f6"),this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){this.time-=1,console.log("heqinun"),this.time<=0&&this.heqi_num>0&&this.openHeqi()},t.prototype.stopTime=function(){this.unschedule(this.updateTime)},i([u(cc.Node)],t.prototype,"zhankai",void 0),i([u(cc.Node)],t.prototype,"huishou",void 0),i([h],t)}(r.winRootNode);a.default=l,cc._RF.pop()},{"../../KEY":"KEY","../../SSSGF/ssscgf":"ssscgf"}],setup:[function(e,t,a){"use strict";cc._RF.push(t,"8b539tAdPdCYr1vcxz7iIxU","setup");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../KEY"),r=e("../../SSSGF/dataController/DATA"),c=e("../../SSSGF/ssscgf"),h=cc._decorator,u=h.ccclass,l=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zhankai=null,t.huishou=null,t.time=60,t.heqi_judge=!0,t.huiqi_num=3,t.heqi_num=3,t.huiqi_judge=!0,t.open_judge=!0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){this.node.active=!0,this.node.scale=0,this.init_ui(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1.2),cc.scaleTo(.1,1)))},t.prototype.onClose=function(){},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){c.conMager.getInstance()._msgAtion.on("openHuiqi",this.openHuiqi,this),c.conMager.getInstance()._msgAtion.on("closeHuiqi",this.closeHuiqi,this),c.conMager.getInstance()._msgAtion.on("closeAllSetBtn",this.closeAllSetBtn,this),c.conMager.getInstance()._msgAtion.on("closeSet",this.closeSet,this),c.conMager.getInstance()._msgAtion.on("openSet",this.openSet,this)},t.prototype.closeSet=function(){this.zhankai.getComponent(cc.Button).interactable=!1},t.prototype.openSet=function(){this.zhankai.getComponent(cc.Button).interactable=!0},t.prototype.init_ui=function(){var e=c.GameDataStorage.gameStateData.gameType;console.log("\u7a7a\u7684\u54af",e);var t=this.huishou.getChildByName("huiqi"),a=this.huishou.getChildByName("qiuhe"),n=this.huishou.getChildByName("renshu");this.huishou.getChildByName("shubiao"),e==r.game_type.danji_duiyi?(this.huishou.getChildByName("shubiao").getChildByName("gou").active=!0,a.getComponent(cc.Button).interactable=!1,a.getChildByName("cha").active=!0,t.getChildByName("num").active=!1,a.getChildByName("num").active=!1,n.getComponent(cc.Button).interactable=!1,n.getChildByName("cha").active=!0):e==r.game_type.dazhao?(t.getComponent(cc.Button).interactable=!1,t.getChildByName("cha").active=!0,t.getChildByName("num").active=!1):e==r.game_type.luandou_miwu||e==r.game_type.luandou_blxj||e==r.game_type.luandou_tslh||e==r.game_type.luandou_hbdd||e==r.game_type.luandou_jxmc||e==r.game_type.luandou_gssk?(t.getChildByName("num").active=!1,t.getChildByName("cha").active=!0):e==r.game_type.canju?(n.active=!1,a.active=!1,t.getChildByName("num").active=!1,this.huishou.getChildByName("conglai").active=!0):e==r.game_type.xuezhandaodi&&(t.getComponent(cc.Button).interactable=!1,t.getChildByName("cha").active=!0,a.getComponent(cc.Button).interactable=!1,a.getChildByName("cha").active=!0)},t.prototype.start=function(){},t.prototype.closeAllSetBtn=function(){var e=this.huishou.getChildByName("huiqi"),t=this.huishou.getChildByName("qiuhe"),a=this.huishou.getChildByName("renshu"),n=this.huishou.getChildByName("shubiao");e.getComponent(cc.Button).interactable=!1,t.getComponent(cc.Button).interactable=!1,a.getComponent(cc.Button).interactable=!1,n.getComponent(cc.Button).interactable=!1},t.prototype.open_btn=function(){var e=this;c.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.open_judge?cc.tween(this.huishou).to(.35,{scale:1.1,opacity:255},{easing:"backOut"}).call(function(){e.node.getChildByName("mask").active=!0,e.open_judge=!1}).start():this.close_btn()},t.prototype.close_btn=function(){var e=this;cc.tween(this.huishou).to(.35,{scale:0,opacity:0},{easing:"backIn"}).call(function(){e.node.getChildByName("mask").active=!1,e.open_judge=!0}).start()},t.prototype.huiqi_btn=function(){var e=this;if(c.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),!(this.huiqi_num<=0)){var t=c.GameDataStorage.gameStateData.gameType;if(t==r.game_type.canju)return this.huiqi_num=3,c.conMager.getInstance()._msgAtion.emit("startTimeDel"),void c.conMager.getInstance()._msgAtion.emit("user_huiqi_fun");c.GameDataStorage.getUser().userData.money<100&&3!=t?c.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u52fe\u7389\u4e0d\u8db3!"):3==t?c.conMager.getInstance()._msgAtion.emit("user_huiqi_fun"):(this.close_btn(),c.conMager.getInstance().getPoolNode(s.KEY.poolName.heqi_panel,this.node.parent,{type:"user_huiqi",callBack:function(t){1!=t&&(e.huiqi_num-=1,e.huishou.getChildByName("huiqi").getChildByName("num").getComponent(cc.Label).string=e.huiqi_num+"",e.huiqi_num<=0&&e.closeHuiqi())}}))}},t.prototype.renshu_btn=function(){this.close_btn(),c.conMager.getInstance()._msgAtion.emit("renshu")},t.prototype.qiuhe_btn=function(){var e=this;c.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.heqi_num<=0||(this.heqi_judge?(this.close_btn(),c.conMager.getInstance().getPoolNode(s.KEY.poolName.heqi_panel,this.node.parent,{type:"user_qiuhe",callBack:function(t){1!=t&&(e.closeHeqi(),e.heqi_judge=!1)}})):c.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node,this.time+"\u79d2\u540e\u624d\u80fd\u518d\u6b21\u6c42\u548c"))},t.prototype.shubiao_btn=function(e){c.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var t=!0,a=e.target.getChildByName("gou");a.active&&(t=!1),a.active=t,c.conMager.getInstance()._msgAtion.emit("shubiao",t)},t.prototype.canju_conglai_btn=function(){c.conMager.getInstance()._msgAtion.emit("conglai")},t.prototype.openHuiqi=function(){var e=this.huishou.getChildByName("huiqi");this.huiqi_num<=0||(e.getComponent(cc.Button).interactable=!0,e.color=cc.color(255,255,255),e.getChildByName("cha").active=!1)},t.prototype.closeHuiqi=function(){var e=this.huishou.getChildByName("huiqi");e.getComponent(cc.Button).interactable=!1,e.getChildByName("cha").active=!0},t.prototype.openHeqi=function(){this.time=60,this.heqi_judge=!0;var e=this.huishou.getChildByName("qiuhe");e.color=cc.color(255,255,255),e.getChildByName("cha").active=!1},t.prototype.closeHeqi=function(){this.heqi_num-=1;var e=this.huishou.getChildByName("qiuhe");e.getChildByName("num").getComponent(cc.Label).string=this.heqi_num+"",e.getChildByName("cha").active=!0,this.heqi_num>0?this.startTime():e.getComponent(cc.Button).interactable=!1},t.prototype.startTime=function(){this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){this.time-=1,console.log("heqinun"),this.time<=0&&this.heqi_num>0&&this.openHeqi()},t.prototype.stopTime=function(){this.unschedule(this.updateTime)},i([l(cc.Node)],t.prototype,"zhankai",void 0),i([l(cc.Node)],t.prototype,"huishou",void 0),i([u],t)}(c.winRootNode);a.default=d,cc._RF.pop()},{"../../KEY":"KEY","../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf"}],shareEvent:[function(e,t,a){"use strict";cc._RF.push(t,"8477eUzptVMpqqyam6SGJtn","shareEvent"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("../ssscgf"),o=function(){function e(){this.onShare=function(){cc.sys.platform===cc.sys.BYTEDANCE_GAME&&(tt.showShareMenu({withShareTicket:!0}),tt.aldShareAppMessage({title:"\u770b\u6211\u4e07\u5b81\u9635\u6cd5\u4e00\u62db\u7edd\u6740",imageUrl:"./other/share.jpg"}))},this.judgeReward=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME&&(tt.showShareMenu({withShareTicket:!1}),tt.onShareAppMessage(function(){return{title:"\u770b\u6211\u4e07\u5b81\u9635\u6cd5\u4e00\u62db\u7edd\u6740",imageUrl:"./other/share.jpg",query:"k1=v1&ke=v2"}}),tt.onShow(function(e){console.log("\u542f\u52a8\u53c2\u6570\u5982\u4e0b\uff1a",e.query),console.log("\u6765\u6e90\u4fe1\u606f\u5982\u4e0b\uff1a",e.refererInfo),e.query&&e.query.roomid&&e.query.roomid&&(n.GameDataStorage.gameStateData.room_id=e.query.roomid,cc.director.loadScene("pvpScene"))}))}}return e.prototype.init=function(){this.judgeReward()},e}();a.default=o,cc._RF.pop()},{"../ssscgf":"ssscgf"}],share_panel:[function(e,t,a){"use strict";cc._RF.push(t,"b7a5bc6IplCEIDyWKWqrKXD","share_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/platform"),c=cc._decorator,h=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callBack=null,t.judgeVideo=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){this.node.active=!0;var t=this.node.getChildByName("Node");this.scaleBigShow(t,cc.v3(0,0),null),this.callBack=e[0].callBack,r.platform.now_platform!=r.platform_type.is_233_lianyun&&r.platform.now_platform!=r.platform_type.is_233_mailiang||s._pl_fun.getInstance().showInterstitalAd(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.showpanel)},t.prototype.onClose=function(e){var t=this,a=this.node.getChildByName("Node");this.scaleSmallHide(a,cc.v3(0,0),function(){s.conMager.getInstance().putPoolNode(t.node.name,t.node),t.callBack(e)})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.queren_btn=function(){var e=this;this.disableClick(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.judgeVideo||(this.judgeVideo=!0,s._pl_fun.getInstance().onShareVideo(function(t){t&&(e.judgeVideo=!1)}))},t.prototype.quxiao_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1)},i([h],t)}(s.winRootNode));a.default=u,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../utils/platform":"platform"}],share_view:[function(e,t,a){"use strict";cc._RF.push(t,"a3369fZyeVMIbb7KI1qG0eo","share_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/platform"),c=e("../../SSSGF/dataController/DATA"),h=cc._decorator,u=h.ccclass,l=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp_icon_233=null,t.callBack=null,t.gameType=0,t.btn_xiayiguan=null,t.btn_fanhui=null,t.judgeVideo=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){s.GameDataStorage.gameStateData.ds_name="",s.conMager.getInstance().playAudioEff("\u7ffb\u724c");var e=this.node.getChildByName("Node");this.scaleBigShow(e,cc.v3(0,0),null),this.initData(e),r.platform.now_platform!=r.platform_type.is_tt&&(e.getChildByName("btn_share").getChildByName("shiping2").getComponent(cc.Sprite).spriteFrame=this.sp_icon_233)},t.prototype.onClose=function(e){var t=this,a=this.node.getChildByName("Node");this.scaleSmallHide(a,cc.v3(0,0),function(){if(s.conMager.getInstance().hideWinNode(s.KEY.UIName.share_view),5==s.GameDataStorage.gameStateData.gameType)s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_game_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,t.node.parent,null);else if(s.GameDataStorage.gameStateData.gameType==c.game_type.canju){if(2!=e)return void s.conMager.getInstance()._msgAtion.emit("renshu");var a=s.GameDataStorage.gameStateData.reward_gold,n=s.GameDataStorage.gameStateData.gameType,o=s.GameDataStorage.gameStateData.gameIndex+1;t.btn_xiayiguan.getComponent(cc.Button).interactable=!1,s.conMager.getInstance().hideWinNode(s.KEY.UIName.canju_game_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.canju_game_view,cc.find("Canvas"),{reward_gold:a,gameType:n,level_id:o})}else s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_hbdd?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_hbdd_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,t.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.lianzhao?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.lianzhao_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,t.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.sanren?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.sanren_view),s.GameDataStorage.gameStateData.who_sucess=0,s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,t.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_jxmc?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_jxmc_view),s.GameDataStorage.gameStateData.who_sucess=0,s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,t.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_tslh?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_tslh_view),s.GameDataStorage.gameStateData.who_sucess=0,s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,t.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_blxj?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_blxj_view),s.GameDataStorage.gameStateData.who_sucess=0,s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,t.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_gssk?(s.GameDataStorage.gameStateData.who_sucess=0,s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,t.node.parent,null)):s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,t.node.parent,null)}),s.GameDataStorage.gameStateData.game_mode&&(s.conMager.getInstance().hideWinNode(s.KEY.UIName.game_board),s.GameDataStorage.gameStateData.game_mode=null),console.log("12")},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.initData=function(e){if(e.getChildByName("num").getComponent(cc.Label).string=2*s.GameDataStorage.gameStateData.reward,this.btn_xiayiguan=e.getChildByName("btn_xiayiguan"),this.btn_xiayiguan.active=!1,this.btn_fanhui=e.getChildByName("btn_fanhui"),this.btn_fanhui.active=!1,this.btn_fanhui.active=!1,s.GameDataStorage.gameStateData.gameType==c.game_type.canju){if(this.btn_fanhui.active=!0,e.getChildByName("btn_fangqi").active=!1,s.GameDataStorage.gameStateData.gameIndex>=120)return void(e.getChildByName("btn_share").x=0);this.btn_xiayiguan.active=!0,this.btn_xiayiguan.getComponent(cc.Button).interactable=!0}},t.prototype.share_btn=function(){var e=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),s._pl_fun.getInstance().showAdVideo(function(){s.GameDataStorage.gameStateData.reward*=2;var t=s.GameDataStorage.gameStateData.reward;s.conMager.getInstance()._msgAtion.emit("updateMedalCount",t,cc.v3(0,0)),s._pl_fun.getInstance().add_reportAnalytics("event_ShuangBeiLingQuVedioNumbers"),s.GameDataStorage.gameStateData.gameType!=c.game_type.canju?e.onClose(2):e.onClose(1)})},t.prototype.next_btn=function(){this.btn_xiayiguan.active||(s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.judgeVideo||(this.judgeVideo=!0,this.onClose(2)))},t.prototype.canju_nextBtn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(2)},t.prototype.fanhui_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1)},i([l({type:cc.SpriteFrame,tooltip:"\u89c6\u9891\u6309\u94ae"})],t.prototype,"sp_icon_233",void 0),i([u],t)}(s.winRootNode);a.default=d,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../utils/platform":"platform"}],shop_view:[function(e,t,a){"use strict";cc._RF.push(t,"ee9f3xIHHpHqa1iMNE2a9wI","shop_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../scenes/mainScene"),r=e("../../SSSGF/ssscgf"),c=e("../../utils/as_util"),h=e("../../utils/commonFunction"),u=e("../../utils/platform"),l=cc._decorator,d=l.ccclass,p=l.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nd_scroll_view=null,t.nd_item=null,t.userData=null,t}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(){if(this.node.opacity=0,this.node.runAction(cc.fadeIn(.5)),this.initView(),u.platform.now_platform!=u.platform_type.is_tt){c.as_util.show_banner();var e=this.node.getChildByName("return");e.active=!1,this.scheduleOnce(function(){e.active=!0},u.platform.data.time_fanhui)}},t.prototype.onClose=function(){},t.prototype.onClear=function(){},t.prototype.start=function(){},t.prototype.initView=function(){this.userData=r.GameDataStorage.getUser().userData,this.userData.boarArr[0]=1;for(var e=0;e<=this.userData.boarArr.length;e++){var t=cc.instantiate(this.nd_item);if(t.name=e+"",t.active=!0,t.position=cc.Vec3.ZERO,this.nd_scroll_view.content.addChild(t),e==this.userData.boarArr.length)return void(t.getChildByName("btn_buy").active=!1);h.commonFunction.updateSprite("board/tu"+e,t.getChildByName("sp_skin"));var a=t.getChildByName("btn_buy");a.on("touchend",this.btnClick,this),e==r.GameDataStorage.getUser().userData.skinBoard?h.commonFunction.updateSprite("shop_btn/shiyongzhong",a):(0==this.userData.boarArr[e]&&h.commonFunction.updateSprite("shop_btn/50000",a),1==this.userData.boarArr[e]&&h.commonFunction.updateSprite("shop_btn/shiyong",a))}},t.prototype.btnClick=function(e){var t=Number(e.target.parent.name),a=this.nd_scroll_view.content.children[t];if(r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),0!=this.userData.boarArr[t]){var n=this.nd_scroll_view.content.children[r.GameDataStorage.getUser().userData.skinBoard];return h.commonFunction.updateSprite("shop_btn/shiyong",n.getChildByName("btn_buy"),function(){h.commonFunction.updateSprite("shop_btn/shiyongzhong",a.getChildByName("btn_buy"))}),r.GameDataStorage.getUser().userData.skinBoard=t,void r.GameDataStorage.preserveGameData()}r.GameDataStorage.getUser().userData.money<5e4?r.conMager.getInstance().getPoolNode(r.KEY.poolName.gold_buzu_panel,this.node,null):(h.commonFunction.updateSprite("shop_btn/shiyong",a.getChildByName("btn_buy")),r.GameDataStorage.getUser().userData.boarArr[t]=1,r.conMager.getInstance()._msgAtion.emit("updateMoney",-5e4),r._pl_fun.getInstance().add_reportAnalytics("event_PurchaseQiPanNumbers"),1==t&&r._pl_fun.getInstance().add_reportAnalytics("event_QiPan2PurchaseNumbers"))},t.prototype.store_return_btn=function(){var e=this;this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.opacity=255,this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e.node.active=!1}))),cc.find("Canvas").getComponent(s.default).showHideUi(!0),u.platform.now_platform!=u.platform_type.is_vivo&&u.platform.now_platform!=u.platform_type.is_topon||c.as_util.show_nativeType()},i([p(cc.ScrollView)],t.prototype,"nd_scroll_view",void 0),i([p(cc.Node)],t.prototype,"nd_item",void 0),i([d],t)}(r.winRootNode);a.default=g,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../scenes/mainScene":"mainScene","../../utils/as_util":"as_util","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform"}],sideController:[function(e,t,a){"use strict";cc._RF.push(t,"0cd87VaMHJO1o3PKASYtNve","sideController");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){this.node.x=cc.winSize.width*(this.node.x/720),"gaihuahuahuahuakuang"==this.node.name&&cc.winSize.height>1282?this.node.y=cc.winSize.height*(this.node.y/1280)+50:this.node.y=cc.winSize.height*(this.node.y/1280)+13},t.prototype.start=function(){},i([r],t)}(cc.Component));a.default=c,cc._RF.pop()},{}],sijiao:[function(e,t,a){"use strict";cc._RF.push(t,"b0390+A6tpAFKoSJ3eYnciQ","sijiao");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../KEY"),r=e("../../../../SSSGF/ssscgf"),c=e("../class_manager"),h=e("../game_manager"),u=e("../zhenfa_joiner"),l=cc._decorator,d=l.ccclass,p=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_parent=null,t}return o(t,e),t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.ui_parent=e.ui_parent},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(e){var t=this.judge_active();return e!=this.my_player||0!=t||(t=!1,this.show_sijiao(),t)},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return!0},t.prototype.one_win=function(){return!0},t.prototype.use_zhenfa=function(){return!0},t.prototype.use_zhenfa_finish=function(){return!0},t.prototype.show_sijiao=function(){var e=!1;this.my_player.cos==c.joiner_enum.player?(e=!0,r.conMager.getInstance().playAudioEff("nan/nansijiao")):r.conMager.getInstance().playAudioEff("nv/nvsijiao"),r.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.ui_parent,{fileName:"sijiao",ani_name:"animation",cb:this.sijiao_zhen.bind(this),is_user:e})},t.prototype.getNewChessPos=function(){for(var e=0,t=new cc.Vec2(0,0),a=0;a<15;a++)for(var n=0;n<15;n++)if(this.chess_array[a][n].chess_data){var o=this.chess_array[a][n].chess_data;o.id>=e&&(e=o.id,t=o.pos)}return{maxId:e,pos:t}},t.prototype.sijiao_zhen=function(){var e,t,a,n,o=this,i=this.getNewChessPos().pos,s=i.x,r=i.y,c=this.data.level,h=(c-2)%3,u=2*Math.floor((c-2)/3)+3,l=Math.floor(u/2),d=[];c>1?this.checkWin1(s,r,u,l,d,function(){o.addpos(s,r,h,d,l),o.luozi(d)}):(e=[s+1,r],t=[s-1,r],a=[s,r+1],n=[s,r-1],d.push(e),d.push(t),d.push(a),d.push(n),this.luozi(d))},t.prototype.luozi=function(e){var t=this;r.conMager.getInstance().playAudioEff(s.KEY.audioName.luozi);for(var a=0;a<e.length;a++){var n=e[a],o=n[0],i=n[1];this.chess_array[o]&&this.chess_array[o][i]&&!this.chess_array[o][i].chess_data&&(null==this.chess_array[o][i].kunlong_player||this.chess_array[o][i].kunlong_player==this.my_player)&&(0==this.chess_array[o][i].chaoniu_player||1==this.chess_array[o][i].chaoniu_player&&(this.my_player.zhenfa_array[0]&&"chaoniu"==this.my_player.zhenfa_array[0].data.name||this.my_player.zhenfa_array[1]&&"chaoniu"==this.my_player.zhenfa_array[1].data.name))&&h.game_manager.zhenfa_play_chess(new cc.Vec2(o,i),this.my_player),a==e.length-1&&this.scheduleOnce(function(){h.game_manager.get_zhenfa_event(t.my_player,t.data)},.5)}},t.prototype.addpos=function(e,t,a,n,o){var i,s,r,c,h,u,l,d;a<=0||(i=[e+o+1,t],s=[e-o-1,t],r=[e,t+o+1],c=[e,t-o-1],n.push(i),n.push(s),n.push(r),n.push(c),2==a&&(h=[e+o+1,t+o+1],u=[e-o-1,t-o-1],l=[e+o+1,t-o-1],d=[e-o-1,t+o+1],n.push(h),n.push(u),n.push(l),n.push(d)))},t.prototype.checkWin1=function(e,t,a,n,o,i){for(var s=e-n,r=s,c=t+n,h=a*a,u=0;u<h;u++){var l=[r,c];o.push(l),r+=1,(u+1)%a==0&&(r=s,c-=1),u==h-1&&i()}},i([d],t)}(u.default));a.default=p,cc._RF.pop()},{"../../../../KEY":"KEY","../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../zhenfa_joiner":"zhenfa_joiner"}],skin_board:[function(e,t,a){"use strict";cc._RF.push(t,"3a8ebH0ohpHv5RPAxAPI4aW","skin_board");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/commonFunction"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nd_bg=null,t.nd_board=null,t.nd_shubiao=null,t}return o(t,e),t.prototype.onLoad=function(){var e=s.GameDataStorage.getUser().userData.skinBoard;r.commonFunction.updateSprite("board/bg"+e,this.nd_bg),r.commonFunction.updateSprite("board/qipan"+e,this.nd_board),this.nd_shubiao&&r.commonFunction.updateSprite("board/subiao"+e,this.nd_shubiao)},i([u(cc.Node)],t.prototype,"nd_bg",void 0),i([u(cc.Node)],t.prototype,"nd_board",void 0),i([u(cc.Node)],t.prototype,"nd_shubiao",void 0),i([h],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../utils/commonFunction":"commonFunction"}],skin_store_view:[function(e,t,a){"use strict";cc._RF.push(t,"547bc94ZRxHE6PpEHD3WDsz","skin_store_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../scenes/mainScene"),r=e("../../SSSGF/baesConScripts/winRootNode"),c=e("../../SSSGF/dataController/gameDataManager"),h=e("../../SSSGF/ssscgf"),u=e("../../utils/as_util"),l=e("../../utils/platform"),d=cc._decorator,p=d.ccclass,g=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.meinv_view=null,t.tx_content=null,t.buy_btn=null,t.z1=null,t.z2=null,t.pref_page=null,t.pref_head=null,t.meinv_id=0,t.start_touch=0,t.skinMap=new Map,t}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(){if(this.node.opacity=0,this.node.runAction(cc.fadeIn(.5)),this.initView(),l.platform.now_platform!=l.platform_type.is_tt){var e=this.node.getChildByName("return");e.active=!1,this.scheduleOnce(function(){e.active=!0},l.platform.data.time_fanhui)}},t.prototype.onClose=function(){},t.prototype.onClear=function(){},t.prototype.initView=function(){this.skinMap.set(0,{name:"wzq2",money:2e4}),this.skinMap.set(1,{name:"wzq",money:2e4}),c.default.getUser().userData.skinArr[0]=1;for(var e=0;e<this.skinMap.size;e++){var t=this.tx_content.children[e];t.name=e+"",t.on(cc.Node.EventType.TOUCH_END,this.touch_end,this)}this.meinv_id=c.default.getUser().userData.meinvId,this.refreshView(),this.setbuyBtnType(!0,!1,!1),l.platform.now_platform!=l.platform_type.is_tt&&u.as_util.hide_banner()},t.prototype.touchStart=function(e){this.start_touch=e.touch.getLocationX()},t.prototype.touchOver=function(e){var t=e.touch.getLocationX()-this.start_touch;Math.abs(t)<5||(t>0?(this.meinv_id--,this.meinv_id<0&&(this.meinv_id=0)):(this.meinv_id++,this.meinv_id>=this.tx_content.childrenCount&&(this.meinv_id-=1)),this.refreshView())},t.prototype.touch_end=function(e){2!=Number(e.target.name)&&(this.meinv_id=Number(e.target.name),this.refreshView())},t.prototype.btn_click=function(e,t){var a=Number(t);this.meinv_id+a<0||this.meinv_id+a>=this.skinMap.size||(this.meinv_id+=a,this.refreshView())},t.prototype.scroll_back=function(){this.meinv_id=this.meinv_view.getCurrentPageIndex(),this.refreshView()},t.prototype.buy_click=function(){if(1==c.default.getUser().userData.skinArr[this.meinv_id]){if(this.meinv_id,c.default.getUser().userData.meinvId,this.setbuyBtnType(!0,!1,!1),0==this.meinv_id?this.setJiaoIcon(!0,!1):this.setJiaoIcon(!1,!0),1!=c.default.getUser().userData.skinArr[1]){var e=this.tx_content.children[1];e.getChildByName("yiyongyou").active=!1,e.getChildByName("yiyongyou2").active=!1}return c.default.getUser().userData.meinvId=this.meinv_id,void c.default.preserveGameData()}var t=c.default.getUser().userData.money,a=this.skinMap.get(this.meinv_id).money;t<a?h.conMager.getInstance().getPoolNode(h.KEY.poolName.gold_buzu_panel,this.node,null):(this.refreshView(),this.setbuyBtnType(!0,!1,!1),c.default.getUser().userData.meinvId=this.meinv_id,c.default.getUser().userData.skinArr[this.meinv_id]=1,h.conMager.getInstance()._msgAtion.emit("updateMoney",-a),h._pl_fun.getInstance().add_reportAnalytics("event_JueSePurchaseNumbers"))},t.prototype.refreshView=function(){if(0==this.meinv_id?(this.z1.active=!0,this.z2.active=!1):(this.z1.active=!1,this.z2.active=!0),c.default.getUser().userData.meinvId==this.meinv_id&&(0==this.meinv_id?this.setJiaoIcon(!0,!1):this.setJiaoIcon(!1,!0)),1!=c.default.getUser().userData.skinArr[1]){var e=this.tx_content.children[1];e.getChildByName("yiyongyou").active=!1,e.getChildByName("yiyongyou2").active=!1}this.meinv_view.scrollToPage(this.meinv_id,.05),this.tx_content.children.forEach(function(e){e.getChildByName("is_choose").active=!1}),this.tx_content.children[this.meinv_id].getChildByName("is_choose").active=!0,1!=c.default.getUser().userData.skinArr[this.meinv_id]?this.setbuyBtnType(!1,!1,!0):c.default.getUser().userData.meinvId!=this.meinv_id?this.setbuyBtnType(!1,!0,!1):this.setbuyBtnType(!0,!1,!1)},t.prototype.setbuyBtnType=function(e,t,a){this.buy_btn.getChildByName("type_use").active=e,this.buy_btn.getChildByName("type_use1").active=t,this.buy_btn.getChildByName("type_buy").active=a},t.prototype.setJiaoIcon=function(){},t.prototype.myScrollAction=function(){this.tx_content.stopAllActions(),cc.tween(this.tx_content).to(.05,{x:-this.tx_content.children[this.meinv_id].x}).start()},t.prototype.store_return_btn=function(){var e=this;this.disableClick(),h.conMager.getInstance().playAudioEff(h.KEY.audioName.btn),this.node.opacity=255,this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e.node.active=!1}))),cc.find("Canvas").getComponent(s.default).showHideUi(!0),h.conMager.getInstance()._msgAtion.emit("refreshMeinv"),l.platform.now_platform!=l.platform_type.is_vivo&&l.platform.now_platform!=l.platform_type.is_topon||u.as_util.back_ui(),l.platform.now_platform!=l.platform_type.is_tt&&u.as_util.show_banner()},i([g(cc.PageView)],t.prototype,"meinv_view",void 0),i([g(cc.Node)],t.prototype,"tx_content",void 0),i([g(cc.Node)],t.prototype,"buy_btn",void 0),i([g(cc.Node)],t.prototype,"z1",void 0),i([g(cc.Node)],t.prototype,"z2",void 0),i([g(cc.Node)],t.prototype,"pref_page",void 0),i([g(cc.Node)],t.prototype,"pref_head",void 0),i([p],t)}(r.default);a.default=_,cc._RF.pop()},{"../../SSSGF/baesConScripts/winRootNode":"winRootNode","../../SSSGF/dataController/gameDataManager":"gameDataManager","../../SSSGF/ssscgf":"ssscgf","../../scenes/mainScene":"mainScene","../../utils/as_util":"as_util","../../utils/platform":"platform"}],slectGmae:[function(e,t,a){"use strict";cc._RF.push(t,"63dfa9JQ2dHn52O0NzYXa4N","slectGmae");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.initSDK=void 0;var s=e("./../../utils/getDataFromServer"),r=e("../../SSSGF/ssscgf"),c=e("../../scenes/mainScene"),h=e("../../utils/platform"),u=e("../../utils/as_util"),l=e("../../SSSGF/dataController/DATA"),d=e("../../pvp/script/views/pvp_sdk_init"),p=cc._decorator,g=p.ccclass,_=p.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp_icon_233=null,t.jingdian_node=null,t.dazhao_node=null,t.duiyi_node=null,t.btn_node=null,t.canju_node=null,t.selectZhenFa=null,t.dazhao_content=null,t.mask1=null,t.canju_pref=null,t.isBtn=!0,t.report_names=["WanNing","BaGua","SiJiao","KeDi","WuLei","FenLie","XueYuYinSha","MeiHua","DuSha","KunLong","JueHu","GuiYuan","ChaoNiu","QiXing"],t.isBtn_shiyong=!0,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;if(this.initGame(),this.mask1.active=!0,this.mask1.opacity=0,this.node.opacity=0,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.fadeIn(.5),cc.callFunc(function(){t.mask1.active=!1,console.log("\u70b9\u51fb\u4e86\u5417:",t.mask1.active);var e=cc.find("Canvas/mainView");e.opacity=255,e.active=!1}))),h.platform.now_platform!=h.platform_type.is_233_lianyun&&h.platform.now_platform!=h.platform_type.is_233_mailiang||r._pl_fun.getInstance().showInterstitalAd(),cc.find("Canvas/money_node").active=!0,e[0]&&e[0].gameType){var a=e[0].gameType;2==a&&(this.dazhao_node.active=!0),6==a&&(this.canju_node.active=!0)}if(h.platform.now_platform!=h.platform_type.is_tt){u.as_util.hide_banner();var n=cc.find("btn_node/return",this.node);n.active=!1,this.scheduleOnce(function(){n.active=!0},h.platform.data.time_fanhui);for(var o=this.dazhao_content.children,i=0;i<o.length;i++){var s=o[i].getChildByName("shengji_btn").getChildByName("shiping3");s.y=2,s.getComponent(cc.Sprite).spriteFrame=this.sp_icon_233}}},t.prototype.onClose=function(e){1==e&&"mainScene"==r.GameDataStorage.gameStateData.sceneName&&cc.find("Canvas").getComponent(c.default).showHideUi(!0),this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){r.conMager.getInstance().hideWinNode(r.KEY.UIName.slectGmae)})))},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){this.node.opacity=0},t.prototype.initUi=function(){this.jingdian_node=this.node.getChildByName("jingdian_node"),this.dazhao_node=this.node.getChildByName("dazhao_node"),this.duiyi_node=this.node.getChildByName("duiyi_node"),this.canju_node=cc.instantiate(this.canju_pref),this.canju_node.parent=this.node,this.btn_node=this.node.getChildByName("btn_node"),this.selectZhenFa=this.dazhao_node.getChildByName("selectZhenFa"),this.dazhao_content=this.selectZhenFa.getChildByName("ScrollView").getChildByName("view").getChildByName("content"),this.jingdian_node.active=!1,this.dazhao_node.active=!1,this.duiyi_node.active=!1,this.canju_node.active=!1},t.prototype.initGame=function(){this.initUi(),this.initData(),this.selectZhenFa.active=!0,this.dazhao_node.getChildByName("ScrollView").active=!1},t.prototype.showNode=function(e){var t=this;this.isBtn=!1,e.active=!0,e.opacity=0,this.mask1.active=!0,e.runAction(cc.sequence(cc.fadeIn(.5),cc.callFunc(function(){t.isBtn=!0,t.mask1.active=!1}))),this.btn_node.runAction(cc.fadeOut(.5))},t.prototype.hideNode=function(e){var t=this;this.mask1.active=!0,e.opacity=0,e.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e.active=!1,t.mask1.active=!1}))),this.btn_node.runAction(cc.fadeIn(.5))},t.prototype.jingdian_btn=function(){if(1*Math.random()<.5&&this.node.getComponent(d.default).initSDK(),this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),r.conMager.getInstance().showWinNode(r.KEY.UIName.select_saichang_node,cc.find("Canvas"),l.game_type.jingdian,r.KEY.UIName.jd_game_view),this.onClose(2),h.platform.now_platform!=h.platform_type.is_tt){u.as_util.hide_banner();var e=this.jingdian_node.getChildByName("return");e.active=!1,this.scheduleOnce(function(){e.active=!0},h.platform.data.time_fanhui)}},t.prototype.dazhao_btn=function(){if(this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),r.GameDataStorage.gameStateData.gameType=l.game_type.dazhao,this.showNode(this.dazhao_node),h.platform.now_platform!=h.platform_type.is_tt){u.as_util.hide_banner();var e=this.dazhao_node.getChildByName("return");e.active=!1,this.scheduleOnce(function(){e.active=!0},h.platform.data.time_fanhui)}},t.prototype.duiyi_btn=function(){if(this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.selectZhenFa.active=!0,this.showNode(this.duiyi_node),h.platform.now_platform!=h.platform_type.is_tt){u.as_util.hide_banner();var e=this.duiyi_node.getChildByName("return");e.active=!1,this.scheduleOnce(function(){e.active=!0},h.platform.data.time_fanhui)}},t.prototype.canju_btn=function(){if(this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),r.GameDataStorage.gameStateData.gameType=l.game_type.canju,this.showNode(this.canju_node),h.platform.now_platform!=h.platform_type.is_tt){u.as_util.hide_banner();var e=this.canju_node.getChildByName("return");e.active=!1,this.scheduleOnce(function(){e.active=!0},h.platform.data.time_fanhui)}},t.prototype.lianzhao_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.isBtn_fun(),this.onClose(2),r._pl_fun.getInstance().add_reportAnalytics("event_LianZhaoMoshiClickNumbers"),r.GameDataStorage.gameStateData.gameType=l.game_type.lianzhao,r.conMager.getInstance().getPoolNode(r.KEY.poolName.item1,null,{callBack:function(){r.conMager.getInstance().showWinNode(r.KEY.UIName.lianzhao_view,cc.find("Canvas"),{reward_gold:100,gameType:l.game_type.lianzhao,level_id:1})}}),h.platform.now_platform!=h.platform_type.is_tt&&u.as_util.hide_banner()},t.prototype.isBtn_fun=function(){var e=this;this.isBtn=!1,this.scheduleOnce(function(){e.isBtn=!0},1)},t.prototype.jingdian_slect_btn=function(e,t){r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.isBtn&&(this.isBtn_fun(),this.openGame(t,1),r._pl_fun.getInstance().add_reportAnalytics("event_JingDianMoShiButtonClickNumbers"))},t.prototype.judgeGold=function(e){var t=0,a=0;return 3==r.GameDataStorage.gameStateData.gameType?(t=0,a=0):1==r.GameDataStorage.gameStateData.gameType?1==e?(t=10,a=20):2==e?(t=20,a=30):3==e?(t=80,a=40):4==e?(t=300,a=50):5==e&&(t=800,a=60):2==r.GameDataStorage.gameStateData.gameType&&(1==e?(t=10,a=2):2==e?(t=20,a=4):3==e?(t=80,a=6):4==e?(t=300,a=8):5==e&&(t=800,a=10)),{num1:t,num2:a}},t.prototype.dazhao_slect_btn=function(e,t){r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.isBtn&&(this.isBtn_fun(),this.openGame(t,2),r._pl_fun.getInstance().add_reportAnalytics("event_DaZhaoMoShiButtonClickNumbers"))},t.prototype.duiyi_slect_btn=function(e,t){r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.isBtn&&(this.isBtn_fun(),this.openGame(t,3),r._pl_fun.getInstance().add_reportAnalytics("event_HaoYouDuiYiMoShiButtonClickNumbers"))},t.prototype.canju_slect_btn=function(e){if(r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.isBtn){var t=Number(e);this.isBtn_fun(),t-1>r.GameDataStorage.getUser().userData.canju_id?r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u672a\u89e3\u9501"):(this.onClose(2),r.conMager.getInstance().showWinNode(r.KEY.UIName.canju_game_view,cc.find("Canvas"),{reward_gold:100,gameType:6,level_id:t}),r._pl_fun.getInstance().add_reportAnalytics("event_CanJuButtonClickNumbers"))}},t.prototype.return_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.onClose(1),h.platform.now_platform!=h.platform_type.is_vivo&&h.platform.now_platform!=h.platform_type.is_topon||(u.as_util.back_ui(),u.as_util.show_banner())},t.prototype.jingdian_return_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.hideNode(this.jingdian_node),h.platform.now_platform!=h.platform_type.is_vivo&&h.platform.now_platform!=h.platform_type.is_topon||u.as_util.back_ui()},t.prototype.dazhao_return_btn=function(){var e=this;this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn);var t=this.dazhao_node.getChildByName("ScrollView"),a=this.selectZhenFa.active;this.isBtn_shiyong=!0,a?(s.getDataFromServer.setUserData(r.GameDataStorage.getUser().userData,function(e){e?console.log("\u6570\u636e\u5b58\u50a8\u6210\u529f!"):console.log("\u6570\u636e\u5b58\u50a8\u5931\u8d25!")}),this.hideNode(this.dazhao_node)):(this.mask1.active=!0,t.runAction(cc.sequence(cc.spawn(cc.fadeOut(.3),cc.scaleTo(.3,0)),cc.callFunc(function(){e.selectZhenFa.active=!0,e.selectZhenFa.opacity=0,e.selectZhenFa.scale=1,e.selectZhenFa.runAction(cc.sequence(cc.spawn(cc.fadeIn(.3),cc.scaleTo(.3,1)),cc.callFunc(function(){e.mask1.active=!1})))})))),h.platform.now_platform!=h.platform_type.is_vivo&&h.platform.now_platform!=h.platform_type.is_topon||u.as_util.back_ui()},t.prototype.duiyi_return_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.hideNode(this.duiyi_node),h.platform.now_platform!=h.platform_type.is_vivo&&h.platform.now_platform!=h.platform_type.is_topon||u.as_util.back_ui()},t.prototype.canju_return_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.hideNode(this.canju_node),h.platform.now_platform!=h.platform_type.is_vivo&&h.platform.now_platform!=h.platform_type.is_topon||u.as_util.back_ui()},t.prototype.openGame=function(e,t){r.GameDataStorage.gameStateData.gameType=t;var a=parseInt(e),n=this.judgeGold(a),o=r.GameDataStorage.getUser().userData.money;if(r.GameDataStorage.gameStateData.admission_gold=n.num1,o>=n.num1){var i;i=t==l.game_type.dazhao?r.KEY.UIName.jd_game_view:t==l.game_type.jingdian?r.KEY.UIName.jd_game_view:(l.game_type.danji_duiyi,r.KEY.UIName.jd_game_view),r.conMager.getInstance().showWinNode(i,cc.find("Canvas"),{reward_gold:n.num2,gameType:t,RightRate:a}),this.onClose(2)}else r.conMager.getInstance().getPoolNode(r.KEY.poolName.gold_buzu_panel,this.node,null)},t.prototype.shengji_btn=function(e,t){var a=this;r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn1);var n=parseInt(t);r._pl_fun.getInstance().showAdVideo(function(){r.conMager.getInstance().playAudioEff(r.KEY.audioName.shengji),r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,null,"\u9635\u6cd5\u7b49\u7ea7 +1");var e=r.GameDataStorage.gameStateData.zhenFaName[n-1];r.GameDataStorage.getUser().userData.zhenFaMap[e].level+=1,r.GameDataStorage.preserveGameData(),a.initData(),r._pl_fun.getInstance().add_reportAnalytics("event_"+a.report_names[n-1]+"_ShengJiVedioNumbers")})},t.prototype.shiyong_btn=function(e,t){var a=this;if(r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.isBtn_shiyong){this.isBtn_shiyong=!1,this.scheduleOnce(function(){a.isBtn_shiyong=!0},1);var n=parseInt(t)-1;r.GameDataStorage.gameStateData.userZhenFaName=r.GameDataStorage.gameStateData.zhenFaName[n];var o=r.GameDataStorage.gameStateData.zhenFaName[n];r.GameDataStorage.gameStateData.userZhenFaLevel=r.GameDataStorage.getUser().userData.zhenFaMap[o].level,console.log("\u4f7f\u7528\u54ea\u4e2a\u9635\u6cd5",o,r.GameDataStorage.getUser().userData.zhenFaMap[o]),r._pl_fun.getInstance().add_reportAnalytics("event_DaZhao_"+this.report_names[n]+"_ClickNumbers"),this.selectZhenFa.runAction(cc.sequence(cc.spawn(cc.fadeOut(.4),cc.scaleTo(.4,0)),cc.callFunc(function(){a.selectZhenFa.active=!1,r.conMager.getInstance().showWinNode(r.KEY.UIName.select_saichang_node,cc.find("Canvas"),l.game_type.dazhao,r.KEY.UIName.dazhao_game_view),a.onClose(2)}))),s.getDataFromServer.setUserData(r.GameDataStorage.getUser().userData,function(){})}},t.prototype.initData=function(){for(var e=r.GameDataStorage.getUser().userData.zhenFaMap,t=r.GameDataStorage.gameStateData.zhenFaName,a=0;a<t.length;a++){var n=t[a],o=e[n],i=this.dazhao_content.getChildByName(n).getChildByName("num").getComponent(cc.Label);if("wanning"==n)i.string=10*o.level+"";else if("bagua"==n)i.string=o.level+"";else if("sijiao"==n)i.string=o.level+1+"x"+(o.level+1);else if("kedi"==n)i.string=5+o.level+"";else if("wulei"==n)i.string=2*o.level+"";else if("fenlie"==n)i.string=o.level+"";else if("xueyuyingsha"==n)i.string=4+2*(o.level-1)+"";else if("meihua"==n)i.string=5+2*(o.level-1)+"";else if("dusha"==n)i.string=o.level-1+4+"";else if("kunlong"==n)(s=15-o.level)<=1&&(s=1),i.string=s+"x"+s;else if("juehu"==n)(s=225-10*o.level)<=1&&(s=1),i.string=s+"";else if("guiyuan"==n)(s=5-o.level)<=1&&(s=1),i.string="-"+o.level;else if("chaoniu"==n){var s=o.level;i.string=s+""}else"qixing"==n&&(s=.5+.1*o.level,s=Math.floor(10*s)/10,i.string=s+"")}},t.prototype.onBtnMatch=function(){var e=this;r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.mask1.active=!0,this.mask1.opacity=200,this.node.getChildByName("pro").active=!0,this.node.getChildByName("pro").getComponent(cc.ProgressBar).progress=0,cc.director.preloadScene("pvpScene",function(t,a){console.log("--------------",t,a),e.node.getChildByName("pro").getComponent(cc.ProgressBar).progress=t/a},function(){e.node.getChildByName("pro").active=!1,cc.director.loadScene("pvpScene")})},t.prototype.sanren_btn=function(){console.log("\u70b9\u51fb\u4e863\u4eba\u6a21\u5f0f"),this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.isBtn_fun(),this.onClose(2),r._pl_fun.getInstance().add_reportAnalytics("event_SanRenMoShiButtonClickNumbers"),r.conMager.getInstance().showWinNode(r.KEY.UIName.select_saichang_node,cc.find("Canvas"),l.game_type.sanren,r.KEY.UIName.sanren_view)},t.prototype.xuezhandaodi_btn=function(){console.log("\u70b9\u51fb\u4e86\u8840\u6218\u5230\u5e95\u6a21\u5f0f"),this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.isBtn_fun(),this.onClose(2),r._pl_fun.getInstance().add_reportAnalytics("event_XueZhanDaoDiMoShiButtonClickNumbers"),r.conMager.getInstance().showWinNode(r.KEY.UIName.select_saichang_node,cc.find("Canvas"),l.game_type.xuezhandaodi,r.KEY.UIName.xuezhandaodi_game_view)},i([_({type:cc.SpriteFrame,tooltip:"\u89c6\u9891\u6309\u94ae"})],t.prototype,"sp_icon_233",void 0),i([_(cc.Node)],t.prototype,"mask1",void 0),i([_(cc.Prefab)],t.prototype,"canju_pref",void 0),i([g],t)}(r.winRootNode);a.default=m,a.initSDK=function(){throw new Error("Function not implemented.")},cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../pvp/script/views/pvp_sdk_init":"pvp_sdk_init","../../scenes/mainScene":"mainScene","../../utils/as_util":"as_util","../../utils/platform":"platform","./../../utils/getDataFromServer":"getDataFromServer"}],ssscgf:[function(e,t,a){"use strict";cc._RF.push(t,"79f8759RiFPYYSU0j1ehPgu","ssscgf"),Object.defineProperty(a,"__esModule",{value:!0}),a.UpdataRankData=a.ConNetErr=a.GameDataStorage=a.NumberUtil=a.LogWrap=a._pl_fun=a.conMager=a.KEY=a.winRootNode=void 0;var n=e("../KEY");Object.defineProperty(a,"KEY",{enumerable:!0,get:function(){return n.KEY}});var o=e("./conMagers/conMager");a.conMager=o.default;var i=e("./platfrom/platfrom_fun");a._pl_fun=i.default;var s=e("./Utils/LogWrap");Object.defineProperty(a,"LogWrap",{enumerable:!0,get:function(){return s.LogWrap}});var r=e("./Utils/conNetErr");Object.defineProperty(a,"ConNetErr",{enumerable:!0,get:function(){return r.ConNetErr}});var c=e("./dataController/gameDataManager");a.GameDataStorage=c.default;var h=e("./Utils/NumberUtil");Object.defineProperty(a,"NumberUtil",{enumerable:!0,get:function(){return h.NumberUtil}});var u=e("./baesConScripts/winRootNode");a.winRootNode=u.default;var l=e("./Utils/updateRankData");Object.defineProperty(a,"UpdataRankData",{enumerable:!0,get:function(){return l.UpdataRankData}}),console.log("-----GameDataStorage",c.default),cc._RF.pop()},{"../KEY":"KEY","./Utils/LogWrap":"LogWrap","./Utils/NumberUtil":"NumberUtil","./Utils/conNetErr":"conNetErr","./Utils/updateRankData":"updateRankData","./baesConScripts/winRootNode":"winRootNode","./conMagers/conMager":"conMager","./dataController/gameDataManager":"gameDataManager","./platfrom/platfrom_fun":"platfrom_fun"}],stone_chess:[function(e,t,a){"use strict";cc._RF.push(t,"ff6c2BgJAVFc4fArcphLkQz","stone_chess");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/baesConScripts/winRootNode"),r=e("../wuziqi/game_manager/class_manager"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.black=null,t.white=null,t}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(e){switch(e[0].color){case r.chess_belong.white:this.black.active=!1,this.white.active=!0;break;case r.chess_belong.black:this.black.active=!0,this.white.active=!1}},t.prototype.onClose=function(){},t.prototype.onClear=function(){},i([u(cc.Node)],t.prototype,"black",void 0),i([u(cc.Node)],t.prototype,"white",void 0),i([h],t)}(s.default);a.default=l,cc._RF.pop()},{"../../SSSGF/baesConScripts/winRootNode":"winRootNode","../wuziqi/game_manager/class_manager":"class_manager"}],stop_panel:[function(e,t,a){"use strict";cc._RF.push(t,"40becSOQKhOd7KRHSNdEHSI","stop_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/as_util"),c=e("../../utils/platform"),h=cc._decorator,u=h.ccclass,l=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callBack=null,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){this.node.active=!0;var t=this.node.getChildByName("Node");this.scaleBigShow(t,cc.v3(0,0),null),this.callBack=e[0].callBack,s.conMager.getInstance().playAudioEff(s.KEY.audioName.showpanel),this.scheduleOnce(function(){c.platform.now_platform!=c.platform_type.is_vivo&&c.platform.now_platform!=c.platform_type.is_topon||r.as_util.show_nativeType()},.5),c.platform.now_platform!=c.platform_type.is_vivo&&c.platform.now_platform!=c.platform_type.is_topon||r.as_util.show_banner()},t.prototype.onClose=function(e){var t=this,a=this.node.getChildByName("Node");this.scaleSmallHide(a,cc.v3(0,0),function(){s.conMager.getInstance().putPoolNode(t.node.name,t.node),t.callBack(e)}),c.platform.now_platform!=c.platform_type.is_vivo&&c.platform.now_platform!=c.platform_type.is_topon||r.as_util.hide_banner()},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.queren_btn=function(){this.disableClick(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(2),c.platform.now_platform!=c.platform_type.is_vivo&&c.platform.now_platform!=c.platform_type.is_topon||r.as_util.back_ui()},t.prototype.quxiao_btn=function(){if(s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1),c.platform.now_platform==c.platform_type.is_vivo||c.platform.now_platform==c.platform_type.is_topon)var e=setTimeout(function(){r.as_util.show_nativeType(),clearTimeout(e)},500)},i([u],t)}(s.winRootNode));a.default=l,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../utils/as_util":"as_util","../../utils/platform":"platform"}],storageManager:[function(e,t,a){"use strict";cc._RF.push(t,"a3c53jgEsFEOpDEJOtFtHZF","storageManager"),Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(){this.ls=cc.sys.localStorage}return e.init=function(){this.ins=new e},e.prototype.storageData=function(e,t){this.ls.setItem(e,t)},e.prototype.getData=function(e){return this.ls.getItem(e)},e.prototype.removeData=function(e){this.ls.removeItem(e)},e.ins=null,e}();a.default=n,cc._RF.pop()},{}],success_view:[function(e,t,a){"use strict";cc._RF.push(t,"0743ciOycpIgLG374bV1ixp","success_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/platform"),c=e("../../SSSGF/dataController/DATA"),h=e("../../utils/as_util"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shipin_icon=null,t.shipin_icon_spriteframe=null,t.report_names=["WanNing","BaGua","SiJiao","KeDi","WuLei"],t.callBack=null,t.judgeVideo=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;r.platform.now_platform!=r.platform_type.is_tt&&(this.shipin_icon.spriteFrame=this.shipin_icon_spriteframe),s._pl_fun.getInstance().stopCreateVideo(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.shengli);var a=this.node.getChildByName("Node");this.initData(a);var n=this.node.getChildByName("shibai").getComponent(sp.Skeleton);n.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.REALTIME),n.setAnimation(0,"a-hong",!1);var o=!0;n.setCompleteListener(function(){o&&(o=!1,n.setAnimation(0,"b-hong",!0))});var i=a.getChildByName("jibeikuang");s.GameDataStorage.gameStateData.rewardmultiple>=2?(i.getChildByName("text").getComponent(cc.Label).string=s.GameDataStorage.gameStateData.rewardmultiple+"\u500d",i.active=!0):i.active=!1,5==s.GameDataStorage.gameStateData.gameType&&(s.GameDataStorage.getUser().userData.luandou_jiangli=!0,s.GameDataStorage.preserveGameData(),s._pl_fun.getInstance().add_reportAnalytics("event_LuanDouMiWuShengLv")),s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_hbdd&&(s.GameDataStorage.getUser().userData.luandou_jiangli=!0,s.GameDataStorage.preserveGameData(),s._pl_fun.getInstance().add_reportAnalytics("event_LuanDouHeiBaiShengLv")),s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_jxmc&&(s.GameDataStorage.getUser().userData.luandou_jiangli=!0,s.GameDataStorage.preserveGameData(),s._pl_fun.getInstance().add_reportAnalytics("LD_jixiemicheng_win")),s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_tslh&&(s.GameDataStorage.getUser().userData.luandou_jiangli=!0,s.GameDataStorage.preserveGameData()),s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_blxj&&(s.GameDataStorage.getUser().userData.luandou_jiangli=!0,s.GameDataStorage.preserveGameData(),s._pl_fun.getInstance().add_reportAnalytics("event_LuanDouBoLiShengLv")),s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_gssk&&(s.GameDataStorage.getUser().userData.luandou_jiangli=!0,s.GameDataStorage.preserveGameData()),s.GameDataStorage.gameStateData.gameType==c.game_type.canju&&(e[0].level>=s.GameDataStorage.getUser().userData.canju_id&&(s.GameDataStorage.getUser().userData.canjuArr[s.GameDataStorage.getUser().userData.canju_id]=1,s.GameDataStorage.getUser().userData.canju_id+=1),s._pl_fun.getInstance().add_reportAnalytics("event_CanJuJieSuo",{level:e[0].level}),s.GameDataStorage.preserveGameData()),s.GameDataStorage.gameStateData.gameType==c.game_type.sanren&&s._pl_fun.getInstance().add_reportAnalytics("event_SanRenMoShiShengLv"),s.GameDataStorage.gameStateData.gameType==c.game_type.jingdian&&(s.GameDataStorage.getUser().userData.successNum++,s.GameDataStorage.preserveGameData());var u=a.getChildByName("btn_doublelingqu"),l=u.getChildByName("block");if(l&&(l.active=!1),r.platform.now_platform!=r.platform_type.is_tt){a.getChildByName("btn_putong").active=!1,a.getChildByName("btn_putong2").active=!1,u.x=0;var d=u.getChildByName("shiping2");d&&(d.active=!0,d.scale=1.3),l&&(l.active=!0),this.scheduleOnce(function(){a.getChildByName("btn_putong2").active=!0,t.scheduleOnce(function(){h.as_util.show_nativeType()},.3)},r.platform.data.time_fanhui),h.as_util.show_banner()}},t.prototype.onClose=function(e){var t=this;console.log("\u70b9\u4e86\u9000\u51fa");var a=this.node.getChildByName("Node");this.scaleSmallHide(a,cc.v3(0,0),function(){if(console.log("\u8fdb\u6765\u4e86",s.GameDataStorage.gameStateData.gameType),s.conMager.getInstance().hideWinNode(s.KEY.UIName.success_view),r.platform.now_platform==r.platform_type.is_tt)s.conMager.getInstance().showWinNode(s.KEY.UIName.share_view,t.node.parent,null);else{if(console.log("\u5b89\u5353\u539f\u751f\uff0c\u751f\u6210"),5==s.GameDataStorage.gameStateData.gameType)s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_game_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,t.node.parent,null);else if(s.GameDataStorage.gameStateData.gameType==c.game_type.canju){if(2!=e)return void s.conMager.getInstance()._msgAtion.emit("renshu");var a=s.GameDataStorage.gameStateData.reward_gold,n=s.GameDataStorage.gameStateData.gameType,o=s.GameDataStorage.gameStateData.gameIndex+1;s.conMager.getInstance().hideWinNode(s.KEY.UIName.canju_game_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.canju_game_view,cc.find("Canvas"),{reward_gold:a,gameType:n,level_id:o})}else s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_hbdd?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_hbdd_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,t.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.lianzhao?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.lianzhao_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,t.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.sanren?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.sanren_view),s.GameDataStorage.gameStateData.who_sucess=0,s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,t.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_jxmc?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_jxmc_view),s.GameDataStorage.gameStateData.who_sucess=0,s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,t.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_tslh?(s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_tslh_view),s.GameDataStorage.gameStateData.who_sucess=0,s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,t.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_blxj?(s.GameDataStorage.gameStateData.who_sucess=0,s.conMager.getInstance().hideWinNode(s.KEY.UIName.luandou_blxj_view),s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,t.node.parent,null)):s.GameDataStorage.gameStateData.gameType==c.game_type.luandou_gssk?(s.GameDataStorage.gameStateData.who_sucess=0,s.conMager.getInstance().showWinNode(s.KEY.UIName.luanDou_view,cc.find("Canvas"),null)):s.conMager.getInstance().showWinNode(s.KEY.UIName.level_view,t.node.parent,null);s.GameDataStorage.gameStateData.game_mode&&(s.conMager.getInstance().hideWinNode(s.KEY.UIName.game_board),s.GameDataStorage.gameStateData.game_mode=null)}s.GameDataStorage.gameStateData.game_mode&&(s.conMager.getInstance().hideWinNode(s.KEY.UIName.game_board),s.GameDataStorage.gameStateData.game_mode=null)})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.initData=function(e){var t=e.getChildByName("y_name").getComponent(cc.Label),a=e.getChildByName("s_name").getComponent(cc.Label),n=e.getChildByName("y_money").getComponent(cc.Label),o=e.getChildByName("s_money").getComponent(cc.Label),i=e.getChildByName("s_name_2").getComponent(cc.Label),r=e.getChildByName("s_money_2").getComponent(cc.Label);0==s.GameDataStorage.gameStateData.who_sucess?(t.string=s.GameDataStorage.getUser().userData.gameName,a.string=s.GameDataStorage.gameStateData.ds_name):(t.string=s.GameDataStorage.gameStateData.ds_name,a.string=s.GameDataStorage.getUser().userData.gameName,s.GameDataStorage.gameStateData.gameType==c.game_type.sanren&&(i.string=s.GameDataStorage.gameStateData.ds_name2)),s.GameDataStorage.gameStateData.gameType==c.game_type.canju&&(a.node.active=!1,o.node.active=!1,e.getChildByName("qian_1").active=!1,t.node.y=104,n.node.y=104,e.getChildByName("qian").y=104),i.node.active=!1,r.node.active=!1,e.getChildByName("qian_2").active=!1,s.GameDataStorage.gameStateData.gameType==c.game_type.sanren?(i.node.active=!0,r.node.active=!0,e.getChildByName("qian_2").active=!0,n.string="+"+s.GameDataStorage.gameStateData.reward,o.string="-"+s.GameDataStorage.gameStateData.reward/2,r.string="-"+s.GameDataStorage.gameStateData.reward/2):(n.string="+"+s.GameDataStorage.gameStateData.reward,o.string="-"+s.GameDataStorage.gameStateData.reward)},t.prototype.doubellinqu_btn=function(){var e=this;this.disableClick(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.judgeVideo||(this.judgeVideo=!0,this.scheduleOnce(function(){e.judgeVideo=!1},3),r.platform.now_platform!=r.platform_type.is_tt?s._pl_fun.getInstance().showAdVideo(function(){e.judgeVideo=!1,s._pl_fun.getInstance().add_reportAnalytics("event_FenXiangSuccessNumbers"),e.judgeVideo=!0,s.GameDataStorage.gameStateData.reward*=2;var t=s.GameDataStorage.gameStateData.reward;s.conMager.getInstance()._msgAtion.emit("updateMedalCount",t,cc.v3(0,0)),e.scheduleOnce(function(){e.onClose(2)},2)}):s._pl_fun.getInstance().onShareVideo(function(t){if(e.judgeVideo=!1,t){s._pl_fun.getInstance().add_reportAnalytics("event_FenXiangSuccessNumbers"),e.judgeVideo=!0,s.GameDataStorage.gameStateData.reward*=2;var a=s.GameDataStorage.gameStateData.reward;s.conMager.getInstance()._msgAtion.emit("updateMedalCount",a,cc.v3(0,0)),e.scheduleOnce(function(){e.onClose(2)},2)}}))},t.prototype.next_btn=function(){this.disableClick(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var e=s.GameDataStorage.gameStateData.reward;s.conMager.getInstance()._msgAtion.emit("updateMedalCount",e,cc.v3(0,0)),this.onClose(2)},i([d({type:cc.Sprite,tooltip:"\u89c6\u9891icon"})],t.prototype,"shipin_icon",void 0),i([d({type:cc.SpriteFrame})],t.prototype,"shipin_icon_spriteframe",void 0),i([l],t)}(s.winRootNode);a.default=p,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../utils/as_util":"as_util","../../utils/platform":"platform"}],test_model:[function(e,t,a){"use strict";cc._RF.push(t,"cab0eNWydxEb4SOyVpfG7tH","test_model");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/dataController/DATA"),r=e("../../../../SSSGF/ssscgf"),c=e("../../../../utils/commonFunction"),h=e("../class_manager"),u=e("../game_manager"),l=e("../model_joiner"),d=cc._decorator,p=d.ccclass,g=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.huihe=0,t.game_joiner=[],t.can_use_zhenfa=u.game_manager.zhenfa_map,t.player_zhenfa=[],t.use_zhenfa=[],t.zhenfa_id=0,t.player_array=[],t.board=null,t}return o(t,e),t.prototype.init_game_mode=function(){this.cos=h.joiner_enum.model,r.GameDataStorage.gameStateData.reward_gold=100},t.prototype.init=function(e,t,a){this.delect_use_zhenfa(),this.game_joiner=e,this.player_array=a,this.chess_array=t,r.GameDataStorage.gameStateData.gameType=s.game_type.luandou_gssk},t.prototype.init_ui=function(e){var t=this;this.board=e,this.board.moren_bg=!1,this.board.moren_window=!1,r.conMager.getInstance().getPoolNode(r.KEY.poolName.item2,this.board.ui_parent,{callBack:function(){t.board.head_icon_action(),r.conMager.getInstance().getPoolNode(r.KEY.poolName.item3,t.board.ui_parent,{callBack:function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.tip,t.node,{cb:function(){t.board.start_game()}})}}),r.conMager.getInstance().getPoolNode(r.KEY.poolName.setup,t.board.ui_parent,null)}}),c.commonFunction.updateSprite("board/\u5730\u56fe06",this.board.bg),c.commonFunction.updateSprite("board/qipan",this.board.qipan),c.commonFunction.updateSprite("board/subiao0",this.board.shubiao)},t.prototype.start_game=function(){for(var e=0;e<this.player_array.length;e++)this.player_zhenfa.push([]);return!0},t.prototype.start_big_game=function(){return this.start_zhenfa_select(),!1},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.model_small_round_win=function(e){console.log("win data: ",e);for(var t=0;t<e.chess_array.length;t++)if(e.chess_array[t].stone_type)return console.log("\u6211\u5426\u51b3\u4e86\u8fd9\u4e2a\u7ed3\u679c"),!1;return console.log("\u6211\u901a\u8fc7\u4e86\u8fd9\u4e2a\u7ed3\u679c"),!0},t.prototype.one_player_play_chess=function(){return!0},t.prototype.end_small_game=function(){var e=this;if(this.chess=this.board.get_last_chess(),!this.chess)return!0;var t=this.chess.pos;this.data_arr=[];for(var a=0;a<15;a++)null!=this.chess_array[t.x][a].chess_data&&a!=t.y&&this.data_arr.push(new cc.Vec2(t.x,a)),null!=this.chess_array[a][t.y].chess_data&&a!=t.x&&this.data_arr.push(new cc.Vec2(a,t.y));return this.chess_anima(this.chess.node,this.chess.pos,this.chess.state),this.data_arr.forEach(function(t){var a=t,n=e.chess_array[a.x][a.y];n.chess_data.stone_type=!n.chess_data.stone_type,cc.tween(n.chess_data.node).delay(.7).call(function(){if(n.chess_data.stone_type)r.conMager.getInstance().getPoolNode(r.KEY.poolName.stone_chess,n.chess_data.node,{color:n.chess_data.state});else{var e=n.chess_data.node.getChildByName(r.KEY.poolName.stone_chess);e&&r.conMager.getInstance().putPoolNode(e.name,e)}}).start()}),!1},t.prototype.end_big_game=function(){return this.end_big(),!0},t.prototype.one_win=function(){return!0},t.prototype.chess_anima=function(e,t,a){var n=this;this.scheduleOnce(function(){console.log("\u53d1\u51fa\u56db\u6761\u5c04\u7ebf");var o=e.convertToWorldSpaceAR(cc.Vec2.ZERO),i=n.board.up_effect.convertToNodeSpaceAR(o),s=t.x;n.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(r.KEY.audioName.gssk_jiguang)},.3),r.conMager.getInstance().getPoolNode(r.KEY.poolName.gssk_line,n.board.up_effect,{pos:i,time:a,lens:s,angel:0,scaleX:-1}),s=14-t.x,r.conMager.getInstance().getPoolNode(r.KEY.poolName.gssk_line,n.board.up_effect,{pos:i,time:a,lens:s,angel:0,scaleX:1}),s=14-t.y,r.conMager.getInstance().getPoolNode(r.KEY.poolName.gssk_line,n.board.up_effect,{pos:i,time:a,lens:s,angel:90,scaleX:1}),s=t.y,r.conMager.getInstance().getPoolNode(r.KEY.poolName.gssk_line,n.board.up_effect,{pos:i,time:a,lens:s,angel:90,scaleX:-1}),n.scheduleOnce(function(){u.game_manager.get_game_event(n)},.8)},.15)},t.prototype.delect_use_zhenfa=function(){for(var e=[],t=0;t<e.length;t++)this.can_use_zhenfa.delete(e[t])},t.prototype.end_big=function(){for(var e=0;e<this.player_array.length;e++)this.player_array[e].zhenfa_array=[];this.new_sort()},t.prototype.new_sort=function(){for(var e=u.game_manager.joiner_number,t=0;t<e-1;t++){u.game_manager.init_sort(this.game_joiner[t+1],t+2);var a=this.player_zhenfa[t+1];this.player_zhenfa[t+1]=this.player_zhenfa[t],this.player_zhenfa[t]=a}},t.prototype.start_zhenfa_select=function(){this.huihe++,this.show_xuanze_ui()},t.prototype.show_xuanze_ui=function(){var e=this,t=!1;this.game_joiner[1].cos==h.joiner_enum.player&&(t=!0),r.conMager.getInstance().getPoolNode(r.KEY.poolName.jineng_xuanze,this.board.ui_parent,this.player_zhenfa,this.can_use_zhenfa,this.use_zhenfa,this.game_joiner,t,this.huihe,function(t){console.log("_________________________________");for(var a=0;a<e.player_array.length;a++){console.log(e.player_array[a].joiner_name,"\u6301\u6709\u7684\u9635\u6cd5");for(var n=0;n<e.player_zhenfa[a].length;n++)console.log(e.player_zhenfa[a][n].name);console.log("-------------------------------------------------")}for(console.log("\u73a9\u5bb6\u7684\u9635\u6cd5\u662f",t.length),a=0;a<t.length;a++)t[a]?console.log(t[a].name):console.log("\u65e0");for(a=0;a<e.player_array.length;a++)if(e.player_array[a].cos==h.joiner_enum.ai){var o=[],i=[];for(n=0;n<e.player_zhenfa[a].length;n++)i.push(e.player_zhenfa[a][n]);for(n=0;n<u.game_manager.can_use_zhenfa_number&&!(i.length<1);n++){var s=Math.floor(Math.random()*i.length),r=new(cc.js.getClassByName(i[s].name))(e.zhenfa_id,i[s].ch_name),c=new h.zhenfa_data(e.zhenfa_id,i[s].name,i[s].ch_name,i[s].attr,i[s].level);r.init(e.player_array,e.chess_array,e.player_array),r.init_zhenfa(c,e.player_array[a]),r.init_ui(e.board),o.push(r),i.splice(s,1),e.zhenfa_id++}e.player_array[a].zhenfa_array=o}else if(e.player_array[a].cos==h.joiner_enum.player){var l=[];for(n=0;n<t.length;n++)t[n]&&(r=new(cc.js.getClassByName(t[n].name))(e.zhenfa_id,t[n].ch_name),c=new h.zhenfa_data(e.zhenfa_id,t[n].name,t[n].ch_name,t[n].attr,t[n].level),r.init(e.player_array,e.chess_array,e.player_array),r.init_zhenfa(c,e.player_array[a]),r.init_ui(e.board),e.zhenfa_id++,l.push(r));e.player_array[a].zhenfa_array=l}for(a=0;a<e.player_array.length;a++){for(console.log(e.player_array[a].joiner_name,"\u9009\u62e9\u7684\u9635\u6cd5"),n=0;n<e.player_array[a].zhenfa_array.length;n++)e.player_array[a].zhenfa_array[n]&&console.log(e.player_array[a].zhenfa_array[n].joiner_name);console.log("-------------------------------------------------")}for(console.log("\u73a9\u5bb6\u7684\u9635\u6cd5\u662f",t.length),a=0;a<t.length;a++)t[a]?console.log(t[a].name):console.log("\u65e0");u.game_manager.get_game_event(e)})},i([p],t)}(l.default));a.default=g,cc._RF.pop()},{"../../../../SSSGF/dataController/DATA":"DATA","../../../../SSSGF/ssscgf":"ssscgf","../../../../utils/commonFunction":"commonFunction","../class_manager":"class_manager","../game_manager":"game_manager","../model_joiner":"model_joiner"}],tipNode2:[function(e,t,a){"use strict";cc._RF.push(t,"8fb30GzEEtGu6aXEQR9WtvN","tipNode2");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.bgNode=null,t}return o(t,e),t.prototype.start=function(){},t.prototype.onOpen=function(e){if(this.bgNode.width=this.label.node.width+150,this.node.setPosition(cc.v2()),this.startAction(this.endAction.bind(this)),5e3==e[0]||1e4==e[0]||e[0]>=2e4){this.label.string="+"+e[0];var t=parseInt(e[0]);s.conMager.getInstance()._msgAtion.emit("updateMoney",t)}else this.label.string=e[0]},t.prototype.startAction=function(e){this.node.opacity=255,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveBy(2,0,200),cc.fadeOut(2)),cc.callFunc(function(){e()})))},t.prototype.endAction=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},i([h(cc.Label)],t.prototype,"label",void 0),i([h(cc.Node)],t.prototype,"bgNode",void 0),i([c],t)}(cc.Component);a.default=u,cc._RF.pop()},{"./../SSSGF/ssscgf":"ssscgf"}],tipNode:[function(e,t,a){"use strict";cc._RF.push(t,"dbb8bHlyJBHzb+CzZjUkqXY","tipNode");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.bgNode=null,t}return o(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onOpen=function(e){this.label.string=e[0],this.node.setPosition(cc.v2()),this.startAction(this.endAction.bind(this))},t.prototype.startAction=function(e){this.node.opacity=255,this.node.setScale(0),this.node.stopAllActions(),this.label.node.color=cc.color(255,255,255),"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!"==this.label.string||"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"==this.label.string?("\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"==this.label.string&&(this.label.node.color=cc.color(0,0,0)),cc.tween(this.node).to(1,{scale:1.2},{easing:"bounceOut",number:2}).delay(.2).to(.5,{position:cc.v3(220,-380),scale:0},{easing:"sineIn",number:2}).call(function(){e()}).start()):"\u8d62\u4e00\u5c40\u518d\u6765\u54e6!"==this.label.string||"\u4e0b\u5468\u518d\u6765\u9886\u53d6\u5427!"==this.label.string?(this.node.y-=90,cc.tween(this.node).to(1,{scale:1.2},{easing:"bounceOut",number:2}).to(.3,{opacity:0},{easing:"sineIn",number:2}).call(function(){e()}).start()):cc.tween(this.node).to(1,{scale:1.2},{easing:"bounceOut",number:2}).to(.3,{opacity:0},{easing:"sineIn",number:2}).call(function(){e()}).start()},t.prototype.endAction=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},i([h(cc.Label)],t.prototype,"label",void 0),i([h(cc.Node)],t.prototype,"bgNode",void 0),i([c],t)}(cc.Component);a.default=u,cc._RF.pop()},{"./../SSSGF/ssscgf":"ssscgf"}],tips:[function(e,t,a){"use strict";cc._RF.push(t,"9106c89a5ZI/LeKQK7vT7bC","tips");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return o(t,e),t.prototype.start=function(){this.node.zIndex=99},t.prototype.init=function(){this.node.active=!0,this.node.scale=0,this.node.getChildByName("bgNode").opacity=0,this.node.runAction(cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.2,1),cc.callFunc(function(){})))},t.prototype.guanBi=function(){var e=this;this.node.getChildByName("bgNode").opacity=0,this.node.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.3,0),cc.callFunc(function(){e.node.active=!1})))},i([c(cc.Label)],t.prototype,"label",void 0),i([c],t.prototype,"text",void 0),i([r],t)}(cc.Component);a.default=h,cc._RF.pop()},{}],tip:[function(e,t,a){"use strict";cc._RF.push(t,"7aa661kDzVPjbRv9nbChEnf","tip");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(e){var t=this;this.node.scale=0;var a=e[0].cb;cc.tween(this.node).to(.7,{scale:1},{easing:"cubicOut"}).delay(1).to(.7,{scale:0},{easing:"cubicIn"}).call(function(){a&&a(),t.onClose(1)}).start()},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf"}],topNode:[function(e,t,a){"use strict";cc._RF.push(t,"d1f71IV3YtDPIzTJgV/zjFh","topNode");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){this.node.zIndex=10,s.conMager.getInstance()._msgAtion.on("updateMedalCount",this.updateMedalCount,this)},t.prototype.onEnable=function(){this.updateMedalCount()},t.prototype.updateMedalCount=function(){},i([c],t)}(cc.Component));a.default=h,cc._RF.pop()},{"./../SSSGF/ssscgf":"ssscgf"}],touch:[function(e,t,a){"use strict";cc._RF.push(t,"36e2a56PgxD95B1sYgC/c5x","touch");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.jn1=null,t.jn_pool=new cc.NodePool,t}return o(t,e),t.prototype.onLoad=function(){this.addListenner();for(var e=0;e<8;e++){var t=cc.instantiate(this.jn1);this.jn_pool.put(t)}this.node._touchListener.setSwallowTouches(!1)},t.prototype.onTouched=function(e){var t=e.getLocation(),a=this.node.convertToNodeSpaceAR(t);if(this.jn_pool.size()>0){var n=this.jn_pool.get();n.parent=this.node,n.setPosition(a),n.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this.action(n)}},t.prototype.action=function(e){var t=this;this.scheduleOnce(function(){t.jn_pool.put(e)},1)},t.prototype.addListenner=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.update=function(){},i([c(cc.Prefab)],t.prototype,"jn1",void 0),i([r],t)}(cc.Component);a.default=h,cc._RF.pop()},{}],updateNiCheng_panel:[function(e,t,a){"use strict";cc._RF.push(t,"5b0e7KIk0JNI7aIK+v0cKqx","updateNiCheng_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/getDataFromServer"),c=e("../../utils/platform"),h=cc._decorator,u=h.ccclass,l=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.EditBox=null,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){this.node.active=!0;var e=this.node.getChildByName("Node");this.scaleBigShow(e,cc.v3(0,0),null),this.EditBox.string=""},t.prototype.onClose=function(){var e=this,t=this.node.getChildByName("Node");this.scaleSmallHide(t,cc.v3(0,0),function(){s.conMager.getInstance().putPoolNode(e.node.name,e.node)})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.queding_btn=function(){var e=this,t=s.GameDataStorage.getUser().userData.gameName;s.GameDataStorage.getUser().userData.gameName=this.EditBox.string,r.getDataFromServer.setUserDataAndroid(s.GameDataStorage.getUser().userData,c.platform.rank_channel,function(a){if(!a)return s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u8bf7\u7a0d\u540e\u91cd\u8bd5!"),void(s.GameDataStorage.getUser().userData.gameName=t);0!=a.errno?(s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,a.msg),s.GameDataStorage.getUser().userData.gameName=t):(s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u66f4\u65b0\u6635\u79f0\u6210\u529f!"),s.conMager.getInstance()._msgAtion.emit("updateNiCheng",e.EditBox.string),e.onClose(1))})},t.prototype.close_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1)},i([l(cc.EditBox)],t.prototype,"EditBox",void 0),i([u],t)}(s.winRootNode);a.default=d,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../utils/getDataFromServer":"getDataFromServer","../../utils/platform":"platform"}],updateRankData:[function(e,t,a){"use strict";cc._RF.push(t,"eb56c2fPx9PEIKd2ck/Kapx","updateRankData"),Object.defineProperty(a,"__esModule",{value:!0}),a.UpdataRankData=void 0;var n=[50,40,35,30,25,20,15,10,5],o=[25,20,20,15,10,10,10,10,5],i=[0,1530,3130,4880,6680,8590,10030,11380,12380],s=[100,90,80,70,60,50,40,30,20,10],r=[50,45,40,35,30,25,20,15,10,5],c=function(){function e(){}return e.win_jd_game=function(e,t,a){var o=this.getRankByScoreJD(e),i=n[o.duan_wei],s=o.deng_ji+10*o.duan_wei,r=this.getRankByScoreJD(t),c=r.deng_ji+10*r.duan_wei,h=Math.abs(s-c),u=s>c?i-h:i+h;return u<0&&(u=0),i+.1*i*a+u},e.fail_jd_game=function(e,t){var a=this.getRankByScoreJD(e),n=a.deng_ji+10*a.duan_wei,i=this.getRankByScoreJD(t),s=i.deng_ji+10*i.duan_wei,r=o[a.duan_wei],c=Math.abs(n-s),h=n>s?r+c:r-c;return h<0&&(h=0),h},e.get_jd_level_score=function(e){var t=this.getRankByScoreJD(e),a=n[t.duan_wei]*(3+t.duan_wei);a=i[t.duan_wei]+a*(11-t.deng_ji)+30;var o=e-(i[t.duan_wei]+(10-t.deng_ji)*a);return t.deng_ji<10&&0==t.duan_wei&&(o-=30),o<0&&(o=0),{levelNeedScore:a,moreScore:o}},e.getRankByScoreJD=function(e){var t=this.getDuanWeiJD(e);return{duan_wei:t,deng_ji:this.getDengJiJD(e,t)}},e.getDuanWeiJD=function(e){for(var t=0;t<i.length;t++)if(e<i[t])return t-1;return 8},e.getDengJiJD=function(e,t){var a=e-i[t],o=n[t]*(3+t);0==t&&(a-=30)<0&&(a=0);var s=10-Math.floor(a/o);return s<1&&(s=1),s},e.win_dz_game=function(e,t){var a=s[Math.floor(e/3300)],n=Math.floor(e/330),o=Math.floor(t/330),i=Math.abs(n-o),r=n>o?a-i:a+i;return r<0&&(r=0),r},e.fail_dz_game=function(e,t){var a=r[Math.floor(e/3300)],n=Math.floor(e/330),o=Math.floor(t/330),i=Math.abs(n-o),s=n>o?a+i:a-i;return s<0&&(s=0),s},e.get_dz_level=function(e){return Math.floor(e/330)},e}();a.UpdataRankData=c,cc._RF.pop()},{}],userIndo_panel:[function(e,t,a){"use strict";cc._RF.push(t,"87121yi6SlAvKdke26g6ZD0","userIndo_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/platform"),c=e("../../utils/commonFunction"),h=cc._decorator,u=h.ccclass,l=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.head_icon=null,t.bgm_btn=null,t.effect_btn=null,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.showpanel),this.node.active=!0;var e=this.node.getChildByName("Node");this.scaleBigShow(e,cc.v3(0,0),null),e.getChildByName("user_name").getComponent(cc.Label).string="\u6635\u79f0: "+s.GameDataStorage.getUser().userData.gameName,this.setDuanWeiLabel(),this.head_icon=e.getChildByName("head_icon").getChildByName("head_icon").getComponent(cc.Sprite),"null"!=s.GameDataStorage.getUser().userData.headIconUrl&&c.commonFunction.updateHttpSprite(s.GameDataStorage.getUser().userData.headIconUrl,this.head_icon.node),e.getChildByName("btn_updateNiCheng").active=!1,r.platform.now_platform!=r.platform_type.is_tt&&(e.getChildByName("btn_updateXinxi").active=!1,e.getChildByName("btn_updateNiCheng").active=!0,e.getChildByName("btn_close").active=!1,this.scheduleOnce(function(){e.getChildByName("btn_close").active=!0},r.platform.data.time_fanhui),s.conMager.getInstance()._msgAtion.on("updateNiCheng",this.updateData,this)),window.tt&&"preview"==tt.env.VERSION&&(e.getChildByName("btn_updateXinxi2").active=!0);var t=s.GameDataStorage.gameStateData.isEffect_Open,a=s.GameDataStorage.gameStateData.isBgm_Open;this.effect_btn.getChildByName("open").active=t,this.bgm_btn.getChildByName("open").active=a},t.prototype.setDuanWeiLabel=function(){var e=this.node.getChildByName("Node").getChildByName("user_level").getComponent(cc.Label),t="",a=s.UpdataRankData.getRankByScoreJD(s.GameDataStorage.getUser().userData.jd_score);t=0==a.duan_wei?"\u521d\u6bb5 ":a.duan_wei+1+"\u6bb5 ",t=10==a.deng_ji?t+a.deng_ji+"\u7ea7":t+" "+a.deng_ji+"\u7ea7",e.string="\u6bb5\u4f4d: "+t},t.prototype.onClose=function(){var e=this,t=this.node.getChildByName("Node");this.scaleSmallHide(t,cc.v3(0,0),function(){s.conMager.getInstance().putPoolNode(e.node.name,e.node)}),r.platform.now_platform!=r.platform_type.is_tt&&s.conMager.getInstance()._msgAtion.off("updateNiCheng",this.updateData,this)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.updatexinxi_btn=function(){this.disableClick(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var e=this;window.tt&&tt.login({success:function(){console.log("\u767b\u5f55\u6210\u529f"),tt.getUserInfo({success:function(t){console.log("getUserInfo \u8c03\u7528\u6210\u529f",t.userInfo),s.GameDataStorage.getUser().userData.headIconUrl=t.userInfo.avatarUrl,s.GameDataStorage.getUser().userData.gameName=t.userInfo.nickName,s.GameDataStorage.preserveGameData(),c.commonFunction.updateHttpSprite(s.GameDataStorage.getUser().userData.headIconUrl,e.head_icon.node),e.node.getChildByName("Node").getChildByName("user_name").getComponent(cc.Label).string="\u6635\u79f0: "+s.GameDataStorage.getUser().userData.gameName,s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u66f4\u65b0\u4fe1\u606f\u6210\u529f!")},fail:function(t){console.log("getUserInfo \u8c03\u7528\u5931\u8d25",t.errMsg),tt.openSetting({success:function(){console.log("openSetting success")},fail:function(){console.log("openSetting fail")},complete:function(){console.log("openSetting complete"),tt.getUserInfo({success:function(t){console.log("getUserInfo \u8c03\u7528\u6210\u529f",t.userInfo),s.GameDataStorage.getUser().userData.headIconUrl=t.userInfo.avatarUrl,s.GameDataStorage.getUser().userData.gameName=t.userInfo.nickName,s.GameDataStorage.preserveGameData(),c.commonFunction.updateHttpSprite(s.GameDataStorage.getUser().userData.headIconUrl,e.head_icon.node),e.node.getChildByName("Node").getChildByName("user_name").getComponent(cc.Label).string="\u6635\u79f0: "+s.GameDataStorage.getUser().userData.gameName,s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u66f4\u65b0\u4fe1\u606f\u6210\u529f!")},fail:function(){s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u66f4\u65b0\u4fe1\u606f\u5931\u8d25!")}})}})}})}})},t.prototype.updateData=function(e){s.GameDataStorage.getUser().userData.gameName=e,s.GameDataStorage.preserveGameData(),this.node.getChildByName("Node").getChildByName("user_name").getComponent(cc.Label).string="\u6635\u79f0: "+s.GameDataStorage.getUser().userData.gameName},t.prototype.updateniCheng_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),s.conMager.getInstance().getPoolNode(s.KEY.poolName.updateNiCheng_panel,null,null)},t.prototype.quxiao_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1)},t.prototype.renwu_btn=function(){console.log("\u6e05\u7406\u7f13\u5b58"),cc.sys.localStorage.clear(),s.GameDataStorage.initData()},t.prototype.bgm_btn_fun=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var e=s.GameDataStorage.gameStateData.isBgm_Open;this.bgm_btn.getChildByName("open").active=!e,s.GameDataStorage.gameStateData.isBgm_Open=!e,e?s.conMager.getInstance().stopAllAudioEff():s.conMager.getInstance().playBGM(s.KEY.audioName.bgm)},t.prototype.effect_btn_fun=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var e=s.GameDataStorage.gameStateData.isEffect_Open;this.effect_btn.getChildByName("open").active=!e,s.GameDataStorage.gameStateData.isEffect_Open=!e},i([l(cc.Node)],t.prototype,"bgm_btn",void 0),i([l(cc.Node)],t.prototype,"effect_btn",void 0),i([u],t)}(s.winRootNode);a.default=d,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform"}],userInfo_panel:[function(e,t,a){"use strict";cc._RF.push(t,"2ad7fC5cm1D/qXRgq30BmhF","userInfo_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=e("../../utils/platform"),c=e("../../utils/getDataFromServer"),h=e("../../utils/commonFunction"),u=cc._decorator,l=u.ccclass,d=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.head_icon=null,t.user_name=null,t.gold_num=null,t.duiju_info=null,t.rate_num=null,t.rank_num=null,t.canju_max=null,t.user_level=null,t.chenghao=null,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){var e=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.showpanel),this.node.active=!0;var t=this.node.getChildByName("Node");this.scaleBigShow(t,cc.v3(0,0),null),this.refreshView(),this.check_login(),r.platform.now_platform!=r.platform_type.is_tt&&(t.getChildByName("btn_updateXinxi").active=!1,t.getChildByName("btn_updateNiCheng").active=!0,t.getChildByName("btn_close").active=!1,this.scheduleOnce(function(){t.getChildByName("btn_close").active=!0},r.platform.data.time_fanhui),s.conMager.getInstance()._msgAtion.on("updateNiCheng",function(t){e.user_name.string=t,s.GameDataStorage.preserveGameData(),s.conMager.getInstance()._msgAtion.emit("refreshInfo")}))},t.prototype.onClose=function(){var e=this,t=this.node.getChildByName("Node");this.scaleSmallHide(t,cc.v3(0,0),function(){s.conMager.getInstance().putPoolNode(e.node.name,e.node)}),r.platform.now_platform!=r.platform_type.is_tt&&s.conMager.getInstance()._msgAtion.off("updateNiCheng")},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.updatexinxi_btn=function(){this.disableClick(),s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.check_login()},t.prototype.check_login=function(){var e=this;window.tt&&tt.login({success:function(){console.log("\u767b\u5f55\u6210\u529f"),tt.getUserInfo({success:function(t){console.log("getUserInfo \u8c03\u7528\u6210\u529f",t.userInfo),e.success_callback(t),s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u66f4\u65b0\u4fe1\u606f\u6210\u529f!")},fail:function(t){console.log("getUserInfo \u8c03\u7528\u5931\u8d25",t.errMsg),tt.openSetting({success:function(){console.log("openSetting success")},fail:function(){console.log("openSetting fail")},complete:function(){console.log("openSetting complete"),tt.getUserInfo({success:function(t){console.log("getUserInfo \u8c03\u7528\u6210\u529f",t.userInfo),e.success_callback(t),s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u66f4\u65b0\u4fe1\u606f\u6210\u529f!")},fail:function(){s.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,null,"\u66f4\u65b0\u4fe1\u606f\u5931\u8d25!")}})}})}})}})},t.prototype.success_callback=function(e){s.GameDataStorage.getUser().userData.headIconUrl=e.userInfo.avatarUrl,s.GameDataStorage.getUser().userData.gameName=e.userInfo.nickName,s.GameDataStorage.preserveGameData(),this.refreshView()},t.prototype.quxiao_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),this.onClose(1)},t.prototype.dw_close_btn=function(){var e=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var t=this.node.getChildByName("nd_duanwei");this.fadeOut(t,null,function(){t.active=!1,e.node.getChildByName("Node").active=!0})},t.prototype.ch_close_btn=function(){var e=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var t=this.node.getChildByName("nd_chenghao");this.fadeOut(t,null,function(){t.active=!1,e.node.getChildByName("Node").active=!0})},t.prototype.duanwei_btn=function(){var e=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var t=this.node.getChildByName("nd_duanwei");t.active=!0,this.fadeIn(t,null,function(){e.node.getChildByName("Node").active=!1})},t.prototype.chenghao_btn=function(){var e=this;s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var t=this.node.getChildByName("nd_chenghao");t.active=!0,this.fadeIn(t,null,function(){e.node.getChildByName("Node").active=!1})},t.prototype.updateNiCheng_btn=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn),s.conMager.getInstance().getPoolNode(s.KEY.poolName.updateNiCheng_panel,null,null)},t.prototype.refreshView=function(){var e=this.node.getChildByName("Node"),t=s.GameDataStorage.getUser().userData.successNum,a=s.GameDataStorage.getUser().userData.failNum,n=s.GameDataStorage.getUser().userData.flatNum;this.user_name.string=s.GameDataStorage.getUser().userData.gameName,this.head_icon=e.getChildByName("head_icon").getChildByName("head_icon").getComponent(cc.Sprite),"null"!=s.GameDataStorage.getUser().userData.headIconUrl&&h.commonFunction.updateHttpSprite(s.GameDataStorage.getUser().userData.headIconUrl,this.head_icon.node),this.gold_num.string=""+s.GameDataStorage.getUser().userData.money,this.duiju_info.string=t+"\u80dc/"+a+"\u8d1f/"+n+"\u548c",this.rate_num.string=this.winningRate(t,a,n)+"%",this.setRank(this.rank_num),this.canju_max.string=s.GameDataStorage.getUser().userData.canju_id+"\u5173";var o=h.commonFunction.getDuanWei(s.GameDataStorage.getUser().userData.jd_score);this.user_level.string=o+"("+s.GameDataStorage.getUser().userData.jd_score+")",console.log("duanwei_num",o),this.chenghao.string=this.getChengHao(o),s.conMager.getInstance()._msgAtion.emit("refreshInfo")},t.prototype.winningRate=function(e,t,a){var n=e+t+a,o=e/(n=0==n?1:n)*100;return Math.floor(o)},t.prototype.getChengHao=function(e){var t=["\u7ae5\u751f","\u79c0\u624d","\u4e3e\u4eba","\u8fdb\u58eb","\u7ff0\u6797","\u5fa1\u53f2","\u592a\u5085","\u592a\u5e08","\u5e1d\u5e08"],a=["\u521d\u6bb5","2\u6bb5","3\u6bb5","4\u6bb5","5\u6bb5","6\u6bb5","7\u6bb5","8\u6bb5","9\u6bb5"].indexOf(e.substring(0,2));return a<0?(console.log("\u8f93\u5165\u7684\u6bb5\u4f4d\u6709\u8bef\uff01",e),t[0]):t[a]},t.prototype.setRank=function(e){e.string="\u672a\u4e0a\u699c";var t=s.GameDataStorage.getUser().userData;r.platform.now_platform==r.platform_type.is_tt?c.getDataFromServer.request("get_rank/zijie_chess5/",{rank:"jd_score",openId:t.openId},function(t){console.log(t);for(var a=0;a<t.data.length;a++)if(t.my_data.my_score>=t.data[a].score){e.string=""+(a+1);break}}):c.getDataFromServer.request("get_rank/appgame/",{rank:"jd_score",openId:t.openId},function(t){console.log(t);for(var a=0;a<t.data.length;a++)if(t.my_data.my_score>=t.data[a].score){e.string=""+(a+1);break}})},i([d(cc.Label)],t.prototype,"user_name",void 0),i([d(cc.Label)],t.prototype,"gold_num",void 0),i([d(cc.Label)],t.prototype,"duiju_info",void 0),i([d(cc.Label)],t.prototype,"rate_num",void 0),i([d(cc.Label)],t.prototype,"rank_num",void 0),i([d(cc.Label)],t.prototype,"canju_max",void 0),i([d(cc.Label)],t.prototype,"user_level",void 0),i([d(cc.Label)],t.prototype,"chenghao",void 0),i([l],t)}(s.winRootNode);a.default=p,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../utils/commonFunction":"commonFunction","../../utils/getDataFromServer":"getDataFromServer","../../utils/platform":"platform"}],user_headPanel:[function(e,t,a){"use strict";cc._RF.push(t,"97778s/QNNF76deA3S66PRq","user_headPanel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callBack=null,t.ds_headIconIndex=0,t.Node=null,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(){this.show()},t.prototype.onClose=function(){this.node.active=!1,s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.show=function(){this.node.active=!0,this.Node.scale=0,this.Node.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.scaleTo(.05,1)))},t.prototype.hide=function(){var e=this;this.Node.runAction(cc.sequence(cc.scaleTo(.05,1.1),cc.scaleTo(.15,0),cc.callFunc(function(){e.onClose(1)})))},t.prototype.biaoQing_btn=function(e,t){this.hide();var a=parseInt(t);s.conMager.getInstance().playAudioEff("nan/"+this.musicNames[a-1]),this.scheduleOnce(function(){},2.2)},t.prototype.hide_userPenl_btn=function(){this.disableClick(),this.hide()},i([h(cc.Node)],t.prototype,"Node",void 0),i([c],t)}(s.winRootNode);a.default=u,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf"}],util:[function(e,t,a){"use strict";cc._RF.push(t,"cce75q8KNpJe6Oams5m5rEb","util"),Object.defineProperty(a,"__esModule",{value:!0}),a.checkMgobe=a.openLink=a.showLog=a.appendLog=a.setBroadcastCallbacks=a.isInited=a.initSDK=void 0;var n=e("./config"),o=e("./global"),i=e("./logic/FrameSyncLogic");function s(){return!!MGOBE.Player&&!!MGOBE.Player.id}function r(e,t,a){if(e){var n={onJoinRoom:function(){return function(){return null}},onLeaveRoom:function(){return function(){return null}},onChangeRoom:function(){return function(){return null}},onDismissRoom:function(){return function(){return null}},onStartFrameSync:function(){return function(){return null}},onStopFrameSync:function(){return function(){return null}},onRecvFrame:function(e){i.calcFrame(e.data.frame)},onChangeCustomPlayerStatus:function(){return function(){return null}},onRemovePlayer:function(){return function(){return null}},onRecvFromClient:function(){return function(){return null}},onRecvFromGameSvr:function(){return function(){return null}},onAutoRequestFrameError:function(){return function(){return null}}};Object.keys(n).forEach(function(o){var i=a[o]?a[o].bind(t):n[o];e[o]=i})}}function c(e){console.log("--------------showLog:",e)}a.initSDK=function(e,t,a,i,c){if(s())return c&&c({code:MGOBE.ErrCode.EC_OK});if(cc.sys.isNative&&!window.cacertNativeUrl)console.log("\u52a0\u8f7d\u8bc1\u4e66"),cc.resources.load("cacert",cc.Asset,function(s,h){if(s)console.log("\u8054\u7f51\u8bc1\u4e66\u52a0\u8f7d\u5931\u8d25 err:"+s);else{window.cacertNativeUrl=h.nativeUrl,i=window.cacertNativeUrl,console.log("\u52a0\u8f7d\u8bc1\u4e66\u6210\u529f1 \u8def\u5f84:"+window.cacertNativeUrl);var u={gameId:n.default.gameId,openId:n.default.openId,secretKey:n.default.secretKey},l={url:n.default.url,isAutoRequestFrame:!0,cacertNativeUrl:window.cacertNativeUrl};Object.assign(u,{gameId:e,secretKey:t}),Object.assign(l,{url:a,cacertNativeUrl:i}),MGOBE.DebuggerLog.enable=!1,cc.sys.isNative&&(MGOBE.DebuggerLog.enable=!1),MGOBE.Listener.init(u,l,function(e){e.code===MGOBE.ErrCode.EC_OK&&(o.default.room=new MGOBE.Room,o.default.gameId=u.gameId,MGOBE.Listener.add(o.default.room),r(o.default.room,null,{})),c&&c({code:e.code})})}});else{var h={gameId:n.default.gameId,openId:n.default.openId,secretKey:n.default.secretKey},u={url:n.default.url,isAutoRequestFrame:!0,cacertNativeUrl:window.cacertNativeUrl?window.cacertNativeUrl:""};cc.sys.isNative&&(i=window.cacertNativeUrl),Object.assign(h,{gameId:e,secretKey:t}),Object.assign(u,{url:a,cacertNativeUrl:i}),MGOBE.DebuggerLog.enable=!1,cc.sys.isNative&&(MGOBE.DebuggerLog.enable=!1),MGOBE.Listener.init(h,u,function(e){e.code===MGOBE.ErrCode.EC_OK&&(o.default.room=new MGOBE.Room,o.default.gameId=h.gameId,MGOBE.Listener.add(o.default.room),r(o.default.room,null,{})),c&&c({code:e.code})})}},a.isInited=s,a.setBroadcastCallbacks=r,a.appendLog=c,a.showLog=function(e){console.log("--------------showLog:",e)},a.openLink=function(e,t){return"undefined"==typeof window?c("\u65e0\u6cd5\u6253\u5f00\u94fe\u63a5"):"function"!=typeof window.open?c("\u65e0\u6cd5\u6253\u5f00\u94fe\u63a5"):void window.open(e,t&&"_blank")},a.checkMgobe=function(){if("undefined"!=typeof MGOBE)return!0;var e="\u8bf7\u5148\u542f\u7528\u817e\u8baf\u4e91 MGOBE \u670d\u52a1\u5bfc\u5165 MGOBE SDK\uff01";return console.log(e),c(e),!1},cc._RF.pop()},{"./config":"config","./global":"global","./logic/FrameSyncLogic":"FrameSyncLogic"}],videoCon:[function(e,t){"use strict";cc._RF.push(t,"18652kPLoBDzI9fcgPOTyPg","videoCon"),cc.Class({extends:cc.Component,properties:{camera:null,video:null,detector:null,frame:0,videoSprite:cc.Sprite,videoTexture:{type:cc.Texture2D,default:null}},onLoad:function(){this._moveFlag=0,this._jumpFlag=0,window.videoCon=this,this.videoSprite=this.node.getComponent(cc.Sprite),this.startCamera(),this.handleDetectionResult(),this.judgeMove()},onDisable:function(){this.camera&&this.camera.destroy()},startCamera:function(){var e=this;this.camera=tt.createCamera(),this.detector=tt.createFaceDetector(),tt.setKeepScreenOn(),this.camera.start("back",!0).then(function(t){e.video=t,e.initVideo()}).catch(function(e){tt.showToast({title:"\u6444\u50cf\u673a\u9700\u8981\u6388\u6743"}),console.log(e)}),this.camera.setBeautifyParam(.5,.5,.5,.5)},initVideo:function(){this.videoTexture=new cc.Texture2D,this.videoTexture.initWithElement(this.video),this.videoTexture.handleLoadedTexture(),this.videoSprite.spriteFrame=new cc.SpriteFrame(this.videoTexture),this.setVideoWidth(cc.view.getVisibleSize().width),this.videoSprite.node.width=this.video.width,this.videoSprite.node.height=this.video.height},startDetector:function(){var e=this;this.detector&&this.video&&this.detector.detectFaces(this.video).then(function(t){if(t&&t.length>0&&t[0].actions){if(1==t[0].actions.mouth_ah){if(1==e._jumpFlag)return;return 2==e._moveFlag&&window.videoCatNode.changeEndMove(),e._moveFlag=2,e._jumpFlag=1,void window.videoCatNode.jumpCall()}if(1==t[0].actions.mouth_pout){if(2==e._moveFlag)return;return 1==e._jumpFlag&&window.videoCatNode.changeEndJump(),e._moveFlag=2,void(e._jumpFlag=0)}1!=t[0].actions.mouth_ah&&1!=t[0].actions.mouth_pout&&(1==e._jumpFlag&&window.videoCatNode.changeEndJump(),2==e._moveFlag&&window.videoCatNode.changeEndMove(),e._jumpFlag=0,e._moveFlag=0)}else 1==e._jumpFlag&&window.videoCatNode.changeEndJump(),2==e._moveFlag&&window.videoCatNode.changeEndMove(),e._jumpFlag=0,e._moveFlag=0})},handleDetectionResult:function(){},setVideoWidth:function(e){this.video&&(this.video.width=e,this.video.height=this.video.videoHeight/this.video.videoWidth*e)},judgeMove:function(){tt.onAccelerometerChange(function(e){console.log("x\u8f74\u6570\u636e\uff1a"+e.x),console.log("y\u8f74\u6570\u636e\uff1a"+e.y),console.log("z\u8f74\u6570\u636e\uff1a"+e.z)})},update:function(){this.videoTexture&&this.video&&this.videoTexture.update({image:this.video,flipY:!1})}}),cc._RF.pop()},{}],videoEvent_ks:[function(e,t,a){"use strict";cc._RF.push(t,"a4608tFH7lGcK3getGdWpWo","videoEvent_ks"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("../../conMagers/conMager"),o=function(){function e(){this.videoAd=void 0,this.failCb=void 0,this.successCb=void 0,this.videoLoad=!1,this.autoAgainPlayTimes=0,this.autoPlayFlag=!1,this.adId="",this.isDisable=!1,this.idDebug=!1,this.onInitVedio=function(){if(window.kwaigame&&kwaigame.createRewardedVideoAd){if(this.videoAd=kwaigame.createRewardedVideoAd({adUnitId:this.adId}),!this.videoAd)return void console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898");var e=this;this.videoAd.onClose(function(){e.autoPlayFlag&&0==e.autoAgainPlayTimes?(e.autoAgainPlayTimes++,e.startVideoAd()):(e.failCb&&e.failCb(),n.default.getInstance().getPoolNode("tipNode",void 0,"\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1"),e.successCb=void 0,e.failCb=void 0)}),e.videoAd.onReward(function(){if(e.successCb&&e.successCb(),0==e.autoAgainPlayTimes&&e.autoPlayFlag)return e.autoAgainPlayTimes++,e.successCb=void 0,e.failCb=void 0,void e.startVideoAd()})}},this.startVideoAd=function(){var e=this;this.isDisable||(this.isDisable=!0,setTimeout(function(){e.isDisable=!1},800),window.kwaigame?this.videoAd?this.videoAd.show({success:function(){},fail:function(){this.showToast("\u89c6\u9891\u663e\u793a\u5931\u8d25, \u7a0d\u540e\u91cd\u8bd5","none")}}):this.autoPlayFlag||n.default.getInstance().getPoolNode("tipNode",void 0,"\u5e7f\u544a\u83b7\u53d6\u5931\u8d25,\u8bf7\u91cd\u8bd5"):this.successCb&&this.successCb())}}return e.prototype.init=function(e){this.adId=e,this.onInitVedio()},e}();a.default=o,cc._RF.pop()},{"../../conMagers/conMager":"conMager"}],videoEvent:[function(e,t,a){"use strict";cc._RF.push(t,"47c6cPc28tPP550sFzLRvxd","videoEvent"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("../../conMagers/conMager"),o=e("../../dataController/gameDataManager"),i=function(){function e(){this.videoAd=void 0,this.failCb=void 0,this.successCb=void 0,this.videoLoad=!1,this.autoAgainPlayTimes=0,this.autoPlayFlag=!1,this.adId="",this.isDisable=!1,this.idDebug=!1,this.onInitVedio=function(){var e=this;window.tt&&tt.createRewardedVideoAd&&(this.videoAd=tt.createRewardedVideoAd({adUnitId:this.adId}),this.videoAd.onLoad(function(){e.videoLoad=!0,console.log("---------------window.globalData.comFunVideo \u52a0\u8f7d\u6210\u529f!")}),this.videoAd.onError(function(t){e.videoLoad=!1,console.log("---------------window.globalData.comFunVideo \u52a0\u8f7d\u5931\u8d25!",t)}),this.videoAd.onClose(function(t){if(e.videoAd.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),e.videoLoad=!0}).catch(function(t){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),e.videoAd.load().then(function(){e.videoLoad=!0,console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f")})}),t.isEnded){if(e.successCb&&e.successCb(),0==e.autoAgainPlayTimes&&e.autoPlayFlag)return e.autoAgainPlayTimes++,e.successCb=void 0,e.failCb=void 0,void e.startVideoAd()}else e.autoPlayFlag&&0==e.autoAgainPlayTimes?(e.autoAgainPlayTimes++,e.startVideoAd()):(e.failCb&&e.failCb(),n.default.getInstance().getPoolNode("tipNode",void 0,"\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1"),e.successCb=void 0,e.failCb=void 0)}))},this.startVideoAd=function(){var e=this;if(console.log("\u54c8\u54c8\u54c8"),cc.sys.isNative&&"Android"==cc.sys.os)return console.log("\u663e\u793a\u6fc0\u52b1\u89c6\u9891"),void jsb.reflection.callStaticMethod("org/cocos2dx/javascript/jcjSdk/jsCallJavaMager","callShowAd","(II)V",4,5);if(window.tt){if(!o.default.gameStateData.is_video)return void n.default.getInstance().getPoolNode("tipNode",void 0,"\u5e7f\u544a\u83b7\u53d6\u5931\u8d25!");if(!tt.createRewardedVideoAd||"preview"===this.version())return this.successCb();if(this.idDebug)return void(this.successCb&&this.successCb());this.videoLoad?this.videoAd.show():(this.autoPlayFlag||n.default.getInstance().getPoolNode("tipNode",void 0,"\u5e7f\u544a\u83b7\u53d6\u5931\u8d25,\u8bf7\u91cd\u8bd5"),this.videoAd.load().then(function(){if(console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),e.videoLoad=!0,e.autoPlayFlag)return e.videoAd.show()}).catch(function(t){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),e.videoAd.load().then(function(){if(console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),e.videoLoad=!0,e.autoPlayFlag)return e.videoAd.show()})}))}else this.successCb&&this.successCb()}}return e.prototype.init=function(e){this.adId=e,this.onInitVedio()},e.prototype.loadViedeo=function(){var e=this;window.tt&&(console.log("\u9884\u52a0\u8f7d\u5e7f\u544a"),this.videoAd.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),e.videoLoad=!0}).catch(function(t){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),e.videoAd.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),e.videoLoad=!0})}))},e.prototype.version=function(){return tt.env.VERSION||"preview"},e}();a.default=i,cc._RF.pop()},{"../../conMagers/conMager":"conMager","../../dataController/gameDataManager":"gameDataManager"}],wanning:[function(e,t,a){"use strict";cc._RF.push(t,"780d7Pq2TBAKbFwDP00VOYN","wanning");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../KEY"),r=e("../../../../SSSGF/ssscgf"),c=e("../class_manager"),h=e("../game_manager"),u=e("../zhenfa_joiner"),l=cc._decorator,d=l.ccclass,p=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_number_max=1,t.use_number=0,t.ui_parent=null,t}return o(t,e),t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.ui_parent=e.ui_parent},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(e){var t=this.judge_active();return e!=this.my_player||0!=t||0!=(t=this.judge_number())||(this.show_wanning(),!1)},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return this.use_number=0,!0},t.prototype.one_win=function(){return!0},t.prototype.use_zhenfa=function(){return!0},t.prototype.use_zhenfa_finish=function(){return!0},t.prototype.show_wanning=function(){this.use_number++;var e=!1;this.my_player.cos==c.joiner_enum.player?(e=!0,r.conMager.getInstance().playAudioEff("nan/nanwanning")):r.conMager.getInstance().playAudioEff("nv/nvwanning"),r.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.ui_parent,{fileName:"wanning",ani_name:"animation",cb:this.wanning_pos.bind(this),is_user:e})},t.prototype.wanning_pos=function(){for(var e=this,t=[],a=0;a<15;a++)for(var n=0;n<15;n++)this.chess_array[a][n].chess_data||null!=this.chess_array[a][n].kunlong_player&&this.chess_array[a][n].kunlong_player!=this.my_player||!(0==this.chess_array[a][n].chaoniu_player||1==this.chess_array[a][n].chaoniu_player&&(this.my_player.zhenfa_array[0]&&"chaoniu"==this.my_player.zhenfa_array[0].data.name||this.my_player.zhenfa_array[1]&&"chaoniu"==this.my_player.zhenfa_array[1].data.name))||t.push(cc.v2(a,n));var o=10*this.data.level;o>t.length&&(o=t.length),t=r.NumberUtil.outOfOrder(t);for(var i=function(a){var n=1/o;o>=100&&(n=2/o);var i=Math.floor(Math.random()*t.length),r=t[i];s.scheduleOnce(function(){h.game_manager.zhenfa_play_chess(r,e.my_player),a==o-1&&h.game_manager.get_zhenfa_event(e.my_player,e.data)},a*n),t.splice(i,1)},s=this,c=0;c<o;c++)i(c)},i([d],t)}(u.default));a.default=p,cc._RF.pop()},{"../../../../KEY":"KEY","../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../zhenfa_joiner":"zhenfa_joiner"}],white_chess:[function(e,t,a){"use strict";cc._RF.push(t,"67e739RhNxOYLarxdjcGoyN","white_chess");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pos=[],t.judge=!0,t.state=0,t.canyingOpen=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this;this.node.opacity=155,this.node.setPosition(e[0].pos),this.node.runAction(cc.sequence(cc.fadeOut(.35),cc.callFunc(function(){t.onClose(1)})))},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){},t.prototype.onCollisionEnter=function(){},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf"}],winNodeMager:[function(e,t,a){"use strict";cc._RF.push(t,"c4b6aof8AxFg4aiz7QtFPvn","winNodeMager");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0});var i=e("../../KEY"),s=function(e){function t(){var t=e.call(this)||this;return t.nodes={},t}return o(t,e),t.prototype.init=function(e){var t=this;cc.assetManager.loadBundle("prefabView",void 0,function(a,n){t.bundle=n;var o=setTimeout(function(){e(),clearTimeout(o)},500)})},t.prototype.load=function(e,t){var a=this;this.bundle.load(i.KEY.UICF[e].prefab,cc.Prefab,function(n,o){n?console.log("resources/prefab/prefabsWinNodes-------err",n):o&&(a.nodes[e]=cc.instantiate(o),t(a.nodes[e]))})},t.prototype.showWinNode=function(e,t){this.load(e,t)},t.prototype.hideWinNode=function(e){this.nodes[e]&&(i.KEY.UICF[e].isCommonlyUsed?(this.nodes[e].removeFromParent(),this.nodes[e].active=!1):(this.nodes[e].destroy(),this.nodes[e]=void 0))},t}(cc.Component);a.default=s,cc._RF.pop()},{"../../KEY":"KEY"}],winRootNode:[function(e,t,a){"use strict";cc._RF.push(t,"3e9db4Om8ZAp600Us5dHoS3","winRootNode");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clickTimer=!1,t.isRunningAction=!1,t}return o(t,e),t.prototype.disableClick=function(){var e=this;this.isRunningAction=!0,setTimeout(function(){e.isRunningAction=!1},500)},t.prototype.btnClickFun=function(e,t){var a=this;console.log("------------btnClickFun:",t,this.isRunningAction),this.isRunningAction||this.clickTimer||(this.clickTimer=!0,setTimeout(function(){a.clickTimer=!1},200),this[t](e))},t}(e("./baseNodeAction").default);a.default=i,cc._RF.pop()},{"./baseNodeAction":"baseNodeAction"}],wulei_zidan:[function(e,t,a){"use strict";cc._RF.push(t,"ab2388ul/pP7quO2iTQtp7a","wulei_zidan");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zidan=null,t.liekai=null,t.donghua=null,t}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(e){var t=this;this.donghua=this.node.getComponent(sp.Skeleton),this.donghua.skeletonData=this.zidan,this.donghua.setAnimation(0,"animation",!0),this.node.setPosition(e[0]);var a=s.NumberUtil.judgeAnage(this.node.getPosition(),e[1]);this.node.angle=a;var n=e[2];this.node.scale=0,this.node.y;var o=cc.v3(e[1].x,e[1].y).sub(this.node.position).normalize(),i=180*Math.atan2(o.y,o.x)/Math.PI;this.node.angle=i+90,this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.35,e[1].x,e[1].y),cc.scaleTo(.35,.3,-.3)),cc.callFunc(function(){n&&n(t.node),t.donghua.skeletonData=t.liekai,t.donghua.setAnimation(0,"animation",!0)})))},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(s.KEY.poolName.wulei_zidan,this.node)},t.prototype.onClear=function(){},i([h({type:sp.SkeletonData,tooltip:"\u5b50\u5f39"})],t.prototype,"zidan",void 0),i([h({type:sp.SkeletonData,tooltip:"\u88c2\u5f00"})],t.prototype,"liekai",void 0),i([c],t)}(s.winRootNode);a.default=u,cc._RF.pop()},{"../../../../../SSSGF/ssscgf":"ssscgf"}],wulei:[function(e,t,a){"use strict";cc._RF.push(t,"b1dbeNuhdtO86anGBaDiELo","wulei");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../SSSGF/ssscgf"),r=e("../class_manager"),c=e("../game_manager"),h=e("../zhenfa_joiner"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.use_number_max=1,t.use_number=0,t.board=null,t}return o(t,e),t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.board=e},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(){return!0},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return this.use_number=0,!0},t.prototype.one_win=function(){return!0},t.prototype.use_zhenfa=function(){var e=this.judge_active();return 0==e&&0==(e=this.judge_number())&&0==(e=this.judge_null())&&this.show_wulei(),e},t.prototype.use_zhenfa_finish=function(){return!0},t.prototype.show_wulei=function(){var e=this;this.use_number++;var t=!1;this.my_player.cos==r.joiner_enum.player?(t=!0,s.conMager.getInstance().playAudioEff("nan/nanwulei")):s.conMager.getInstance().playAudioEff("nv/nvwulei");var a=this.board.node,n=cc.tween(a).repeatForever(cc.tween(a).by(.02,{position:cc.v3(4,4)}).by(.04,{position:cc.v3(-8,-8)}).by(.02,{position:cc.v3(4,4)}));this.scheduleOnce(function(){s.conMager.getInstance().playAudioEff("wulei/lei"),n.start(),e.scheduleOnce(function(){n.stop(),e.board.node.setPosition(0,0)},.5)},1.3),s.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.board.ui_parent,{fileName:"wulei",ani_name:"animation",cb:this.use_wulei.bind(this),is_user:t})},t.prototype.use_wulei=function(){for(var e=this,t=[],a=0;a<this.chess_array.length;a++)for(var n=0;n<this.chess_array[a].length;n++)if(this.chess_array[a][n].chess_data&&this.chess_array[a][n].chess_data.state!=this.my_player.state&&0==this.chess_array[a][n].chess_data.meihua&&0==this.chess_array[a][n].chess_data.dusha&&0==this.chess_array[a][n].chess_data.stone_type){for(var o=c.game_manager.get_player_by_state(this.chess_array[a][n].chess_data.state),i=!1,r=0;r<o.zhenfa_array.length;r++)if("dusha"==o.zhenfa_array[r].data.name){i=!0;break}if(1==i)continue;t.push(this.chess_array[a][n])}if(t.length<1)c.game_manager.get_zhenfa_event(this.my_player,this.data);else{var h=[];for(a=0;a<2*this.data.level&&!(t.length<1);a++){var u=Math.floor(Math.random()*t.length),l=t[u];h.push(l),t.splice(u,1)}var d=[],p=[],g=function(t){var a=1.5/h.length;h.length>=100&&(a=2.5/h.length);var n=new cc.Tween;d.push(n),_.scheduleOnce(function(){s.conMager.getInstance().playAudioEff("wulei/fase"),e.zidan_action(h,t,d,p)},t*a)},_=this;for(a=0;a<h.length;a++)g(a)}},t.prototype.zidan_action=function(e,t,a,n){var o=this,i=cc.v2(0,555);this.my_player.cos==r.joiner_enum.player&&(i=cc.v2(0,-548));var c=e[t].chess_data.node.convertToWorldSpaceAR(cc.v2(0,0)),h=this.board.up_effect.convertToNodeSpaceAR(c);s.conMager.getInstance().getPoolNode(s.KEY.poolName.wulei_zidan,this.board.up_effect,i,h,function(i){if(a[t]=cc.tween(e[t].chess_data.node).repeatForever(cc.tween(e[t].chess_data.node).by(.025,{position:cc.v3(2,2)}).by(.05,{position:cc.v3(-4,-4)}).by(.025,{position:cc.v3(2,2)})).start(),n.push(i),t==e.length-1){for(var s=0;s<a.length;s++)a[s].stop();for(s=0;s<e.length;s++)o.baolie_action(e,s,n,a)}})},t.prototype.baolie_action=function(e,t,a,n){var o,i=this;o=this.my_player.cos==r.joiner_enum.player?"animation":"animation2";var h=e[t].chess_data.node.convertToWorldSpaceAR(cc.v2(0,0)),u=this.board.up_effect.convertToNodeSpaceAR(h);s.conMager.getInstance().getPoolNode(s.KEY.poolName.baozha_wulei,this.board.up_effect,{ani_name:o,pos:u,cb:function(){if(t==e.length-1){for(var o=0;o<e.length;o++)n[o].stop(),c.game_manager.zhenfa_delect_chess(e[o].chess_data.pos),a[o]&&s.conMager.getInstance().putPoolNode(s.KEY.poolName.wulei_zidan,a[o]);c.game_manager.get_zhenfa_event(i.my_player,i.data)}}})},i([l],t)}(h.default));a.default=d,cc._RF.pop()},{"../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../zhenfa_joiner":"zhenfa_joiner"}],xueXian:[function(e,t,a){"use strict";cc._RF.push(t,"708292P2h9IMazp37LTNyIp","xueXian");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callBack=null,t.gameType=0,t.chess_Pbb=0,t.width=0,t.direction=0,t.pos=null,t.targetPos=null,t.is_judge=!1,t.speed=6,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){this.node.height=0;var t=e[0].pos;this.pos=t,this.targetPos=e[0].targetPos,this.chess_Pbb=e[0].chess_Pbb;var a=Math.floor(46*t[0]),n=Math.floor(46*t[1]);if(this.node.setPosition(a,n),e[0].bool){var o=cc.v2(Math.floor(46*t[0])+22,Math.floor(46*t[1])+22);o=cc.v2(o.x-322-22,o.y-322-22),this.node.setPosition(o.x,o.y)}this.width=55,this.callBack=e[0].callBack,this.direction=e[0].direction,this.nodeAction(),s.conMager.getInstance()._msgAtion.on("del_xueXian",this.clsoe.bind(this),this)},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.clsoe=function(){this.onClose(1)},t.prototype.onLoad=function(){},t.prototype.nodeAction=function(){1==this.direction?(this.node.scaleY=1,this.node.rotation=90):2==this.direction?(this.node.scaleY=1,this.node.rotation=-90):3==this.direction?(this.node.scaleY=1,this.node.rotation=0):4==this.direction&&(this.node.scaleY=-1,this.node.rotation=0),this.is_judge=!0},t.prototype.update=function(){this.is_judge&&(this.node.height+=this.speed,this.node.height>=this.width&&(this.node.height=this.width,this.is_judge=!1,this.callBack&&this.callBack(this.pos,this.targetPos,this.direction,this.chess_Pbb)))},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf"}],xueyuChessSke:[function(e,t,a){"use strict";cc._RF.push(t,"c1ba7EEp8FBDrUlS5Bcea/g","xueyuChessSke");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_budle=null,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this.node.getComponent(sp.Skeleton);this.node.x=0,this.node.y=0,this.node.scale=.5,this.node.x=e[0].pos.x,this.node.y=e[0].pos.y,t.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.REALTIME);var a=1;t.setAnimation(0,"shengcheng",!1),t.setCompleteListener(function(){1==a&&(a+=1,t.setAnimation(0,"zha",!1))})},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){this.node.zIndex=3},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf"}],xueyuyingsha:[function(e,t,a){"use strict";cc._RF.push(t,"bb19d5yV8NBK5JAWrDqEo5B","xueyuyingsha");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../../KEY"),r=e("../../../../SSSGF/ssscgf"),c=e("../class_manager"),h=e("../game_manager"),u=e("../zhenfa_joiner"),l=cc._decorator,d=l.ccclass,p=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.using=!1,t.ui_parent=null,t.board=null,t.xueyuChessPosList=[],t.xueyuChess_num=0,t.xueyuChess_num_1=0,t.xueyuChess_num_2=0,t.qipanArray=[],t.xueYuIsOver=!1,t.xueYuTime=2,t.checkMode=[[1,0],[0,1]],t}return o(t,e),t.prototype.use_zhenfa=function(){return!0},t.prototype.use_zhenfa_finish=function(){var e=this;if(1==this.using){this.using=!1;var t=this.judge_win(this.my_player);if(t.judge){var a=t.list,n=new c.win_data(this.my_player,a);return h.game_manager.get_force_win_event(this.my_player,function(){h.game_manager.get_finish_zhenfa_event(e)}.bind(this),n),!1}}return r.conMager.getInstance()._msgAtion.emit("del_xueXian"),!0},t.prototype.init_game_mode=function(){},t.prototype.init=function(e,t){this.chess_array=t},t.prototype.init_ui=function(e){this.ui_parent=e.ui_parent,this.board=e},t.prototype.start_game=function(){return!0},t.prototype.start_big_game=function(){return!0},t.prototype.start_small_game=function(){return!0},t.prototype.can_play_chess=function(){},t.prototype.error_chess_pos=function(){},t.prototype.one_player_play_chess=function(e){var t=this.judge_active();return e!=this.my_player||0!=t||(t=!1,this.show_xueyuyingsha(),t)},t.prototype.end_small_game=function(){return!0},t.prototype.end_big_game=function(){return!0},t.prototype.one_win=function(){return!0},t.prototype.judge_win=function(){for(var e=[],t=!0,a=0;a<this.xueyuChessPosList.length;a++){var n=this.xueyuChessPosList[a],o=n[0],i=n[1];if(this.chess_array[o]&&this.chess_array[o][i]&&this.chess_array[o][i].chess_data&&this.chess_array[o][i].chess_data.state==this.my_player.state&&0==this.chess_array[o][i].chess_data.stone_type){var s=this.chess_array[o][i].chess_data;e.push(s)}else t=!1}return{list:e,judge:t}},t.prototype.show_xueyuyingsha=function(){var e=!1;this.using=!0,this.my_player.cos==c.joiner_enum.player?(e=!0,r.conMager.getInstance().playAudioEff("nan/nanxueyuyingsha")):r.conMager.getInstance().playAudioEff("nv/nvxueyuyingsha"),r.conMager.getInstance().getPoolNode(s.KEY.poolName.zhenfa_ani,this.ui_parent,{fileName:"xueyuyingsha",ani_name:"animation",cb:this.xueyuyingsha_zhen.bind(this),is_user:e})},t.prototype.xueyuyingsha_zhen=function(){var e=this,t=this.data.level;this.xueyuChess_num=t+4,this.xueyuChess_num=5+2*(t-1),this.xueyuChess_num>225&&(this.xueyuChess_num=225),this.xueyuChess_num_1=this.xueyuChess_num,this.xueyuChess_num_2=this.xueyuChess_num,this.xueyuChessPosList=[],this.xueYuIsOver=!1;for(var a=0;a<15;a++){this.qipanArray[a]=[];for(var n=0;n<15;n++)this.qipanArray[a][n]=0,this.chess_array[a][n].chess_data&&(this.qipanArray[a][n]=this.chess_array[a][n].chess_data.state)}this.startTime();var o=this.board.get_last_chess(),i=o.pos.x,c=o.pos.y,u=[i,c],l=[];l.push([i+1,c]),l.push([i-1,c]),l.push([i,c+1]),l.push([i,c-1]),r.conMager.getInstance().playAudioEff(s.KEY.audioName.xueliu,!0);for(var d=0;d<4;d++){var p=[l[d][0],l[d][1]];if(!(p[0]<0||p[0]>14||p[1]<0||p[1]>14)&&this.judgePos(p[0],p[1]))if(this.judgePos(p[0],p[1]))this.xueXianAction(p,u,!0);else if(this.xueyuChess_num-=1,this.xueyuChess_num<=1)return this.xueyuChess_num<=1&&!this.xueYuIsOver?(r.conMager.getInstance().stopAudioEff(),this.xueYuIsOver=!0,void this.scheduleOnce(function(){var t=setTimeout(function(){clearTimeout(t),h.game_manager.get_zhenfa_event(e.my_player,e.data)},1e3)},1)):void 0}},t.prototype.startTime=function(){this.xueYuTime=1,this.schedule(this.updateTime,.5)},t.prototype.updateTime=function(){this.xueYuTime-=.5,this.xueYuTime<=0&&(this.stopTime(),r.conMager.getInstance().stopAudioEff(),this.xueYuIsOver||(this.xueYuIsOver=!0,h.game_manager.get_zhenfa_event(this.my_player,this.data)))},t.prototype.stopTime=function(){this.unschedule(this.updateTime)},t.prototype.xueXianAction=function(e,t){var a=this;if(this.xueyuChess_num<=0&&this.xueyuChess_num<=0&&!this.xueYuIsOver)return r.conMager.getInstance().stopAudioEff(),this.xueYuIsOver=!0,this.stopTime(),void this.scheduleOnce(function(){var e=setTimeout(function(){clearTimeout(e),h.game_manager.get_zhenfa_event(a.my_player,a.data)},1e3)},1);this.xueyuChess_num-=1,this.stopTime(),this.startTime();var n=1;e[0],e[1],e[0]>t[0]?n=1:e[0]<t[0]?n=2:e[1]>t[1]?n=3:e[1]<t[1]&&(n=4);var o=r.NumberUtil.randomNum(0,10);o<11&&e.length>0&&(this.qipanArray[e[0]][e[1]]=this.my_player.state,this.xueyuChess_num>0&&this.initXueYuChess(e)),this.xueyuChess_num<=0||e.length<2||r.conMager.getInstance().getPoolNode(s.KEY.poolName.xueXian,this.board.down_effect,{bool:!0,pos:t,targetPos:e,direction:n,chess_Pbb:o,callBack:function(e,t,n){var o=[];if(r.NumberUtil.randomNum(0,10)>7)a.checkNode(t,function(e,t){a.call(e,t)});else{var i=t[0],s=t[1];1==n?i=t[0]+1:2==n?i=t[0]-1:3==n?s=t[1]+1:4==n&&(s=t[1]-1),i<0||i>14||s<0||s>14?a.checkNode(t,function(e,t){a.call(e,t)}):0!=a.qipanArray[i][s]?a.checkNode(t,function(e,t){a.call(e,t)}):(o=[i,s],a.call(o,t))}}})},t.prototype.initXueYuChess=function(e){var t=this;this.xueyuChessPosList.push(e);var a=setTimeout(function(){clearTimeout(a),r.NumberUtil.randomNum(0,10)<5&&t.checkNode(e,function(e,a){t.call(e,a)});var n=Math.floor(46*e[0])+22,o=Math.floor(46*e[1])+22,i=cc.v3(n-322-22,o-322-22),c=cc.tween(t.node).to(.01,{scale:0});h.game_manager.zhenfa_play_chess(new cc.Vec2(e[0],e[1]),t.my_player,c,function(e){var t=setTimeout(function(){clearTimeout(t),e.runAction(cc.sequence(cc.scaleTo(.15,1.15),cc.scaleTo(.1,1)))},400)}),r.conMager.getInstance().getPoolNode(s.KEY.poolName.xueyuChessSke,t.board.down_effect,{pos:i,callBack:function(){}})},500);this.scheduleOnce(function(){t.scheduleOnce(function(){},.4)},.5)},t.prototype.call=function(e,t){if(!(e.length<=0)){var a=e[0],n=e[1];a<0||a>14||n<0||n>14||this.judgePos(a,n)&&this.xueXianAction(e,t)}},t.prototype.checkNode=function(e,t,a){for(var n=[],o=0;o<2;o++){var i=this.checkState(e[0],e[1],this.checkMode[o],a);if(i.length>0)for(var s=0;s<i.length;s++){var c=i[s][0],h=i[s][1];if(!this.judgePos(c,h))return;n.push(i[s])}}var u=[];return n.length>0&&(u=n[r.NumberUtil.randomNum(0,n.length-1)]),t(u,e)},t.prototype.judgePos=function(e,t){return!(this.chess_array[e][t].chess_data||null!=this.chess_array[e][t].kunlong_player&&this.chess_array[e][t].kunlong_player!=this.my_player||!(0==this.chess_array[e][t].chaoniu_player||1==this.chess_array[e][t].chaoniu_player&&(this.my_player.zhenfa_array[0]&&"chaoniu"==this.my_player.zhenfa_array[0].data.name||this.my_player.zhenfa_array[1]&&"chaoniu"==this.my_player.zhenfa_array[1].data.name)))&&0==this.qipanArray[e][t]},t.prototype.checkState=function(e,t,a,n){void 0===n&&(n=null);var o=[],i=0;a==this.checkMode[0]&&(i=1),a==this.checkMode[1]&&(i=3);for(var s=1;s<2;s++){var r=e+s*a[0],c=t+s*a[1];if(!(r<0||r>14||c<0||c>14)&&this.judgePos(r,c)&&(!n||n==i)){if(0!=this.qipanArray[r][c])break;var h=[r,c];o.push(h)}}a==this.checkMode[0]&&(i=2),a==this.checkMode[1]&&(i=4);for(var u=1;u<2;u++)if(r=e-u*a[0],c=t-u*a[1],!(r<0||r>14||c<0||c>14)&&this.judgePos(r,c)&&(!n||n==i)){if(0!=this.qipanArray[r][c])break;h=[r,c],o.push(h)}return o},i([d],t)}(u.default));a.default=p,cc._RF.pop()},{"../../../../KEY":"KEY","../../../../SSSGF/ssscgf":"ssscgf","../class_manager":"class_manager","../game_manager":"game_manager","../zhenfa_joiner":"zhenfa_joiner"}],xuezhandaodi_GameBoard:[function(e,t,a){"use strict";cc._RF.push(t,"39248XHPmhAJqS+HKnHB8Th","xuezhandaodi_GameBoard");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.xuezhandaodi_GameBoard=void 0;var s=e("../../../KEY"),r=e("../../../SSSGF/dataController/DATA"),c=e("../../../SSSGF/ssscgf"),h=e("../Piece"),u=cc._decorator,l=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.judgeSize=15,t.maze=[],t.state=h.BLACKCHESS,t.win=2,t.sum=0,t.block=46,t.gameScene=null,t.AITurn=null,t.myTurn=!0,t.is_ani=!1,t.chess_map=[],t.juehu_chess_map=[],t.juehu_sum=0,t.chess_list=[],t.chess_pos=[],t.new_userChessPso=[],t.new_aiChessPso=[],t.chess_index=[],t.front_com=null,t.newx=0,t.newY=0,t.canWin=[],t.winCount=0,t.myWin=[],t.istouch=!0,t.ai_huiqi=2,t.ai_huiqi_judge=!0,t.ai_qiuhe_judge=!0,t.ai_heqi=2,t.dazhao_num=0,t.yilun_qizi_v2=[],t.bushu=0,t.is_xueyulianzhu=!1,t.zhenfa_level=0,t.game_call_back=null,t.rowSum=0,t.colSum=0,t.biasSumB=0,t.biasSumA=0,t.checkMode=[[1,0],[0,1],[1,1],[1,-1]],t.isMode=[],t.juesha_judge=!1,t.huiqiJudge=!0,t}return o(t,e),t.prototype.onLoad=function(){c.conMager.getInstance()._msgAtion.on("user_huiqi_fun",this.user_huiqi_fun,this),c.conMager.getInstance()._msgAtion.on("ds_huiqi_fun",this.ds_huiqi_fun,this)},t.prototype.init=function(e){this.gameScene=e,this.gameScene.gameType>=3&&(this.myTurn=!0);for(var t=0,a=0;a<this.judgeSize;a++){this.maze[a]=[],this.juehu_chess_map[a]=[];for(var n=0;n<this.judgeSize;n++)this.maze[a][n]=0,this.chess_map[t]=null,this.juehu_chess_map[a][n]=null,this.chess_pos[t]=[],t+=1}this.AITurn.RightRate=this.gameScene.RightRate,this.yilun_qizi_v2=[]},t.prototype.AIXianShou=function(){this.bushu++,this.state=-1,this.myTurn=!1,this.scheduleOnce(function(){this.gameScene.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.AITurn.addPos(7,7,this.state),this.new_aiChessPso.push([7,7]),this.changeToJudgeBoard(322,322)},3)},t.prototype.initAI=function(e){this.AITurn=e},t.prototype.initfront=function(e){this.front_com=e},t.prototype.onTouched=function(e){if(console.log("\u89e6\u6478\u5c4f\u5e55:",this.myTurn,this.istouch),this.myTurn){var t=e.getLocation(),a=this.node.convertToNodeSpaceAR(t),n=this.getPosByInt(Math.floor(a.x)),o=this.getPosByInt(Math.floor(a.y)),i=Math.floor(n/this.block),s=Math.floor(o/this.block);this.bushu++,this.newx=n,this.newY=o,this.new_userChessPso.push([i,s]),this.changeToJudgeBoard(n,o)}},t.prototype.aiLuozi=function(e){console.log("\u89e6\u53d1ai",this.win,this.myTurn,this.ai_huiqi_judge,",\u7c7b\u578b\u5462",this.gameScene.gameType),2!=this.win||this.myTurn||!this.ai_huiqi_judge||this.juesha_judge||this.ailuozi_public_fun(e)},t.prototype.ailuozi_public_fun=function(e,t){var a=this;void 0===t&&(t=!0),this.bushu++,this.AITurn.AIPosition(this.newx,this.newY,function(n){var o=c.NumberUtil.randomNum(1,3);e&&(o=e),a.new_aiChessPso.push([n.x/a.block,n.y/a.block]),a.scheduleOnce(function(){this.changeToJudgeBoard(n.x,n.y),t||this.state==-1*this.gameScene.userChess&&this.aiLuozi()},o)},!t)},t.prototype.ai_qiuhe=function(){var e=this;this.ai_qiuhe_judge&&(this.ai_heqi<=0||(this.ai_heqi-=1,2!=this.gameScene.gameType&&this.gameScene.gameType!=r.game_type.lianzhao||(this.ai_heqi-=1),this.ai_qiuhe_judge=!1,c.conMager.getInstance().getPoolNode(s.KEY.poolName.heqi_panel,this.node.parent,{type:"ds_qiuhe",callBack:function(t){console.log("\u6094\u68cb\u7684\u56de\u8c03\u542b\u6f31",t),e.ai_qiuhe_judge=!0,2==t&&(e.juesha_judge=!0,c.conMager.getInstance()._msgAtion.emit("pingju"))}})))},t.prototype.getPosByInt=function(e){var t=1;e<0?(e=-e,t=-1):t=1;var a=e%this.block;return e=Math.floor(e/this.block)*this.block,a-this.block/2>=0&&(e+=this.block),e*t},t.prototype.changeToJudgeBoard=function(e,t){var a=this,n=Math.floor(e/this.block),o=Math.floor(t/this.block);if(this.newY=t,this.newx=e,console.log("\u4f4d\u7f6e\u6709\u68cb\u561b:",this.maze[n][o],this.newx,this.newY),0==this.maze[n][o]){this.istouch=!1,this.updateMyTurn();var i=n+15*o;this.chess_pos[i]=[n,o],this.maze[n][o]=this.state,this.sum+=1,this.gameScene.moveInChess(e,t,this.state),this.qipan_shaomiao(this.state,function(){a.updataState(),a.state!=a.gameScene.userChess&&a.aiLuozi()})}else this.myTurn=!0},t.prototype.xuanze_zhenfa=function(){this.gameScene.change_zhenfa(this.myTurn)},t.prototype.updateMyTurn=function(){this.myTurn=!this.myTurn},t.prototype.updataState=function(){this.state*=-1},t.prototype.qipan_shaomiao=function(e,t,a){if(!this.juesha_judge){a||(a=5),this.win=2,this.game_call_back=t;for(var n=0;n<4;n++){if(this.checkWin(this.newx/46,this.newY/46,e,this.checkMode[n],9))return;if(this.checkWin(this.newx/46,this.newY/46,e,this.checkMode[n],8))return;if(this.checkWin(this.newx/46,this.newY/46,e,this.checkMode[n],7))return;if(this.checkWin(this.newx/46,this.newY/46,e,this.checkMode[n],6))return}if(!(this.isSiSi(this.newx/46,this.newY/46,e)||this.isSiSan(this.newx/46,this.newY/46,e)||this.isSiSan1(this.newx/46,this.newY/46,e)||this.isSanSan(this.newx/46,this.newY/46,e)))for(n=0;n<4;n++){if(this.checkWin(this.newx/46,this.newY/46,e,this.checkMode[n],5))return;if(3==n)return this.game_call_back()}}},t.prototype.checkWin=function(e,t,a,n,o){if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.chess_index=[];var i=[e,t];this.chess_index.push(i);for(var s=1,c=1;c<15;c++)if(this.maze[e+c*n[0]]){var h=e+c*n[0],u=t+c*n[1];if(this.maze[h][u]!=a)break;s++;var l=[h,u];this.chess_index.push(l)}for(var d=1;d<15;d++)if(this.maze[e-d*n[0]]){if(h=e-d*n[0],u=t-d*n[1],this.maze[h][u]!=a)break;s++;var p=[h,u];this.chess_index.push(p)}return s>=o?(5==o?this.is_lian_zhu_type=r.lianzhu_type.wu_zi:6==o?this.is_lian_zhu_type=r.lianzhu_type.liu_dao:7==o?this.is_lian_zhu_type=r.lianzhu_type.qi_xing:8==o?this.is_lian_zhu_type=r.lianzhu_type.ba_men:9==o&&(this.is_lian_zhu_type=r.lianzhu_type.jiu_xing),this.judge(),!0):(this.sum>=225&&(this.win=0),!1)}},t.prototype.isSanSan=function(e,t,a){var n=this;if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.isMode=[];for(var o=function(e){var t=[];if(3==(t=i.check_san_lian(i.newx/46,i.newY/46,a,i.checkMode[e],4,!0)).length){console.log("\u522b\u641e\u4e8b\u554a ");for(var o=0;o<t.length;o++)for(var s=0;s<4;s++){i.chess_index=[];var c=t[o];if(i.chess_index=i.check_san_lian(c[0],c[1],a,i.checkMode[s],4,!0),console.log("\u522b\u641e\u4e8b\u554a111 ",i.chess_index,t),3==i.chess_index.length&&!i.check_contain(i.chess_index,t))return i.is_lian_zhu_type=r.lianzhu_type.san_san,console.log("\u662f\u4e09\u4e09\u7edd\u6740",i.chess_index,t),t.forEach(function(e,a){n.chess_index.push(e),a==t.length-1&&n.judge()}),{value:!0}}return"break"}},i=this,s=0;s<4;s++){var c=o(s);if("object"==typeof c)return c.value;if("break"===c)break}return!1}},t.prototype.isSiSan=function(e,t,a){var n=this;if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.isMode=[];for(var o=function(e){var t=[];if(4==(t=i.check_si_lian(i.newx/46,i.newY/46,a,i.checkMode[e],5,"\u5916\u5faa\u73af")).length){console.log("\u5f62\u6210\u56db\u8fde\u4e861",t);for(var o=0;o<t.length;o++)for(var s=0;s<4;s++){i.chess_index=[];var c=t[o];if(i.chess_index=i.check_san_lian(c[0],c[1],a,i.checkMode[s],4,!0),console.log("index",i.chess_index.length),3==i.chess_index.length&&!i.check_contain(i.chess_index,t))return i.is_lian_zhu_type=r.lianzhu_type.si_san,console.log("\u662f\u56db\u4e09\u7edd\u6740: \u5148\u56db\u540e\u4e09",i.chess_index,t),t.forEach(function(e,a){n.chess_index.push(e),a==t.length-1&&n.judge()}),{value:!0}}return"break"}},i=this,s=0;s<4;s++){var c=o(s);if("object"==typeof c)return c.value;if("break"===c)break}return!1}},t.prototype.isSiSan1=function(e,t,a){var n=this;if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.isMode=[];for(var o=function(e){var t=[];if(3==(t=i.check_san_lian(i.newx/46,i.newY/46,a,i.checkMode[e],4,!0)).length){console.log("\u5f62\u6210\u4e09\u8fde\u4e862",t);for(var o=0;o<t.length;o++)for(var s=0;s<4;s++){i.chess_index=[];var c=t[o];if(i.chess_index=i.check_si_lian(c[0],c[1],a,i.checkMode[s],5,""),4==i.chess_index.length&&!i.check_contain(i.chess_index,t))return i.is_lian_zhu_type=r.lianzhu_type.si_san,console.log("\u662f\u56db\u4e09\u7edd\u6740, \u5148\u4e09\u540e\u56db",i.chess_index,t),t.forEach(function(e,a){n.chess_index.push(e),a==t.length-1&&n.judge()}),{value:!0}}return"break"}},i=this,s=0;s<4;s++){var c=o(s);if("object"==typeof c)return c.value;if("break"===c)break}return!1}},t.prototype.isSiSi=function(e,t,a){var n=this;if(0!=this.maze[e][t]&&this.maze[e][t]==a){this.isMode=[];for(var o=function(e){var t=[];if(4==(t=i.check_si_lian(i.newx/46,i.newY/46,a,i.checkMode[e],5,"\u5916\u5faa\u73af")).length){for(var o=0;o<t.length;o++)for(var s=0;s<4;s++){i.chess_index=[];var c=t[o];if(i.chess_index=i.check_si_lian(c[0],c[1],a,i.checkMode[s],5,"\u5185\u5faa\u73af"),4==i.chess_index.length&&!i.check_contain(i.chess_index,t))return i.is_lian_zhu_type=r.lianzhu_type.si_si,console.log("\u662f\u56db\u56db\u7edd\u6740",i.chess_index,t),t.forEach(function(e,a){n.chess_index.push(e),a==t.length-1&&n.judge()}),{value:!0}}return"break"}},i=this,s=0;s<4;s++){var c=o(s);if("object"==typeof c)return c.value;if("break"===c)break}return!1}},t.prototype.check_san_lian=function(e,t,a,n,o){var i=[],s=0,r=0,c=0;i.push([e,t]);for(var h=1;h<=o;h++)if(this.maze[e+h*n[0]]){var u=e+h*n[0],l=t+h*n[1];if((p=this.maze[u][l])==a){if(!(s<2))break;3==h&&c--,i.push([u,l])}else{if(p==-a){0!=this.maze[u-n[0]][l-n[1]]&&(i=[]);break}if(u>=0&&u<=14&&l>=0&&l<=14){if(!(s<2))break;1==h&&c++,s++}}}for(var d=1;d<=o;d++)if(this.maze[e-d*n[0]]){var p;if(u=e-d*n[0],l=t-d*n[1],(p=this.maze[u][l])==a){if(!(r<2))break;3==d&&c--,i.push([u,l])}else{if(p==-a){0!=this.maze[u+n[0]][l+n[1]]&&(i=[]);break}if(u>=0&&u<=14&&l>=0&&l<=14){if(!(r<2))break;1==d&&c++,r++}}}return 0!=s&&0!=r&&s<=2&&r<=2&&c<=1&&3==i.length?i:[]},t.prototype.check_si_lian=function(e,t,a,n,o){var i=[],s=0,r=0;i.push([e,t]);for(var c=1;c<=o;c++)if(this.maze[e+c*n[0]]){var h=e+c*n[0],u=t+c*n[1];if((d=this.maze[h][u])==a){if(!(s<2))break;i.push([h,u])}else{if(d==-a)break;if(h>=0&&h<=14&&u>=0&&u<=14){if(!(s<2))break;s++}}}for(var l=1;l<=o;l++)if(this.maze[e-l*n[0]]){var d;if(h=e-l*n[0],u=t-l*n[1],(d=this.maze[h][u])==a){if(!(r<2&&i.length<4))break;i.push([h,u])}else{if(d==-a)break;if(h>=0&&h<=14&&u>=0&&u<=14){if(!(r<2))break;r++}}}return 0==s&&0==r||4!=i.length?[]:i},t.prototype.check_contain=function(e,t){for(var a=0,n=null,o=null,i=0;i<e.length;i++){n=e[i];for(var s=0;s<t.length;s++)o=t[s],n[0]==o[0]&&n[1]==o[1]&&a++}return a>1},t.prototype.judge=function(){this.jueSha()},t.prototype.jueSha=function(){var e=this;if(1!=this.juesha_judge)if(c.conMager.getInstance()._msgAtion.emit("del_kunlongkuang",this.state),c.conMager.getInstance()._msgAtion.emit("del_kunlongkuang",-this.state),0!=this.win){var t="nv/nvwu";this.state==this.gameScene.userChess&&(t="nan/nanwu"),this.gameScene.node.getChildByName("mask").active=!0,this.scheduleOnce(function(){var a=.1;e.chess_index.length>20&&(a=2/e.chess_index.length);for(var n=function(n){var o=e.chess_index[n],i=o[0]+15*o[1];e.scheduleOnce(function(){c.conMager.getInstance().playAudioEff("btn1");var a=e.chess_map[i];a.runAction(cc.sequence(cc.scaleTo(.15,1.1),cc.callFunc(function(){if(a.getChildByName("guang").active=!0,n==e.chess_index.length-1){var o=e.gameScene.get_lianzu_index(e.is_lian_zhu_type),i="zi"+o;e.scheduleOnce(function(){c.conMager.getInstance().playAudioEff(t+i)},.3),e.gameScene.hongDian.active=!1,c.conMager.getInstance().getPoolNode(s.KEY.poolName.xz_lian_zhu,cc.find("Cnavas"),{ani_name:i,beishu:o-1,cb:function(){e.chess_index.forEach(function(t,a){var n=t,i=e.chess_map[n[0]+15*n[1]];i&&(e.maze[n[0]][n[1]]=0,e.chess_map[n[0]+15*n[1]]=null,e.AITurn.delPos(n[0],n[1],e.state),cc.tween(i).to(.2,{scale:0}).call(function(){i.destroy()}).start()),a==e.chess_index.length-1&&e.gameScene.refreshMoney(o-1,e.state,e.game_call_back)})}})}})))},n*a)},o=0;o<e.chess_index.length;o++)n(o)},.5)}else this.gameScene.gameOver()},t.prototype.addListenner=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.removeListennner=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouched,this)},t.prototype.user_huiqi_fun=function(){if(console.log("\u6765\u6094\u68cb",this.state,this.gameScene.gameType),6==this.gameScene.gameType){this.state=this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;if(this.new_userChessPso.length<=0)return;return this.gameScene.hongDian.active=!1,void this.huiqi_destory(this.new_userChessPso,this.state)}3==this.gameScene.gameType?this.huiqiJudge?(this.huiqi_destory(this.new_userChessPso),this.updataState(),this.gameScene.startTime(this.state)):c.conMager.getInstance().getPoolNode(s.KEY.poolName.tipNode,this.node,"\u8bf7\u5148\u843d\u5b50!"):(this.state=this.gameScene.userChess,e=this.new_aiChessPso.length,t=this.new_userChessPso.length,console.log("\u6094\u68cb\u6570\u7ec4\u957f\u5ea6:  ai:",e+"__\u73a9\u5bb6 :"+t),this.huiqi_destory(this.new_userChessPso,this.state),e>t?this.huiqi_destory(this.new_aiChessPso,-1*this.state):e==t&&-1==this.gameScene.userChess&&this.huiqi_destory(this.new_aiChessPso,-1*this.state)),this.gameScene.hongDian.active=!1,this.new_userChessPso.length<=0&&c.conMager.getInstance()._msgAtion.emit("closeHuiqi")},t.prototype.ds_huiqi_fun=function(){console.log("AI\u6765\u6094\u68cb",this.state),this.state=-1*this.gameScene.userChess;var e=this.new_aiChessPso.length,t=this.new_userChessPso.length;this.huiqi_destory(this.new_aiChessPso,this.state),t>e?this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess):e==t&&-1!=this.gameScene.userChess&&this.huiqi_destory(this.new_userChessPso,this.gameScene.userChess),this.ai_huiqi-=1,this.gameScene.startTime(this.state),this.myTurn=!1,this.ai_huiqi_judge=!0,this.gameScene.hongDian.active=!1,this.aiLuozi()},t.prototype.huiqi_destory=function(e,t){var a=e[e.length-1],n=a[0]+15*a[1],o=this.chess_map[n];this.chess_map[n]=null,this.maze[a[0]][a[1]]=0,e.splice(e.length-1),this.chess_pos[n]=[],o.destroy(),this.AITurn.delPos(a[0],a[1],-1*t)},i([l],t)}(cc.Component));a.xuezhandaodi_GameBoard=d,cc._RF.pop()},{"../../../KEY":"KEY","../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","../Piece":"Piece"}],xuezhandaodi_chessAi:[function(e,t,a){"use strict";cc._RF.push(t,"1c7faUVY9xE9pdnMVNOwslQ","xuezhandaodi_chessAi");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),e("../../../KEY");var s=e("../../../SSSGF/dataController/DATA"),r=e("../../../SSSGF/ssscgf"),c=e("./xuezhandaodi_GameBoard"),h=cc._decorator,u=h.ccclass,l=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.mazeScore=[],t.record=[],t.count=0,t.wins=[],t.myWin=[],t.computerWin=[],t.RightRate=1,t.stateNumber=1,t.is_diaoxian=!1,t.is_new=!1,t.huiqi=!1,t}return o(t,e),t.prototype.onLoad=function(){this.init(),this.board.initAI(this),r.conMager.getInstance()._msgAtion.on("user_huiqi_ai",this.user_huiqi_ai,this),r.conMager.getInstance()._msgAtion.on("user_qiuhe_ai",this.user_qiuhe_ai,this),r.conMager.getInstance()._msgAtion.on("all_checkWin",this.all_checkWin,this)},t.prototype.user_huiqi_ai=function(e){this.board.juesha_judge?e&&e(!1):r.NumberUtil.randomNum(1,10)>3?e&&e(!0):(this.is_new=!0,e&&e(!1))},t.prototype.user_qiuhe_ai=function(e){var t=this.jushi_judge();console.log("\u6c42\u548c\u7684\u5206\u6570:",t),this.board.juesha_judge?e(!1):this.board.sum>=180?e(!0):t.myScore_1>t.computerScore_1?e(!0):(t.myScore_1,t.computerScore_1,e(!1))},t.prototype.jushi_judge=function(){for(var e=[],t=[],a=0,n=0,o=0;o<15;o++){e[o]=[],t[o]=[];for(var i=0;i<15;i++)e[o][i]=0,t[o][i]=0}for(o=0;o<15;o++)for(i=0;i<15;i++)if(0!=this.board.maze[o][i])for(var s=0;s<this.count;s++)this.wins[o][i][s]&&(1==this.myWin[s]?(e[o][i]+=200,a+=200):2==this.myWin[s]?(e[o][i]+=400,a+=400):3==this.myWin[s]?(e[o][i]+=2e3,a+=2e3):4==this.myWin[s]&&(e[o][i]+=1e4,a+=1e4),1==this.computerWin[s]?(t[o][i]+=220,n+=200):2==this.computerWin[s]?(t[o][i]+=420,n+=400):3==this.computerWin[s]?(t[o][i]+=2100,n+=2e3):4==this.computerWin[s]&&(t[o][i]+=2e4,n+=1e4));return{myScore_1:a,computerScore_1:n}},t.prototype.init=function(){for(var e=0;e<this.board.judgeSize;e++){this.mazeScore[e]=[];for(var t=0;t<this.board.judgeSize;t++)this.mazeScore[e][t]=0}for(var a=0;a<15;a++){this.wins[a]=[];for(var n=0;n<15;n++)this.wins[a][n]=[]}for(a=0;a<15;a++)for(n=0;n<11;n++){for(var o=0;o<5;o++)this.wins[a][n+o][this.count]=!0;this.count++}for(a=0;a<15;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[n+o][a][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=0;n<11;n++){for(o=0;o<5;o++)this.wins[a+o][n+o][this.count]=!0;this.count++}for(a=0;a<11;a++)for(n=14;n>3;n--){for(o=0;o<5;o++)this.wins[a+o][n-o][this.count]=!0;this.count++}for(a=0;a<this.count;a++)this.myWin[a]=0,this.computerWin[a]=0},t.prototype.AIPosition=function(e,t,a,n){var o=this;this.stateCheck(function(){if(e/=o.board.block,t/=o.board.block,o.newX=e,o.newY=t,o.huiqi=!1,n&&(o.huiqi=n),5!=r.GameDataStorage.gameStateData.gameType)for(var i=0;i<o.count;i++)o.wins[e][t][i]&&(o.myWin[i]++,o.computerWin[i]=6);var s=o.computerAI();e=s.x,t=s.y,a&&a(cc.v2(e*o.board.block,t*o.board.block))})},t.prototype.stateCheck=function(e){var t=this,a=(r.NumberUtil.randomNum(1,3),r.NumberUtil.randomNum(0,100));if(this.stateNumber<=0)return e();if(15==a){if(r.GameDataStorage.gameStateData.gameType==s.game_type.lianzhao)return void(e&&e());r.conMager.getInstance()._msgAtion.emit("ai_diaoxian"),this.scheduleOnce(function(){r.conMager.getInstance()._msgAtion.emit("ai_shangxian"),t.stateNumber-=1,e&&e()},r.NumberUtil.randomNum(2,10))}else e&&e()},t.prototype.addPos=function(e,t,a){for(var n=0;n<this.count;n++)this.wins[e][t][n]&&(a==this.board.gameScene.userChess?(this.myWin[n]++,this.computerWin[n]--):(this.computerWin[n]++,this.myWin[n]--))},t.prototype.delPos=function(e,t){for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.board.gameScene.userChess,this.myWin[a]--,this.computerWin[a]--)},t.prototype.computerAI=function(){console.log("ai\u7684\u96be\u5ea6\u662f:",this.RightRate);for(var e=[],t=[],a=0,n=0,o=0,i=0;i<15;i++){e[i]=[],t[i]=[];for(var s=0;s<15;s++)e[i][s]=0,t[i][s]=0}var c,h=[];for(i=0;i<15;i++)for(s=0;s<15;s++)if(0==this.board.maze[i][s]){h.push([i,s]);for(var u=0;u<this.count;u++)this.wins[i][s][u]&&(1==this.myWin[u]?e[i][s]+=200:2==this.myWin[u]?e[i][s]+=400:3==this.myWin[u]?e[i][s]+=2e3:4==this.myWin[u]&&(e[i][s]+=1e4),1==this.computerWin[u]?t[i][s]+=220:2==this.computerWin[u]?t[i][s]+=420:3==this.computerWin[u]?t[i][s]+=2100:4==this.computerWin[u]&&(t[i][s]+=2e4));e[i][s]>a&&Math.floor(Math.random()+this.RightRate)?(a=e[i][s],n=i,o=s):e[i][s]==a&&t[i][s]>t[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=s),t[i][s]>a&&Math.floor(Math.random()+this.RightRate)?(a=t[i][s],n=i,o=s):t[i][s]==a&&e[i][s]>e[n][o]&&Math.floor(Math.random()+this.RightRate)&&(n=i,o=s)}for(this.huiqi&&(n=h[c=r.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1]),u=0;u<this.count;u++)this.wins[n][o][u]&&(this.computerWin[u]++,this.myWin[u]=6);for(0!=this.board.maze[n][o]&&(n=h[c=r.NumberUtil.randomNum(0,h.length-1)][0],o=h[c][1],console.log("uggggg,",n,o),this.checkWin(n,o)),u=0;u<this.count;u++)this.wins[n][o][u]&&(this.computerWin[u]++,this.myWin[u]=6);return cc.v2(n,o)},t.prototype.checkWin=function(e,t){for(var a=e-1-1,n=t+1,o=0;o<9;o++)if(a+=1,o%3==0&&0!=o&&(a=e-1,n-=1),!(a>14||a<0||n>14||n<0)&&this.board.maze[a][n]==this.board.gameScene.userChess)for(var i=0;i<this.count;i++)this.wins[a][n][i]&&(this.myWin[i]++,this.computerWin[i]=6)},t.prototype.all_checkWin=function(){for(var e=0;e<15;e++)for(var t=0;t<15;t++)if(this.board.maze[e][t]==this.board.gameScene.userChess)for(var a=0;a<this.count;a++)this.wins[e][t][a]&&(this.myWin[a]++,this.computerWin[a]=6)},i([l(c.xuezhandaodi_GameBoard)],t.prototype,"board",void 0),i([u],t)}(cc.Component);a.default=d,cc._RF.pop()},{"../../../KEY":"KEY","../../../SSSGF/dataController/DATA":"DATA","../../../SSSGF/ssscgf":"ssscgf","./xuezhandaodi_GameBoard":"xuezhandaodi_GameBoard"}],xuezhandaodi_game_view:[function(e,t,a){"use strict";cc._RF.push(t,"92cd3x9iqxPHK5GBfPWa45s","xuezhandaodi_game_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../utils/commonFunction"),r=e("./../../SSSGF/Utils/NumberUtil"),c=e("../../SSSGF/ssscgf"),h=e("../wuziqi/Piece"),u=e("../../utils/platform"),l=e("../wuziqi/xuezhandaodi/xuezhandaodi_GameBoard"),d=e("../../pvp/script/global"),p=e("../../SSSGF/dataController/DATA"),g=cc._decorator,_=g.ccclass,m=g.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameType=1,t.dsName_string="",t.user_headPanel=null,t.ds_headPanel=null,t.ds_headIcon=null,t.user_headIcon=null,t.reward_gold=2,t.multiple=0,t.chess_parent=null,t.shubiao_node=null,t.max_gameTime=30,t.ds_headIconIndex=0,t.show_user_money=null,t.show_ds_money=null,t.add_user_money=null,t.add_ds_money=null,t.board=null,t.whiteChess=null,t.blackChess=null,t.quan=null,t.hongDian=null,t.block=46,t.userGameTime=0,t.count_down=null,t.scene_down=null,t.userChess=h.BLACKCHESS,t.is_game_over=!1,t.whiePool=new cc.NodePool,t.blackPool=new cc.NodePool,t.RightRate=1,t.TimeDel=!1,t.ds_money=0,t.old_wj_money=0,t.gameTptalTime=300,t.record_map=new Map,t.lianzhu_type_arr=[p.lianzhu_type.wu_zi,p.lianzhu_type.san_san,p.lianzhu_type.si_san,p.lianzhu_type.si_si,p.lianzhu_type.liu_dao,p.lianzhu_type.qi_xing,p.lianzhu_type.ba_men,p.lianzhu_type.jiu_xing],t.game_call_back=null,t.isUpdateMoney=!1,t.chess_num=0,t.interval=!0,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t.luozizhong=null,t.quan_judge=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){c._pl_fun.getInstance().startCreateVideo(),this.reward_gold=e[0].reward_gold,c.GameDataStorage.gameStateData.reward_gold=this.reward_gold,this.gameType=e[0].gameType,c.GameDataStorage.gameStateData.gameType=this.gameType;var t=e[0].RightRate;this.update_ai_RightRate(t),this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1,this.initGame(),this.node.runAction(cc.fadeIn(.5)),u.platform.now_platform!=u.platform_type.is_tt&&(this.node.getChildByName("luping").active=!1),this.hongDian.zIndex=99},t.prototype.onClose=function(){this.unscheduleAllCallbacks(),this.board.removeListennner(),c.conMager.getInstance().hideWinNode(this.node.name),c.conMager.getInstance().showWinNode(c.KEY.UIName.slectGmae,null,{gameType:this.gameType})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){var e=this;c.conMager.getInstance()._msgAtion.on("ai_renshu",this.ai_renshu,this),c.conMager.getInstance()._msgAtion.on("ai_diaoxian",this.ai_diaoxian,this),c.conMager.getInstance()._msgAtion.on("ai_shangxian",this.ai_shangxian,this),c.conMager.getInstance()._msgAtion.on("renshu",this.return_btn,this),c.conMager.getInstance()._msgAtion.on("pingju",this.pingju,this),c.conMager.getInstance()._msgAtion.on("shubiao",this.shubiao,this),c.conMager.getInstance()._msgAtion.on("qiuhe",this.qiuhe,this),c.conMager.getInstance()._msgAtion.on("huiqi",this.huiqi,this),c.conMager.getInstance()._msgAtion.on("closeSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!1},this),c.conMager.getInstance()._msgAtion.on("openSet",function(){e.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0},this),c.conMager.getInstance()._msgAtion.on("stopTimeDel",function(){e.TimeDel=!0,e.quan_judge=!1},this),c.conMager.getInstance()._msgAtion.on("startTimeDel",function(){e.TimeDel=!1,e.quan_judge=!0},this)},t.prototype.update_ai_RightRate=function(e){1==e?this.RightRate=.7:2==e?this.RightRate=.8:3==e&&(this.RightRate=.9)},t.prototype.initGame=function(){cc.find("Canvas/money_node").active=!1,c.GameDataStorage.gameStateData.chess_num=0,c.GameDataStorage.gameStateData.rewardmultiple=0,this.initUi(),this.initData(),this.kaiChangDongHua(),this.board.init(this),this.node.getChildByName("mask").zIndex=99,this.initPool(this.whiePool,this.whiteChess),this.initPool(this.blackPool,this.blackChess)},t.prototype.initUi=function(){this.user_headPanel=this.node.getChildByName("user_headPanel"),this.ds_headPanel=this.node.getChildByName("ds_headPanel"),this.ds_headIcon=this.node.getChildByName("ds_headIcon").getChildByName("ds_headIcon").getComponent(cc.Sprite),this.user_headIcon=this.node.getChildByName("user_headIcon").getChildByName("user_headIcon").getComponent(cc.Sprite),this.chess_parent=this.node.getChildByName("chess_parent"),this.shubiao_node=this.chess_parent.getChildByName("shubiao_node"),this.count_down=this.node.getChildByName("count_down"),this.scene_down=this.node.getChildByName("scene_down"),this.ds_headIcon.node.parent.active=!0,this.user_headIcon.node.parent.active=!0,this.show_user_money=this.node.getChildByName("show_user_money"),this.show_ds_money=this.node.getChildByName("show_ds_money"),this.add_user_money=this.node.getChildByName("add_user_money"),this.add_ds_money=this.node.getChildByName("add_ds_money"),this.add_ds_money.opacity=0,this.add_user_money.opacity=0},t.prototype.initData=function(){c.GameDataStorage.getUser().userData,"null"!=c.GameDataStorage.getUser().userData.headIconUrl&&s.commonFunction.updateHttpSprite(c.GameDataStorage.getUser().userData.headIconUrl,this.user_headIcon.node);var e=r.NumberUtil.randomNum(1,60);this.ds_headIconIndex=e,c.GameDataStorage.gameStateData.ds_headIconIndex=this.ds_headIconIndex,console.log("\u5bf9\u624b\u7684\u5934\u50cf:",e);var t="head_icon/"+e;s.commonFunction.updateSprite(t,this.ds_headIcon.node),this.initDsMoney(),this.show_ds_money.getChildByName("money").getComponent(cc.Label).string=""+c.GameDataStorage.gameStateData.ds_money,this.show_user_money.getChildByName("money").getComponent(cc.Label).string=""+c.GameDataStorage.getUser().userData.money,this.old_wj_money=c.GameDataStorage.getUser().userData.money,this.record_map.clear();var a=this.node.getChildByName("game_info_parent");c.conMager.getInstance().getPoolNode(c.KEY.poolName.game_info,a,null)},t.prototype.initPool=function(e,t){for(var a=0;a<225;a++){var n=cc.instantiate(t);e.put(n)}},t.prototype.initDsMoney=function(){var e=r.NumberUtil.randomNum(1,100),t=r.NumberUtil.randomNum(1,100),a=0,n=0;d.default.selectIndex<2?a=e<20?r.NumberUtil.randomNum(10,50)/100*c.GameDataStorage.getUser().userData.money:e>=20&&e<60?r.NumberUtil.randomNum(50,80)/100*c.GameDataStorage.getUser().userData.money:e>=60&&e<85?r.NumberUtil.randomNum(80,100)/100*c.GameDataStorage.getUser().userData.money:e>=85&&e<95?r.NumberUtil.randomNum(100,150)/100*c.GameDataStorage.getUser().userData.money:r.NumberUtil.randomNum(150,200)/100*c.GameDataStorage.getUser().userData.money:(a=e<20?r.NumberUtil.randomNum(10,50)/100*c.GameDataStorage.getUser().userData.money:e>=20&&e<60?r.NumberUtil.randomNum(50,80)/100*c.GameDataStorage.getUser().userData.money:e>=60&&e<85?r.NumberUtil.randomNum(80,200)/100*c.GameDataStorage.getUser().userData.money:e>=85&&e<95?r.NumberUtil.randomNum(100,500)/100*c.GameDataStorage.getUser().userData.money:r.NumberUtil.randomNum(150,1e3)/100*c.GameDataStorage.getUser().userData.money,n=t<20?r.NumberUtil.randomNum(10,30)/100*this.reward_gold:t>=20&&t<60?r.NumberUtil.randomNum(30,50)/100*this.reward_gold:t>=60&&t<85?r.NumberUtil.randomNum(50,70)/100*this.reward_gold:t>=85&&t<95?r.NumberUtil.randomNum(70,80)/100*this.reward_gold:r.NumberUtil.randomNum(80,100)/100*this.reward_gold),c.GameDataStorage.gameStateData.ds_money=Math.floor(a+n),console.log("\u5f53\u524d\u573a\u6b21\u7b49\u7ea7:",d.default.selectIndex),console.log("\u5f53\u524d\u5bf9\u624b\u7684\u52fe\u7389\u6570\u91cf\u4e3a: ",c.GameDataStorage.gameStateData.ds_money)},t.prototype.get_lianzu_index=function(e){return this.lianzhu_type_arr.indexOf(e)+1},t.prototype.refreshMoney=function(e,t,a){var n=this,o=[2,4,6,8,10,20,30,50][e]*this.reward_gold;if(this.game_call_back=a,this.userChess==t){o=c.GameDataStorage.gameStateData.ds_money>o?o:c.GameDataStorage.gameStateData.ds_money,c.conMager.getInstance()._msgAtion.emit("updateMoney",o),c.GameDataStorage.gameStateData.ds_money-=o;var i={name:this.lianzhu_type_arr[e],ds_num:-o,wj_num:"+"+o};c.conMager.getInstance().playAudioEff("xuezhan/qian"),this.add_ds_money.getChildByName("money").getComponent(cc.Label).string=-o+"",this.add_ds_money.getChildByName("money").color=new cc.Color(255,0,0),this.add_user_money.getChildByName("money").getComponent(cc.Label).string="+"+o,this.add_user_money.getChildByName("money").color=new cc.Color(0,255,0),c.conMager.getInstance()._msgAtion.emit("updateMedalCount",66666,this.show_ds_money.position,this.show_user_money.position),this.record_map.set(this.record_map.size,i)}else o=c.GameDataStorage.getUser().userData.money>o?o:c.GameDataStorage.getUser().userData.money,c.conMager.getInstance()._msgAtion.emit("updateMoney",-o),c.GameDataStorage.gameStateData.ds_money+=o,i={name:this.lianzhu_type_arr[e],ds_num:"+"+o,wj_num:-o},c.conMager.getInstance().playAudioEff("xuezhan/qian"),this.add_ds_money.getChildByName("money").getComponent(cc.Label).string="+"+o,this.add_ds_money.getChildByName("money").color=new cc.Color(0,255,0),this.add_user_money.getChildByName("money").getComponent(cc.Label).string=-o+"",this.add_user_money.getChildByName("money").color=new cc.Color(255,0,0),c.conMager.getInstance()._msgAtion.emit("updateMedalCount",66666,this.show_user_money.position,this.show_ds_money.position),this.record_map.set(this.record_map.size,i);this.scheduleOnce(function(){n.show_ds_money.getChildByName("money").getComponent(cc.Label).string=c.GameDataStorage.gameStateData.ds_money+"",n.show_user_money.getChildByName("money").getComponent(cc.Label).string=c.GameDataStorage.getUser().userData.money+""},1.5),cc.tween(this.add_ds_money).to(.1,{opacity:255,scale:1.2}).delay(.8).to(.1,{opacity:0,scale:1}).start(),cc.tween(this.add_user_money).to(.1,{opacity:255,scale:1.2}).delay(.8).to(.1,{opacity:0,scale:1}).call(function(){c.GameDataStorage.gameStateData.ds_money<=0||c.GameDataStorage.getUser().userData.money<=0?(console.log("\u73a9\u5bb6\u7684\u94b1: ",c.GameDataStorage.getUser().userData.money),console.log("\u5bf9\u624b\u7684\u94b1: ",c.GameDataStorage.gameStateData.ds_money),n.gameOver()):(console.log("\u8001\u94c1\uff0c\u8fd8\u5f97\u7ee7\u7eed\u6e38\u620f"),n.node.getChildByName("mask").active=!1,n.game_call_back())}).start()},t.prototype.moveInChess=function(e,t,a,n){var o,i=this;c.GameDataStorage.gameStateData.chess_num,c.conMager.getInstance().playAudioEff(c.KEY.audioName.luozi),this.stopTime(),this.startTime(-a),this.ai_duihua(1);var s=null,r=null;if(a==h.BLACKCHESS?(s=this.blackPool,r=this.blackChess):(s=this.whiePool,r=this.whiteChess),s.size()>0)o=s.get();else{var u=cc.instantiate(r);s.put(u),o=s.get()}var l=Math.floor(e/this.block),d=Math.floor(t/this.block),p=15*d+l;this.board.chess_map[p]=o,o.getChildByName("chess").getComponent("chess").pos=[l,d],o.x=e,o.y=t,this.chess_parent.addChild(o),o.zIndex=1,this.chessAction(o,n),this.scheduleOnce(function(){i.hongDian.active=!0,i.hongDian.setPosition(e,t+1)},.1)},t.prototype.chessAction=function(e){e.scale=1.5,e.getChildByName("chess").zIndex=98,e.y+=80,e.runAction(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)))},t.prototype.ai_duihua=function(e,t){var a=this;if(!(this.gameType>2)){var n=this.node.getChildByName("ds_biaoqing"),o=this.node.getChildByName("ds_duihua"),i=0;if(1==e){if(!this.interval)return;if(this.interval=!1,this.scheduleOnce(function(){a.interval=!0},8),this.board.state!=this.userChess)return;r.NumberUtil.randomNum(0,10)<2&&(r.NumberUtil.randomNum(0,1)>0?(i=1,c.conMager.getInstance().playAudioEff("nv/nvqifeng")):(i=5,c.conMager.getInstance().playAudioEff("nv/nvhaoqi")))}else if(3==e)i=6,c.conMager.getInstance().playAudioEff("nv/nvhengaoxing");else{if(this.board.state!=this.userChess)return;r.NumberUtil.randomNum(0,100)<t&&(i=4,c.conMager.getInstance().playAudioEff("nv/nvkeyi"))}i>0&&(o.active=!0,n.active=!0,n.children[i].active=!0,o.children[i].active=!0,this.count_down.y>0&&(this.count_down.opacity=0),this.scheduleOnce(function(){a.count_down.opacity=255,n.children[i].active=!1,o.children[i].active=!1,n.active=!1,o.active=!1},2.2))}},t.prototype.gameOver=function(){if(console.log("\u6e38\u620f\u7ed3\u675f:",this.is_game_over,this.board.sum),!this.is_game_over){this.is_game_over=!0,this.board.juesha_judge=!0,this.stopTime(),this.stopTime2(),cc.find("Canvas/money_node").active=!0,c.conMager.getInstance()._msgAtion.emit("closeAllSetBtn"),this.isUpdateMoney=!1,this.show_ds_money.getChildByName("money").getComponent(cc.Label).string=c.GameDataStorage.gameStateData.ds_money+"",this.show_user_money.getChildByName("money").getComponent(cc.Label).string=c.GameDataStorage.getUser().userData.money+"";var e=c.GameDataStorage.getUser().userData.money-this.old_wj_money;c.conMager.getInstance().showWinNode(c.KEY.UIName.scoring_view,this.node.parent,{data:this.record_map,count:e,isOver:!0}),this.board.removeListennner()}},t.prototype.kaiChangDongHua=function(){var e=this;this.ds_headIcon.node.getComponent(cc.Button).interactable=!1,this.user_headIcon.node.getComponent(cc.Button).interactable=!1,c.conMager.getInstance().playAudioEff(c.KEY.audioName.kaiju),c.conMager.getInstance().getPoolNode(c.KEY.poolName.item2,this.node,{callBack:function(){c.conMager.getInstance().getPoolNode(c.KEY.poolName.setup,e.node,null),e.caixianshou()}})},t.prototype.caixianshou=function(){var e=this.node.getChildByName("heizi"),t=this.node.getChildByName("baizi"),a=this.node.getChildByName("baizi_label"),n=this.node.getChildByName("heizi_label");r.NumberUtil.randomNum(0,1)>0?(this.userChess=h.WHITECHESS,c.conMager.getInstance().getPoolNode(c.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!"),this.board.AIXianShou(),e.setPosition(-270,368),t.setPosition(182,-380),n.setPosition(-225,372),a.setPosition(225,-376)):(this.node.getChildByName("fanhui").getComponent(cc.Button).interactable=!0,this.userChess=h.BLACKCHESS,c.conMager.getInstance().getPoolNode(c.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"),t.setPosition(-270,368),e.setPosition(182,-380),a.setPosition(-225,372),n.setPosition(225,-376)),this.ai_duihua(3),e.active=!0,t.active=!0,a.active=!0,n.active=!0,this.board.addListenner(),this.startTime(this.board.state),this.startTime2()},t.prototype.dsHeadIcon_btn=function(){this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!0},t.prototype.userHeadIcon_btn=function(){this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!0},t.prototype.biaoQing_btn=function(e,t){var a=this;this.hide_userPenl_btn();var n=parseInt(t),o=this.node.getChildByName("user_biaoqing");o.active=!0,o.children[n].active=!0;var i=this.node.getChildByName("user_duihua");this.count_down.y<0&&(this.count_down.opacity=0),i.active=!0,i.children[n].active=!0,c.conMager.getInstance().playAudioEff("nan/"+this.musicNames[n-1]),this.scheduleOnce(function(){o.active=!1,o.children[n].active=!1,a.count_down.opacity=255,i.active=!1,i.children[n].active=!1},2.2)},t.prototype.showScoring_btn=function(){this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn);var e=c.GameDataStorage.getUser().userData.money-this.old_wj_money;c.conMager.getInstance().showWinNode(c.KEY.UIName.scoring_view,this.node.parent,{data:this.record_map,count:e,isOver:!1})},t.prototype.hide_userPenl_btn=function(){this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),this.node.getChildByName("user_headPanel").active=!1},t.prototype.hide_dsPenl_btn=function(){this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!1},t.prototype.return_btn=function(){var e=this;this.disableClick(),c.conMager.getInstance().playAudioEff(c.KEY.audioName.btn),3!=this.gameType?c.conMager.getInstance().getPoolNode(c.KEY.poolName.stop_panel,this.node,{callBack:function(t){2==t&&e.renshu()}}):this.onClose(1)},t.prototype.luozizhong_action=function(e){e.active=!0,e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.getComponent(cc.Label).string=""}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50"}),cc.delayTime(.6),cc.callFunc(function(){e.getComponent(cc.Label).string="\u843d\u5b50\u4e2d"}),cc.delayTime(.6))))},t.prototype.startTime=function(e){this.userGameTime=0,this.count_down.active=!0;var t=this.node.getChildByName("luozizhong");t.stopAllActions(),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+(30-this.userGameTime),this.userChess==e?(this.count_down.y=-440,t.setPosition(252,-376),this.quan.setPosition(0,-547)):(this.count_down.y=450,t.setPosition(-197,372),this.quan.setPosition(0,554)),t.color=-1==e?cc.color(51,51,51):cc.color(204,204,204),this.quan.getComponent(cc.Sprite).fillRange=1,this.luozizhong_action(t),this.count_down.getChildByName("time").color=cc.color(255,255,255),this.quan.active=!0,this.quan_judge=!0,this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){if(this.TimeDel||(this.userGameTime+=1),!this.is_game_over){if(this.userGameTime>this.max_gameTime)return console.log("\u56de\u5408\u65f6\u95f4\u8017\u5c3d"),void this.gameOver();var e=this.max_gameTime-this.userGameTime,t=e+"";e<10&&(t="0"+e),this.count_down.getChildByName("time").getComponent(cc.Label).string="00:"+t,e<15&&(this.count_down.getChildByName("time").color=cc.color(255,0,0),this.TimeDel||c.conMager.getInstance().playAudioEff(c.KEY.audioName.shijian)),this.TimeDel||(12==this.userGameTime?this.ai_duihua(2,5):21==this.userGameTime?this.ai_duihua(2,20):26==this.userGameTime&&this.ai_duihua(2,80))}},t.prototype.stopTime=function(){this.unschedule(this.updateTime),this.count_down.active=!1,this.quan.active=!1,this.quan_judge=!1,this.node.getChildByName("luozizhong").stopAllActions(),this.node.getChildByName("luozizhong").active=!1},t.prototype.startTime2=function(){this.schedule(this.updateTime2,1)},t.prototype.updateTime2=function(){if(this.TimeDel||(this.gameTptalTime-=1),!this.is_game_over)if(this.gameTptalTime<=0)this.gameOver();else{var e=this.gameTptalTime,t=e+"";t=e<10?"00:0"+e:(Math.floor(e/60)<10?"0"+Math.floor(e/60):Math.floor(e/60))+":"+(Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60)),this.scene_down.getChildByName("scene_down").getComponent(cc.Label).string=t,e<15&&(this.scene_down.getChildByName("scene_down").color=cc.color(255,0,0),this.TimeDel||c.conMager.getInstance().playAudioEff(c.KEY.audioName.shijian))}},t.prototype.stopTime2=function(){this.unschedule(this.updateTime),this.unschedule(this.updateTime2),this.count_down.active=!1,this.quan.active=!1,this.quan_judge=!1,this.node.getChildByName("luozizhong").stopAllActions(),this.node.getChildByName("luozizhong").active=!1},t.prototype.renshu=function(){if(!this.is_game_over){this.stopTime(),this.stopTime2(),this.is_game_over=!0,c.GameDataStorage.gameStateData.who_sucess=1;var e=c.GameDataStorage.getUser().userData.money-this.old_wj_money;c.conMager.getInstance().showWinNode(c.KEY.UIName.scoring_view,this.node.parent,{data:this.record_map,count:e,isOver:!0})}},t.prototype.ai_renshu=function(){if(!this.is_game_over){this.stopTime(),this.stopTime2(),this.is_game_over=!0,c.GameDataStorage.gameStateData.who_sucess=0;var e=c.GameDataStorage.getUser().userData.money-this.old_wj_money;c.conMager.getInstance().showWinNode(c.KEY.UIName.scoring_view,this.node.parent,{data:this.record_map,count:e,isOver:!0})}},t.prototype.ai_diaoxian=function(){this.is_game_over||(s.commonFunction.updateSprite("head_icon/diaoxian",this.ds_headIcon.node),this.ds_headIcon.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeIn(.4)))),console.log("\u89e6\u53d1\u6389\u7ebf"))},t.prototype.ai_shangxian=function(){this.is_game_over||(s.commonFunction.updateSprite("head_icon/"+this.ds_headIconIndex,this.ds_headIcon.node),this.ds_headIcon.node.opacity=255,this.ds_headIcon.node.stopAllActions(),console.log("\u89e6\u53d1\u4e0a\u7ebf"))},t.prototype.pingju=function(){this.is_game_over||(this.stopTime(),this.stopTime2(),this.board.juesha_judge=!0,this.is_game_over=!0,c.GameDataStorage.gameStateData.who_sucess=2,c.conMager.getInstance().showWinNode(c.KEY.UIName.flat_view,this.node.parent,null))},t.prototype.qiuhe=function(){},t.prototype.shubiao=function(e){this.shubiao_node.active=e},t.prototype.huiqi=function(){},t.prototype.update=function(e){this.quan_judge&&(1==Math.floor(e)&&console.log("1\u79d2\u8fc7\u53bb\u4e86"),this.quan.getComponent(cc.Sprite).fillRange-=1/(60*this.max_gameTime))},i([m(l.xuezhandaodi_GameBoard)],t.prototype,"board",void 0),i([m(cc.Prefab)],t.prototype,"whiteChess",void 0),i([m(cc.Prefab)],t.prototype,"blackChess",void 0),i([m(cc.Node)],t.prototype,"quan",void 0),i([m(cc.Node)],t.prototype,"hongDian",void 0),i([_],t)}(c.winRootNode);a.default=f,cc._RF.pop()},{"../../SSSGF/dataController/DATA":"DATA","../../SSSGF/ssscgf":"ssscgf","../../pvp/script/global":"global","../../utils/platform":"platform","../wuziqi/Piece":"Piece","../wuziqi/xuezhandaodi/xuezhandaodi_GameBoard":"xuezhandaodi_GameBoard","./../../SSSGF/Utils/NumberUtil":"NumberUtil","./../../utils/commonFunction":"commonFunction"}],xz_lian_zhu:[function(e,t,a){"use strict";cc._RF.push(t,"067f3E0lR9HMr6I8CWFUyHH","xz_lian_zhu");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("../../../utils/commonFunction"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bei=null,t}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(e){var t=this,a=e[0].cb,n=e[0].ani_name;this.bei.scale=0,r.commonFunction.updateSprite("xuezhan/bei_"+[2,4,6,8,10,20,30,50][e[0].beishu],this.bei),cc.tween(this.bei).delay(.2).to(.2,{scale:1.5}).start();var o=this.node.getChildByName("xz_lian_zhu").getComponent(sp.Skeleton),i=o.setAnimation(0,n,!1);o.setTrackCompleteListener(i,function(){a&&a(),t.onClose(1)})},t.prototype.onClose=function(){s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){},i([u(cc.Node)],t.prototype,"bei",void 0),i([h],t)}(s.winRootNode);a.default=l,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","../../../utils/commonFunction":"commonFunction"}],zhenfa_ani:[function(e,t,a){"use strict";cc._RF.push(t,"6473djzVeFFg7XPV44dA0Ua","zhenfa_ani");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../SSSGF/ssscgf"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani_budle=null,t.fileName=null,t.is_user=!1,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this,a=this.node.getChildByName("ani").getComponent(sp.Skeleton);if(this.node.x=0,this.node.y=0,this.node.scale=1,e[0].pos&&(this.node.x=e[0].pos.x,this.node.y=e[0].pos.y,this.node.scale=.6),"juesha"==e[0].fileName?(this.node.scale=0,this.scheduleOnce(function(){t.node.scale=.55},.1)):"taiji"==e[0].fileName?this.node.scale=.33:"wulei"==e[0].fileName||"meihua"==e[0].fileName&&(this.node.scale=1.5),this.is_user=e[0].is_user,this.node.getChildByName("mask").opacity=0,this.node.getChildByName("user").active=!1,this.node.getChildByName("ds").active=!1,"kedi"==e[0].fileName?this.scheduleOnce(function(){t.kedi_action(e[0].is_user)},1):"guiyuan"==e[0].fileName&&this.scheduleOnce(function(){t.kedi_action(e[0].is_user)},1),this.fileName=e[0].fileName,this.initBudle(a,e[0].fileName,e[0].ani_name,e[0].cb),-1!=s.GameDataStorage.gameStateData.zhenFaName.indexOf(e[0].fileName)){this.node.y=1500,e[0].is_user&&(this.node.y=-1500);var n=0;"juesha"==e[0].fileName?n+=0:"wulei"==e[0].fileName?n+=170:"guiyuan"==e[0].fileName&&(n+=50),this.node.runAction(cc.sequence(cc.moveTo(.3,0,n),cc.callFunc(function(){t.node.getChildByName("mask").opacity=130})))}s.conMager.getInstance()._msgAtion.on("hide_zhenfa_ani",function(){t.node.opacity=0},this)},t.prototype.onClose=function(){"kedi"==this.fileName?"guiyuan"!=(this.is_user?s.GameDataStorage.gameStateData.dsZhenFaName:s.GameDataStorage.gameStateData.userZhenFaName)&&s.conMager.getInstance()._msgAtion.emit("del_kedinum"):"guiyuan"==this.fileName&&s.conMager.getInstance()._msgAtion.emit("del_kedinum"),s.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){this.node.zIndex=3},t.prototype.initBudle=function(e,t,a,n){var o=this,i=0;"wanning"==t&&(t="wangning"),"kedi"==t&&(i=.3),new Promise(function(a){cc.resources.load("spine/"+t,sp.SkeletonData,function(t,n){t?console.log("\u9aa8\u9abc\u6570\u636e\u52a0\u8f7d\u5931\u8d25"):(e.skeletonData=n,a(n))})}).then(function(){e.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.REALTIME),console.log("\u64ad\u653e\u7684\u52d5\u756b",t,a),e.setAnimation(0,a,!1),e.setCompleteListener(function(){o.scheduleOnce(function(){n&&n();var e=0;"guiyuan"==t&&(e=1.6),o.scheduleOnce(function(){o.onClose(1)},e)},i)})})},t.prototype.kedi_action=function(e){"kedi"==(this.is_user?s.GameDataStorage.gameStateData.dsZhenFaName:s.GameDataStorage.gameStateData.userZhenFaName)&&"guiyuan"==this.fileName||("kedi"==this.fileName?s.conMager.getInstance().getPoolNode(s.KEY.poolName.kedi_num,this.node.parent,{is_user:e,zhenFaName:this.fileName}):"guiyuan"==this.fileName&&s.conMager.getInstance().getPoolNode(s.KEY.poolName.guiyuan_num,this.node.parent,{is_user:e,zhenFaName:this.fileName}))},i([c],t)}(s.winRootNode));a.default=h,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf"}],zhenfa_joiner:[function(e,t,a){"use strict";cc._RF.push(t,"75053IaCUpOf4Suub77es2K","zhenfa_joiner");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./game_joiner"),r=cc._decorator,c=r.ccclass,h=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.active=!0,t.board=null,t}return o(t,e),t.prototype.init_zhenfa=function(e,t){this.data=e,this.my_player=t},t.prototype.judge_active=function(){return 1!=this.active},t.prototype.judge_number=function(){return!(this.use_number<this.use_number_max)},t.prototype.judge_null=function(){for(var e=0;e<this.chess_array.length;e++)for(var t=0;t<this.chess_array[e].length;t++)if(this.chess_array[e][t].chess_data&&this.chess_array[e][t].chess_data.state!=this.my_player.state)return!1;return!0},i([c],t)}(s.default));a.default=h,cc._RF.pop()},{"./game_joiner":"game_joiner"}],zhenfa_ka:[function(e,t,a){"use strict";cc._RF.push(t,"a9b66ftbz9DEL4EZFRantpQ","zhenfa_ka");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../../SSSGF/ssscgf"),r=e("./jineng_xuanze"),c=cc._decorator,h=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.level_label=null,t.name_label=null,t.select=null,t.delect_node=null,t.on_fanpai=!1,t.data=null,t.type=null,t.user_ka_length=1,t.fanpai_tween=new cc.Tween,t.move_tween=new cc.Tween,t.touch_id=null,t.touch_pos=null,t.click_bool=!0,t.click_time=0,t.clicking=!1,t.move_bool=!0,t.scale_bool=new cc.Tween,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){this.ready_delect(!1),this.type=e[0],this.init_data(e[1],e[2]),e[3]&&e[3](this.data)},t.prototype.onClose=function(){throw new Error("Method not implemented.")},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.init_type=function(e){this.type=e,this.init_data(this.data.data,-1)},t.prototype.init_data=function(e,t){var a=new r.zhenfa_node(e,this.node);switch(this.data=a,this.node.getComponent(cc.Button).interactable=!1,this.off_event(),this.type){case r.show_ka_type.get_ka:this.node.y=0,this.fanpai(t);break;case r.show_ka_type.user_ka:this.show_select(-1),this.show_data();break;case r.show_ka_type.select_ka:this.show_select(-1),this.on_event(),this.show_data()}},t.prototype.fanpai=function(e){var t=this;this.node.zIndex=0,this.fanpai_tween.stop(),this.on_fanpai=!1;var a=.2*this.data.data.id;this.fanpai_tween=cc.tween(this.node).delay(a).to(.2,{scaleX:0},{easing:"quadOut"}).call(function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.fanpai),t.show_data()}).to(.2,{scaleX:1},{easing:"quadIn"}).call(function(){switch(t.on_fanpai=!0,t.type){case r.show_ka_type.get_ka:t.node.getComponent(cc.Button).interactable=!0;break;case r.show_ka_type.user_ka:case r.show_ka_type.select_ka:}}).start(),this.show_select(e)},t.prototype.show_data=function(){var e=this,t="image/zhenfa_icon/"+this.data.data.name;cc.resources.load(t,cc.SpriteFrame,function(t,a){if(t)return console.error("\u8fde\u62db\u83b7\u53d6\u9635\u6cd5\u56fe\u6807\u5931\u8d25"),void(e.icon.spriteFrame=null);e.icon.spriteFrame=a}),this.level_label.string="lv."+this.data.data.level,this.name_label.string=this.data.data.ch_name},t.prototype.show_select=function(e){this.select.active=!1,e==this.data.data.id&&(this.select.active=!0)},t.prototype.on_zhenfa=function(){if(0!=this.on_fanpai){s.conMager.getInstance().playAudioEff(s.KEY.audioName.on_ka);var e=this.data,t=new cc.Event.EventCustom("xuanze_ka",!0),a=e;t.setUserData(a),this.node.dispatchEvent(t)}},t.prototype.user_ka_tween=function(e,t){var a=this;e&&(this.user_ka_length=e,1==t&&(this.node.x=0)),this.click_bool=!1,this.move_tween.stop(),this.node.zIndex=this.data.data.id;var n=65*-(this.user_ka_length-1),o=n+130*this.data.data.id,i=Math.abs(o/260);0==n&&(i=.3),this.move_tween=cc.tween(this.node).to(i,{position:cc.v3(o,0,0)}).call(function(){a.click_bool=!0}).start(),this.show_select(-1)},t.prototype.ready_delect=function(e){this.delect_node.active=e},t.prototype.on_event=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.on,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.move,this),this.node.on(cc.Node.EventType.TOUCH_END,this.up,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.up,this)},t.prototype.off_event=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.on,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.move,this),this.node.off(cc.Node.EventType.TOUCH_END,this.up,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.up,this)},t.prototype.fangda=function(){this.node.zIndex=cc.macro.MAX_ZINDEX,this.scale_bool.stop(),this.scale_bool=cc.tween(this.node).by(.3,{position:cc.v3(0,150),scale:.4}).start()},t.prototype.on=function(e){0!=this.click_bool&&null===this.touch_id&&(this.touch_id=e.getID(),this.data.type==r.ka_type.user_hand&&(this.click_bool=!1,this.clicking=!0),this.touch_pos=this.node.convertToNodeSpaceAR(e.getLocation()),this.node.zIndex=cc.macro.MAX_ZINDEX-1,s.conMager.getInstance().playAudioEff(s.KEY.audioName.on_ka))},t.prototype.move=function(e){if(this.touch_id===e.getID()&&0!=this.move_bool){var t=this.node.parent.convertToNodeSpaceAR(e.getLocation()).sub(this.touch_pos);this.touch_pos.sub(t).mag()<50&&(this.clicking=!1),this.node.setPosition(t),s.conMager.getInstance()._msgAtion.emit("move",this.data)}},t.prototype.up=function(e){var t=this;this.touch_id===e.getID()&&(1==this.move_bool?s.conMager.getInstance()._msgAtion.emit("up",this.data):(this.scale_bool.stop(),this.scale_bool=cc.tween(this.node).call(function(){t.user_ka_tween()}).to(.3,{scale:1}).start()),this.clicking=!1,this.touch_id=null,this.touch_pos=null,this.click_bool=!0,this.node.zIndex=this.data.data.id,this.click_time=0,this.move_bool=!0)},t.prototype.start=function(){},t.prototype.update=function(e){1==this.clicking&&1==this.move_bool&&(this.click_time+=e,this.click_time>.3&&(this.move_bool=!1,this.fangda()))},i([u({type:cc.Sprite,tooltip:"\u56fe\u6807"})],t.prototype,"icon",void 0),i([u({type:cc.Label,tooltip:"\u7b49\u7ea7"})],t.prototype,"level_label",void 0),i([u({type:cc.Label,tooltip:"\u540d\u5b57"})],t.prototype,"name_label",void 0),i([u({type:cc.Node,tooltip:"\u9635\u6cd5\u724c\u7684\u9009\u62e9"})],t.prototype,"select",void 0),i([u({type:cc.Node,tooltip:"\u5220\u9664\u80cc\u666f\u6846"})],t.prototype,"delect_node",void 0),i([h],t)}(s.winRootNode);a.default=l,cc._RF.pop()},{"../../../SSSGF/ssscgf":"ssscgf","./jineng_xuanze":"jineng_xuanze"}],zhibo_game_view:[function(e,t,a){"use strict";cc._RF.push(t,"8bf56+Gyg5C6bwyh+vOqAzU","zhibo_game_view");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.qizi_buzhou=void 0;var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=e("../../classCon/configSurface"),h=e("../wuziqi/Piece"),u=e("../../utils/platform"),l=e("../panel/zhibo_setting_panel"),d=e("../wuziqi/zhibo/GameBoard_zhibo"),p=e("../../utils/commonFunction"),g=cc._decorator,_=g.ccclass,m=g.property,f=function(e,t,a,n,o){this.id=e,this.color=t,this.x=a,this.y=n,this.node=o};a.qizi_buzhou=f;var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item2=null,t.item3=null,t.gameType=4,t.dsName_string="",t.dsName_label_item2=null,t.dsLevel_label_item2=null,t.dsHeadIcon_item2=null,t.userLevel_label_item2=null,t.userName_label_item2=null,t.userHeadIcon_item2=null,t.reward_gold=2,t.multiple=0,t.chess_parent=null,t.shubiao_node=null,t.zhibo_data=null,t.board=null,t.whiteChess=null,t.blackChess=null,t.baizi=null,t.heizi=null,t.gonggao=null,t.zhibo_layout=null,t.bushu_label=null,t.chongkai_ui=null,t.red_dian=null,t.title=null,t.running=!1,t.qizi_array=[],t.bushu=0,t.block=46,t.userGameTime=0,t.count_down=null,t.userChess=h.BLACKCHESS,t.is_game_over=!1,t.count_time_itm3=10,t.jiabei_num_item3=0,t.whiePool=new cc.NodePool,t.blackPool=new cc.NodePool,t.RightRate=1,t.chess_num=0,t.interval=!0,t.musicNames=["nanqifeng","nangaoxing","nanshiwu","nankeyikuaidianma","nanhaoqi","nanhengaoxing"],t.gonggao_run=new cc.Tween,t}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){r._pl_fun.getInstance().startCreateVideo(),this.reward_gold=e[0].reward_gold,r.GameDataStorage.gameStateData.reward_gold=this.reward_gold,this.gameType=e[0].gameType,this.gameType=4,r.GameDataStorage.gameStateData.gameType=4;var t=e[0].RightRate;1==t?this.RightRate=.4:2==t?this.RightRate=.5:3==t?this.RightRate=.7:4==t?this.RightRate=.8:5==t&&(this.RightRate=.9),this.initGame(),this.node.runAction(cc.fadeIn(.5)),u.platform.now_platform!=u.platform_type.is_tt&&(this.node.getChildByName("luping").active=!1)},t.prototype.onClose=function(){this.unscheduleAllCallbacks(),this.board.removeListennner(),r.conMager.getInstance().hideWinNode(r.KEY.UIName.zhibo_game_view),r.conMager.getInstance().showWinNode(r.KEY.UIName.slectGmae,null,{gameType:this.gameType})},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){r.conMager.getInstance()._msgAtion.on("renshu",this.renshu,this),r.conMager.getInstance()._msgAtion.on("shubiao",this.shubiao,this),r.conMager.getInstance()._msgAtion.on("qiuhe",this.qiuhe,this),r.conMager.getInstance()._msgAtion.on("huiqi",this.huiqi,this)},t.prototype.RadomZhenFa=function(e){var t=[],a=c.zhenFaWeight[e];if(a){for(var n in a){var o={v:n,p:a[n]};t.push(o)}for(var i=[],r=0;r<t.length;r++)i=i.concat(new Array(t[r].p).fill(t[r].v));return i[s.NumberUtil.randomNum(0,i.length-1)]}},t.prototype.initDsZhenFa=function(){var e=r.GameDataStorage.gameStateData.userZhenFaName,t=this.RadomZhenFa(e);r.GameDataStorage.gameStateData.dsZhenFaName=t;var a=r.GameDataStorage.getUser().userData.zhenFaMap[e].level+5*[-1,1][s.NumberUtil.randomNum(0,1)];a<=3&&(a=3),r.GameDataStorage.gameStateData.ds_zhenfalevel=a},t.prototype.initGame=function(){cc.find("Canvas/money_node").active=!1,r.GameDataStorage.gameStateData.chess_num=0,r.GameDataStorage.gameStateData.rewardmultiple=0,2==this.gameType&&this.initDsZhenFa(),this.initUi(),this.initData(),this.gameType<3?this.kaiChangDongHua():(this.baizi.active=!0,this.heizi.active=!0),this.board.init(this),this.node.getChildByName("mask").zIndex=99,this.initPool(this.whiePool,this.whiteChess),this.initPool(this.blackPool,this.blackChess),this.qizi_array=[],this.bushu=0,this.lunhuan_gonggao(),this.bushu_label.string=this.bushu.toString()},t.prototype.initUi=function(){this.item2=this.node.getChildByName("item2"),this.item3=this.node.getChildByName("item3"),this.dsLevel_label_item2=this.item2.getChildByName("left").getChildByName("dsLevel").getComponent(cc.Label),this.dsName_label_item2=this.item2.getChildByName("left").getChildByName("dsName").getComponent(cc.Label),this.userLevel_label_item2=this.item2.getChildByName("right").getChildByName("userLevel").getComponent(cc.Label),this.userName_label_item2=this.item2.getChildByName("right").getChildByName("userName").getComponent(cc.Label),this.chess_parent=this.node.getChildByName("chess_parent"),this.shubiao_node=this.chess_parent.getChildByName("shubiao_node"),this.heizi.getChildByName("luozi").active=!0,this.heizi.getChildByName("time").active=!0,this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",this.gameType<3||4==this.gameType&&(console.log("\u600e\u4e48\u56de\u4e8b"),this.baizi.on(cc.Node.EventType.TOUCH_MOVE,this.qizi_move,this),this.heizi.on(cc.Node.EventType.TOUCH_MOVE,this.qizi_move,this),this.title.on(cc.Node.EventType.TOUCH_MOVE,this.qizi_move,this))},t.prototype.initData=function(){var e=r.GameDataStorage.getUser().userData;this.userName_label_item2.string=e.gameName;var t=p.commonFunction.judgeGameLevelName(e.user_level);this.userLevel_label_item2.string=t;var a=c.XingMingData.xing,n=c.XingMingData.ming,o=p.commonFunction.randomGameName(a,n);this.dsName_label_item2.string=o,r.GameDataStorage.gameStateData.ds_name=o;var i=p.commonFunction.judgeAiLevel(e.user_level),h=p.commonFunction.judgeGameLevelName(i);this.dsLevel_label_item2.string=h,null==r.GameDataStorage.gameStateData.zhibo_setting?(this.zhibo_data=new l.zhibo_setting_data,r.GameDataStorage.gameStateData.zhibo_setting=this.zhibo_data):this.zhibo_data=r.GameDataStorage.gameStateData.zhibo_setting,r.GameDataStorage.gameStateData.heizi_pos&&this.heizi.setPosition(r.GameDataStorage.gameStateData.heizi_pos),r.GameDataStorage.gameStateData.baizi_pos&&this.baizi.setPosition(r.GameDataStorage.gameStateData.baizi_pos),r.GameDataStorage.gameStateData.title&&this.title.setPosition(r.GameDataStorage.gameStateData.title);var u=s.NumberUtil.randomNum(2,30);console.log("\u5bf9\u624b\u7684\u5934\u50cf:",u)},t.prototype.initPool=function(e,t){for(var a=0;a<225;a++){var n=cc.instantiate(t);e.put(n)}},t.prototype.moveInChess=function(e,t,a,n){this.running=!0;var o,i=r.GameDataStorage.gameStateData.chess_num;if(2==this.gameType)if(i>30){this.chess_num-=1;var s=2;i>100&&(s=10),i>150&&(s=15),this.chess_num%s==0&&r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi)}else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);else r.conMager.getInstance().playAudioEff(r.KEY.audioName.luozi);this.stopTime(),this.baizi.getChildByName("luozi").active=!1,this.heizi.getChildByName("luozi").active=!1,1==this.board.state?(this.heizi.getChildByName("luozi").active=!0,this.heizi.getChildByName("time").active=!0,this.baizi.getChildByName("time").active=!1):(this.baizi.getChildByName("luozi").active=!0,this.baizi.getChildByName("time").active=!0,this.heizi.getChildByName("time").active=!1),this.startTime(-a),this.ai_duihua(1);var c=null,u=null;if(a==h.BLACKCHESS?(c=this.blackPool,u=this.blackChess):(c=this.whiePool,u=this.whiteChess),c.size()>0)o=c.get();else{var l=cc.instantiate(u);c.put(l),o=c.get()}o.active=!0;var d=Math.round(e/this.block),p=Math.round(t/this.block);this.bushu<this.qizi_array.length&&this.on_new_check_by_huitui();var g=new f(this.qizi_array.length,a,d,p,o);this.qizi_array.push(g),this.bushu++,this.bushu_label.string=this.bushu.toString();var _=15*p+d;this.board.chess_map[_]=o,o.x=e,o.y=t,this.chess_parent.addChild(o),this.red_dian.active=!1,this.chessAction(o,n)},t.prototype.chessAction=function(e,t){var a=this;e.scale=1.5,e.getChildByName("chess").zIndex=98,e.y+=80,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.moveBy(.1,0,-80)),cc.callFunc(function(){if(t){var n=e.getChildByName("jn1");n.active=!0,a.scheduleOnce(function(){n.active=!1},1)}a.gra_red_dian()})))},t.prototype.ai_duihua=function(e,t){var a=this;if(!(this.gameType>2)){var n=0;if(1==e){if(!this.interval)return;if(this.interval=!1,this.scheduleOnce(function(){a.interval=!0},8),this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,10)<2&&(s.NumberUtil.randomNum(0,1)>0?(n=1,r.conMager.getInstance().playAudioEff("nv/nvqifeng")):(n=5,r.conMager.getInstance().playAudioEff("nv/nvhaoqi")))}else if(3==e)n=6,r.conMager.getInstance().playAudioEff("nv/nvhengaoxing");else{if(this.board.state!=this.userChess)return;s.NumberUtil.randomNum(0,100)<t&&(n=4,r.conMager.getInstance().playAudioEff("nv/nvkeyi"))}n>0&&(this.count_down.y>0&&(this.count_down.opacity=0),this.scheduleOnce(function(){a.count_down.opacity=255},2.2))}},t.prototype.gameOver=function(){var e=this;console.log("\u6e38\u620f\u501f\u5bbf:",this.is_game_over),this.is_game_over||(this.is_game_over=!0,this.stopTime(),this.userGameTime>this.zhibo_data.bushi?this.userChess!=this.board.win?(console.log("\u5bf9\u624b\u80dc\u5229"),this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:1}),r.GameDataStorage.gameStateData.who_sucess=1):(console.log("\u73a9\u5bb6\u80dc\u5229"),this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:0}),r.GameDataStorage.gameStateData.who_sucess=0):1==this.board.win||-1==this.board.win?this.userChess==this.board.win?(this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.success_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:0}),r.GameDataStorage.gameStateData.who_sucess=0):(this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:1}),r.GameDataStorage.gameStateData.who_sucess=1):(this.gameType<3?r.conMager.getInstance().showWinNode(r.KEY.UIName.flat_view,this.node.parent,null):r.conMager.getInstance().showWinNode(r.KEY.UIName.duiyi_result_view,this.node.parent,{whose_round:2}),r.GameDataStorage.gameStateData.who_sucess=2),this.board.removeListennner(),this.heizi.getChildByName("luozi").active=!0,this.baizi.getChildByName("luozi").active=!0,this.heizi.getChildByName("time").active=!1,this.baizi.getChildByName("time").active=!1,1==this.board.win?(this.heizi.getChildByName("luozi").getComponent(cc.Label).string="\u5931\u8d25",this.heizi.getChildByName("luozi").color=cc.color(51,51,51,255),this.baizi.getChildByName("luozi").getComponent(cc.Label).string="\u80dc\u5229",this.baizi.getChildByName("luozi").color=cc.color(255,0,0,255)):(this.baizi.getChildByName("luozi").getComponent(cc.Label).string="\u5931\u8d25",this.baizi.getChildByName("luozi").color=cc.color(51,51,51,255),this.heizi.getChildByName("luozi").getComponent(cc.Label).string="\u80dc\u5229",this.heizi.getChildByName("luozi").color=cc.color(255,0,0,255)),this.scheduleOnce(function(){e.node.getChildByName("mask").active=!1},3))},t.prototype.kaiChangDongHua=function(){var e=this;r.conMager.getInstance().playAudioEff(r.KEY.audioName.pipeizhong),s.NumberUtil.randomNum(1,3),this.scheduleOnce(function(){r.conMager.getInstance().playAudioEff(r.KEY.audioName.pipeichenggong),e.scheduleOnce(function(){e.item2.active=!0,r.conMager.getInstance().playAudioEff(r.KEY.audioName.kaiju);var t=e.item2.getChildByName("left"),a=e.item2.getChildByName("right"),n=e.item2.getChildByName("pk");n.scale=4,n.y=150,t.active=!0,a.active=!0,t.runAction(cc.sequence(cc.delayTime(.8),cc.callFunc(function(){}),cc.fadeIn(.2),cc.delayTime(.7),cc.callFunc(function(){}),cc.fadeOut(.15),cc.callFunc(function(){e.item3.active=!0,e.item2.active=!1,e.item3.active=!0;var t=e.item3.getChildByName("Node");t.y=1500,r.conMager.getInstance().playAudioEff(r.KEY.audioName.showpanel),cc.tween(t).to(.3,{position:cc.v3(0,0)},{easing:"backOut"}).start(),e.startTime_item3();var a=s.NumberUtil.randomNum(1,2);console.log("\u95f4\u9694\u65f6\u95f4:"),e.scheduleOnce(function(){var t=s.NumberUtil.randomNum(0,2),a=1;1==t?a=2:2==t&&(a=4),e.jiabeiAction(a,1)},a)}))),a.runAction(cc.sequence(cc.delayTime(.8),cc.fadeIn(.2),cc.delayTime(.7),cc.fadeOut(.15)))},1)},2)},t.prototype.caixianshou=function(){if(this.gameType<3){var e=this.node.getChildByName("wheel_parent").getChildByName("heizi"),t=this.node.getChildByName("wheel_parent").getChildByName("baizi");s.NumberUtil.randomNum(0,1)>0?(this.userChess=h.WHITECHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u767d\u68cb\u540e\u624b!"),this.board.AIXianShou(),e.setPosition(-270,368),t.setPosition(182,-380)):(this.userChess=h.BLACKCHESS,r.conMager.getInstance().getPoolNode(r.KEY.poolName.tipNode,this.node,"\u4f60\u62bd\u5230\u9ed1\u68cb\u5148\u624b!"),t.setPosition(-270,368),e.setPosition(182,-380)),this.ai_duihua(3),e.active=!0,t.active=!0}this.startTime(this.board.state)},t.prototype.jiabeiAction=function(e,t){var a=this;this.reward_gold*=e,this.item3.getChildByName("Node").getChildByName("gold_num").getComponent(cc.Label).string=this.reward_gold+"",r.GameDataStorage.gameStateData.reward=this.reward_gold,r.GameDataStorage.gameStateData.rewardmultiple*=e;var n="",o=-380;if(1==t)o=380,n=["nvbujiabei","nvjiabei","nvjiabei","nvchaojijiabei"][e-1];else{this.stopTime_item3(),this.multiple=1,n=["nanbujiabei","nanjiabei","nanbujiabei","nanchaojijiabei"][e-1];var i=this.item3.getChildByName("Node"),s=cc.callFunc(function(){a.item3.active=!1,a.caixianshou()});cc.tween(i).sequence(cc.tween().to(.5,{position:cc.v3(0,1500)},{easing:"backIn"}),cc.delayTime(1),s).start()}r.conMager.getInstance().playAudioEff(n),r.conMager.getInstance().getPoolNode(r.KEY.poolName.jiabei,this.node,{pos:cc.v2(0,o),index:e})},t.prototype.jiabei_btn=function(e,t){if(r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),!(this.multiple>0)){var a=parseInt(t);this.jiabeiAction(a,2)}},t.prototype.dsHeadIcon_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!0},t.prototype.userHeadIcon_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn)},t.prototype.biaoQing_btn=function(e,t){var a=this;this.hide_userPenl_btn();var n=parseInt(t);this.count_down.y<0&&(this.count_down.opacity=0),r.conMager.getInstance().playAudioEff("nan/"+this.musicNames[n-1]),this.scheduleOnce(function(){a.count_down.opacity=255},2.2)},t.prototype.hide_userPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn)},t.prototype.hide_dsPenl_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.node.getChildByName("ds_headPanel").active=!1},t.prototype.return_btn=function(){this.disableClick(),r.conMager.getInstance().playAudioEff(r.KEY.audioName.btn),this.onClose(1)},t.prototype.startTime=function(){this.userGameTime=0,this.count_down.active=!0;var e="("+(this.zhibo_data.bushi-this.userGameTime)+")";this.zhibo_data.bushi>600&&(e="\u65e0\u9650"),this.count_down.getChildByName("time").getComponent(cc.Label).string=e,this.baizi.getChildByName("time").getComponent(cc.Label).string=e,this.heizi.getChildByName("time").getComponent(cc.Label).string=e,"\u65e0\u9650"==e&&(setTimeout(function(){}),this.heizi.getChildByName("time").active=!1,this.baizi.getChildByName("time").active=!1),this.schedule(this.updateTime,1)},t.prototype.updateTime=function(){if(this.userGameTime+=1,this.userGameTime>this.zhibo_data.bushi)return this.gameOver(),void this.stopTime();var e=this.zhibo_data.bushi-this.userGameTime,t=e+"";e<10&&(t="0"+e);var a="("+t+")";this.zhibo_data.bushi>600&&(a="\u65e0\u9650"),this.count_down.getChildByName("time").getComponent(cc.Label).string=a,this.baizi.getChildByName("time").getComponent(cc.Label).string=a,this.heizi.getChildByName("time").getComponent(cc.Label).string=a,"\u65e0\u9650"==a&&(this.heizi.getChildByName("time").active=!1,this.baizi.getChildByName("time").active=!1),12==this.userGameTime?this.ai_duihua(2,5):21==this.userGameTime?this.ai_duihua(2,20):26==this.userGameTime&&this.ai_duihua(2,80)},t.prototype.stopTime=function(){this.unschedule(this.updateTime),this.count_down.active=!1,this.heizi.getChildByName("time").active=!1,this.baizi.getChildByName("time").active=!1},t.prototype.startTime_item3=function(){this.count_time_itm3=10,this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label).string=this.count_time_itm3+"s",this.schedule(this.updateTime_item3,1)},t.prototype.updateTime_item3=function(){this.count_time_itm3-=1;var e=this.item3.getChildByName("Node").getChildByName("time").getComponent(cc.Label);e.string=this.count_time_itm3+"s",this.count_time_itm3<=5&&(e.node.color=cc.color(255,0,0)),this.count_time_itm3<=0&&(e.node.active=!1,r.conMager.getInstance().playAudioEff("nanbujiabei"),this.jiabeiAction(1,2),this.stopTime_item3())},t.prototype.stopTime_item3=function(){this.unschedule(this.updateTime_item3)},t.prototype.renshu=function(){this.stopTime(),this.stopTime_item3(),this.is_game_over=!0,r.GameDataStorage.gameStateData.who_sucess=1,r.conMager.getInstance().showWinNode(r.KEY.UIName.fail_view,this.node.parent,null)},t.prototype.qiuhe=function(){},t.prototype.shubiao=function(){},t.prototype.huiqi=function(){},t.prototype.qizi_move=function(e){var t=e.target,a=e.getLocation(),n=t.parent.convertToNodeSpaceAR(a);t.setPosition(n),"heizi"==t.name?r.GameDataStorage.gameStateData.heizi_pos=t.getPosition():"baizi"==t.name?r.GameDataStorage.gameStateData.baizi_pos=t.getPosition():"title"==t.name&&(r.GameDataStorage.gameStateData.title=t.getPosition())},t.prototype.on_chognkai=function(){this.chongkai_ui.active=!0},t.prototype.on_chongkai_sure=function(){console.log("\u91cd\u5f00");for(var e=0;e<this.qizi_array.length;e++){var t=this.blackPool;this.qizi_array[e].color==h.WHITECHESS&&(t=this.whiePool),this.qizi_array[e].node.getChildByName("guang").active=!1,t.put(this.qizi_array[e].node),this.board.maze[this.qizi_array[e].x][this.qizi_array[e].y]=h.NONE}this.qizi_array=[],this.is_game_over=!1,this.board.win=2,this.board.istouch=!0,this.board.myTurn=!0,this.board.state=h.BLACKCHESS,this.running=!1,this.stopTime(),this.stopTime_item3(),this.bushu=0,this.heizi.getChildByName("luozi").color=cc.color(99,61,54,255),this.baizi.getChildByName("luozi").color=cc.color(99,61,54,255),this.heizi.getChildByName("luozi").getComponent(cc.Label).string="\u843d\u5b50\u4e2d",this.baizi.getChildByName("luozi").getComponent(cc.Label).string="\u843d\u5b50\u4e2d",this.change_bushu(),this.board.addListenner(),this.chongkai_ui.active=!1,this.red_dian.active=!1},t.prototype.on_chongkai_back=function(){this.chongkai_ui.active=!1},t.prototype.on_huitui=function(){if(this.bushu<=0)console.log("\u4e0d\u53ef\u56de\u9000");else{this.qizi_array[this.bushu-1].node.active=!1;var e=this.qizi_array[this.bushu-1].x,t=this.qizi_array[this.bushu-1].y;this.board.maze[e][t]=0,this.bushu--,this.board.state=-this.board.state,this.change_bushu()}},t.prototype.on_qianjin=function(){if(this.bushu>=this.qizi_array.length)console.log("\u8d85\u51fa\u524d\u8fdb\u6b65\u6570");else{this.bushu++,this.qizi_array[this.bushu-1].node.active=!0;var e=this.qizi_array[this.bushu-1].x,t=this.qizi_array[this.bushu-1].y;this.board.maze[e][t]=this.qizi_array[this.bushu-1].color,this.board.state=-this.board.state,this.change_bushu()}},t.prototype.on_new_check_by_huitui=function(){for(var e=[],t=0;t<this.qizi_array.length;t++)if(t<this.bushu)e.push(this.qizi_array[t]);else{var a=this.blackPool;this.qizi_array[t].color==h.WHITECHESS&&(a=this.whiePool),a.put(this.qizi_array[t].node)}this.qizi_array=e},t.prototype.on_setting=function(){r.conMager.getInstance().getPoolNode(r.KEY.poolName.zhibo_setting_panel,this.node,this.zhibo_data,this.running)},t.prototype.get_zhibo_data=function(e){this.zhibo_data=e,r.GameDataStorage.gameStateData.zhibo_setting=this.zhibo_data,this.show_zhibo_data()},t.prototype.show_zhibo_data=function(){for(var e=this.zhibo_layout.children,t=0;t<e.length;t++)switch(t){case 0:e[t].active=this.zhibo_data.lianmai;break;case 1:e[t].active=this.zhibo_data.chadui}this.shubiao_node.active=this.zhibo_data.shubiao,this.gonggao.node.parent.parent.active=this.zhibo_data.gonggao;var a="("+this.zhibo_data.bushi+")";9999==this.zhibo_data.bushi&&(a="\u65e0\u9650"),this.count_down.getChildByName("time").getComponent(cc.Label).string=a,this.baizi.getChildByName("time").getComponent(cc.Label).string=a,this.heizi.getChildByName("time").getComponent(cc.Label).string=a,"\u65e0\u9650"==a&&(this.heizi.getChildByName("time").active=!1,this.baizi.getChildByName("time").active=!1),this.lunhuan_gonggao()},t.prototype.lunhuan_gonggao=function(){var e=this;this.gonggao_run.stop(),this.gonggao.node.opacity=0,this.gonggao.string=this.zhibo_data.gonggao_label,this.gonggao.enabled=!1,this.gonggao.enabled=!0,setTimeout(function(){e.gonggao.node.opacity=255;var t=e.gonggao.node.parent.width/2+e.gonggao.node.width/2;e.gonggao.node.x=t;var a=e.gonggao.node.width+e.gonggao.node.parent.width,n=a/200;e.gonggao_run=cc.tween(e.gonggao.node).repeatForever(cc.tween(e.gonggao.node).to(n,{position:cc.v3(0,0)}).delay(3).by(n,{position:cc.v3(-a/2,0)}).call(function(){e.gonggao.node.x=a/2})).start()},1e3)},t.prototype.lunhuan=function(e){var t=this,a=0;this.gonggao_run=cc.tween(this.gonggao.node).repeatForever(cc.tween(this.gonggao.node).call(function(){t.gonggao.node.y=-45,t.gonggao.string=e[a],++a>=e.length&&(a=0)}).to(.5,{position:cc.v3(0,0)}).delay(3).to(.5,{position:cc.v3(45,0)})).start()},t.prototype.change_bushu=function(){this.bushu_label.string=this.bushu.toString(),this.gra_red_dian(),1!=this.is_game_over&&(this.baizi.getChildByName("luozi").active=!1,this.heizi.getChildByName("luozi").active=!1,-1==this.board.state?(this.heizi.getChildByName("luozi").active=!0,this.heizi.getChildByName("time").active=!0,this.baizi.getChildByName("time").active=!1):(this.baizi.getChildByName("luozi").active=!0,this.baizi.getChildByName("time").active=!0,this.heizi.getChildByName("time").active=!1))},t.prototype.gra_red_dian=function(){if(!(this.bushu<=0)){this.red_dian.active=!0;var e=this.qizi_array[this.bushu-1].node.convertToWorldSpaceAR(cc.v2(0,0)),t=this.red_dian.parent.convertToNodeSpaceAR(e);this.red_dian.setPosition(t)}},i([m(d.GameBoard_zhibo)],t.prototype,"board",void 0),i([m(cc.Prefab)],t.prototype,"whiteChess",void 0),i([m(cc.Prefab)],t.prototype,"blackChess",void 0),i([m({type:cc.Node,tooltip:"\u767d\u5b50"})],t.prototype,"baizi",void 0),i([m({type:cc.Node,tooltip:"\u9ed1\u5b50"})],t.prototype,"heizi",void 0),i([m({type:cc.Label,tooltip:"\u516c\u544a"})],t.prototype,"gonggao",void 0),i([m({type:cc.Node,tooltip:"\u76f4\u64ad\u76f8\u5173\u7ec4\u4ef6"})],t.prototype,"zhibo_layout",void 0),i([m({type:cc.Label,tooltip:"\u6b65\u6570label"})],t.prototype,"bushu_label",void 0),i([m({type:cc.Node,tooltip:"\u91cd\u65b0\u5f00\u59cbui"})],t.prototype,"chongkai_ui",void 0),i([m({type:cc.Node,tooltip:"\u7ea2\u70b9"})],t.prototype,"red_dian",void 0),i([m({type:cc.Node,tooltip:"\u6807\u9898"})],t.prototype,"title",void 0),i([m({type:cc.Node,tooltip:"\u5012\u8ba1\u65f6\u8282\u70b9"})],t.prototype,"count_down",void 0),i([_],t)}(r.winRootNode);a.default=y,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../../classCon/configSurface":"configSurface","../../utils/commonFunction":"commonFunction","../../utils/platform":"platform","../panel/zhibo_setting_panel":"zhibo_setting_panel","../wuziqi/Piece":"Piece","../wuziqi/zhibo/GameBoard_zhibo":"GameBoard_zhibo","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}],zhibo_setting_panel:[function(e,t,a){"use strict";cc._RF.push(t,"15004pVAVNPzpWYWiOrZGP4","zhibo_setting_panel");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.zhibo_setting_data=void 0;var s=e("../../SSSGF/ssscgf"),r=e("../view/zhibo_game_view"),c=cc._decorator,h=c.ccclass,u=c.property;a.zhibo_setting_data=function(){this.jushi=9999,this.bushi=9999,this.lianmai=!0,this.shubiao=!0,this.chadui=!0,this.gonggao=!0,this.gonggao_label="\u672a\u6210\u5e74\u4eba\u7981\u6b62\u6253\u8d4f"};var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.jushi_time_label=null,t.jushi_select=null,t.bushi_time_label=null,t.bushi_select=null,t.bool_layout=null,t.gonggao_label=null,t.bgm_btn=null,t.effect_btn=null,t.zhibo_data=null,t.running=!1,t}return o(t,e),t.prototype.inint=function(){},t.prototype.onOpen=function(e){console.log("\u8fdb\u6765\u4e86",e[0]),this.node.active=!0,this.zhibo_data=e[0],this.running=e[1],this.show_data()},t.prototype.onClose=function(){throw new Error("Method not implemented.")},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.start=function(){this.gonggao_label.node.on("editing-did-ended",this.gonggao_listener,this)},t.prototype.gonggao_listener=function(){this.zhibo_data.gonggao_label=this.gonggao_label.string},t.prototype.show_data=function(){this.jushi_select.active=!1,this.bushi_select.active=!1;var e=this.zhibo_data.jushi.toString();"9999"==e&&(e="\u65e0\u9650");var t=this.zhibo_data.bushi.toString();"9999"==t&&(t="\u65e0\u9650"),this.jushi_time_label.string=e,this.bushi_time_label.string=t;for(var a=this.bool_layout.children,n=0;n<a.length;n++)switch(n){case 0:a[n].getChildByName("btn").getChildByName("gou").active=this.zhibo_data.lianmai;break;case 1:a[n].getChildByName("btn").getChildByName("gou").active=this.zhibo_data.shubiao;break;case 2:a[n].getChildByName("btn").getChildByName("gou").active=this.zhibo_data.chadui;break;case 3:a[n].getChildByName("btn").getChildByName("gou").active=this.zhibo_data.gonggao}this.gonggao_label.string=this.zhibo_data.gonggao_label;var o=s.GameDataStorage.gameStateData.isBgm_Open;this.bgm_btn.getChildByName("open").active=o;var i=s.GameDataStorage.gameStateData.isEffect_Open;this.effect_btn.getChildByName("open").active=i},t.prototype.on_bg=function(){this.jushi_select.active=!1,this.bushi_select.active=!1},t.prototype.on_jushi=function(){1!=this.running&&(this.jushi_select.active=!this.jushi_select.active)},t.prototype.on_jushi_select=function(e,t){this.bushi_select.active=!1;var a=t;"9999"==a&&(a="\u65e0\u9650"),this.jushi_time_label.string=a,this.zhibo_data.jushi=Number(t),this.show_data()},t.prototype.on_bushi=function(){1!=this.running&&(this.bushi_select.active=!this.bushi_select.active)},t.prototype.on_bushi_select=function(e,t){this.bushi_select.active=!1;var a=t;"9999"==a&&(a="\u65e0\u9650"),this.bushi_time_label.string=a,this.zhibo_data.bushi=Number(t),this.show_data()},t.prototype.on_bool_select=function(e,t){switch(t){case"0":this.zhibo_data.lianmai=!this.zhibo_data.lianmai;break;case"1":this.zhibo_data.shubiao=!this.zhibo_data.shubiao;break;case"2":this.zhibo_data.chadui=!this.zhibo_data.chadui;break;case"3":this.zhibo_data.gonggao=!this.zhibo_data.gonggao}this.show_data()},t.prototype.on_set_data=function(){this.zhibo_data.gonggao_label=this.gonggao_label.string,this.node.parent.getComponent(r.default).get_zhibo_data(this.zhibo_data),s.conMager.getInstance().putPoolNode(s.KEY.poolName.zhibo_setting_panel,this.node)},t.prototype.bgm_btn_fun=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var e=s.GameDataStorage.gameStateData.isBgm_Open;s.GameDataStorage.gameStateData.isBgm_Open=!e,e?s.conMager.getInstance().stopAllAudioEff():s.conMager.getInstance().playBGM(s.KEY.audioName.bgm),this.show_data()},t.prototype.effect_btn_fun=function(){s.conMager.getInstance().playAudioEff(s.KEY.audioName.btn);var e=s.GameDataStorage.gameStateData.isEffect_Open;s.GameDataStorage.gameStateData.isEffect_Open=!e,this.show_data()},i([u({type:cc.Label,tooltip:"\u5c40\u65f6\u65f6\u95f4label"})],t.prototype,"jushi_time_label",void 0),i([u({type:cc.Node,tooltip:"\u5c40\u65f6\u9009\u62e9\u754c\u9762"})],t.prototype,"jushi_select",void 0),i([u({type:cc.Label,tooltip:"\u6b65\u65f6\u65f6\u95f4label"})],t.prototype,"bushi_time_label",void 0),i([u({type:cc.Node,tooltip:"\u6b65\u65f6\u9009\u62e9\u754c\u9762"})],t.prototype,"bushi_select",void 0),i([u({type:cc.Node,tooltip:"\u5355\u9009\u7236\u8282\u70b9"})],t.prototype,"bool_layout",void 0),i([u({type:cc.EditBox,tooltip:"\u516c\u544alabel"})],t.prototype,"gonggao_label",void 0),i([u({type:cc.Node,tooltip:"\u80cc\u666f\u97f3\u4e50\u6309\u94ae"})],t.prototype,"bgm_btn",void 0),i([u({type:cc.Node,tooltip:"\u97f3\u6548\u6309\u94ae"})],t.prototype,"effect_btn",void 0),i([h],t)}(s.winRootNode);a.default=l,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","../view/zhibo_game_view":"zhibo_game_view"}],zidang_wulei:[function(e,t,a){"use strict";cc._RF.push(t,"0afffZG3tZEkIEpragiEcOO","zidang_wulei");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__decorate||function(e,t,a,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(i<3?o(s):i>3?o(t,a,s):o(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./../../SSSGF/Utils/NumberUtil"),r=e("../../SSSGF/ssscgf"),c=cc._decorator,h=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.inint=function(){throw new Error("Method not implemented.")},t.prototype.onOpen=function(e){var t=this,a=e[0].pos;this.node.x=325,this.node.y=e[0].ys;var n=e[0].cb;s.NumberUtil.judgeAnage(this.node.getPosition(),a),this.node.scale=0,this.node.y;var o=cc.v3(a.x,a.y).sub(this.node.position).normalize(),i=180*Math.atan2(o.y,o.x)/Math.PI;this.node.angle=i+90,this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.35,a.x,a.y),cc.scaleTo(.35,.3,-.3)),cc.callFunc(function(){n&&n(),t.onClose(1)})))},t.prototype.onClose=function(){r.conMager.getInstance().putPoolNode(this.node.name,this.node)},t.prototype.onClear=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){console.log("\u7d2b\u6a80\u957f\u6c99")},t.prototype.start=function(){},i([h],t)}(r.winRootNode));a.default=u,cc._RF.pop()},{"../../SSSGF/ssscgf":"ssscgf","./../../SSSGF/Utils/NumberUtil":"NumberUtil"}]},{},["KEY","LogWrap","NumberUtil","NumberUtilTT","conNetErr","updateRankData","baseNodeAction","winRootNode","audioMager","conMager","dragonResMager","poolNodeMager","winNodeMager","DATA","gameDataManager","storageManager","bannerEvent","interstitialEvent","videoEvent","videoEvent_ks","createVideo","createVideo_ks","platfrom_fun","shareEvent","ssscgf","ShaderTime","configSurface","boli_anima","chessClass","dragonControll","gssk_faguang","gssk_line","item1","item2","item3","jiabei","jiabei_sanren","ka_heti","money_node","rankItem","setup","setup_sanren","skin_board","stone_chess","tip","touch","user_headPanel","duishou_node","add_desktop_panel","gold_buzu_panel","heqi_panel","heqi_sanren_panel","mianfei_gold_panel","qiandao_panel","settings_panel","share_panel","stop_panel","updateNiCheng_panel","userIndo_panel","userInfo_panel","zhibo_setting_panel","canju_game_view","dazhao_game_view","duiyi_result_view","fail_view","flat_view","jd_game_view","level_view","lianzhao_view","luanDou_view","luandou_blxj_view","luandou_game_view","luandou_hbdd_view","luandou_jxmc_view","luandou_tslh_view","rank_view","sanren_view","scoring_view","select_saichang_node","share_view","shop_view","skin_store_view","slectGmae","success_view","xuezhandaodi_game_view","zhibo_game_view","AI","GameBoard","GameScene","Piece","baozha_wulei","black_chess","CanJuBoard","canju_node","chessAi _canju","chess","chessAi","chaoniu_tudiliekai","chaoniuguangbo","dazhao_GameBoard","dazhao_chessAi","dazhao_ds","dazhao_front","dazhao_user","duye","duye_rongjie","guiyuan_num","juehun_shou","kedi_num","kunlongkuang","lianzhu","liehen","meihua_","new_duye ","qixing_luozi","qixing_zhezhao","xueXian","front","class_manager","game_board","game_joiner","game_manager","head_icon","dazhao","jingdian","lianzhao","luandou_gssk","test_model","model_joiner","new_ai","new_chess","player","player_joiner","pvp_util","bagua","chaoniu","dusha","fenlie","guiyuan","juehu","kedi","kunlong","meihua","qixing","sijiao","wanning","wulei","xueyuyingsha","hua","juehu_shou","new_fenlie_qizi","qixing_touch","wulei_zidan","zhenfa_joiner","AI_lianzhao","GameBoard_lianzhao","chessAi_lianzhao","front_lianzhao","jineng_xuanze","zhenfa_ka","AStar","GameBoard_blxj","Grid","Point","chessAi_blxj","AI_hbdd","GameBoard_hbdd","chessAi_hbdd","front_hbdd","GameBoard_jxmc","chessAi_jxmc","front_jxmc","jxmc_jixie","GameBoard_tslh","chessAi_tslh","qizi","AI_sanren","GameBoard_sanren","chessAi_sanren","chessAi_sanren2","front_sanren","white_chess","xueyuChessSke","xuezhandaodi_GameBoard","xuezhandaodi_chessAi","xz_lian_zhu","zhenfa_ani","AI_zhibo","GameBoard_zhibo","chessAi_zhibo","front_zhibo","zidang_wulei","one-side-platform","tipNode","tipNode2","gotMedalNode","medalNode","PvpGameBoard","config","global","FrameSyncLogic","GameState","StateSyncLogic","roomNetListener","PvpScene","Dialog","UIChat","UILog","UIMessage","util","match_controller","match_view","pvp_AS_panel","pvp_game_view","pvp_level_view","pvp_result_view","pvp_sdk_init","join_create_room","match_action","pvp_setup","Helloworld","Loading","mainScene","UIAction","bgNode","medalRootNode","game_info","sideController","tips","topNode","as_util","commonFunction","getDataFromServer","platform","videoCon"]);